"use strict";(self.webpackChunklittle_fighter_j=self.webpackChunklittle_fighter_j||[]).push([[388],{1667:(e,t,l)=>{l.r(t),l.d(t,{ItrEditor:()=>g,default:()=>w});var i=l(5043),r=l(1231),n=l(6156),s=l(9724),a=l(9528),o=l(969),d=l(3124),c=l(4727),f=l(3794),u=l(2204),h=l(583),_=l(1598),x=l(7585),v=l(8553),m=l(3491),p=l(8110),b=l(579);const y={label:{width:70,textAlign:"end"}},j={hit_flag:h._0.AllEnemy,kind:h.w7.Normal,effect:h.pd.Normal,z:(0,_.RI)(-h.Tc.DAFUALT_QUBE_LENGTH/2),l:(0,_.RI)(h.Tc.DAFUALT_QUBE_LENGTH),x:0,y:0,w:0,h:0};function g(e){var t;const{label:l="itr info",value:i,defaultValue:_=j,onRemove:g,onChange:w,...A}=e,k=null!==(t=null===i||void 0===i?void 0:i.kind)&&void 0!==t?t:_.kind,S=!!i&&"vrest"in i;return(0,b.jsxs)(a.A,{label:l,tabIndex:-1,...A,children:[(0,b.jsx)(r.$,{style:{position:"absolute",right:0,top:0,border:"none"},onClick:g,children:"\ud83d\uddd1\ufe0f"}),(0,b.jsxs)(s.s,{direction:"column",align:"stretch",gap:5,children:[(0,b.jsx)(u.A,{label:"\u7c7b\u578b",styles:y,children:(0,b.jsxs)(n.A,{children:[(0,b.jsx)(d.A,{...x.lb,...(0,m.B)(e,j,"kind",e=>(e.kind_name=(0,h.jw)(e.kind),e.kind!==h.w7.Normal&&(delete e.effect,delete e.effect_name),e)),"data-flex":1}),(0,b.jsx)(c.A,{show:k===h.w7.Normal,"data-flex":1,children:(0,b.jsx)(d.A,{...x.q1,...(0,m.B)(e,j,"effect",e=>(e.effect_name=(0,h.y)(e.effect),e))})})]})}),(0,b.jsx)(u.A,{label:"\u5224\u5b9a",styles:y,children:(0,b.jsx)(v.V,{...(0,m.B)(e,j,"hit_flag")})}),(0,b.jsxs)(s.s,{direction:"row",children:[(0,b.jsx)(u.A,{label:"\u81ea\u8eab\u505c\u987f",styles:y,style:{flex:1},children:(0,b.jsx)(o.p.Number,{...(0,m.W)(e,j,"motionless"),clearable:!0,placeholder:""+h.Tc.DEFAULT_ITR_MOTIONLESS,step:1})}),(0,b.jsx)(u.A,{label:"\u76ee\u6807\u505c\u987f",style:{flex:1},children:(0,b.jsx)(o.p.Number,{...(0,m.W)(e,j,"shaking"),clearable:!0,placeholder:""+h.Tc.DEFAULT_ITR_SHAKING,step:1})})]}),(0,b.jsx)(u.A,{label:"rest",styles:y,children:(0,b.jsxs)(n.A,{children:[(0,b.jsx)(d.A,{items:["arest","vrest"],parse:e=>[e,e],value:S?"vrest":"arest",onChange:e=>{const t={...i||_},l=t.arest||t.vrest||0;delete t.arest,delete t.vrest,t[e]=l,null===w||void 0===w||w(t)}}),(0,b.jsx)(o.p.Number,{"data-flex":1,...(0,m.W)(e,j,S?"vrest":"arest"),placeholder:""+h.Tc.DEFAULT_ITR_MOTIONLESS,clearable:!0,step:1})]})}),(0,b.jsxs)(s.s,{direction:"row",children:[(0,b.jsx)(u.A,{label:"\u51fb\u5012\u503c",styles:y,style:{flex:1},children:(0,b.jsx)(o.p.Number,{...(0,m.W)(e,j,"fall"),placeholder:""+h.Tc.DEFAULT_ITR_FALL,clearable:!0,step:1})}),(0,b.jsx)(u.A,{label:"\u7834\u9632\u503c",style:{flex:1},children:(0,b.jsx)(o.p.Number,{...(0,m.W)(e,j,"bdefend"),clearable:!0,step:1})}),(0,b.jsx)(u.A,{label:"\u4f24\u5bb3\u503c",style:{flex:1},children:(0,b.jsx)(o.p.Number,{...(0,m.W)(e,j,"injury"),clearable:!0,step:1})})]}),(0,b.jsx)(u.A,{label:"\u5305\u56f4\u76d2",styles:y,children:(0,b.jsx)(p.A,{value:i,defaultValue:_,onChange:e=>null===w||void 0===w?void 0:w({..._,...i,...e})})}),(0,b.jsx)(u.A,{label:"\u6761\u4ef6",styles:y,children:(0,b.jsx)(f.f,{...(0,m.W)(e,j,"test"),style:{resize:"vertical"}})}),(0,b.jsx)(u.A,{label:"\u9884\u8bbe",styles:y,children:(0,b.jsx)(o.p,{...(0,m.W)(e,j,"prefab_id"),clearable:!0})})]})]},l)}function w(e){const[t,l]=(0,i.useState)(j);return(0,b.jsxs)(s.s,{direction:"column",gap:10,children:[(0,b.jsx)(f.f,{style:{resize:"vertical",height:500},readOnly:!0,value:JSON.stringify(t,null,2)}),(0,b.jsx)(g,{value:t,onChange:l})]})}g.genValue=e=>e?e({...j}):{...j}},3580:(e,t,l)=>{l.d(t,{A:()=>ee});var i=l(8354),r=l(5043),n=l(7950),s=l(9668),a=(l(8376),l(7798)),o=l(1231),d=l(7297),c=l(6156),f=l(9528),u=l(3124),h=l(4727),_=l(4958),x=l(5109),v=l(2204),m=l(1857),p=l(3602),b=l(6791),y=l(5721),j=l(9956),g=l(8255);const w=r.createContext({});let A=function(e){return e.LF2_FRAME="lf2_frame_drawer",e}({});var k=l(583),S=l(9137),T=l(4477),C=l(969),E=l(3794),N=l(579);function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=(0,r.useMemo)(()=>({display:"flex"}),[]);return(0,r.useMemo)(()=>{const i=e=>({float_label:e.toString(),styles:{label:t},style:l}),n=t=>{if(!Array.isArray(t))return e[t];let l=e;for(const e of t)l&&(l=l[e]);return l},s=(t,l)=>{if(!Array.isArray(t))return void(e[t]=l);let i=e;t.forEach((e,t,r)=>{i&&(t<r.length-1?i=i[e]:i[e]=l)})};return{ImageFile(e){const{field:t,title:l,...a}=e,{zip:o}=(0,r.useContext)(w),[d,c]=(0,r.useState)([]);return(0,r.useEffect)(()=>{o&&c(o.file(/.png$/))},[o]),(0,N.jsx)(v.A,{...i(null!==l&&void 0!==l?l:t),children:(0,N.jsx)(u.A,{items:d,parse:e=>[e.name,e.name],defaultValue:n(t),onChange:e=>s(t,e),clearable:!0,style:{flex:1},...a})})},Number(e){const{field:t,title:l,...r}=e;return(0,N.jsx)(v.A,{...i(null!==l&&void 0!==l?l:t),children:(0,N.jsx)(C.Y,{defaultValue:n(t),on_blur:e=>s(t,e),style:{flex:1},clearable:!0,...r})})},Text(e){const{title:t,field:l}=e;return(0,N.jsx)(v.A,{...i(null!==t&&void 0!==t?t:l),children:(0,N.jsx)(E.f,{style:{flex:1,resize:"vertical"},defaultValue:n(l),onBlur:e=>s(l,e.target.value.trim()||void 0)})})},String(e){const{title:t,field:l,...r}=e;return(0,N.jsx)(v.A,{...i(null!==t&&void 0!==t?t:l),children:(0,N.jsx)(C.p,{style:{flex:1},defaultValue:n(l),onBlur:e=>s(l,e.target.value.trim()||void 0),...r})})},Number3(e){const{name:t,fields:[l,r,a],clearable:o,...d}=e,f={flex:1};return(0,N.jsx)(v.A,{...i(t),...d,children:(0,N.jsxs)(c.A,{style:{flex:1},children:[(0,N.jsx)(C.Y,{defaultValue:n(l),onChange:e=>s(l,e),title:"x",prefix:"x",style:f,clearable:o,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(r),onChange:e=>s(r,e),title:"y",prefix:"y",style:f,clearable:o,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(a),onChange:e=>s(a,e),title:"z",prefix:"z",style:f,clearable:o,"data-flex":1})]})})},EditorVec2(e){const{name:t,fields:[l,r],clearable:a,...o}=e,d={flex:1};return(0,N.jsx)(v.A,{...i(t),...o,children:(0,N.jsxs)(c.A,{style:{flex:1},children:[(0,N.jsx)(C.Y,{defaultValue:n(l),onChange:e=>s(l,e),title:"x",prefix:"x",style:d,clearable:a,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(r),onChange:e=>s(r,e),title:"y",prefix:"y",style:d,clearable:a,"data-flex":1})]})})},Qube(e){const{title:t,fields:[l,r,a,o,d,f],clearable:u,...h}=e,_={flex:1};return(0,N.jsx)(v.A,{...i(t),...h,children:(0,N.jsxs)(c.A,{direction:"column",style:{flex:1,alignItems:"stretch"},children:[(0,N.jsxs)(c.A,{"data-flex":1,style:{flex:1},children:[(0,N.jsx)(C.Y,{defaultValue:n(l),onChange:e=>s(l,e),title:"x",prefix:"x",style:_,clearable:u,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(r),onChange:e=>s(r,e),title:"y",prefix:"y",style:_,clearable:u,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(a),onChange:e=>s(a,e),title:"z",prefix:"z",style:_,clearable:u,"data-flex":1})]}),(0,N.jsxs)(c.A,{"data-flex":1,style:{flex:1},children:[(0,N.jsx)(C.Y,{defaultValue:n(o),onChange:e=>s(o,e),title:"w",prefix:"w",style:_,clearable:u,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(d),onChange:e=>s(d,e),title:"h",prefix:"h",style:_,clearable:u,"data-flex":1}),(0,N.jsx)(C.Y,{defaultValue:n(f),onChange:e=>s(f,e),title:"l",prefix:"l",style:_,clearable:u,"data-flex":1})]})]})})},Strings(t){var l;const{title:n,field:s,placeholder:a,title:d}=t,f=e[s],[,u]=(0,r.useState)(0),h=(t,l)=>{e[s][t]=l.trim(),u(e=>e+1)},_=null!==(l=null===f||void 0===f?void 0:f.map((e,t)=>(0,N.jsxs)(c.A,{style:{flex:1},children:[(0,N.jsx)(C.p,{defaultValue:e,placeholder:a,onBlur:e=>h(t,e.target.value),"data-flex":1,style:{flex:1}}),(0,N.jsx)(o.$,{onClick:()=>(e=>{null===f||void 0===f||f.splice(e,1),u(e=>e+1)})(t),children:(0,N.jsx)(S.F,{})})]},t)))&&void 0!==l?l:[];return _.push((0,N.jsx)(o.$,{onClick:()=>{e[s]=e[s]||[],e[s].push(""),u(e=>e+1)},style:{flex:1},children:(0,N.jsx)(T.F,{})},_.length)),(0,N.jsx)(v.A,{...i(null!==n&&void 0!==n?n:s),title:d,children:(0,N.jsx)(c.A,{direction:"column",style:{flex:1},children:_})})},EditorIntList(t){const{title:l,field:n}=t,s=e[n],[,a]=(0,r.useState)(0),d=(t,l)=>{e[n][t]=l,a(e=>e+1)};return(0,N.jsx)(v.A,{...i(null!==l&&void 0!==l?l:n),children:(0,N.jsxs)(c.A,{direction:"column",style:{flex:1},children:[null===s||void 0===s?void 0:s.map((e,t)=>(0,N.jsxs)(c.A,{children:[(0,N.jsx)(C.Y,{style:{flex:1},defaultValue:e,on_blur:e=>d(t,e)}),(0,N.jsx)(o.$,{children:(0,N.jsx)(S.F,{onClick:()=>(e=>{null===s||void 0===s||s.splice(e,1),a(e=>e+1)})(t)})})]})),(0,N.jsx)(o.$,{onClick:()=>{e[n]=e[n]||[],e[n].push(void 0),a(e=>e+1)},children:(0,N.jsx)(T.F,{})})]})})},Select(t){const{title:l,field:s,onChange:a,...o}=t,[,d]=(0,r.useState)(0);return(0,N.jsx)(v.A,{...i(null!==l&&void 0!==l?l:s),children:(0,N.jsx)(u.A,{defaultValue:n(s),onChange:t=>{e[s]=t,null===a||void 0===a||a(t),d(e=>++e)},clearable:!0,style:{flex:1},...o})})},Sel3(e){const{name:t,fields:[l,r,a],placeholders:o,clearable:d,select:f,...h}=e,_={flex:1};return(0,N.jsx)(v.A,{...i(t),...h,children:(0,N.jsxs)(c.A,{style:{flex:1},children:[(0,N.jsx)(u.A,{defaultValue:n(l),onChange:e=>{s(l,e)},placeholder:null===o||void 0===o?void 0:o.at(0),clearable:!0,style:_,...f,"data-flex":1}),(0,N.jsx)(u.A,{defaultValue:n(r),onChange:e=>{s(r,e)},placeholder:null===o||void 0===o?void 0:o.at(1),clearable:!0,style:_,...f,"data-flex":1}),(0,N.jsx)(u.A,{defaultValue:n(a),onChange:e=>{s(a,e)},placeholder:null===o||void 0===o?void 0:o.at(2),clearable:!0,style:_,...f,"data-flex":1})]})})}}},[e,t,l])}var F=l(8139),D=l.n(F),L=l(7511);const I={lfui_min_input_size:"style_lfui_min_input_size__UEeIZ",header_main_footer_view:"style_header_main_footer_view__G01Nm",head_zone:"style_head_zone__KloPH",title:"style_title__f69lF",content_zone:"style_content_zone__QeNff",inner_shadow_v:"style_inner_shadow_v__VcrEL"};function $(e){const{title:t,header:l,className:i,...r}=e;return(0,N.jsxs)(c.A,{direction:"column",className:D()(I.header_main_footer_view,i),hoverable:!1,...r,children:[l||(0,N.jsx)(c.A,{direction:"row",hoverable:!1,className:I.head_zone,children:(0,N.jsx)(L.E,{size:"m",className:I.title,"data-flex":1,children:t})}),(0,N.jsx)("div",{className:I.content_zone,"data-flex":1,children:e.children})]})}function R(e){const{value:t,on_changed:l,...i}=e,r=t,n=z(null===r||void 0===r?void 0:r.base);if(r)return(0,N.jsx)($,{...i,title:"\u57fa\u7840\u4fe1\u606f",children:(0,N.jsxs)(_.$,{direction:"column",stretchs:!0,style:{width:"100%",padding:"20px 10px",boxSizing:"border-box"},children:[(0,N.jsx)(n.ImageFile,{field:"head",foo:r.base.head}),(0,N.jsx)(n.ImageFile,{field:"small",foo:r.base.small}),(0,N.jsx)(n.Number,{field:"ce",foo:r.base.ce,placeholder:"1"}),(0,N.jsx)(n.Number,{field:"fall_value",foo:r.base.fall_value,placeholder:""+k.Tc.DEFAULT_FALL_VALUE_MAX}),(0,N.jsx)(n.Number,{field:"defend_value",foo:r.base.defend_value,placeholder:""+k.Tc.DEFAULT_DEFEND_VALUE_MAX}),(0,N.jsx)(n.Number,{field:"resting",foo:r.base.resting,placeholder:""+k.Tc.DEFAULT_RESTING_MAX}),(0,N.jsx)(n.Number,{field:"hp",foo:r.base.hp,placeholder:""+k.Tc.DEFAULT_HP}),(0,N.jsx)(n.Number,{field:"mp",foo:r.base.mp,placeholder:""+k.Tc.DEFAULT_MP}),(0,N.jsx)(n.Number,{field:"catch_time",foo:r.base.catch_time,placeholder:""+k.Tc.DEFAULT_CATCH_TIME}),(0,N.jsx)(n.Number,{field:"jump_height",foo:r.base.jump_height}),(0,N.jsx)(n.Number,{field:"jump_distance",foo:r.base.jump_distance}),(0,N.jsx)(n.Number,{field:"jump_distancez",foo:r.base.jump_distancez}),(0,N.jsx)(n.Number,{field:"dash_height",foo:r.base.dash_height}),(0,N.jsx)(n.Number,{field:"dash_distance",foo:r.base.dash_distance}),(0,N.jsx)(n.Number,{field:"dash_distancez",foo:r.base.dash_distancez}),(0,N.jsx)(n.Number,{field:"rowing_height",foo:r.base.rowing_height}),(0,N.jsx)(n.Number,{field:"rowing_distance",foo:r.base.rowing_distance})]})})}$.TitleAndAdd=function(e){const{title:t,on_add:l}=e;return(0,N.jsxs)(c.A,{direction:"row",hoverable:!1,className:I.head_zone,children:[(0,N.jsx)(L.E,{size:"m",className:I.title,"data-flex":1,children:t}),(0,N.jsx)(o.$,{onClick:l,children:(0,N.jsx)(T.F,{})})]})};var B=l(7585);function V(e){const{value:t,on_changed:l,...i}=e,r=t,n=z(r,{width:80}),s=z(null===r||void 0===r?void 0:r.base,{width:80});if(r)return(0,N.jsx)(f.A,{...i,label:"\u5b9e\u4f53\u6570\u636e",children:(0,N.jsxs)(_.$,{direction:"column",stretchs:!0,children:[(0,N.jsx)(n.String,{field:"id"}),(0,N.jsx)(n.Select,{...B.BO,field:"type",clearable:!1,onChange:l}),(0,N.jsx)(s.String,{field:"name",clearable:!1})]})})}function M(e,t){Array.isArray(e)?e.forEach(t):t(e,0,[e])}var P=l(6525);class O extends i.Yi{constructor(e){super(),this.img=void 0,this.frame=void 0,this.data=void 0,this.zip=void 0,this.type=A.LF2_FRAME,e&&this.read(e)}read(e){return super.read(e),this.img=e.img,this.frame=e.frame,this.data=e.data,this.zip=e.zip,this}}class W extends i.yp{constructor(e){super(e,O)}static get_size(e){const{pic:{w:t=0,h:l=0}={}}=e,{l:i,r:r,t:n,b:s}=this.get_bounding(e);return{w:t-i+r,h:l-n+s}}static get_bounding(e){const{pic:t={w:0,h:0}}=e;let l=0,i=0,r=0,n=0;const s=e=>{let{x:s,y:a,w:o,h:d}=e;l=Math.min(s,l),i=Math.min(a,i),r=Math.max(s+o-t.w,r),n=Math.max(a+d-t.h,n)},a=e=>{let{x:s,y:a}=e;s-=20,a-=20,l=Math.min(s,l),i=Math.min(a,i),r=Math.max(s+40-t.w,r),n=Math.max(a+40-t.h,n)};return a({x:e.centerx,y:e.centery}),e.bdy&&M(e.bdy,e=>s(e)),e.itr&&M(e.itr,e=>s(e)),e.opoint&&M(e.opoint,e=>a(e)),e.cpoint&&a(e.cpoint),e.bpoint&&a(e.bpoint),l+=0,i+=0,r+=0,n+=0,{l:l,r:r,t:i,b:n}}get resizable(){return i.cM.None}draw_center(e,t){const{centerx:l,centery:i}=t;e.beginPath(),e.moveTo(l,i+2),e.lineTo(l-2,i),e.lineTo(l,i-2),e.lineTo(l+2,i),e.closePath(),e.setLineDash([]),e.lineWidth=1,e.strokeStyle="black",e.fillStyle="white",e.stroke(),e.fill()}draw_bdy(e,t){e.strokeStyle="green",e.lineWidth=1,e.setLineDash([2,2]),e.beginPath(),e.rect(t.x+.5,t.y+.5,t.w-1,t.h-1),e.closePath(),e.stroke()}draw_itr(e,t){e.strokeStyle="red",e.lineWidth=1,e.setLineDash([2,2]),e.beginPath(),e.lineDashOffset=2,e.rect(t.x+.5,t.y+.5,t.w-1,t.h-1),e.closePath(),e.stroke()}draw_cpoint(e,t){e.beginPath();const{x:l,y:i}=t;e.moveTo(l,i+2),e.lineTo(l-2,i),e.lineTo(l,i-2),e.lineTo(l+2,i),e.closePath(),e.setLineDash([]),e.lineWidth=1,e.strokeStyle="black",e.fillStyle="yellow",e.stroke(),e.fill(),e.strokeText(""+t.kind,l+2,i-2),e.fillText(""+t.kind,l+2,i-2)}draw_wpoint(e,t){e.beginPath();const{x:l,y:i}=t;e.moveTo(l,i+2),e.lineTo(l-2,i),e.lineTo(l,i-2),e.lineTo(l+2,i),e.closePath(),e.setLineDash([]),e.lineWidth=1,e.strokeStyle="black",e.fillStyle="green",e.stroke(),e.fill()}draw_opoint(e,t){e.beginPath();const{x:l,y:i}=t;e.moveTo(l,i+2),e.lineTo(l-2,i),e.lineTo(l,i-2),e.lineTo(l+2,i),e.closePath(),e.setLineDash([]),e.lineWidth=1,e.strokeStyle="black",e.fillStyle="red",e.stroke(),e.fill(),e.textAlign="center",e.font="light 9px serif",e.strokeText(""+t.oid,l+2,i-5),e.fillText(""+t.oid,l+2,i-5)}draw_frame_bound(e,t){e.strokeStyle="#FFFFFFaa",e.lineWidth=1,e.setLineDash([2,2]),e.beginPath(),e.rect(.5,.5,t.w-1,t.h-1),e.closePath(),e.stroke()}get_img(e,t,l){const{base:{files:i}}=t,r=i[l];if(!r)return Promise.reject(new Error("pic not found: "+l));const n=this.data.img=P.img_map.get(r.path)||new Image;var s;P.img_map.has(r.path)||(P.img_map.set(r.path,n),null===(s=e.file(r.path))||void 0===s||s.blob_url().then(e=>{n.src=e}));return new Promise((e,t)=>{let l=0;const i=()=>{n.width&&n.height?e(n):l<=5?(++l,setTimeout(()=>i(),10*l)):t(new Error("width or height got zero"))};if(n.complete)return void i();const r=()=>{i(),n.removeEventListener("load",r),n.removeEventListener("error",s)},s=e=>{t(new Error(e.message)),n.removeEventListener("load",r),n.removeEventListener("error",s)};n.addEventListener("load",r,{once:!0}),n.addEventListener("error",s,{once:!0})})}render(e){var t;this.beginDraw(e),e.scale(2,2);const{frame:l,data:i,zip:r}=this.data;!this.data.img&&null!==l&&void 0!==l&&null!==(t=l.pic)&&void 0!==t&&t.tex&&i&&r&&this.get_img(r,i,l.pic.tex).then(e=>{this.beginDirty(),this.data.img=e,this.endDirty()});const{img:n}=this.data;if(l){const{l:t,t:i}=W.get_bounding(l);e.translate(-t,-i);const{pic:r}=l;r&&this.draw_frame_bound(e,r),n&&r&&e.drawImage(n,r.x,r.y,r.w,r.h,0,0,r.w,r.h),l.itr&&M(l.itr,t=>this.draw_itr(e,t)),l.bdy&&M(l.bdy,t=>this.draw_bdy(e,t)),l.opoint&&M(l.opoint,t=>this.draw_opoint(e,t)),l.cpoint&&this.draw_cpoint(e,l.cpoint),l.wpoint&&this.draw_wpoint(e,l.wpoint),this.draw_center(e,l)}this.endDraw(e),super.render(e)}}function U(e){const{value:t,label:l,data:i,on_changed:r}=e,{Number:n,Text:s,String:a,Number3:o,Qube:d,Select:c}=z(t);return(0,N.jsxs)(f.A,{label:l,children:[(0,N.jsx)(S.F,{style:{position:"absolute",right:0,top:0,border:"none"},onClick:()=>{i.itr_prefabs&&(delete i.itr_prefabs[t.id],null===r||void 0===r||r())},hoverable:!0}),(0,N.jsxs)(_.$,{direction:"column",stretchs:!0,children:[(0,N.jsx)(a,{field:"id",onBlur:e=>{if(!i.itr_prefabs)return;const l=t.id,r=e.target.value.trim();if(l!==r&&r){if(r in i.itr_prefabs)return alert("ID\u4e0d\u53ef\u91cd\u590d"),void(e.target.value=t.id);delete i.itr_prefabs[l],t.id=r,i.itr_prefabs[r]=t,(0,y.R)(i.frames,(e,t)=>{let{itr:i}=t;return M(i,e=>{var t;e&&(null===(t=e.prefab_id)||void 0===t?void 0:t.trim())===l&&(e.prefab_id=r)})})}else e.target.value=l}}),(0,N.jsx)(a,{field:"name"}),(0,N.jsx)(c,{field:"kind",...B.lb}),(0,N.jsx)(c,{field:"effect",...B.q1}),(0,N.jsx)(n,{field:"injury"}),(0,N.jsx)(n,{field:"arest"}),(0,N.jsx)(n,{field:"vrest"}),(0,N.jsx)(n,{field:"motionless"}),(0,N.jsx)(n,{field:"shaking"}),(0,N.jsx)(n,{field:"fall"}),(0,N.jsx)(n,{field:"bdefend"}),(0,N.jsx)(s,{field:"test"}),(0,N.jsx)(o,{name:"velocity",fields:["dvx","dvy","dvz"]}),(0,N.jsx)(d,{title:"bounding",fields:["x","y","z","w","h","l"]})]})]})}var Y=l(3977);const X={lfui_border:"styles_lfui_border__R2qJq",lfui_hoverable_border:"styles_lfui_hoverable_border__XPd1B",lfui_hoverable_border_hover:"styles_lfui_hoverable_border_hover__Y375B",lfui_hoverable_border_disabled:"styles_lfui_hoverable_border_disabled__ZiDxk",lfui_hoverable_border_focus:"styles_lfui_hoverable_border_focus__WTXMW",lfui_hoverable_border_active:"styles_lfui_hoverable_border_active__iqymU",frame_list_view:"styles_frame_list_view__OdI0+",frame_list_item_view:"styles_frame_list_item_view__pC4t5",lfui_no_shadow:"styles_lfui_no_shadow__yXlCX",_lfui_no_border:"styles__lfui_no_border__a3jym",lfui_no_border:"styles_lfui_no_border__FNWeL",_lfui_no_round:"styles__lfui_no_round__P68XX",lfui_no_round:"styles_lfui_no_round__7BYMQ",lfui_min_input_size:"styles_lfui_min_input_size__n-0bn",float_label:"styles_float_label__UC4QN",breathe:"styles_breathe__zfE1O"};function H(e){const{data:t,zip:l,ref_board:i,factory:n,on_pick_frame:s}=e,a=(0,r.useRef)(void 0);if(!t)return;const o=(e,t)=>{const r=i.current;if(!r)return;const s=n.newShapeData(A.LF2_FRAME);s.frame=e,s.zip=l,s.data=t,s.layer=r.layer().id,s.id="frame",s.z=n.newZ(s);const{w:a,h:o}=W.get_size(e);Object.assign(s,{w:2*a,h:2*o});let d=r.shapes().find(e=>"frame"===e.data.id);if(d){let{x:e,y:t}=d;if(d.data.frame){const l=W.get_bounding(d.data.frame),i=W.get_bounding(s.frame);console.log(l.l,i.l),e+=2*(i.l-l.l+d.data.frame.centerx-s.frame.centerx),t+=2*(i.t-l.t+d.data.frame.centery-s.frame.centery)}s.x=e,s.y=t,d.merge(s),r.setSelects([d])}else d=n.newShape(s),r.add(d)},d=[];for(const r in t.frames)d.push(t.frames[r]);const c=(0,N.jsx)($.TitleAndAdd,{title:"\u5e27\u5217\u8868"}),f=e=>{switch(e.key.toLowerCase()){case"arrowdown":case"pagedown":case"arrowup":case"pageup":{const e=a.current;e&&(null===s||void 0===s||s(e),o(e,t),a.current=void 0);break}}};return(0,N.jsx)(_.$.Broken,{children:(0,N.jsx)($,{header:c,children:(0,N.jsx)(Y.A,{data:d,className:X.frame_list_view,itemKey:e=>e.id,children:(e,l,i)=>(0,N.jsxs)("div",{tabIndex:-1,className:X.frame_list_item_view,onClick:()=>{null===s||void 0===s||s(e),o(e,t)},onKeyUp:f,onKeyDown:l=>((e,l)=>{var i,r;if(e.stopPropagation(),e.preventDefault(),"enter"===e.key.toLowerCase())return null===s||void 0===s||s(l),void o(l,t);const n=e.target,c=n.parentElement;if(!c)return;const f=c.children,u=null!==(i=n.nextElementSibling)&&void 0!==i?i:f.item(0),h=null!==(r=n.previousElementSibling)&&void 0!==r?r:f.item(f.length-1),_=parseInt(getComputedStyle(c).paddingTop);switch(e.key.toLowerCase()){case"arrowdown":case"pagedown":{if(!u)break;c.scrollTo(0,u.offsetTop-_),u.focus();const e=(d.indexOf(l)+1)%d.length;a.current=d[e];break}case"arrowup":case"pageup":{if(!h)break;c.scrollTo(0,h.offsetTop-_),h.focus();const e=(d.indexOf(l)+d.length-1)%d.length;a.current=d[e];break}}})(l,e),children:[(0,N.jsx)(L.E,{children:e.id}),(0,N.jsx)(C.p,{variants:"no_border",defaultValue:e.name,onChange:t=>e.name=t,style:{flex:1},clearable:!0})]})})})})}function J(e){const{data:t,pic_info:l,on_changed:i,...r}=e,{String:n,Strings:s,ImageFile:a}=z(l);return(0,N.jsxs)(f.A,{...r,label:"\u56fe\u7247\u7d22\u5f15\u4fe1\u606f",children:[(0,N.jsx)(S.F,{style:{position:"absolute",top:0,right:0},onClick:()=>{for(const i in t.frames){var e;if((null===(e=t.frames[i].pic)||void 0===e?void 0:e.tex.trim())===l.id)return void alert(`\u5df2\u7ecf\u88ab\u5e27:${i}\u5f15\u7528\uff0c\u4e0d\u80fd\u5220\u9664!`)}delete t.base.files[l.id],null===i||void 0===i||i()},hoverable:!0}),(0,N.jsxs)(_.$,{vertical:!0,stretchs:!0,children:[(0,N.jsx)(n,{field:"id",title:"\u56fe\u7247\u7d22\u5f15id",onBlur:e=>{const r=l.id,n=e.target.value.trim();if(r!==n&&n){if(n in t.base.files)return alert("ID\u4e0d\u53ef\u91cd\u590d"),void(e.target.value=l.id);delete t.base.files[r],l.id=n,t.base.files[n]=l,(0,y.R)(t.frames,(e,t)=>{let{pic:l}=t;l&&l.tex.trim()===r&&(l.tex=n)}),(0,y.R)(t.base.files,(e,t)=>{var l;null===(l=t.variants)||void 0===l||l.forEach((e,t,l)=>{e.trim()===r&&(l[t]=n)})}),null===i||void 0===i||i()}else e.target.value=r}}),(0,N.jsx)(a,{field:"path",title:"\u56fe\u7247\u8def\u5f84",clearable:!1}),(0,N.jsx)(s,{field:"variants",placeholder:"\u56fe\u7247\u7d22\u5f15id",title:"\u53d8\u4f53"})]})]})}const q={lfui_border:"styles_lfui_border__V6jAK",lfui_hoverable_border:"styles_lfui_hoverable_border__bBijB",tree_item_view_wrapper:"styles_tree_item_view_wrapper__ttRt4",frame_preview_view:"styles_frame_preview_view__0PzIR",lfui_min_input_size:"styles_lfui_min_input_size__MgryY",top_bar:"styles_top_bar__SxJvN",cell_inner:"styles_cell_inner__kqvf2",entity_base_editor:"styles_entity_base_editor__zSJww",scroll_zone:"styles_scroll_zone__HOuDR",header_main_footer_view:"styles_header_main_footer_view__902PC",content_zone:"styles_content_zone__zG4Yz",inner_shadow_v:"styles_inner_shadow_v__kzbg4",file_editor_view:"styles_file_editor_view__9jzR3"};var G=function(e){return e.base="\u57fa\u7840\u4fe1\u606f",e.frame_index="\u7279\u5b9a\u5e27",e.frames="\u5e27\u5217\u8868",e.pic="\u56fe\u7247",e.itr_pre="itr\u9884\u8bbe",e.bdy_pre="bdy\u9884\u8bbe",e}(G||{});i.HA.registerShape(A.LF2_FRAME,()=>new O,e=>new W(e),{desc:"lf2 frame drawer"});const K=i.HA.factory(i.kD.Default)(),Q={[p.D2.Ball]:"\ud83e\udd4f",[p.D2.Weapon]:"\ud83d\udde1\ufe0f",[p.D2.Fighter]:"\ud83c\udfc3\u200d\u27a1\ufe0f",[p.D2.Entity]:"\ud83c\udf00",background:"\u26f0\ufe0f"},Z=e=>{let{node:t,depth:l}=e;if(0===l)return"\ud83d\udce6";if(!t.data)return;const i=t.data.type;return Q[i]};function ee(e){const t=(0,r.useRef)(void 0),[l,A]=(0,r.useState)(),{onClose:k,loading:S,open:T,lf2:C,...E}=e,[z,F]=(0,r.useState)(""),[D,L]=(0,r.useState)(),[I,B]=(0,r.useState)();(0,r.useEffect)(()=>{if(!C)return;const e={on_zips_changed:e=>L(e)};return C.callbacks.add(e),()=>C.callbacks.del(e)},[C]);const[M,O]=(0,r.useState)(),[W,Y]=(0,r.useState)(),X=(0,r.useRef)(void 0),Q=(0,r.useRef)(void 0),[ee,te]=(0,r.useState)(),[le,ie]=(0,r.useState)(),[re,ne]=(0,r.useState)(G.base);X.current=ee,Q.current=le;const[se,ae]=(0,r.useState)(),oe=(0,r.useMemo)(()=>(0,N.jsx)(H,{factory:K,data:le,on_pick_frame:ae,zip:I,ref_board:t}),[le,I]),[de,ce]=(0,r.useState)({mp3:!1,flat:!0,json:!0,img:!1,others:!0}),fe=(0,r.useMemo)(()=>{const e=t=>{if(!t.children)if(t.key.endsWith(".mp3")){if(!de.mp3)return}else if(t.key.endsWith(".json")){if(!de.json)return}else if(t.key.endsWith(".png")){if(!de.img)return}else if(t.key.endsWith(".webp")){if(!de.img)return}else if(!de.others)return;const l={...t};if(!t.children)return l;const i=l.children=[];for(const r of t.children){const t=e(r);t&&i.push(t)}return l},t=W?e(W):void 0;if(t&&de.flat){const e=[],l=t=>{if(t.children)for(const i of t.children)i.children?l(i):e.push({...i,label:""+i.title})};l(t),t.children=e}return t},[W,de]);(0,r.useEffect)(()=>{I&&(async(e,t)=>{const l={key:"",label:e,title:""};for(const r in t.files){var i;let e=l;const n=r.split("/"),s=await(null===(i=t.file(r))||void 0===i?void 0:i.json().catch(e=>{}));for(let t=0;t<n.length;t++){const l=n[t],i=e.children=e.children||[],r=i.findIndex(e=>e.label===l);r>=0?e=i[r]:i.push(e={key:n.slice(0,t+1).join("/"),label:l,title:n.slice(0,t+1).join("/"),data:s})}}O([l.key]),Y(l)})(z,I)},[z,I]),(0,r.useEffect)(()=>{const e=l;if(!e||!T)return;const r=t.current=K.newWhiteBoard({element:e});r.setToolType(i.s8.Selector),window.board=r;const n=new ResizeObserver(()=>{const{width:t,height:l}=e.getBoundingClientRect();r.width=t||1,r.height=l||1,r.markDirty({x:0,y:0,w:t,h:l})});return n.observe(e),()=>{r.layer().destory(),n.disconnect()}},[T,l]);const[ue,he]=(0,r.useState)(0),_e=(0,r.useMemo)(()=>{if(le)return(0,N.jsx)(_.$.Broken,{children:(0,N.jsx)(R,{value:le,on_changed:()=>he(ue+1),style:{flex:1,overflow:"auto",flexFlow:"column"}})})},[le,ue]),xe=(0,r.useMemo)(()=>{if(!le)return;const e=[];le.base.files&&(0,y.R)(le.base.files,(t,l)=>{e.push((0,N.jsx)(J,{pic_info:l,data:le,on_changed:()=>he(ue+1)},"FileEditorView_"+t))});const t=(0,N.jsx)($.TitleAndAdd,{title:"\u5b9e\u4f53\u56fe\u7247",on_add:()=>{let e=Object.keys(le.base.files).length;for(;""+e in le.base.files;)++e;const t={row:0,col:0,id:""+e,path:"",cell_w:0,cell_h:0};le.base.files[""+e]=t,he(ue+1)}});return(0,N.jsx)(_.$.Broken,{children:(0,N.jsx)($,{header:t,children:(0,N.jsx)(_.$.Item,{space:!0,vertical:!0,frame:!0,className:q.file_editor_view,children:e})})})},[le,ue]),ve=null===le||void 0===le?void 0:le.itr_prefabs,me=(0,r.useMemo)(()=>{if(!le)return;const e=[];ve&&(0,y.R)(ve,(t,l)=>{if(!l)return;const i=`itr_prefabs: ${t}`;e.push((0,N.jsx)(U,{label:i,value:l,data:le,on_changed:()=>he(ue+1)},i))});return(0,N.jsx)(_.$.Broken,{children:(0,N.jsx)($,{header:(0,N.jsx)($.TitleAndAdd,{title:"ITR\u9884\u8bbe",on_add:()=>{if(ve){let e=Object.keys(ve).length;for(;""+e in ve;)++e;ve[""+e]={id:""+e}}else le.itr_prefabs={},le.itr_prefabs[0]={id:"0"};he(ue+1)}}),children:(0,N.jsx)("div",{style:{overflow:"scroll",width:"100%",height:"100%"},children:(0,N.jsx)(_.$,{vertical:!0,className:q.file_editor_view,children:e})})})})},[ve,le,ue]),pe=(0,r.useRef)(null),be=(0,r.useRef)(void 0),ye=(0,r.useRef)(void 0),[je,ge]=(0,r.useState)([]),we=(0,r.useMemo)(()=>{const e=e=>{var t,l;if(e.children)O(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const l=t.filter(t=>t!==e.key);return l.length===t.length&&l.push(e.key),l.length?l:void 0});else if(null!==(t=e.data)&&void 0!==t&&t.type){var i;switch(null===(i=e.data)||void 0===i?void 0:i.type){case p.D2.Entity:case p.D2.Fighter:case p.D2.Weapon:case p.D2.Ball:null===I||void 0===I||null===(l=I.file(e.key))||void 0===l||l.json().then(t=>{const l=X.current,i=Q.current;I&&l&&i&&I.set(l.key,JSON.stringify(i)),te(e),ie(t)});break;default:var r;null===I||void 0===I||null===(r=I.file(e.key))||void 0===r||r.text().then(t=>{const l=X.current,i=Q.current;I&&l&&i&&I.set(l.key,JSON.stringify(i)),te(e),ie(void 0)})}}else if(e.key.endsWith(".txt")||e.key.endsWith(".json")){var n;null===I||void 0===I||null===(n=I.file(e.key))||void 0===n||n.text().then(t=>{const l=X.current,i=Q.current;I&&l&&i&&I.set(l.key,JSON.stringify(i)),te(e),ie(void 0)})}};return je.map(t=>{if(!t)return null;switch(t.id){case"res_tree_cell":return(0,n.createPortal)((0,N.jsx)($,{className:q.cell_inner,header:(0,N.jsx)($.TitleAndAdd,{title:(0,N.jsxs)(_.$,{children:[(0,N.jsx)(v.A,{label:"mp3",children:(0,N.jsx)(d.S,{value:de.mp3,onChange:e=>ce(t=>({...t,mp3:e}))})}),(0,N.jsx)(v.A,{label:"flat",children:(0,N.jsx)(d.S,{value:de.flat,onChange:e=>ce(t=>({...t,flat:e}))})}),(0,N.jsx)(v.A,{label:"json",children:(0,N.jsx)(d.S,{value:de.json,onChange:e=>ce(t=>({...t,json:e}))})}),(0,N.jsx)(v.A,{label:"img",children:(0,N.jsx)(d.S,{value:de.img,onChange:e=>ce(t=>({...t,img:e}))})}),(0,N.jsx)(v.A,{label:"others",children:(0,N.jsx)(d.S,{value:de.others,onChange:e=>ce(t=>({...t,others:e}))})})]})}),children:(0,N.jsx)(_.$.Item,{space:!0,vertical:!0,frame:!0,className:q.file_editor_view,children:(0,N.jsx)(m.GS,{node:fe,opens:M,on_click_item:e,get_icon:Z})})}),t,t.id);case"entity_info_cell":return(0,n.createPortal)((0,N.jsxs)("div",{className:q.cell_inner,style:{display:"flex",flexDirection:"column",gap:5},children:[(0,N.jsx)(V,{value:le,on_changed:()=>he(ue+1),className:q.entity_base_editor}),(0,N.jsx)(_.$.Item,{style:{display:"flex"},children:(0,N.jsx)(x.n,{value:re,items:Object.values(G),parse:e=>[e,e],onChange:e=>ne(e),style:{flex:1},styles:{button:{flex:1}}})}),(0,N.jsxs)(_.$.Broken,{children:[re===G.base?_e:null,re===G.frames?oe:null,re===G.pic?xe:null,re===G.itr_pre?me:null]})]}),t,t.id);case"frame_preview_cell":return(0,n.createPortal)((0,N.jsx)(f.A,{ref:e=>A(t=>e||t),className:q.cell_inner,style:{background:"transparent"}}),t,t.id);case"frame_editor_cell":return se&&le?(0,n.createPortal)((0,N.jsx)(P.FrameEditor,{value:se,data:le}),t,t.id):null}return null})},[_e,je,ue,le,se,I,fe,oe,me,M,xe,de.flat,de.img,de.json,de.mp3,de.others,re]);return(0,r.useEffect)(()=>{const e=pe.current;if(!e)return;const t=ye.current?ye.current:ye.current=new s.qj(e),l=window.workspace=be.current?be.current:be.current=new a.vm(t);l.slots.clear(),l.set_root(new a.DX(l,{id:"root",type:"h",children:[{id:"res_tree_cell"},{id:"empty"}]})),l.edit("res_tree_cell",e=>e.weight=250),l.edit("empty",t=>t.weight=e.offsetWidth-250),l.on_changed=()=>{const e=[];for(const i of l.leaves){const r=t.get_cell(i);r&&(r.parentElement||l.adapter.container.append(r),e.push(r))}ge(e)},l.confirm();const i=new ResizeObserver(()=>l.confirm());return i.observe(e),()=>i.disconnect()},[]),(0,r.useEffect)(()=>{var e;const t=be.current;if(!t)return;const l=null===(e=t.root)||void 0===e?void 0:e.snapshot();if(!l)return;const i=l.find("res_tree_cell");if(!i)return;const{w:r}=i.rect,{w:n}=l.slot.rect;le?(t.slots.get("frame_preview_cell")||t.add("res_tree_cell","right",{id:"frame_preview_cell"}),t.slots.get("entity_info_cell")||t.add("res_tree_cell","right",{id:"entity_info_cell"}),t.del("empty"),se?t.slots.get("frame_editor_cell")||t.add("frame_preview_cell","right",{id:"frame_editor_cell"}):t.del("frame_editor_cell"),t.edit("res_tree_cell",e=>{e.weight=l.w("res_tree_cell",250)}),t.edit("entity_info_cell",e=>{e.weight=l.w("entity_info_cell",350)}),t.edit("frame_editor_cell",e=>{e.weight=l.w("frame_editor_cell",350)}),t.edit("frame_preview_cell",e=>{e.weight=l.w()-l.w("entity_info_cell",0)-l.w("frame_editor_cell",0)-l.w("res_tree_cell",0)})):(t.del("entity_info_cell"),t.del("frame_preview_cell"),t.del("frame_editor_cell"),t.slots.get("empty")||t.add("res_tree_cell","right",{id:"empty"}),t.edits([0,"res_tree_cell","empty"],1,e=>{let[t,l,i]=e;t.edit_rect(e=>({...e,w:n})),l.weight=r,i.weight=n-r})),t.confirm()},[le,se]),T?(0,N.jsxs)(w.Provider,{value:{zip:I},children:[we,(0,N.jsxs)(_.$,{direction:"column",...E,stretchs:!0,children:[(0,N.jsxs)(c.A,{onClick:e=>{e.stopPropagation(),e.preventDefault()},className:q.top_bar,children:[(0,N.jsx)(o.$,{onClick:k,disabled:S,children:"\u2715"}),(0,N.jsx)(o.$,{onClick:()=>(async()=>{const[e]=await(0,g.iU)({accept:".zip"}),t=await b.X.Zip.read_file(e);B(t),F(e.name)})().catch(console.warn),disabled:S,variants:"no_border no_round",children:"\u6253\u5f00"}),(0,N.jsx)(h.A,{show:!(null===D||void 0===D||!D.length),children:(0,N.jsx)(u.A,{items:D,parse:e=>[null===D||void 0===D?void 0:D.indexOf(e),e.name],value:I?null===D||void 0===D?void 0:D.indexOf(I):void 0,onChange:e=>{B((0,j.AK)(e)?null===D||void 0===D?void 0:D.at(e):void 0)}})})]}),(0,N.jsx)(_.$.Item,{style:{alignSelf:"stretch",flex:1,minHeight:"0px",position:"relative"},children:(0,N.jsx)("div",{ref:pe})})]})]}):(0,N.jsx)(N.Fragment,{})}},4477:(e,t,l)=>{l.d(t,{F:()=>n});var i=l(3879),r=l(579);function n(e){return(0,r.jsxs)(i.C,{...e,children:[(0,r.jsx)(i.C.Path,{d:s.paths[0]}),(0,r.jsx)(i.C.Path,{d:s.paths[1]})]})}const s=Object.assign(n,i.C);n.paths=[s.m(s.w/2,s.pad,s.w/2,s.h-s.pad).ok(),s.m(s.pad,s.h/2,s.r,s.h/2).ok()]},5109:(e,t,l)=>{l.d(t,{n:()=>s});var i=l(1231),r=l(6156),n=l(579);function s(e){const{value:t,items:l,parse:s,onChange:a,disabled:o,classNames:d,styles:c,...f}=e;return(0,n.jsx)(r.A,{...f,children:null===l||void 0===l?void 0:l.map((e,l,r)=>{const[f,u]=(null===s||void 0===s?void 0:s(e,l,r))||[];return(0,n.jsx)(i.$,{className:null===d||void 0===d?void 0:d.button,style:null===c||void 0===c?void 0:c.button,onClick:e=>f===t||null===a||void 0===a?void 0:a(f,e),actived:f===t,disabled:o,"data-flex":1,children:u},l)})})}},6525:(e,t,l)=>{l.r(t),l.d(t,{FrameEditor:()=>b,default:()=>j,img_map:()=>p});var i=l(5043),r=l(1231),n=l(9724),s=l(9528),a=l(4727),o=l(4958),d=l(5109),c=l(3794),f=l(1598);var u=l(1667);function h(e,t){const l=(0,i.useRef)(e);l.current=e;return function(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return null===(e=l.current)||void 0===e||e.call(l,...r),t(...r)}}var _=l(579);const x="FrameEditor";var v=function(e){return e.Base="base",e.Spd="spd",e.Itr="itr",e.Bdy="bdy",e.Cpoint="cpoint",e.Opoint="opoint",e.Bpoint="bpoint",e}(v||{});const m={[v.Base]:"\u57fa\u7840",[v.Spd]:"\u901f\u5ea6",[v.Itr]:"\u653b\u51fb",[v.Bdy]:"\u8eab\u4f53",[v.Cpoint]:"\u6301\u68b0",[v.Opoint]:"\u53d1\u5c04",[v.Bpoint]:"\u5410\u8840"},p=window.img_map=new Map;function b(e){const{value:t,defaultValue:l=y,onChange:c,data:p,onBlur:b,onFocus:j,style:g,...w}=e,[A,k]=(0,i.useState)(v.Base),S=(0,i.useRef)(null),T=`frame: ${null===t||void 0===t?void 0:t.id}`,C=h(b,()=>{console.log(`[${x}>>on_blur] called.`)}),E=h(j,()=>{console.log(`[${x}>>on_focus] called.`)});return(0,_.jsxs)(s.A,{label:T,...w,ref:S,tabIndex:-1,onBlur:C,onFocus:E,style:{...g,overflow:"hidden",display:"flex",flexDirection:"column",gap:5},children:[(0,_.jsxs)(o.$,{direction:"column",stretchs:!0,children:[(0,_.jsx)(o.$.Item,{style:{display:"flex"},children:(0,_.jsx)(d.n,{style:{flex:1},value:A,items:Object.values(v),parse:e=>[e,m[e]],onChange:e=>k(t=>e===t?void 0:e),styles:{button:{flex:1}}})}),(0,_.jsx)(a.A,{show:"base"===A,children:(0,_.jsx)(o.$,{direction:"column",stretchs:!0})}),(0,_.jsx)(a.A,{show:A===v.Spd,children:(0,_.jsx)(o.$,{direction:"column",stretchs:!0})})]}),(0,_.jsx)(a.A,{show:"itr"===A,children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.$,{style:{alignSelf:"stretch"},onClick:()=>{const e={...t||l};e.itr=(0,f.D8)(e.itr,u.ItrEditor.genValue()),null===c||void 0===c||c(e)},children:"add itr"}),(0,_.jsx)(n.s,{direction:"column",gap:5,style:{flex:1,overflowY:"auto",height:0},children:(N=null===t||void 0===t?void 0:t.itr,z=(e,i)=>{const r=`itr[${i}]`;return(0,_.jsx)(u.ItrEditor,{label:r,value:e,variants:["no_border","no_round","no_shadow"],onChange:e=>{const r={...t||l};r.itr=[...r.itr],r.itr[i]=e,null===c||void 0===c||c(r)},onRemove:()=>{const e={...t||l};e.itr=[...e.itr],e.itr.splice(i,1),e.itr.length||delete e.itr,null===c||void 0===c||c(e)}},r)},N?Array.isArray(N)?N.map(z):[z(N,0,[N])]:[])})]})})]});var N,z}const y={id:"",name:"",state:0,wait:0,next:{},centerx:0,centery:0};function j(){const[e,t]=(0,i.useState)(y);return(0,_.jsxs)(n.s,{direction:"column",gap:5,style:{overflow:"hidden",height:"100%"},children:[(0,_.jsx)(c.f,{style:{resize:"vertical",height:300},readOnly:!0,value:JSON.stringify(e,null,2)}),(0,_.jsx)(b,{value:e,onChange:t,style:{flex:1}})]})}}}]);
//# sourceMappingURL=388.6a56ce45.chunk.js.map