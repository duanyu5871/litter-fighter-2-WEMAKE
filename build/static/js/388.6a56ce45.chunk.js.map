{"version":3,"file":"static/js/388.6a56ce45.chunk.js","mappings":"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","sources":["EditorView/FrameEditorView/ItrEditor.tsx","EditorView/Context.tsx","EditorView/EditorShapeEnum.tsx","EditorView/FrameEditorView/useEditor.tsx","webpack://little-fighter-j/./src/EditorView/WorkspaceColumnView/style.module.scss?6fd3","EditorView/WorkspaceColumnView/index.tsx","EditorView/EntityBaseDataView/index.tsx","EditorView/EntityDataEditorView/index.tsx","LF2/utils/array/loop_arr.ts","EditorView/FrameDrawer.tsx","EditorView/FrameEditorView/ItrPrefabView.tsx","webpack://little-fighter-j/./src/EditorView/FrameListView/styles.module.scss?449f","EditorView/FrameListView/index.tsx","EditorView/PicInfoEditorView.tsx","webpack://little-fighter-j/./src/EditorView/styles.module.scss?d70b","EditorView/index.tsx","Component/Icons/Plus.tsx","Component/TabButtons/index.tsx","EditorView/FrameEditorView/useThrough.tsx","EditorView/FrameEditorView/index.tsx","LF2/utils/array/map_arr.ts"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Button } from \"../../Component/Buttons/Button\";\r\nimport Combine from \"../../Component/Combine\";\r\nimport { Flex } from \"../../Component/Flex\";\r\nimport Frame, { IFrameProps } from \"../../Component/Frame\";\r\nimport { Input } from \"../../Component/Input\";\r\nimport Select from \"../../Component/Select\";\r\nimport Show from \"../../Component/Show\";\r\nimport { TextArea } from \"../../Component/TextArea\";\r\nimport Titled, { ITitledProps } from \"../../Component/Titled\";\r\nimport { Defines, HitFlag, IItrInfo, itr_effect_full_name, itr_kind_full_name, ItrEffect, ItrKind } from \"../../LF2/defines\";\r\nimport { floor } from \"../../LF2/utils\";\r\nimport { ITR_EFFECT_SELECT_PROPS, ITR_KIND_SELECT_PROPS } from \"../EntityEditorView\";\r\nimport { HitFlagEditor } from \"./HitFlagEditor\";\r\nimport { make_field_props, make_not_blank_field_props } from \"./make_field_props\";\r\nimport { QubeEdit } from \"./QubeEdit\";\r\n\r\nexport interface IItrEditorViewProps extends IFrameProps {\r\n  label?: string;\r\n  value?: IItrInfo;\r\n  defaultValue?: IItrInfo\r\n  onChange?(value?: IItrInfo): void;\r\n  onRemove?(): void;\r\n}\r\nconst titled_styles: ITitledProps['styles'] = {\r\n  label: {\r\n    width: 70,\r\n    textAlign: 'end'\r\n  }\r\n}\r\nconst default_value: IItrInfo = {\r\n  hit_flag: HitFlag.AllEnemy,\r\n  kind: ItrKind.Normal,\r\n  effect: ItrEffect.Normal,\r\n  z: floor(-Defines.DAFUALT_QUBE_LENGTH / 2),\r\n  l: floor(Defines.DAFUALT_QUBE_LENGTH),\r\n  x: 0,\r\n  y: 0,\r\n  w: 0,\r\n  h: 0\r\n}\r\nexport function ItrEditor(props: IItrEditorViewProps) {\r\n  const { label = 'itr info', value, defaultValue = default_value, onRemove, onChange, ..._p } = props;\r\n  const kind = value?.kind ?? defaultValue.kind;\r\n  const is_vrest = !!value && 'vrest' in value;\r\n  return (\r\n    <Frame key={label} label={label} tabIndex={-1} {..._p}>\r\n      <Button style={{ position: 'absolute', right: 0, top: 0, border: 'none' }} onClick={onRemove}>\r\n        🗑️\r\n      </Button>\r\n      <Flex direction='column' align='stretch' gap={5}>\r\n        <Titled label='类型' styles={titled_styles}>\r\n          <Combine>\r\n            <Select\r\n              {...ITR_KIND_SELECT_PROPS}\r\n              {...make_field_props(props, default_value, 'kind', (v) => {\r\n                v.kind_name = itr_kind_full_name(v.kind);\r\n                if (v.kind !== ItrKind.Normal) {\r\n                  delete v.effect;\r\n                  delete v.effect_name;\r\n                }\r\n                return v;\r\n              })}\r\n              data-flex={1}\r\n            />\r\n            <Show show={kind === ItrKind.Normal} data-flex={1}>\r\n              <Select\r\n                {...ITR_EFFECT_SELECT_PROPS}\r\n                {...make_field_props(props, default_value, 'effect', (v) => {\r\n                  v.effect_name = itr_effect_full_name(v.effect)\r\n                  return v;\r\n                })}\r\n              />\r\n            </Show>\r\n          </Combine>\r\n        </Titled>\r\n        <Titled label='判定' styles={titled_styles}>\r\n          <HitFlagEditor {...make_field_props(props, default_value, 'hit_flag')} />\r\n        </Titled>\r\n        <Flex direction='row'>\r\n          <Titled label='自身停顿' styles={titled_styles} style={{ flex: 1 }}>\r\n            <Input.Number\r\n              {...make_not_blank_field_props(props, default_value, 'motionless')}\r\n              clearable\r\n              placeholder={'' + Defines.DEFAULT_ITR_MOTIONLESS}\r\n              step={1} />\r\n          </Titled>\r\n          <Titled label='目标停顿' style={{ flex: 1 }}>\r\n            <Input.Number\r\n              {...make_not_blank_field_props(props, default_value, 'shaking')}\r\n              clearable\r\n              placeholder={'' + Defines.DEFAULT_ITR_SHAKING}\r\n              step={1} />\r\n          </Titled>\r\n        </Flex>\r\n        <Titled label='rest' styles={titled_styles}>\r\n          <Combine>\r\n            <Select\r\n              items={['arest', 'vrest'] as const}\r\n              parse={v => [v, v]}\r\n              value={is_vrest ? 'vrest' : 'arest'}\r\n              onChange={(v: 'arest' | 'vrest' | undefined) => {\r\n                const next = { ...(value || defaultValue) };\r\n                const rest = next.arest || next.vrest || 0;\r\n                delete next.arest;\r\n                delete next.vrest;\r\n                next[v!] = rest\r\n                onChange?.(next)\r\n              }} />\r\n            <Input.Number\r\n              data-flex={1}\r\n              {...make_not_blank_field_props(props, default_value, is_vrest ? 'vrest' : 'arest')}\r\n              placeholder={'' + Defines.DEFAULT_ITR_MOTIONLESS}\r\n              clearable\r\n              step={1} />\r\n          </Combine>\r\n        </Titled>\r\n        <Flex direction='row'>\r\n          <Titled label='击倒值' styles={titled_styles} style={{ flex: 1 }}>\r\n            <Input.Number {...make_not_blank_field_props(props, default_value, 'fall')} placeholder={'' + Defines.DEFAULT_ITR_FALL} clearable step={1} />\r\n          </Titled>\r\n          <Titled label='破防值' style={{ flex: 1 }}>\r\n            <Input.Number {...make_not_blank_field_props(props, default_value, 'bdefend')} clearable step={1} />\r\n          </Titled>\r\n          <Titled label='伤害值' style={{ flex: 1 }}>\r\n            <Input.Number {...make_not_blank_field_props(props, default_value, 'injury')} clearable step={1} />\r\n          </Titled>\r\n        </Flex>\r\n        <Titled label='包围盒' styles={titled_styles}>\r\n          <QubeEdit\r\n            value={value}\r\n            defaultValue={defaultValue}\r\n            onChange={v => onChange?.({ ...defaultValue, ...value, ...v })} />\r\n        </Titled>\r\n        <Titled label='条件' styles={titled_styles}>\r\n          <TextArea {...make_not_blank_field_props(props, default_value, 'test')} style={{ resize: 'vertical' }} />\r\n        </Titled>\r\n        <Titled label='预设' styles={titled_styles}>\r\n          <Input {...make_not_blank_field_props(props, default_value, 'prefab_id')} clearable />\r\n        </Titled>\r\n      </Flex>\r\n    </Frame>\r\n  )\r\n}\r\nItrEditor.genValue = (fn?: (edit: IItrInfo) => IItrInfo) => fn ? fn({ ...default_value }) : { ...default_value }\r\nexport default function ItrEditorTestView(props: {}) {\r\n  const [value, set_value] = useState<IItrInfo | undefined>(default_value)\r\n  return (\r\n    <Flex direction='column' gap={10}>\r\n      <TextArea style={{ resize: 'vertical', height: 500 }} readOnly value={JSON.stringify(value, null, 2)} />\r\n      <ItrEditor value={value} onChange={set_value} />\r\n    </Flex>\r\n  )\r\n};","import React from \"react\";\nimport { IZip } from \"../LF2/ditto/zip/IZip\";\n\nexport const shared_ctx = React.createContext<{ zip?: IZip }>({});","export enum EditorShapeEnum {\n  LF2_FRAME = 'lf2_frame_drawer'\n}\n","import { useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { Button } from \"../../Component/Buttons/Button\";\r\nimport Combine from \"../../Component/Combine\";\r\nimport { Cross } from '../../Component/Icons/Cross';\r\nimport { Plus } from '../../Component/Icons/Plus';\r\nimport { Input, InputProps } from \"../../Component/Input\";\r\nimport { InputNumber, InputNumberProps } from \"../../Component/Input\";\r\nimport Select, { ISelectProps } from \"../../Component/Select\";\r\nimport { TextArea } from \"../../Component/TextArea\";\r\nimport Titled, { ITitledProps } from \"../../Component/Titled\";\r\nimport { IZipObject } from \"../../LF2/ditto\";\r\nimport { shared_ctx } from \"../Context\";\r\n\r\ntype Field<O> = (keyof O) | (string | number)[];\r\ninterface CommonProps<O extends {}> {\r\n  title?: string;\r\n  field: Field<O>;\r\n  foo?: any\r\n}\r\nexport function useEditor<O extends {}>(value: O, label_style: React.CSSProperties = {}) {\r\n\r\n  const titled_style: React.CSSProperties = useMemo(() => (\r\n    { display: 'flex' }\r\n  ), []);\r\n\r\n  return useMemo(() => {\r\n    const t_props = (field: any): ITitledProps => ({\r\n      float_label: field.toString(),\r\n      styles: { label: label_style },\r\n      style: titled_style,\r\n    });\r\n    const get_value = (f: CommonProps<O>['field']) => {\r\n      if (!Array.isArray(f)) return (value as any)[f]\r\n      let r = value;\r\n      for (const k of f) {\r\n        if (!r) continue;\r\n        r = (r as any)[k]\r\n      }\r\n      return r;\r\n    }\r\n    const set_value = (f: CommonProps<O>['field'], v: any) => {\r\n      if (!Array.isArray(f)) {\r\n        (value as any)[f] = v;\r\n        return;\r\n      }\r\n      let temp = value;\r\n      f.forEach((k, i, a) => {\r\n        if (!temp) return;\r\n        if (i < a.length - 1) {\r\n          temp = (temp as any)[k]\r\n        } else {\r\n          (temp as any)[k] = v;\r\n        }\r\n      })\r\n    }\r\n    return {\r\n      ImageFile(props: CommonProps<O> & Partial<ISelectProps<IZipObject, string>>) {\r\n        const { field, title: name, ..._p } = props;\r\n        const { zip } = useContext(shared_ctx);\r\n        const [img_list, set_img_list] = useState<IZipObject[]>([])\r\n        useEffect(() => {\r\n          if (zip) set_img_list(zip.file(/.png$/))\r\n        }, [zip])\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <Select\r\n              items={img_list}\r\n              parse={v => [v.name, v.name]}\r\n              defaultValue={get_value(field)}\r\n              onChange={v => set_value(field, v)}\r\n              clearable\r\n              style={{ flex: 1 }}\r\n              {..._p} />\r\n          </Titled>\r\n        );\r\n      },\r\n      Number(props: CommonProps<O> & InputNumberProps) {\r\n        const { field, title: name, ..._p } = props;\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <InputNumber\r\n              defaultValue={get_value(field)}\r\n              on_blur={v => set_value(field, v)}\r\n              style={{ flex: 1 }}\r\n              clearable\r\n              {..._p} />\r\n          </Titled>\r\n        );\r\n      },\r\n      Text(props: CommonProps<O>) {\r\n        const { title: name, field } = props;\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <TextArea\r\n              style={{ flex: 1, resize: 'vertical' }}\r\n              defaultValue={get_value(field)}\r\n              onBlur={e => set_value(field, e.target.value.trim() || void 0)} />\r\n          </Titled>\r\n        );\r\n      },\r\n      String(props: CommonProps<O> & InputProps) {\r\n        const { title: name, field, ..._p } = props;\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <Input\r\n              style={{ flex: 1 }}\r\n              defaultValue={get_value(field)}\r\n              onBlur={e => set_value(field, e.target.value.trim() || void 0)}\r\n              {..._p} />\r\n          </Titled>\r\n        );\r\n      },\r\n      Number3(props: { name: string; fields: [Field<O>, Field<O>, Field<O>]; clearable?: boolean } & ITitledProps) {\r\n        const { name, fields: [x, y, z], clearable, ..._p } = props;\r\n        const combine_style: React.CSSProperties = { flex: 1 }\r\n        const input_style: React.CSSProperties = { flex: 1 }\r\n        return (\r\n          <Titled {...t_props(name)} {..._p}>\r\n            <Combine style={combine_style}>\r\n              <InputNumber\r\n                defaultValue={get_value(x)}\r\n                onChange={v => set_value(x, v)}\r\n                title=\"x\"\r\n                prefix=\"x\"\r\n                style={input_style}\r\n                clearable={clearable}\r\n                data-flex={1} />\r\n              <InputNumber\r\n                defaultValue={get_value(y)}\r\n                onChange={v => set_value(y, v)}\r\n                title=\"y\"\r\n                prefix=\"y\"\r\n                style={input_style}\r\n                clearable={clearable}\r\n                data-flex={1} />\r\n              <InputNumber\r\n                defaultValue={get_value(z)}\r\n                onChange={v => set_value(z, v)}\r\n                title=\"z\"\r\n                prefix=\"z\"\r\n                style={input_style}\r\n                clearable={clearable}\r\n                data-flex={1} />\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n      EditorVec2(props: { name: string; fields: [Field<O>, Field<O>]; clearable?: boolean } & ITitledProps) {\r\n        const { name, fields: [x, y], clearable, ..._p } = props;\r\n        const combine_style: React.CSSProperties = { flex: 1 }\r\n        const input_style: React.CSSProperties = { flex: 1 }\r\n        return (\r\n          <Titled {...t_props(name)} {..._p}>\r\n            <Combine style={combine_style}>\r\n              <InputNumber\r\n                defaultValue={get_value(x)}\r\n                onChange={v => set_value(x, v)}\r\n                title=\"x\"\r\n                prefix=\"x\"\r\n                style={input_style}\r\n                clearable={clearable}\r\n                data-flex={1} />\r\n              <InputNumber\r\n                defaultValue={get_value(y)}\r\n                onChange={v => set_value(y, v)}\r\n                title=\"y\"\r\n                prefix=\"y\"\r\n                style={input_style}\r\n                clearable={clearable}\r\n                data-flex={1} />\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n      Qube(props: { title: string; fields: [Field<O>, Field<O>, Field<O>, Field<O>, Field<O>, Field<O>]; clearable?: boolean } & ITitledProps) {\r\n        const { title: name, fields: [x, y, z, w, h, l], clearable, ..._p } = props;\r\n        const combine_style: React.CSSProperties = { flex: 1, alignItems: 'stretch' }\r\n        const input_style: React.CSSProperties = { flex: 1 }\r\n        return (\r\n          <Titled {...t_props(name)} {..._p}>\r\n            <Combine direction=\"column\" style={combine_style}>\r\n              <Combine data-flex={1} style={{ flex: 1 }}>\r\n                <InputNumber\r\n                  defaultValue={get_value(x)}\r\n                  onChange={v => set_value(x, v)}\r\n                  title=\"x\"\r\n                  prefix=\"x\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n                <InputNumber\r\n                  defaultValue={get_value(y)}\r\n                  onChange={v => set_value(y, v)}\r\n                  title=\"y\" prefix=\"y\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n                <InputNumber\r\n                  defaultValue={get_value(z)}\r\n                  onChange={v => set_value(z, v)}\r\n                  title=\"z\" prefix=\"z\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n              </Combine>\r\n              <Combine data-flex={1} style={{ flex: 1 }}>\r\n                <InputNumber\r\n                  defaultValue={get_value(w)}\r\n                  onChange={v => set_value(w, v)}\r\n                  title=\"w\" prefix=\"w\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n                <InputNumber\r\n                  defaultValue={get_value(h)}\r\n                  onChange={v => set_value(h, v)}\r\n                  title=\"h\" prefix=\"h\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n                <InputNumber\r\n                  defaultValue={get_value(l)}\r\n                  onChange={v => set_value(l, v)}\r\n                  title=\"l\" prefix=\"l\"\r\n                  style={input_style}\r\n                  clearable={clearable} data-flex={1} />\r\n              </Combine>\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n      Strings(props: CommonProps<O> & InputProps) {\r\n        const { title: name, field, placeholder, title } = props;\r\n        const list: string[] | undefined = (value as any)[field];\r\n        const [, set_change_flags] = useState(0);\r\n\r\n        const on_click_add = () => {\r\n          (value as any)[field] = (value as any)[field] || [];\r\n          (value as any)[field].push('');\r\n          set_change_flags(v => v + 1)\r\n        }\r\n        const on_click_del = (idx: number) => {\r\n          list?.splice(idx, 1);\r\n          set_change_flags(v => v + 1)\r\n        }\r\n        const on_blur = (idx: number, str: string) => {\r\n          (value as any)[field][idx] = str.trim();\r\n          set_change_flags(v => v + 1)\r\n        }\r\n        const children = list?.map((value, idx) => {\r\n          return (\r\n            <Combine key={idx} style={{ flex: 1 }}>\r\n              <Input\r\n                defaultValue={value}\r\n                placeholder={placeholder}\r\n                onBlur={e => on_blur(idx, e.target.value)}\r\n                data-flex={1}\r\n                style={{ flex: 1 }} />\r\n              <Button onClick={() => on_click_del(idx)} >\r\n                <Cross />\r\n              </Button>\r\n            </Combine>\r\n          );\r\n        }) ?? []\r\n        children.push(\r\n          <Button onClick={on_click_add} style={{ flex: 1 }} key={children.length}>\r\n            <Plus />\r\n          </Button>\r\n        )\r\n        return (\r\n          <Titled {...t_props(name ?? field)} title={title}>\r\n            <Combine direction='column' style={{ flex: 1 }}>\r\n              {children}\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n      EditorIntList(props: CommonProps<O>) {\r\n        const { title: name, field, } = props;\r\n        const list: number[] | undefined = (value as any)[field];\r\n        const [, set_change_flags] = useState(0);\r\n        const on_click_add = () => {\r\n          (value as any)[field] = (value as any)[field] || [];\r\n          (value as any)[field].push(void 0);\r\n          set_change_flags(v => v + 1);\r\n        }\r\n        const on_click_del = (idx: number) => {\r\n          list?.splice(idx, 1);\r\n          set_change_flags(v => v + 1);\r\n        }\r\n        const on_blur = (idx: number, num: number | undefined) => {\r\n          (value as any)[field][idx] = num;\r\n          set_change_flags(v => v + 1);\r\n        }\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <Combine direction='column' style={{ flex: 1 }}>\r\n              {list?.map((value, idx) => {\r\n                return (\r\n                  <Combine>\r\n                    <InputNumber\r\n                      style={{ flex: 1 }}\r\n                      defaultValue={value}\r\n                      on_blur={v => on_blur(idx, v)} />\r\n                    <Button >\r\n                      <Cross onClick={() => on_click_del(idx)} />\r\n                    </Button>\r\n                  </Combine>\r\n                );\r\n              })}\r\n              <Button onClick={on_click_add}>\r\n                <Plus />\r\n              </Button>\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n      Select<T, V>(props: CommonProps<O> & ISelectProps<T, V>) {\r\n        const { title: name, field, onChange: on_changed, ..._p } = props;\r\n        const [, set_change_flags] = useState(0);\r\n        return (\r\n          <Titled {...t_props(name ?? field)}>\r\n            <Select\r\n              defaultValue={get_value(field)}\r\n              onChange={v => {\r\n                (value as any)[field] = v;\r\n                on_changed?.(v);\r\n                set_change_flags(v => ++v);\r\n              }}\r\n              clearable\r\n              style={{ flex: 1 }}\r\n              {..._p} />\r\n          </Titled>\r\n        )\r\n      },\r\n      Sel3<T, V>(props: {\r\n        name: string;\r\n        fields: [Field<O>, Field<O>, Field<O>];\r\n        placeholders?: [string, string, string]\r\n        clearable?: boolean;\r\n        select: ISelectProps<T, V>\r\n      } & ITitledProps) {\r\n        const { name, fields: [x, y, z], placeholders, clearable, select, ..._p } = props;\r\n        const combine_style: React.CSSProperties = { flex: 1 }\r\n        const select_style: React.CSSProperties = { flex: 1 }\r\n        return (\r\n          <Titled {...t_props(name)} {..._p}>\r\n            <Combine style={combine_style}>\r\n              <Select\r\n                defaultValue={get_value(x)}\r\n                onChange={v => { set_value(x, v) }}\r\n                placeholder={placeholders?.at(0)}\r\n                clearable\r\n                style={select_style}\r\n                {...select}\r\n                data-flex={1} />\r\n              <Select\r\n                defaultValue={get_value(y)}\r\n                onChange={v => { set_value(y, v) }}\r\n                placeholder={placeholders?.at(1)}\r\n                clearable\r\n                style={select_style}\r\n                {...select}\r\n                data-flex={1} />\r\n              <Select\r\n                defaultValue={get_value(z)}\r\n                onChange={v => { set_value(z, v) }}\r\n                placeholder={placeholders?.at(2)}\r\n                clearable\r\n                style={select_style}\r\n                {...select}\r\n                data-flex={1} />\r\n            </Combine>\r\n          </Titled>\r\n        );\r\n      },\r\n    };\r\n  }, [value, label_style, titled_style]);\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"lfui_min_input_size\":\"style_lfui_min_input_size__UEeIZ\",\"header_main_footer_view\":\"style_header_main_footer_view__G01Nm\",\"head_zone\":\"style_head_zone__KloPH\",\"title\":\"style_title__f69lF\",\"content_zone\":\"style_content_zone__QeNff\",\"inner_shadow_v\":\"style_inner_shadow_v__VcrEL\"};","import classNames from \"classnames\";\r\nimport { Button } from \"../../Component/Buttons/Button\";\r\nimport Combine, { ICombineProps } from \"../../Component/Combine\";\r\nimport { Plus } from '../../Component/Icons/Plus';\r\nimport { Text } from \"../../Component/Text\";\r\nimport styles from \"./style.module.scss\";\r\n\r\nexport interface IWorkspaceColumnViewProps extends Omit<ICombineProps, \"title\"> {\r\n  title?: React.ReactNode;\r\n  header?: React.ReactNode;\r\n}\r\nexport function WorkspaceColumnView(props: IWorkspaceColumnViewProps) {\r\n  const { title, header, className, ..._p } = props;\r\n  return (\r\n    <Combine\r\n      direction='column'\r\n      className={classNames(styles.header_main_footer_view, className)}\r\n      hoverable={false}\r\n      {..._p}>\r\n      {\r\n        header ? header :\r\n          <Combine direction='row' hoverable={false} className={styles.head_zone}>\r\n            <Text size='m' className={styles.title} data-flex={1}>\r\n              {title}\r\n            </Text>\r\n          </Combine>\r\n      }\r\n      <div className={styles.content_zone} data-flex={1}>\r\n        {props.children}\r\n      </div>\r\n    </Combine>\r\n  )\r\n}\r\n\r\nexport function TitleAndAdd(props: { title?: React.ReactNode; on_add?(e: React.MouseEvent): void }) {\r\n  const { title, on_add } = props;\r\n  return (\r\n    <Combine direction='row' hoverable={false} className={styles.head_zone}>\r\n      <Text size='m' className={styles.title} data-flex={1}>\r\n        {title}\r\n      </Text>\r\n      <Button onClick={on_add}>\r\n        <Plus />\r\n      </Button>\r\n    </Combine>\r\n  )\r\n}\r\nWorkspaceColumnView.TitleAndAdd = TitleAndAdd","\nimport { IFrameProps } from \"../../Component/Frame\";\nimport { Space } from \"../../Component/Space\";\nimport { Defines, IEntityInfo } from \"../../LF2/defines\";\nimport { IEntityData } from \"../../LF2/defines/IEntityData\";\nimport { useEditor } from \"../FrameEditorView/useEditor\";\nimport { WorkspaceColumnView } from \"../WorkspaceColumnView\";\n\nexport interface IEntityBaseDataViewProps extends IFrameProps {\n  value?: IEntityData;\n  on_changed?(): void;\n}\n\nexport function EntityBaseDataView(props: IEntityBaseDataViewProps) {\n  const { value, on_changed, ..._p } = props;\n  const data = value;\n  const Editor = useEditor<IEntityInfo>(data?.base!);\n  if (!data) return;\n  return (\n    <WorkspaceColumnView {..._p} title='基础信息'>\n      <Space direction='column' stretchs style={{ width: '100%', padding: '20px 10px', boxSizing: 'border-box' }}>\n        <Editor.ImageFile field=\"head\" foo={data.base.head} />\n        <Editor.ImageFile field=\"small\" foo={data.base.small} />\n        <Editor.Number field=\"ce\" foo={data.base.ce} placeholder='1' />\n        <Editor.Number field=\"fall_value\" foo={data.base.fall_value} placeholder={'' + Defines.DEFAULT_FALL_VALUE_MAX} />\n        <Editor.Number field=\"defend_value\" foo={data.base.defend_value} placeholder={'' + Defines.DEFAULT_DEFEND_VALUE_MAX} />\n        <Editor.Number field=\"resting\" foo={data.base.resting} placeholder={'' + Defines.DEFAULT_RESTING_MAX} />\n        <Editor.Number field=\"hp\" foo={data.base.hp} placeholder={'' + Defines.DEFAULT_HP} />\n        <Editor.Number field=\"mp\" foo={data.base.mp} placeholder={'' + Defines.DEFAULT_MP} />\n        <Editor.Number field=\"catch_time\" foo={data.base.catch_time} placeholder={'' + Defines.DEFAULT_CATCH_TIME} />\n        <Editor.Number field=\"jump_height\" foo={data.base.jump_height} />\n        <Editor.Number field=\"jump_distance\" foo={data.base.jump_distance} />\n        <Editor.Number field=\"jump_distancez\" foo={data.base.jump_distancez} />\n        <Editor.Number field=\"dash_height\" foo={data.base.dash_height} />\n        <Editor.Number field=\"dash_distance\" foo={data.base.dash_distance} />\n        <Editor.Number field=\"dash_distancez\" foo={data.base.dash_distancez} />\n        <Editor.Number field=\"rowing_height\" foo={data.base.rowing_height} />\n        <Editor.Number field=\"rowing_distance\" foo={data.base.rowing_distance} />\n      </Space>\n    </WorkspaceColumnView>\n  );\n}\n","import Frame, { IFrameProps } from \"../../Component/Frame\";\r\nimport { Space } from \"../../Component/Space\";\r\nimport { IEntityData } from \"../../LF2/defines/IEntityData\";\r\nimport { ENTITY_TYPE_SELECT_PROPS } from \"../EntityEditorView\";\r\nimport { useEditor } from \"../FrameEditorView/useEditor\";\r\nexport interface IEntityDataEditorViewProps extends IFrameProps {\r\n  value?: IEntityData;\r\n  on_changed?(): void;\r\n}\r\nexport function EntityDataEditorView(props: IEntityDataEditorViewProps) {\r\n  const { value, on_changed, ..._p } = props;\r\n  const data = value;\r\n  const Editor1 = useEditor(data!, { width: 80 })\r\n  const Editor2 = useEditor(data?.base!, { width: 80 })\r\n  if (!data) return;\r\n  return (\r\n    <Frame {..._p} label=\"实体数据\">\r\n      <Space direction='column' stretchs>\r\n        <Editor1.String field=\"id\" />\r\n        <Editor1.Select {...ENTITY_TYPE_SELECT_PROPS} field='type' clearable={false} onChange={on_changed} />\r\n        <Editor2.String field=\"name\" clearable={false} />\r\n      </Space>\r\n    </Frame>\r\n  )\r\n}","export function loop_arr<T>(list: T | T[], fn: (item: T, idx: number, arr: T[]) => any) {\n  if (Array.isArray(list)) list.forEach(fn);\n  else fn(list, 0, [list])\n}\n","import { IRect, Resizable, Shape, ShapeData } from \"@fimagine/writeboard\";\r\nimport { IBdyInfo, ICpointInfo, IFrameInfo, IFramePictureInfo, IItrInfo, IOpointInfo, IWpointInfo } from \"../LF2/defines\";\r\nimport { IEntityData } from \"../LF2/defines/IEntityData\";\r\nimport { IZip } from \"../LF2/ditto\";\r\nimport { loop_arr } from \"../LF2/utils/array/loop_arr\";\r\nimport { EditorShapeEnum } from \"./EditorShapeEnum\";\r\nimport { img_map } from \"./FrameEditorView\";\r\n\r\nexport class FrameDrawerData extends ShapeData {\r\n  img?: HTMLImageElement;\r\n  frame?: IFrameInfo;\r\n  data?: IEntityData;\r\n  zip?: IZip;\r\n  constructor(o?: Partial<FrameDrawerData>) {\r\n    super()\r\n    this.type = EditorShapeEnum.LF2_FRAME\r\n    if (o) this.read(o)\r\n  }\r\n  override read(o: Partial<FrameDrawerData>): this {\r\n    super.read(o);\r\n    this.img = o.img;\r\n    this.frame = o.frame;\r\n    this.data = o.data;\r\n    this.zip = o.zip;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class FrameDrawer extends Shape<FrameDrawerData> {\r\n  constructor(data: Partial<FrameDrawerData>) {\r\n    super(data, FrameDrawerData)\r\n  }\r\n  static get_size(f: IFrameInfo) {\r\n    const { pic: { w = 0, h = 0 } = {} } = f;\r\n    const { l, r, t, b } = this.get_bounding(f)\r\n    return { w: w - l + r, h: h - t + b }\r\n  }\r\n  static get_bounding(f: IFrameInfo) {\r\n    const { pic = { w: 0, h: 0 } } = f;\r\n    let l = 0;\r\n    let t = 0;\r\n    let r = 0;\r\n    let b = 0;\r\n    const check_rect = ({ x, y, w, h }: IRect) => {\r\n      l = Math.min(x, l);\r\n      t = Math.min(y, t);\r\n      r = Math.max((x + w) - pic.w, r);\r\n      b = Math.max((y + h) - pic.h, b);\r\n    };\r\n    const check_vec2 = ({ x, y }: { x: number, y: number }) => {\r\n      x -= 20;\r\n      y -= 20\r\n      l = Math.min(x, l);\r\n      t = Math.min(y, t);\r\n      r = Math.max((x + 40) - pic.w, r);\r\n      b = Math.max((y + 40) - pic.h, b);\r\n    };\r\n\r\n    check_vec2({ x: f.centerx, y: f.centery })\r\n    if (f.bdy) loop_arr(f.bdy, bdy => check_rect(bdy))\r\n    if (f.itr) loop_arr(f.itr, itr => check_rect(itr))\r\n    if (f.opoint) loop_arr(f.opoint, opoint => check_vec2(opoint))\r\n    if (f.cpoint) check_vec2(f.cpoint);\r\n    if (f.bpoint) check_vec2(f.bpoint)\r\n\r\n    l += 0;\r\n    t += 0;\r\n    r += 0;\r\n    b += 0;\r\n    return { l, r, t, b };\r\n  }\r\n  override get resizable(): Resizable {\r\n    return Resizable.None;\r\n  }\r\n  draw_center(ctx: CanvasRenderingContext2D, frame: IFrameInfo) {\r\n    const { centerx, centery } = frame;\r\n    ctx.beginPath();\r\n    ctx.moveTo(centerx, centery + 2);\r\n    ctx.lineTo(centerx - 2, centery);\r\n    ctx.lineTo(centerx, centery - 2);\r\n    ctx.lineTo(centerx + 2, centery);\r\n    ctx.closePath();\r\n    ctx.setLineDash([]);\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.fillStyle = 'white';\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  }\r\n  draw_bdy(ctx: CanvasRenderingContext2D, bdy: IBdyInfo) {\r\n    ctx.strokeStyle = 'green';\r\n    ctx.lineWidth = 1;\r\n    ctx.setLineDash([2, 2]);\r\n    ctx.beginPath();\r\n    ctx.rect(bdy.x + 0.5, bdy.y + 0.5, bdy.w - 1, bdy.h - 1);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n  }\r\n  draw_itr(ctx: CanvasRenderingContext2D, itr: IItrInfo) {\r\n    ctx.strokeStyle = 'red';\r\n    ctx.lineWidth = 1;\r\n    ctx.setLineDash([2, 2]);\r\n    ctx.beginPath();\r\n    ctx.lineDashOffset = 2;\r\n    ctx.rect(itr.x + 0.5, itr.y + 0.5, itr.w - 1, itr.h - 1);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n  }\r\n  draw_cpoint(ctx: CanvasRenderingContext2D, cpoint: ICpointInfo) {\r\n    ctx.beginPath();\r\n    const { x, y } = cpoint;\r\n    ctx.moveTo(x, y + 2);\r\n    ctx.lineTo(x - 2, y);\r\n    ctx.lineTo(x, y - 2);\r\n    ctx.lineTo(x + 2, y);\r\n    ctx.closePath();\r\n    ctx.setLineDash([]);\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.fillStyle = 'yellow';\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    ctx.strokeText('' + cpoint.kind, x + 2, y - 2)\r\n    ctx.fillText('' + cpoint.kind, x + 2, y - 2)\r\n  }\r\n  draw_wpoint(ctx: CanvasRenderingContext2D, point: IWpointInfo) {\r\n    ctx.beginPath();\r\n    const { x, y } = point;\r\n    ctx.moveTo(x, y + 2);\r\n    ctx.lineTo(x - 2, y);\r\n    ctx.lineTo(x, y - 2);\r\n    ctx.lineTo(x + 2, y);\r\n    ctx.closePath();\r\n    ctx.setLineDash([]);\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.fillStyle = 'green';\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  }\r\n  draw_opoint(ctx: CanvasRenderingContext2D, point: IOpointInfo) {\r\n    ctx.beginPath();\r\n    const { x, y } = point;\r\n    ctx.moveTo(x, y + 2);\r\n    ctx.lineTo(x - 2, y);\r\n    ctx.lineTo(x, y - 2);\r\n    ctx.lineTo(x + 2, y);\r\n    ctx.closePath();\r\n    ctx.setLineDash([]);\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.fillStyle = 'red';\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    ctx.textAlign = 'center'\r\n    ctx.font = 'light 9px serif'\r\n    ctx.strokeText('' + point.oid, x + 2, y - 5)\r\n    ctx.fillText('' + point.oid, x + 2, y - 5)\r\n  }\r\n  draw_frame_bound(ctx: CanvasRenderingContext2D, pic: IFramePictureInfo) {\r\n    ctx.strokeStyle = '#FFFFFFaa';\r\n    ctx.lineWidth = 1;\r\n    ctx.setLineDash([2, 2]);\r\n    ctx.beginPath();\r\n    ctx.rect(0.5, 0.5, pic.w - 1, pic.h - 1);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n  }\r\n  get_img(zip: IZip, data: IEntityData, tex: string): Promise<HTMLImageElement> {\r\n    const { base: { files } } = data;\r\n    const pic = files[tex];\r\n    if (!pic) {\r\n      return Promise.reject(new Error('pic not found: ' + tex))\r\n    }\r\n    const img = this.data.img = img_map.get(pic.path) || new Image();\r\n    if (!img_map.has(pic.path)) {\r\n      img_map.set(pic.path, img);\r\n      zip.file(pic.path)?.blob_url().then((r) => {\r\n        img.src = r;\r\n      })\r\n    }\r\n    return new Promise<HTMLImageElement>((resolve, reject) => {\r\n      let remain = 0;\r\n      const resolving = () => {\r\n        if (img.width && img.height) {\r\n          resolve(img)\r\n        } else if (remain <= 5) {\r\n          ++remain;\r\n          setTimeout(() => resolving(), remain * 10)\r\n        } else {\r\n          reject(new Error('width or height got zero'))\r\n        }\r\n      }\r\n      if (img.complete) {\r\n        resolving()\r\n        return;\r\n      }\r\n      const on_load = () => {\r\n        resolving()\r\n        img.removeEventListener('load', on_load);\r\n        img.removeEventListener('error', on_error);\r\n      }\r\n      const on_error = (e: ErrorEvent) => {\r\n        reject(new Error(e.message))\r\n        img.removeEventListener('load', on_load);\r\n        img.removeEventListener('error', on_error);\r\n      }\r\n      img.addEventListener('load', on_load, { once: true });\r\n      img.addEventListener('error', on_error, { once: true });\r\n    })\r\n  }\r\n\r\n  override render(ctx: CanvasRenderingContext2D): void {\r\n    this.beginDraw(ctx);\r\n    ctx.scale(2, 2);\r\n    const { frame, data, zip } = this.data;\r\n    if (!this.data.img && frame?.pic?.tex && data && zip) {\r\n      this.get_img(zip, data, frame.pic.tex).then((img) => {\r\n        this.beginDirty()\r\n        this.data.img = img;\r\n        this.endDirty()\r\n      })\r\n    }\r\n    const { img } = this.data;\r\n    if (frame) {\r\n\r\n      const { l, t } = FrameDrawer.get_bounding(frame);\r\n      ctx.translate(-l, -t);\r\n      const { pic } = frame;\r\n      if (pic) this.draw_frame_bound(ctx, pic);\r\n      if (img && pic) ctx.drawImage(img, pic.x, pic.y, pic.w, pic.h, 0, 0, pic.w, pic.h);\r\n      if (frame.itr) loop_arr(frame.itr, itr => this.draw_itr(ctx, itr))\r\n      if (frame.bdy) loop_arr(frame.bdy, bdy => this.draw_bdy(ctx, bdy))\r\n      if (frame.opoint) loop_arr(frame.opoint, opoint => this.draw_opoint(ctx, opoint))\r\n      if (frame.cpoint) this.draw_cpoint(ctx, frame.cpoint);\r\n      if (frame.wpoint) this.draw_wpoint(ctx, frame.wpoint);\r\n      this.draw_center(ctx, frame);\r\n    }\r\n    this.endDraw(ctx);\r\n\r\n    super.render(ctx)\r\n  }\r\n}\r\n","import Frame from \"../../Component/Frame\";\r\nimport { Cross } from \"../../Component/Icons/Cross\";\r\nimport { Space } from \"../../Component/Space\";\r\nimport { IEntityData } from \"../../LF2/defines/IEntityData\";\r\nimport { IItrPrefab } from \"../../LF2/defines/IItrPrefab\";\r\nimport { loop_arr } from \"../../LF2/utils/array/loop_arr\";\r\nimport { traversal } from \"../../LF2/utils/container_help/traversal\";\r\nimport { ITR_EFFECT_SELECT_PROPS, ITR_KIND_SELECT_PROPS } from \"../EntityEditorView\";\r\nimport { useEditor } from \"./useEditor\";\r\nexport interface IItrPrefabViewProps {\r\n  label: string;\r\n  data: IEntityData;\r\n  value: IItrPrefab;\r\n  on_changed?(): void;\r\n}\r\nexport function ItrPrefabView(props: IItrPrefabViewProps) {\r\n  const { value, label, data, on_changed } = props;\r\n\r\n  const on_remove = () => {\r\n    if (!data.itr_prefabs) return;\r\n    delete data.itr_prefabs[value.id];\r\n    on_changed?.();\r\n  }\r\n  const on_input_id_blur = (e: React.FocusEvent<HTMLInputElement, Element>) => {\r\n    if (!data.itr_prefabs) return;\r\n    const prev_id = value.id;\r\n    const next_id = e.target.value.trim();\r\n    if (prev_id === next_id || !next_id) {\r\n      e.target.value = prev_id;\r\n      return;\r\n    }\r\n    if (next_id in data.itr_prefabs) {\r\n      alert('ID不可重复')\r\n      e.target.value = value.id;\r\n      return;\r\n    }\r\n    delete data.itr_prefabs[prev_id];\r\n    value.id = next_id;\r\n    data.itr_prefabs[next_id] = value;\r\n    traversal(data.frames, (_, { itr }) => loop_arr(itr, (itr) => {\r\n      if (!itr) return;\r\n      if (itr.prefab_id?.trim() === prev_id) {\r\n        itr.prefab_id = next_id;\r\n      }\r\n    }))\r\n  }\r\n\r\n  const {\r\n    Number, Text, String, Number3, Qube, Select\r\n  } = useEditor(value)\r\n\r\n  return (\r\n    <Frame label={label} >\r\n      <Cross style={{ position: 'absolute', right: 0, top: 0, border: 'none' }} onClick={on_remove} hoverable />\r\n      <Space direction=\"column\" stretchs>\r\n        <String field=\"id\" onBlur={on_input_id_blur} />\r\n        <String field=\"name\" />\r\n        <Select field=\"kind\" {...ITR_KIND_SELECT_PROPS} />\r\n        <Select field=\"effect\" {...ITR_EFFECT_SELECT_PROPS} />\r\n        <Number field=\"injury\" />\r\n        <Number field=\"arest\" />\r\n        <Number field=\"vrest\" />\r\n        <Number field=\"motionless\" />\r\n        <Number field=\"shaking\" />\r\n        <Number field=\"fall\" />\r\n        <Number field=\"bdefend\" />\r\n        <Text field=\"test\" />\r\n        <Number3 name=\"velocity\" fields={['dvx', 'dvy', 'dvz']} />\r\n        <Qube title=\"bounding\" fields={['x', 'y', 'z', 'w', 'h', 'l']} />\r\n      </Space>\r\n    </Frame>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"lfui_border\":\"styles_lfui_border__R2qJq\",\"lfui_hoverable_border\":\"styles_lfui_hoverable_border__XPd1B\",\"lfui_hoverable_border_hover\":\"styles_lfui_hoverable_border_hover__Y375B\",\"lfui_hoverable_border_disabled\":\"styles_lfui_hoverable_border_disabled__ZiDxk\",\"lfui_hoverable_border_focus\":\"styles_lfui_hoverable_border_focus__WTXMW\",\"lfui_hoverable_border_active\":\"styles_lfui_hoverable_border_active__iqymU\",\"frame_list_view\":\"styles_frame_list_view__OdI0+\",\"frame_list_item_view\":\"styles_frame_list_item_view__pC4t5\",\"lfui_no_shadow\":\"styles_lfui_no_shadow__yXlCX\",\"_lfui_no_border\":\"styles__lfui_no_border__a3jym\",\"lfui_no_border\":\"styles_lfui_no_border__FNWeL\",\"_lfui_no_round\":\"styles__lfui_no_round__P68XX\",\"lfui_no_round\":\"styles_lfui_no_round__7BYMQ\",\"lfui_min_input_size\":\"styles_lfui_min_input_size__n-0bn\",\"float_label\":\"styles_float_label__UC4QN\",\"breathe\":\"styles_breathe__zfE1O\"};","import { Board, IFactory } from \"@fimagine/writeboard\";\r\nimport VirtualList from \"rc-virtual-list\";\r\nimport { useRef } from \"react\";\r\nimport { Input } from \"../../Component/Input\";\r\nimport { Space } from \"../../Component/Space\";\r\nimport { Text } from \"../../Component/Text\";\r\nimport { IFrameInfo } from \"../../LF2/defines\";\r\nimport { IEntityData } from \"../../LF2/defines/IEntityData\";\r\nimport { IZip } from \"../../LF2/ditto\";\r\nimport { EditorShapeEnum } from \"../EditorShapeEnum\";\r\nimport { FrameDrawer, FrameDrawerData } from \"../FrameDrawer\";\r\nimport { WorkspaceColumnView } from \"../WorkspaceColumnView\";\r\nimport styles from \"./styles.module.scss\";\r\nexport interface IFrameListViewProps {\r\n  data?: IEntityData;\r\n  zip?: IZip;\r\n  ref_board: React.RefObject<Board | undefined>;\r\n  factory: IFactory;\r\n  on_pick_frame?(frame: IFrameInfo): void;\r\n}\r\n\r\n\r\nexport function FrameListView(props: IFrameListViewProps) {\r\n  const { data, zip, ref_board, factory, on_pick_frame } = props;\r\n  const ref_next_frame = useRef<IFrameInfo>(undefined)\r\n  if (!data) return void 0;\r\n  const on_frame_change = (frame: IFrameInfo, data: IEntityData) => {\r\n    const board = ref_board.current;\r\n    if(!board) return;\r\n    const shape_data = factory.newShapeData(EditorShapeEnum.LF2_FRAME) as FrameDrawerData;\r\n    shape_data.frame = frame;\r\n    shape_data.zip = zip;\r\n    shape_data.data = data;\r\n    shape_data.layer = board.layer().id;\r\n    shape_data.id = 'frame';\r\n    shape_data.z = factory.newZ(shape_data);\r\n    const { w, h } = FrameDrawer.get_size(frame);\r\n    Object.assign(shape_data, { w: w * 2, h: h * 2 })\r\n    let shape = board.shapes().find(v => v.data.id === 'frame') as FrameDrawer | undefined;\r\n    if (!shape) {\r\n      shape = factory.newShape(shape_data) as FrameDrawer;\r\n      board.add(shape);\r\n    } else {\r\n      let { x, y } = shape;\r\n      if (shape.data.frame) {\r\n        const a = FrameDrawer.get_bounding(shape.data.frame)\r\n        const b = FrameDrawer.get_bounding(shape_data.frame)\r\n        console.log(a.l, b.l)\r\n        x += (b.l - a.l + shape.data.frame.centerx - shape_data.frame.centerx) * 2\r\n        y += (b.t - a.t + shape.data.frame.centery - shape_data.frame.centery) * 2\r\n      }\r\n      shape_data.x = x\r\n      shape_data.y = y\r\n      shape.merge(shape_data)\r\n      board.setSelects([shape])\r\n    }\r\n  }\r\n  const frames: IFrameInfo[] = []\r\n  for (const key in data.frames)\r\n    frames.push(data.frames[key])\r\n  const header = <WorkspaceColumnView.TitleAndAdd title=\"帧列表\" />\r\n\r\n  const on_key_down = (e: React.KeyboardEvent, frame: IFrameInfo) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    switch (e.key.toLowerCase()) {\r\n      case 'enter': {\r\n        on_pick_frame?.(frame)\r\n        on_frame_change(frame, data)\r\n        return;\r\n      }\r\n    }\r\n    const ele = (e.target as HTMLElement);\r\n    const scroll_view = (ele.parentElement as HTMLElement | null)\r\n    if (!scroll_view) return;\r\n    const ele_collection = scroll_view.children;\r\n    const next_ele = ((ele.nextElementSibling ?? ele_collection.item(0)) as HTMLElement | null)\r\n    const prev_ele = ((ele.previousElementSibling ?? ele_collection.item(ele_collection.length - 1)) as HTMLElement | null)\r\n    const pt = parseInt(getComputedStyle(scroll_view).paddingTop)\r\n    switch (e.key.toLowerCase()) {\r\n      case 'arrowdown':\r\n      case 'pagedown': {\r\n        if (!next_ele) break;\r\n        scroll_view.scrollTo(0, next_ele.offsetTop - pt)\r\n        next_ele.focus()\r\n        const idx = (frames.indexOf(frame) + 1) % frames.length\r\n        ref_next_frame.current = frames[idx]\r\n        break;\r\n      }\r\n      case 'arrowup':\r\n      case 'pageup': {\r\n        if (!prev_ele) break;\r\n        scroll_view.scrollTo(0, prev_ele.offsetTop - pt)\r\n        prev_ele.focus()\r\n        const idx = (frames.indexOf(frame) + frames.length - 1) % frames.length\r\n        ref_next_frame.current = frames[idx]\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  const on_key_up = (e: React.KeyboardEvent) => {\r\n    switch (e.key.toLowerCase()) {\r\n      case 'arrowdown':\r\n      case 'pagedown':\r\n      case 'arrowup':\r\n      case 'pageup': {\r\n        const next_frame = ref_next_frame.current;\r\n        if (next_frame) {\r\n          on_pick_frame?.(next_frame)\r\n          on_frame_change(next_frame, data)\r\n          ref_next_frame.current = void 0;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <Space.Broken>\r\n      <WorkspaceColumnView header={header}>\r\n        <VirtualList\r\n          data={frames}\r\n          className={styles.frame_list_view}\r\n          itemKey={i => i.id}>\r\n          {(frame, index, props) => {\r\n            return (\r\n              <div\r\n                tabIndex={-1}\r\n                className={styles.frame_list_item_view}\r\n                onClick={() => {\r\n                  on_pick_frame?.(frame)\r\n                  on_frame_change(frame, data)\r\n                }}\r\n                onKeyUp={on_key_up}\r\n                onKeyDown={e => on_key_down(e, frame)}>\r\n                <Text>{frame.id}</Text>\r\n                <Input\r\n                  variants=\"no_border\"\r\n                  defaultValue={frame.name}\r\n                  onChange={v => frame.name = v}\r\n                  style={{ flex: 1 }}\r\n                  clearable />\r\n              </div>\r\n            )\r\n          }}\r\n        </VirtualList>\r\n      </WorkspaceColumnView>\r\n    </Space.Broken>\r\n  )\r\n}","import Frame, { IFrameProps } from \"../Component/Frame\";\r\nimport { Cross } from \"../Component/Icons/Cross\";\r\nimport { Space } from \"../Component/Space\";\r\nimport { IEntityData } from \"../LF2/defines/IEntityData\";\r\nimport { ILegacyPictureInfo } from \"../LF2/defines/ILegacyPictureInfo\";\r\nimport { traversal } from \"../LF2/utils/container_help/traversal\";\r\nimport { useEditor } from \"./FrameEditorView/useEditor\";\r\nexport interface IFileEditorViewProps extends IFrameProps {\r\n  data: IEntityData;\r\n  pic_info: ILegacyPictureInfo;\r\n  on_changed?(): void;\r\n}\r\nexport function PicInfoEditorView(props: IFileEditorViewProps) {\r\n  const { data, pic_info, on_changed, ..._p } = props;\r\n  const on_input_id_blur = (e: React.FocusEvent<HTMLInputElement, Element>) => {\r\n    const prev_id = pic_info.id;\r\n    const next_id = e.target.value.trim();\r\n    if (prev_id === next_id || !next_id) {\r\n      e.target.value = prev_id;\r\n      return;\r\n    }\r\n    if (next_id in data.base.files) {\r\n      alert('ID不可重复')\r\n      e.target.value = pic_info.id;\r\n      return;\r\n    }\r\n    delete data.base.files[prev_id];\r\n    pic_info.id = next_id;\r\n    data.base.files[next_id] = pic_info;\r\n    traversal(data.frames, (_, { pic }) => {\r\n      if (!pic) return;\r\n      if (pic.tex.trim() === prev_id) {\r\n        pic.tex = next_id;\r\n      }\r\n    })\r\n    traversal(data.base.files, (_, v) => {\r\n      v.variants?.forEach((v, idx, arr) => {\r\n        if (v.trim() === prev_id) {\r\n          arr[idx] = next_id;\r\n        }\r\n      })\r\n    })\r\n    on_changed?.();\r\n  }\r\n  const on_click_remove = () => {\r\n\r\n    for (const k in data.frames) {\r\n      if (data.frames[k].pic?.tex.trim() === pic_info.id) {\r\n        alert(`已经被帧:${k}引用，不能删除!`)\r\n        return;\r\n      }\r\n    }\r\n    delete data.base.files[pic_info.id]\r\n    on_changed?.();\r\n  }\r\n  const { String, Strings, ImageFile: EditorImg } = useEditor(pic_info)\r\n  return (\r\n    <Frame {..._p} label='图片索引信息'>\r\n      <Cross style={{ position: 'absolute', top: 0, right: 0 }} onClick={on_click_remove} hoverable />\r\n      <Space vertical stretchs>\r\n        <String field='id' title='图片索引id' onBlur={on_input_id_blur} />\r\n        <EditorImg field='path' title='图片路径' clearable={false} />\r\n        <Strings field=\"variants\" placeholder=\"图片索引id\" title=\"变体\"/>\r\n      </Space>\r\n    </Frame>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"lfui_border\":\"styles_lfui_border__V6jAK\",\"lfui_hoverable_border\":\"styles_lfui_hoverable_border__bBijB\",\"tree_item_view_wrapper\":\"styles_tree_item_view_wrapper__ttRt4\",\"frame_preview_view\":\"styles_frame_preview_view__0PzIR\",\"lfui_min_input_size\":\"styles_lfui_min_input_size__MgryY\",\"top_bar\":\"styles_top_bar__SxJvN\",\"cell_inner\":\"styles_cell_inner__kqvf2\",\"entity_base_editor\":\"styles_entity_base_editor__zSJww\",\"scroll_zone\":\"styles_scroll_zone__HOuDR\",\"header_main_footer_view\":\"styles_header_main_footer_view__902PC\",\"content_zone\":\"styles_content_zone__zG4Yz\",\"inner_shadow_v\":\"styles_inner_shadow_v__kzbg4\",\"file_editor_view\":\"styles_file_editor_view__9jzR3\"};","import { Board, FactoryEnum, Gaia, ToolEnum } from \"@fimagine/writeboard\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { DomAdapter } from \"splittings-dom/dist/es/splittings-dom\";\r\nimport \"splittings-dom/dist/es/splittings-dom.css\";\r\nimport { Slot, Workspaces } from \"splittings/dist/es/splittings\";\r\nimport { Button } from \"../Component/Buttons/Button\";\r\nimport { Checkbox } from \"../Component/Checkbox\";\r\nimport Combine from \"../Component/Combine\";\r\nimport Frame from \"../Component/Frame\";\r\nimport { Plus } from '../Component/Icons/Plus';\r\nimport Select from \"../Component/Select\";\r\nimport Show from \"../Component/Show\";\r\nimport { Space } from \"../Component/Space\";\r\nimport { TabButtons } from \"../Component/TabButtons\";\r\nimport Titled from \"../Component/Titled\";\r\nimport { ITreeNode, ITreeNodeGetIcon, TreeView } from \"../Component/TreeView\";\r\nimport { IBgData, IFrameInfo } from \"../LF2/defines\";\r\nimport { EntityEnum } from \"../LF2/defines/EntityEnum\";\r\nimport { IEntityData } from \"../LF2/defines/IEntityData\";\r\nimport { ILegacyPictureInfo } from \"../LF2/defines/ILegacyPictureInfo\";\r\nimport { Ditto, IZip } from \"../LF2/ditto\";\r\nimport { ILf2Callback } from \"../LF2/ILf2Callback\";\r\nimport { LF2 } from \"../LF2/LF2\";\r\nimport { traversal } from \"../LF2/utils/container_help/traversal\";\r\nimport { is_num } from \"../LF2/utils/type_check\";\r\nimport { open_file } from \"../Utils/open_file\";\r\nimport { shared_ctx } from './Context';\r\nimport { EditorShapeEnum } from \"./EditorShapeEnum\";\r\nimport { EntityBaseDataView } from \"./EntityBaseDataView\";\r\nimport { EntityDataEditorView } from \"./EntityDataEditorView\";\r\nimport { FrameDrawer, FrameDrawerData } from \"./FrameDrawer\";\r\nimport { FrameEditor } from \"./FrameEditorView\";\r\nimport { ItrPrefabView } from \"./FrameEditorView/ItrPrefabView\";\r\nimport { FrameListView } from \"./FrameListView\";\r\nimport { PicInfoEditorView } from \"./PicInfoEditorView\";\r\nimport styles from \"./styles.module.scss\";\r\nimport { WorkspaceColumnView } from \"./WorkspaceColumnView\";\r\n\r\n\r\nenum EntityEditing {\r\n  base = '基础信息',\r\n  frame_index = '特定帧',\r\n  frames = '帧列表',\r\n  pic = '图片',\r\n  itr_pre = 'itr预设',\r\n  bdy_pre = 'bdy预设',\r\n}\r\nGaia.registerShape(\r\n  EditorShapeEnum.LF2_FRAME,\r\n  () => new FrameDrawerData(),\r\n  (d) => new FrameDrawer(d),\r\n  { desc: 'lf2 frame drawer' }\r\n)\r\nconst factory = Gaia.factory(FactoryEnum.Default)();\r\n\r\nexport interface IEditorViewProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  onClose?: (e: React.MouseEvent<HTMLButtonElement>) => void;\r\n  loading?: boolean;\r\n  open?: boolean;\r\n  lf2?: LF2;\r\n}\r\ntype TTreeNode = ITreeNode<IEntityData | IBgData | null>\r\n\r\nconst dat_type_emoji_map: { [x in string]?: React.ReactNode } = {\r\n  [EntityEnum.Ball]: '🥏',\r\n  [EntityEnum.Weapon]: '🗡️',\r\n  [EntityEnum.Fighter]: '🏃‍➡️',\r\n  [EntityEnum.Entity]: '🌀',\r\n  'background': '⛰️'\r\n}\r\nconst get_icon: ITreeNodeGetIcon<IEntityData | IBgData | null> = ({ node, depth }) => {\r\n  if (depth === 0) return '📦';\r\n  if (!node.data) return void 0;\r\n  const type = node.data.type;\r\n  return dat_type_emoji_map[type]\r\n}\r\n\r\nexport default function EditorView(props: IEditorViewProps) {\r\n  const ref_board = useRef<Board>(undefined);\r\n  const [board_wrapper, set_board_wrapper] = useState<HTMLDivElement>()\r\n  const { onClose, loading, open, lf2, ..._p } = props;\r\n  const [zip_name, set_zip_name] = useState('');\r\n  const [zips, set_zips] = useState<IZip[]>();\r\n  const [zip, set_zip] = useState<IZip>();\r\n\r\n  useEffect(() => {\r\n    if (!lf2) return;\r\n    const cb: ILf2Callback = {\r\n      on_zips_changed: (zips) => set_zips(zips)\r\n    }\r\n    lf2.callbacks.add(cb);\r\n    return () => lf2.callbacks.del(cb);\r\n\r\n  }, [lf2])\r\n\r\n  const [opens, set_opens] = useState<string[]>()\r\n  const [tree, set_tree] = useState<TTreeNode>();\r\n  const ref_editing_node = useRef<TTreeNode>(undefined)\r\n  const ref_editing_data = useRef<IEntityData>(undefined)\r\n  const [editing_node, set_editing_node] = useState<TTreeNode>();\r\n  const [editing_data, set_editing_data] = useState<IEntityData>();\r\n  const [tab, set_tab] = useState<EntityEditing | undefined>(EntityEditing.base);\r\n  ref_editing_node.current = editing_node;\r\n  ref_editing_data.current = editing_data;\r\n  const [editing_frame, set_editing_frame] = useState<IFrameInfo>()\r\n\r\n  const frame_list_view = useMemo(() => {\r\n    return (\r\n      <FrameListView\r\n        factory={factory}\r\n        data={editing_data}\r\n        on_pick_frame={set_editing_frame}\r\n        zip={zip}\r\n        ref_board={ref_board}\r\n      />\r\n    )\r\n  }, [editing_data, zip])\r\n\r\n  const [state, set_state] = useState({\r\n    mp3: false,\r\n    flat: true,\r\n    json: true,\r\n    img: false,\r\n    others: true\r\n  })\r\n  const filters_tree = useMemo(() => {\r\n    const handle_tree_node = (src: TTreeNode): TTreeNode | undefined => {\r\n      if (!src.children) {\r\n        if (src.key.endsWith('.mp3')) {\r\n          if (!state.mp3) return;\r\n        } else if (src.key.endsWith('.json')) {\r\n          if (!state.json) return;\r\n        } else if (src.key.endsWith('.png')) {\r\n          if (!state.img) return;\r\n        } else if (src.key.endsWith('.webp')) {\r\n          if (!state.img) return;\r\n        } else if (!state.others) {\r\n          return;\r\n        }\r\n      }\r\n      const ret: TTreeNode = { ...src }\r\n      if (!src.children) return ret;\r\n      const children: TTreeNode[] = ret.children = []\r\n      for (const child of src.children) {\r\n        const o = handle_tree_node(child)\r\n        if (o) children.push(o)\r\n      }\r\n      return ret;\r\n    }\r\n\r\n    const ret = tree ? handle_tree_node(tree) : void 0;\r\n    if (ret && state.flat) {\r\n      const children: TTreeNode[] = []\r\n      const flat = (i: TTreeNode) => {\r\n        if (!i.children) return;\r\n        for (const child of i.children) {\r\n          if (!child.children) children.push({ ...child, label: '' + child.title });\r\n          else flat(child)\r\n        }\r\n      }\r\n      flat(ret)\r\n      ret.children = children;\r\n    }\r\n    return ret\r\n  }, [tree, state])\r\n\r\n  const on_click_read_zip = async () => {\r\n    const [file] = await open_file({ accept: \".zip\" });\r\n    const zip = await Ditto.Zip.read_file(file);\r\n    set_zip(zip);\r\n    set_zip_name(file.name)\r\n  };\r\n\r\n  const load_zip = async (name: string, zip: IZip) => {\r\n    const root: TTreeNode = { key: '', label: name, title: '' };\r\n    for (const key in zip.files) {\r\n      let node = root;\r\n      const parts = key.split('/');\r\n      const j = await zip.file(key)?.json().catch(v => void 0);\r\n      for (let part_idx = 0; part_idx < parts.length; part_idx++) {\r\n        const part = parts[part_idx];\r\n        const children = node.children = node.children || [];\r\n        const idx = children.findIndex(v => v.label === part);\r\n        if (idx >= 0) node = children[idx];\r\n        else children.push(node = {\r\n          key: parts.slice(0, part_idx + 1).join('/'),\r\n          label: part,\r\n          title: parts.slice(0, part_idx + 1).join('/'),\r\n          data: j\r\n        });\r\n      }\r\n    }\r\n    set_opens([root.key]);\r\n    set_tree(root);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (zip) load_zip(zip_name, zip)\r\n  }, [zip_name, zip])\r\n\r\n\r\n  useEffect(() => {\r\n    const container = board_wrapper;\r\n    if (!container || !open) return;\r\n    const board = ref_board.current = factory.newWhiteBoard({ element: container });\r\n    board.setToolType(ToolEnum.Selector);\r\n    (window as any).board = board;\r\n    const ob = new ResizeObserver(() => {\r\n      const { width, height } = container.getBoundingClientRect();\r\n      board.width = width || 1;\r\n      board.height = height || 1;\r\n      board.markDirty({ x: 0, y: 0, w: width, h: height })\r\n    })\r\n    ob.observe(container)\r\n    return () => {\r\n      board.layer().destory();\r\n      ob.disconnect();\r\n    }\r\n  }, [open, board_wrapper])\r\n\r\n  const [change_flag, set_change_flag] = useState(0)\r\n  // const files = editing_data?.base.files;\r\n\r\n  const base_data_view = useMemo(() => {\r\n    if (!editing_data) return;\r\n    return (\r\n      <Space.Broken>\r\n        <EntityBaseDataView\r\n          value={editing_data}\r\n          on_changed={() => set_change_flag(change_flag + 1)}\r\n          style={{ flex: 1, overflow: 'auto', flexFlow: 'column' }}\r\n        />\r\n      </Space.Broken>\r\n    );\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [editing_data, change_flag])\r\n\r\n  const pic_list_view = useMemo(() => {\r\n    if (!editing_data) return;\r\n    const views: React.ReactNode[] = []\r\n    if (editing_data.base.files) traversal(editing_data.base.files, (k, v) => {\r\n      views.push(\r\n        <PicInfoEditorView\r\n          pic_info={v as ILegacyPictureInfo}\r\n          data={editing_data}\r\n          key={'FileEditorView_' + k}\r\n          on_changed={() => set_change_flag(change_flag + 1)}\r\n        />\r\n      )\r\n    })\r\n\r\n    const add = () => {\r\n      let i = Object.keys(editing_data.base.files).length;\r\n      while (('' + i) in editing_data.base.files) ++i;\r\n      const pic_info: ILegacyPictureInfo = {\r\n        row: 0,\r\n        col: 0,\r\n        id: '' + i,\r\n        path: '',\r\n        cell_w: 0,\r\n        cell_h: 0,\r\n      }\r\n      editing_data.base.files['' + i] = pic_info\r\n      set_change_flag(change_flag + 1);\r\n    }\r\n    const header = <WorkspaceColumnView.TitleAndAdd title=\"实体图片\" on_add={add} />\r\n    return (\r\n      <Space.Broken>\r\n        <WorkspaceColumnView header={header}>\r\n          <Space.Item space vertical frame className={styles.file_editor_view}>\r\n            {views}\r\n          </Space.Item>\r\n        </WorkspaceColumnView>\r\n      </Space.Broken>\r\n    )\r\n  }, [editing_data, change_flag])\r\n\r\n  const itr_prefabs = editing_data?.itr_prefabs;\r\n  const itr_prefab_list_view = useMemo(() => {\r\n    if (!editing_data) return void 0;\r\n    const views: React.ReactNode[] = []\r\n    if (itr_prefabs) traversal(itr_prefabs, (k, value) => {\r\n      if (!value) return;\r\n      const label = `itr_prefabs: ${k}`\r\n      views.push(\r\n        <ItrPrefabView\r\n          label={label}\r\n          value={value}\r\n          data={editing_data}\r\n          key={label}\r\n          on_changed={() => set_change_flag(change_flag + 1)} />\r\n      )\r\n    })\r\n    const add = () => {\r\n      if (itr_prefabs) {\r\n        let i = Object.keys(itr_prefabs).length;\r\n        while (('' + i) in itr_prefabs) ++i;\r\n        itr_prefabs['' + i] = { id: '' + i }\r\n      } else {\r\n        editing_data.itr_prefabs = {};\r\n        editing_data.itr_prefabs['0'] = { id: '0' }\r\n      }\r\n      set_change_flag(change_flag + 1);\r\n    }\r\n\r\n    return (\r\n      <Space.Broken>\r\n        <WorkspaceColumnView header={\r\n          <WorkspaceColumnView.TitleAndAdd title='ITR预设' on_add={add} />\r\n        }>\r\n          <div style={{ overflow: 'scroll', width: '100%', height: '100%' }}>\r\n            <Space vertical className={styles.file_editor_view}>\r\n              {views}\r\n            </Space>\r\n          </div>\r\n        </WorkspaceColumnView>\r\n      </Space.Broken>\r\n    );\r\n  }, [itr_prefabs, editing_data, change_flag])\r\n\r\n\r\n  const ref_wprkspace_container = useRef<HTMLDivElement>(null);\r\n  const ref_workspace = useRef<Workspaces<DomAdapter> | undefined>(void 0)\r\n  const ref_adapter = useRef<DomAdapter | undefined>(void 0)\r\n  const [cells, set_cells] = useState<Readonly<(HTMLElement | undefined)[]>>([])\r\n  const views = useMemo(() => {\r\n    const on_click_item = (node: TTreeNode) => {\r\n      if (node.children) {\r\n        set_opens((old = []) => {\r\n          const ret = old.filter(v => v !== node.key)\r\n          if (ret.length === old.length)\r\n            ret.push(node.key)\r\n          return ret.length ? ret : void 0;\r\n        })\r\n      } else if (node.data?.type) {\r\n        switch (node.data?.type) {\r\n          case EntityEnum.Entity:\r\n          case EntityEnum.Fighter:\r\n          case EntityEnum.Weapon:\r\n          case EntityEnum.Ball:\r\n            zip?.file(node.key)?.json().then(r => {\r\n              const editing_node = ref_editing_node.current;\r\n              const editing_data = ref_editing_data.current;\r\n              if (zip && editing_node && editing_data) {\r\n                zip.set(editing_node.key, JSON.stringify(editing_data))\r\n              }\r\n              set_editing_node(node)\r\n              set_editing_data(r)\r\n            });\r\n            break;\r\n          default: {\r\n            zip?.file(node.key)?.text().then(r => {\r\n              const editing_node = ref_editing_node.current;\r\n              const editing_data = ref_editing_data.current;\r\n              if (zip && editing_node && editing_data) {\r\n                zip.set(editing_node.key, JSON.stringify(editing_data))\r\n              }\r\n              set_editing_node(node)\r\n              set_editing_data(void 0)\r\n            });\r\n          }\r\n        }\r\n      } else if (node.key.endsWith('.txt') || node.key.endsWith('.json')) {\r\n        zip?.file(node.key)?.text().then(r => {\r\n          const editing_node = ref_editing_node.current;\r\n          const editing_data = ref_editing_data.current;\r\n          if (zip && editing_node && editing_data) {\r\n            zip.set(editing_node.key, JSON.stringify(editing_data))\r\n          }\r\n          set_editing_node(node)\r\n          set_editing_data(void 0)\r\n        });\r\n      }\r\n    }\r\n    return (\r\n      cells.map(cell => {\r\n        if (!cell) return null;\r\n        switch (cell.id) {\r\n          case 'res_tree_cell':\r\n            return createPortal(\r\n              <WorkspaceColumnView\r\n                className={styles.cell_inner}\r\n                header={\r\n                  <WorkspaceColumnView.TitleAndAdd title={\r\n                    <Space>\r\n                      <Titled label=\"mp3\"><Checkbox value={state.mp3} onChange={v => set_state(o => ({ ...o, mp3: v }))} /></Titled>\r\n                      <Titled label=\"flat\"><Checkbox value={state.flat} onChange={v => set_state(o => ({ ...o, flat: v }))} /></Titled>\r\n                      <Titled label=\"json\"><Checkbox value={state.json} onChange={v => set_state(o => ({ ...o, json: v }))} /></Titled>\r\n                      <Titled label=\"img\"><Checkbox value={state.img} onChange={v => set_state(o => ({ ...o, img: v }))} /></Titled>\r\n                      <Titled label=\"others\"><Checkbox value={state.others} onChange={v => set_state(o => ({ ...o, others: v }))} /></Titled>\r\n                    </Space>\r\n                  } />\r\n                }>\r\n                <Space.Item space vertical frame className={styles.file_editor_view}>\r\n                  <TreeView\r\n                    node={filters_tree}\r\n                    opens={opens}\r\n                    on_click_item={on_click_item}\r\n                    get_icon={get_icon}\r\n                  />\r\n                </Space.Item>\r\n              </WorkspaceColumnView>,\r\n              cell,\r\n              cell.id\r\n            )\r\n          case 'entity_info_cell':\r\n            return createPortal(\r\n              <div\r\n                className={styles.cell_inner}\r\n                style={{ display: 'flex', flexDirection: 'column', gap: 5 }}>\r\n                <EntityDataEditorView\r\n                  value={editing_data}\r\n                  on_changed={() => set_change_flag(change_flag + 1)}\r\n                  className={styles.entity_base_editor} />\r\n                <Space.Item style={{ display: 'flex' }}>\r\n                  <TabButtons\r\n                    value={tab}\r\n                    items={Object.values(EntityEditing)}\r\n                    parse={v => [v, v]}\r\n                    onChange={v => set_tab(v)}\r\n                    style={{ flex: 1 }}\r\n                    styles={{ button: { flex: 1 } }} />\r\n                </Space.Item>\r\n                <Space.Broken>\r\n                  {tab === EntityEditing.base ? base_data_view : null}\r\n                  {tab === EntityEditing.frames ? frame_list_view : null}\r\n                  {tab === EntityEditing.pic ? pic_list_view : null}\r\n                  {tab === EntityEditing.itr_pre ? itr_prefab_list_view : null}\r\n                </Space.Broken>\r\n              </div>,\r\n              cell,\r\n              cell.id\r\n            )\r\n          case 'frame_preview_cell':\r\n            return createPortal(\r\n              <Frame\r\n                ref={(r) => set_board_wrapper(prev => r || prev)}\r\n                className={styles.cell_inner}\r\n                style={{ background: 'transparent' }} />,\r\n              cell,\r\n              cell.id\r\n            )\r\n          case 'frame_editor_cell':\r\n            if (!editing_frame || !editing_data)\r\n              return null;\r\n            return createPortal(\r\n              <FrameEditor\r\n                value={editing_frame}\r\n                data={editing_data} />,\r\n              cell,\r\n              cell.id\r\n            )\r\n        }\r\n        return null\r\n      })\r\n    )\r\n  }, [base_data_view, cells, change_flag, editing_data, editing_frame, zip,\r\n    filters_tree, frame_list_view, itr_prefab_list_view, opens, pic_list_view,\r\n    state.flat, state.img, state.json, state.mp3, state.others, tab\r\n  ])\r\n\r\n  useEffect(() => {\r\n    const container = ref_wprkspace_container.current\r\n    if (!container) return;\r\n\r\n    const adpater = ref_adapter.current ? ref_adapter.current :\r\n      ref_adapter.current = new DomAdapter(container)\r\n\r\n    const workspace = (window as any).workspace = (\r\n      ref_workspace.current ?\r\n        ref_workspace.current :\r\n        ref_workspace.current = new Workspaces(adpater)\r\n    );\r\n    workspace.slots.clear()\r\n\r\n\r\n    workspace.set_root(\r\n      new Slot(workspace, {\r\n        id: 'root',\r\n        type: 'h',\r\n        children: [\r\n          { id: 'res_tree_cell' },\r\n          { id: 'empty' }\r\n        ]\r\n      })\r\n    )\r\n    workspace.edit('res_tree_cell', s => s.weight = 250)\r\n    workspace.edit('empty', s => s.weight = container.offsetWidth - 250)\r\n\r\n    workspace.on_changed = () => {\r\n      const cells: HTMLElement[] = []\r\n      for (const leave of workspace.leaves) {\r\n        const cell = adpater.get_cell(leave);\r\n        if (!cell) { debugger; continue; }\r\n        if (!cell.parentElement) workspace.adapter.container.append(cell)\r\n        cells.push(cell)\r\n      }\r\n      set_cells(cells)\r\n    }\r\n\r\n    workspace.confirm();\r\n    const ob = new ResizeObserver(() => workspace.confirm())\r\n    ob.observe(container)\r\n    return () => ob.disconnect()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const workspace = ref_workspace.current;\r\n    if (!workspace) return;\r\n    const snapshot = workspace.root?.snapshot()\r\n    if (!snapshot) return;\r\n    const res_tree_slot = snapshot.find('res_tree_cell')\r\n    if (!res_tree_slot) return;\r\n    const { w: res_tree_slot_w } = res_tree_slot.rect!\r\n    const { w: root_w } = snapshot.slot.rect!;\r\n\r\n    if (editing_data) {\r\n      if (!workspace.slots.get('frame_preview_cell'))\r\n        workspace.add('res_tree_cell', 'right', { id: 'frame_preview_cell' })\r\n\r\n      if (!workspace.slots.get('entity_info_cell'))\r\n        workspace.add('res_tree_cell', 'right', { id: 'entity_info_cell' })\r\n      workspace.del('empty')\r\n\r\n      if (editing_frame) {\r\n        if (!workspace.slots.get('frame_editor_cell'))\r\n          workspace.add('frame_preview_cell', 'right', { id: 'frame_editor_cell' })\r\n      } else {\r\n        workspace.del('frame_editor_cell')\r\n      }\r\n      workspace.edit('res_tree_cell', (slot) => {\r\n        slot.weight = snapshot.w('res_tree_cell', 250)\r\n      })\r\n      workspace.edit('entity_info_cell', (slot) => {\r\n        slot.weight = snapshot.w('entity_info_cell', 350)\r\n      })\r\n      workspace.edit('frame_editor_cell', (slot) => {\r\n        slot.weight = snapshot.w('frame_editor_cell', 350)\r\n      })\r\n      workspace.edit('frame_preview_cell', (slot) => {\r\n        slot.weight = snapshot.w() - snapshot.w('entity_info_cell', 0) - snapshot.w('frame_editor_cell', 0) - snapshot.w('res_tree_cell', 0);\r\n      })\r\n    } else {\r\n      // workspace.del('empty')\r\n      workspace.del('entity_info_cell')\r\n      workspace.del('frame_preview_cell')\r\n      workspace.del('frame_editor_cell')\r\n\r\n      if (!workspace.slots.get('empty')) {\r\n        workspace.add('res_tree_cell', 'right', { id: 'empty' })\r\n      }\r\n\r\n      workspace.edits([0, 'res_tree_cell', 'empty'], 1, ([slot0, slot1, slot2]) => {\r\n        slot0.edit_rect(v => ({ ...v, w: root_w }))\r\n        slot1.weight = res_tree_slot_w\r\n        slot2.weight = root_w - res_tree_slot_w\r\n      })\r\n    }\r\n\r\n    workspace.confirm()\r\n  }, [editing_data, editing_frame])\r\n\r\n  return !open ? <></> : (\r\n    <shared_ctx.Provider value={{ zip }}>\r\n      {views}\r\n      <Space direction='column' {..._p} stretchs>\r\n        <Combine onClick={e => { e.stopPropagation(); e.preventDefault() }} className={styles.top_bar}>\r\n\r\n          <Button onClick={onClose} disabled={loading}>\r\n            ✕\r\n          </Button>\r\n          <Button\r\n            onClick={() => on_click_read_zip().catch(console.warn)}\r\n            disabled={loading}\r\n            variants={'no_border no_round'}>\r\n            打开\r\n          </Button>\r\n          <Show show={!!zips?.length}>\r\n            <Select\r\n              items={zips}\r\n              parse={i => [zips?.indexOf(i), i.name]}\r\n              value={zip ? zips?.indexOf(zip) : void 0}\r\n              onChange={(i) => {\r\n                set_zip(is_num(i) ? zips?.at(i) : void 0)\r\n              }} />\r\n          </Show>\r\n        </Combine>\r\n        <Space.Item style={{ alignSelf: 'stretch', flex: 1, minHeight: '0px', position: 'relative' }}>\r\n          <div ref={ref_wprkspace_container} />\r\n        </Space.Item>\r\n      </Space>\r\n    </shared_ctx.Provider>\r\n  );\r\n}\r\n","import { Base, IIconProps } from \"./Base\";\n\nexport function Plus(props: IIconProps) {\n  return (\n    <Base {...props}>\n      <Base.Path d={o.paths[0]} />\n      <Base.Path d={o.paths[1]} />\n    </Base>\n  );\n}\nconst o = Object.assign(Plus, Base)\nPlus.paths = [\n  o.m(o.w / 2, o.pad, o.w / 2, o.h - o.pad).ok(),\n  o.m(o.pad, o.h / 2, o.r, o.h / 2).ok()\n]","import { Button } from \"../Buttons/Button\";\r\nimport Combine, { ICombineProps } from \"../Combine\";\r\n\r\nexport interface ITabButtonsProps<V extends number | string, I> extends Omit<ICombineProps, 'children' | 'onChange'> {\r\n  value?: V;\r\n  items?: I[];\r\n  parse?(item: I, idx: number, items: I[]): [V, React.ReactNode];\r\n  onChange?(value: V | undefined, e: React.MouseEvent): void;\r\n  disabled?: boolean;\r\n  classNames?: {\r\n    button?: string\r\n  },\r\n  styles?: {\r\n    button?: React.CSSProperties\r\n  }\r\n}\r\nexport function TabButtons<V extends number | string, I>(props: ITabButtonsProps<V, I>) {\r\n  const { value, items, parse, onChange, disabled, classNames, styles,..._p } = props;\r\n\r\n  return (\r\n    <Combine {..._p} >\r\n      {\r\n        items?.map((item, idx, items) => {\r\n          const [v, label] = parse?.(item, idx, items) || []\r\n          return (\r\n            <Button\r\n              className={classNames?.button}\r\n              style={styles?.button}\r\n              key={idx}\r\n              onClick={(e) => v === value ? void 0 : onChange?.(v, e)}\r\n              actived={v === value}\r\n              disabled={disabled}\r\n              data-flex={1}>\r\n              {label}\r\n            </Button>\r\n          )\r\n        })\r\n      }\r\n    </Combine>\r\n  )\r\n}","import { useRef } from \"react\";\n\nexport function useThrough<F extends (...args: any[]) => any>(func: F | undefined | null, mine: F): F {\n  const ref_func = useRef(func);\n  ref_func.current = func;\n  const ret: F = ((...args: Parameters<F>) => {\n    ref_func.current?.(...args);\n    return mine(...args);\n  }) as F;\n  return ret;\n}\n","import { useRef, useState } from \"react\";\r\nimport { Button } from \"../../Component/Buttons/Button\";\r\nimport { Flex } from \"../../Component/Flex\";\r\nimport Frame, { IFrameProps } from \"../../Component/Frame\";\r\nimport Show from \"../../Component/Show\";\r\nimport { Space } from \"../../Component/Space\";\r\nimport { TabButtons } from \"../../Component/TabButtons\";\r\nimport { TextArea } from \"../../Component/TextArea\";\r\nimport { IFrameInfo, IItrInfo } from \"../../LF2/defines\";\r\nimport { IEntityData } from \"../../LF2/defines/IEntityData\";\r\nimport { ensure } from \"../../LF2/utils\";\r\nimport { map_arr } from \"../../LF2/utils/array/map_arr\";\r\nimport { ItrEditor } from \"./ItrEditor\";\r\nimport { IFieldProps } from \"./make_field_props\";\r\nimport { useThrough } from \"./useThrough\";\r\nconst TAG = 'FrameEditor'\r\nenum TabEnum {\r\n  Base = 'base',\r\n  Spd = 'spd',\r\n  Itr = 'itr',\r\n  Bdy = 'bdy',\r\n  Cpoint = 'cpoint',\r\n  Opoint = 'opoint',\r\n  Bpoint = 'bpoint'\r\n}\r\nconst tab_labels: Record<TabEnum, string> = {\r\n  [TabEnum.Base]: \"基础\",\r\n  [TabEnum.Spd]: \"速度\",\r\n  [TabEnum.Itr]: \"攻击\",\r\n  [TabEnum.Bdy]: \"身体\",\r\n  [TabEnum.Cpoint]: \"持械\",\r\n  [TabEnum.Opoint]: \"发射\",\r\n  [TabEnum.Bpoint]: \"吐血\"\r\n}\r\nexport const img_map = (window as any).img_map = new Map<string, HTMLImageElement>();\r\nexport interface IFrameEditorProps extends Omit<IFrameProps, 'onChange' | 'defaultValue'>, IFieldProps<IFrameInfo> {\r\n  data?: IEntityData;\r\n  selected?: boolean;\r\n}\r\nexport function FrameEditor(props: IFrameEditorProps) {\r\n  const { value, defaultValue = default_value, onChange, data, onBlur, onFocus, style, ..._p } = props;\r\n  const [editing, set_editing] = useState<TabEnum | undefined>(TabEnum.Base);\r\n  // const Editor = useEditor<IFrameInfo>(value)\r\n  const ref_root = useRef<HTMLDivElement>(null)\r\n  const label = `frame: ${value?.id}`\r\n  const on_blur = useThrough(onBlur, () => {\r\n    console.log(`[${TAG}>>on_blur] called.`)\r\n  })\r\n  const on_focus = useThrough(onFocus, () => {\r\n    console.log(`[${TAG}>>on_focus] called.`)\r\n  })\r\n  return (\r\n    <Frame\r\n      label={label}\r\n      {..._p}\r\n      ref={ref_root}\r\n      tabIndex={-1}\r\n      onBlur={on_blur}\r\n      onFocus={on_focus}\r\n      style={{ ...style, overflow: 'hidden', display: 'flex', flexDirection: 'column', gap: 5 }}>\r\n      <Space direction='column' stretchs>\r\n        {/* <Editor.String field='id' />\r\n        <Editor.String field='name' /> */}\r\n        <Space.Item style={{ display: 'flex' }}>\r\n          <TabButtons\r\n            style={{ flex: 1 }}\r\n            value={editing}\r\n            items={Object.values(TabEnum)}\r\n            parse={v => [v, tab_labels[v]]}\r\n            onChange={v => set_editing(prev => v === prev ? void 0 : v)}\r\n            styles={{ button: { flex: 1 } }} />\r\n        </Space.Item>\r\n        <Show show={editing === 'base'}>\r\n          <Space direction=\"column\" stretchs>\r\n            {/* <Editor.Select {...STATE_SELECT_PROPS} field=\"state\" />\r\n            <Titled float_label='图片' style={{ width: '100%' }}>\r\n              <Combine direction='column' style={{ flex: 1 }}>\r\n                <Input defaultValue={value.pic?.tex} prefix=\"tex\" style={{ flex: 1 }} data-flex={1} />\r\n                <Combine style={{ flex: 1 }} data-flex={1}>\r\n                  <Input defaultValue={value.pic?.x} prefix=\"x\" style={{ flex: 1 }} data-flex={1} />\r\n                  <Input defaultValue={value.pic?.y} prefix=\"y\" style={{ flex: 1 }} data-flex={1} />\r\n                  <Input defaultValue={value.pic?.w} prefix=\"w\" style={{ flex: 1 }} data-flex={1} />\r\n                  <Input defaultValue={value.pic?.h} prefix=\"h\" style={{ flex: 1 }} data-flex={1} />\r\n                </Combine>\r\n              </Combine>\r\n            </Titled>\r\n            <Editor.EditorVec2 name=\"锚点\" fields={['centerx', 'centery']} />\r\n            <Editor.Number defaultValue={value.wait} field=\"wait\" clearable={false} title=\"当前动作持续多少帧数\" /> */}\r\n          </Space>\r\n        </Show>\r\n        <Show show={editing === TabEnum.Spd}>\r\n          <Space direction=\"column\" stretchs>\r\n            {/* <Editor.Number3 name=\"速度\" fields={['dvx', 'dvy', 'dvz']} />\r\n            <Editor.Number3 name=\"加速度\" fields={['acc_x', 'acc_y', 'acc_z']} />\r\n            <Editor.Sel3\r\n              name=\"速度模式\"\r\n              fields={['vxm', 'vym', 'vzm']}\r\n              placeholders={['x', 'y', 'z']}\r\n              select={SPEED_MODE_SELECT_PROPS} /> */}\r\n          </Space>\r\n        </Show>\r\n      </Space>\r\n      <Show show={editing === 'itr'}>\r\n        <>\r\n          <Button\r\n            style={{ alignSelf: 'stretch' }}\r\n            onClick={() => {\r\n              const next: IFrameInfo = { ...(value || defaultValue) }\r\n              next.itr = ensure(next.itr, ItrEditor.genValue())\r\n              onChange?.(next)\r\n            }}>\r\n            add itr\r\n          </Button>\r\n          <Flex direction='column' gap={5} style={{ flex: 1, overflowY: 'auto', height: 0 }} >\r\n            {\r\n              map_arr(value?.itr, (itr, idx) => {\r\n                const name = `itr[${idx}]`;\r\n                const on_change = (itr: IItrInfo) => {\r\n                  const next: IFrameInfo = { ...(value || defaultValue) }\r\n                  next.itr = [...next.itr!]\r\n                  next.itr[idx] = itr;\r\n                  onChange?.(next)\r\n                }\r\n                const on_remove = () => {\r\n                  const next: IFrameInfo = { ...(value || defaultValue) }\r\n                  next.itr = [...next.itr!]\r\n                  next.itr.splice(idx, 1)\r\n                  if (!next.itr.length) delete next.itr\r\n                  onChange?.(next)\r\n                }\r\n                return (\r\n                  <ItrEditor\r\n                    key={name}\r\n                    label={name}\r\n                    value={itr}\r\n                    variants={['no_border', 'no_round', 'no_shadow']}\r\n                    onChange={on_change}\r\n                    onRemove={on_remove}\r\n                  />\r\n                )\r\n              })\r\n            }\r\n          </Flex>\r\n        </>\r\n      </Show>\r\n      {/* <Show show={editing === 'bdy'}>\r\n        <Button style={{ alignSelf: 'stretch' }} onClick={() => {\r\n          set_frame(prev => {\r\n            const next: IFrameInfo = { ...prev };\r\n            const bdy: IBdyInfo = {\r\n              z: 0, l: 0, x: 0, y: 0, w: 0, h: 0,\r\n              kind: BdyKind.Normal,\r\n            }\r\n            if (next.bdy) next.bdy = [bdy, ...next.bdy]\r\n            else next.bdy = [bdy]\r\n            return next;\r\n          })\r\n        }}>\r\n          add bdy\r\n        </Button>\r\n        {\r\n          value.bdy && map_arr(value.bdy, (bdy, idx) => {\r\n            const name = `bdy[${idx}]`;\r\n            const on_change = (bdy: IBdyInfo) => set_frame(prev => {\r\n              const next: IFrameInfo = { ...prev }\r\n              if (next.bdy) {\r\n                next.bdy[idx] = bdy\r\n                next.bdy = [...next.bdy]\r\n              }\r\n              return next\r\n            })\r\n            const on_remove = () => set_frame(prev => {\r\n              const next: IFrameInfo = { ...prev };\r\n              next.bdy?.splice(idx, 1)\r\n              if (next.bdy?.length) next.bdy = [...next.bdy]\r\n              if (!next.bdy?.length) delete next.bdy;\r\n              return next;\r\n            })\r\n            return (\r\n              <BdyEditorView\r\n                key={name}\r\n                label={name}\r\n                value={bdy}\r\n                onChange={on_change}\r\n                onRemove={on_remove} />\r\n            )\r\n          })\r\n        }\r\n      </Show> */}\r\n    </Frame>\r\n  );\r\n}\r\nconst default_value: IFrameInfo = {\r\n  id: \"\",\r\n  name: \"\",\r\n  state: 0,\r\n  wait: 0,\r\n  next: {},\r\n  centerx: 0,\r\n  centery: 0\r\n}\r\nexport default function FrameEditorDemoView() {\r\n  const [value, set_value] = useState<IFrameInfo | undefined>(default_value)\r\n  return (\r\n    <Flex direction='column' gap={5} style={{ overflow: 'hidden', height: `100%` }}>\r\n      <TextArea style={{ resize: 'vertical', height: 300 }} readOnly value={JSON.stringify(value, null, 2)} />\r\n      <FrameEditor value={value} onChange={set_value} style={{ flex: 1 }} />\r\n    </Flex>\r\n  )\r\n}","export function map_arr<T, V>(list: T | T[] | null | undefined, fn: (item: T, idx: number, arr: T[]) => V): V[] {\n  if (!list) return []\n  if (Array.isArray(list)) return list.map(fn);\n  else return [fn(list, 0, [list])];\n}\n"],"names":["titled_styles","label","width","textAlign","default_value","hit_flag","HitFlag","AllEnemy","kind","ItrKind","Normal","effect","ItrEffect","z","floor","Defines","DAFUALT_QUBE_LENGTH","l","x","y","w","h","ItrEditor","props","_value$kind","value","defaultValue","onRemove","onChange","_p","is_vrest","_jsxs","Frame","tabIndex","children","_jsx","Button","style","position","right","top","border","onClick","Flex","direction","align","gap","Titled","styles","Combine","Select","ITR_KIND_SELECT_PROPS","make_field_props","v","kind_name","itr_kind_full_name","effect_name","Show","show","ITR_EFFECT_SELECT_PROPS","itr_effect_full_name","HitFlagEditor","flex","Input","Number","make_not_blank_field_props","clearable","placeholder","DEFAULT_ITR_MOTIONLESS","step","DEFAULT_ITR_SHAKING","items","parse","next","rest","arest","vrest","DEFAULT_ITR_FALL","QubeEdit","TextArea","resize","ItrEditorTestView","set_value","useState","height","readOnly","JSON","stringify","genValue","fn","shared_ctx","React","EditorShapeEnum","useEditor","label_style","arguments","length","undefined","titled_style","useMemo","display","t_props","field","float_label","toString","get_value","f","Array","isArray","r","k","temp","forEach","i","a","ImageFile","title","name","zip","useContext","img_list","set_img_list","useEffect","file","InputNumber","on_blur","Text","onBlur","e","target","trim","String","Number3","fields","input_style","prefix","EditorVec2","Qube","alignItems","Strings","_list$map","list","set_change_flags","idx","str","map","splice","on_click_del","Cross","push","on_click_add","Plus","EditorIntList","num","on_changed","Sel3","placeholders","select","select_style","at","WorkspaceColumnView","header","className","classNames","header_main_footer_view","hoverable","head_zone","size","content_zone","EntityBaseDataView","data","Editor","base","Space","stretchs","padding","boxSizing","foo","head","small","ce","fall_value","DEFAULT_FALL_VALUE_MAX","defend_value","DEFAULT_DEFEND_VALUE_MAX","resting","DEFAULT_RESTING_MAX","hp","DEFAULT_HP","mp","DEFAULT_MP","catch_time","DEFAULT_CATCH_TIME","jump_height","jump_distance","jump_distancez","dash_height","dash_distance","dash_distancez","rowing_height","rowing_distance","TitleAndAdd","on_add","EntityDataEditorView","Editor1","Editor2","ENTITY_TYPE_SELECT_PROPS","loop_arr","FrameDrawerData","ShapeData","constructor","o","super","img","frame","this","type","LF2_FRAME","read","FrameDrawer","Shape","get_size","pic","t","b","get_bounding","check_rect","_ref","Math","min","max","check_vec2","_ref2","centerx","centery","bdy","itr","opoint","cpoint","bpoint","resizable","Resizable","None","draw_center","ctx","beginPath","moveTo","lineTo","closePath","setLineDash","lineWidth","strokeStyle","fillStyle","stroke","fill","draw_bdy","rect","draw_itr","lineDashOffset","draw_cpoint","strokeText","fillText","draw_wpoint","point","draw_opoint","font","oid","draw_frame_bound","get_img","tex","files","Promise","reject","Error","img_map","get","path","Image","_zip$file","has","set","blob_url","then","src","resolve","remain","resolving","setTimeout","complete","on_load","removeEventListener","on_error","message","addEventListener","once","render","_frame$pic","beginDraw","scale","beginDirty","endDirty","translate","drawImage","wpoint","endDraw","ItrPrefabView","on_remove","itr_prefabs","id","prev_id","next_id","alert","traversal","frames","_","_itr$prefab_id","prefab_id","FrameListView","ref_board","factory","on_pick_frame","ref_next_frame","useRef","on_frame_change","board","current","shape_data","newShapeData","layer","newZ","Object","assign","shape","shapes","find","console","log","merge","setSelects","newShape","add","key","on_key_up","toLowerCase","next_frame","Broken","VirtualList","frame_list_view","itemKey","index","frame_list_item_view","onKeyUp","onKeyDown","on_key_down","_ele$nextElementSibli","_ele$previousElementS","stopPropagation","preventDefault","ele","scroll_view","parentElement","ele_collection","next_ele","nextElementSibling","item","prev_ele","previousElementSibling","pt","parseInt","getComputedStyle","paddingTop","scrollTo","offsetTop","focus","indexOf","variants","PicInfoEditorView","pic_info","EditorImg","on_click_remove","_data$frames$k$pic","vertical","_v$variants","arr","EntityEditing","Gaia","registerShape","d","desc","FactoryEnum","Default","dat_type_emoji_map","EntityEnum","Ball","Weapon","Fighter","Entity","get_icon","node","depth","EditorView","board_wrapper","set_board_wrapper","onClose","loading","open","lf2","zip_name","set_zip_name","zips","set_zips","set_zip","cb","on_zips_changed","callbacks","del","opens","set_opens","tree","set_tree","ref_editing_node","ref_editing_data","editing_node","set_editing_node","editing_data","set_editing_data","tab","set_tab","editing_frame","set_editing_frame","state","set_state","mp3","flat","json","others","filters_tree","handle_tree_node","endsWith","ret","child","async","root","parts","split","j","catch","part_idx","part","findIndex","slice","join","load_zip","container","newWhiteBoard","element","setToolType","ToolEnum","Selector","window","ob","ResizeObserver","getBoundingClientRect","markDirty","observe","destory","disconnect","change_flag","set_change_flag","base_data_view","overflow","flexFlow","pic_list_view","views","keys","row","col","cell_w","cell_h","Item","space","file_editor_view","itr_prefab_list_view","ref_wprkspace_container","ref_workspace","ref_adapter","cells","set_cells","on_click_item","_node$data","_zip$file2","old","filter","_node$data2","_zip$file3","text","_zip$file4","cell","createPortal","cell_inner","Checkbox","TreeView","flexDirection","entity_base_editor","TabButtons","values","button","itr_pre","ref","prev","background","FrameEditor","adpater","DomAdapter","workspace","Workspaces","slots","clear","set_root","Slot","edit","s","weight","offsetWidth","leave","leaves","get_cell","adapter","append","confirm","_workspace$root","snapshot","res_tree_slot","res_tree_slot_w","root_w","slot","edits","slot0","slot1","slot2","edit_rect","Provider","top_bar","disabled","open_file","accept","Ditto","Zip","read_file","on_click_read_zip","warn","is_num","alignSelf","minHeight","_Fragment","Base","Path","paths","m","pad","ok","actived","useThrough","func","mine","ref_func","_ref_func$current","_len","args","_key","call","TAG","TabEnum","tab_labels","Spd","Itr","Bdy","Cpoint","Opoint","Bpoint","Map","onFocus","editing","set_editing","ref_root","on_focus","ensure","overflowY","wait","FrameEditorDemoView"],"sourceRoot":""}