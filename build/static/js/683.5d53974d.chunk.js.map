{"version":3,"file":"static/js/683.5d53974d.chunk.js","mappings":"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","sources":["LF2/defines/CollisionVal.ts","Utils/open_file.ts","pages/dat_viewer/useWorkspaces.tsx","LF2/utils/container_help/set_obj_field.ts","LF2/utils/string_parser/match_block.ts","LF2/utils/string_parser/match_all.ts","LF2/utils/string_parser/match_colon_value.ts","LF2/dat_translator/fighters/BotBuilder.ts","LF2/utils/type_cast/to_num.ts","LF2/dat_translator/CondMaker.ts","LF2/dat_translator/copy_bdy_info.ts","LF2/dat_translator/edit_bdy_info.ts","LF2/dat_translator/cook_ball_frame_state_3000.ts","LF2/dat_translator/cook_next_frame_mp_hp.ts","LF2/dat_translator/get_the_next.ts","LF2/dat_translator/make_ball_data.ts","LF2/dat_translator/cook_ball_frame_state_3005.ts","LF2/dat_translator/cook_ball_frame_state_3006.ts","LF2/utils/string_parser/take_blocks.ts","LF2/dat_translator/ColonValueReader.ts","LF2/dat_translator/make_bg_data.ts","LF2/dat_translator/make_entity_data.ts","LF2/utils/container_help/take_number.ts","LF2/dat_translator/edit_next_frame.ts","LF2/dat_translator/FrameEditing.ts","LF2/dat_translator/cook_file_variants.ts","LF2/dat_translator/make_fighter_data.ts","LF2/dat_translator/take_raw_frame_mp.ts","LF2/dat_translator/fighters/constants.ts","LF2/dat_translator/fighters/bot_front_test.ts","LF2/dat_translator/fighters/bot_ball_dfa.ts","LF2/dat_translator/fighters/bot_ball_dfj.ts","LF2/dat_translator/fighters/bot_chasing_skill_action.ts","LF2/dat_translator/fighters/frames.ts","LF2/dat_translator/fighters/bot_ball_continuation.ts","LF2/dat_translator/fighters/bot_chasing_action.ts","LF2/dat_translator/fighters/bot_uppercut_dua.ts","LF2/dat_translator/fighters/bot_uppercut_dva.ts","LF2/dat_translator/fighters/bot_explosion_dua.ts","LF2/dat_translator/fighters/bot_explosion_duj.ts","LF2/dat_translator/fighters/make_fighter_data_firzen.ts","LF2/dat_translator/fighters/bot_ball_cancelling.ts","LF2/dat_translator/fighters/bot_idle_action.ts","LF2/dat_translator/fighters/bot_uppercut_duj.ts","LF2/dat_translator/make_fighter_special.ts","LF2/dat_translator/fighters/make_fighter_data_julian.ts","LF2/dat_translator/fighters/make_figther_data_louisex.ts","LF2/dat_translator/fighters/make_fighter_data_bat.ts","LF2/dat_translator/fighters/make_fighter_data_knigt.ts","LF2/dat_translator/fighters/make_figther_data_louis.ts","LF2/dat_translator/fighters/make_fighter_data_rudolf.ts","LF2/dat_translator/fighters/make_fighter_data_deep.ts","LF2/dat_translator/fighters/make_fighter_data_davis.ts","LF2/dat_translator/fighters/make_fighter_data_dennis.ts","LF2/dat_translator/fighters/make_fighter_data_woody.ts","LF2/dat_translator/fighters/make_fighter_data_firen.ts","LF2/dat_translator/fighters/make_fighter_data_freeze.ts","LF2/dat_translator/fighters/make_fighter_data_jack.ts","LF2/dat_translator/fighters/make_fighter_data_mark.ts","LF2/dat_translator/fighters/make_fighter_data_monk.ts","LF2/dat_translator/fighters/make_fighter_data_henry.ts","LF2/dat_translator/fighters/make_fighter_data_henter.ts","LF2/dat_translator/fighters/make_fighter_data_justin.ts","LF2/dat_translator/fighters/make_fighter_data_jan.ts","LF2/dat_translator/fighters/make_fighter_data_sorcerer.ts","LF2/dat_translator/fighters/make_fighter_data_john.ts","LF2/utils/string_parser/take_sections.ts","LF2/dat_translator/cook_bdy.ts","LF2/dat_translator/cook_bpoint.ts","LF2/dat_translator/take_not_zero_num.ts","LF2/dat_translator/cook_cpoint.ts","LF2/dat_translator/take_num.ts","LF2/dat_translator/fixed_float.ts","LF2/dat_translator/take_positive_num.ts","LF2/dat_translator/cook_itr.ts","LF2/dat_translator/cook_opoint.ts","LF2/dat_translator/cook_wpoint.ts","LF2/dat_translator/make_frame_state.ts","LF2/dat_translator/make_frames.ts","LF2/utils/string_parser/match_hash_end.ts","LF2/dat_translator/make_weapon_data.ts","LF2/dat_translator/make_itr_prefabs.ts","LF2/dat_translator/broken_piece_frames.ts","LF2/dat_translator/make_weapon_special.ts","LF2/dat_translator/dat_2_json.ts","LF2/dat_translator/make_stage_info_list.ts","LF2/dat_translator/make_ball_special.ts","LF2/dat_translator/make_frames_special.ts","LF2/dat_translator/decode_lf2_dat.ts","pages/dat_viewer/FilesView/index.tsx","pages/dat_viewer/DatViewer.tsx","LF2/dat_translator/read_indexes.ts"],"sourcesContent":["export enum CollisionVal {\r\n  /**\r\n   * \r\n   */\r\n  AttackerType = \"attacker_type\",\r\n\r\n  /**\r\n   * \r\n   */\r\n  VictimType = \"victim_type\",\r\n\r\n  /** \r\n   *  \r\n   */\r\n  VictimIsChasing = \"victim_is_chasing\",\r\n\r\n  ItrEffect = \"itr_effect\",\r\n  ItrKind = \"itr_kind\",\r\n  SameFacing = \"same_facing\",\r\n  AttackerState = \"attacker_state\",\r\n  VictimState = \"victim_state\",\r\n  AttackerHasHolder = \"attacker_has_holder\",\r\n  VictimHasHolder = \"victim_has_holder\",\r\n  AttackerHasHolding = \"attacker_has_holding\",\r\n  VictimHasHolding = \"victim_has_holding\",\r\n  SameTeam = \"same_team\",\r\n  AttackerOID = \"attacker_oid\",\r\n  VictimOID = \"victim_oid\",\r\n  BdyKind = \"bdy_kind\",\r\n  VictimFrameId = \"victim_frame_id\",\r\n  VictimFrameIndex_ICE = \"victim_frame_index_ice\",\r\n  ItrFall = \"itr_fall\",\r\n  AttackerThrew = \"attacker_threw\",\r\n  VictimThrew = \"victim_threw\",\r\n  VictimIsFreezableBall = \"victim_freezable_ball\",\r\n  AttackerIsFreezableBall = \"attacker_freezable_ball\",\r\n  ArmorWork = \"armor_work\",\r\n  V_FrameBehavior = \"v_frame_behavior\",\r\n  NoItrEffect = \"no_itr_effect\",\r\n  A_HP_P = \"a_hp_p\",\r\n  V_HP_P = \"v_hp_p\",\r\n  LF2_NET_ON = \"lf2_net_on\",\r\n  BdyHitFlag = \"bdy_hit_flag\",\r\n  ItrHitFlag = \"itr_hit_flag\",\r\n  BdyCode = \"bdy_code\",\r\n  ItrCode = \"itr_code\",\r\n}\r\nexport const C_Val = CollisionVal;\r\nexport type C_Val = CollisionVal;","export interface i_opts_open_file {\r\n  accept?: string;\r\n  multiple?: boolean;\r\n}\r\nexport function open_file(opts?: i_opts_open_file) {\r\n  return new Promise<File[]>((resolve, reject) => {\r\n    const input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    if (typeof opts?.multiple === \"boolean\") input.multiple = opts.multiple;\r\n    if (typeof opts?.accept === \"string\") input.accept = opts.accept;\r\n    input.click();\r\n    input.oncancel = () => reject(\"cancel\");\r\n    input.onchange = () => {\r\n      if (!input.files) reject(\"[open_file] files got null!\");\r\n      else if (!input.files.length) reject(\"[open_file] files is empty!\");\r\n      else resolve(Array.from(input.files));\r\n    };\r\n  });\r\n}\r\n\r\nexport function open_dir() {\r\n  return new Promise<File[]>((resolve, reject) => {\r\n    const input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    input.setAttribute(\"directory\", \"true\")\r\n    input.setAttribute(\"webkitdirectory\", \"true\")\r\n    input.click();\r\n    input.oncancel = () => reject(\"cancel\");\r\n    input.onchange = () => {\r\n      if (!input.files) reject(\"[open_file] files got null!\");\r\n      else if (!input.files.length) reject(\"[open_file] files is empty!\");\r\n      else resolve(Array.from(input.files));\r\n    };\r\n  });\r\n}\r\n\r\nexport type t_opts_read_file_0 = {\r\n  as: \"ArrayBuffer\";\r\n};\r\nexport type t_opts_read_file_1 = {\r\n  as: \"BinaryString\" | \"DataURL\";\r\n};\r\nexport type t_opts_read_file_2 = {\r\n  as: \"Text\";\r\n  encoding?: string;\r\n};\r\nexport type t_opts_read_file =\r\n  | t_opts_read_file_0\r\n  | t_opts_read_file_1\r\n  | t_opts_read_file_2;\r\nexport function read_file(\r\n  file: File,\r\n  opts: t_opts_read_file_0,\r\n): Promise<ArrayBuffer>;\r\nexport function read_file(\r\n  file: File,\r\n  opts: t_opts_read_file_1,\r\n): Promise<string>;\r\nexport function read_file(\r\n  file: File,\r\n  opts: t_opts_read_file_2,\r\n): Promise<string>;\r\nexport function read_file(\r\n  file: File,\r\n  opts: t_opts_read_file,\r\n): Promise<string | ArrayBuffer> {\r\n  return new Promise<string | ArrayBuffer>((resolve, reject) => {\r\n    const file_reader = new FileReader();\r\n    switch (opts.as) {\r\n      case \"ArrayBuffer\":\r\n        file_reader.readAsArrayBuffer(file);\r\n        break;\r\n      case \"BinaryString\":\r\n        file_reader.readAsBinaryString(file);\r\n        break;\r\n      case \"DataURL\":\r\n        file_reader.readAsDataURL(file);\r\n        break;\r\n      case \"Text\":\r\n        file_reader.readAsText(file, opts?.encoding);\r\n        break;\r\n      default:\r\n        return reject(\"[read_file] unknown read type!\");\r\n    }\r\n    file_reader.onload = () => {\r\n      const r = file_reader.result;\r\n      switch (opts.as) {\r\n        case \"ArrayBuffer\":\r\n          if (typeof r === \"string\" || !r)\r\n            return reject(\"[read_file] not ArrayBuffer!\");\r\n          else return resolve(r);\r\n        case \"BinaryString\":\r\n        case \"DataURL\":\r\n        case \"Text\":\r\n          if (typeof r === \"string\") return resolve(r);\r\n          else return reject(\"[read_file] not string!\");\r\n        default:\r\n          return reject(\"[read_file] unknown read type!\");\r\n      }\r\n    };\r\n  });\r\n}\r\n","import { Key, ReactNode, useEffect, useMemo, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { DomAdapter, Styling } from \"splittings-dom/dist/es/splittings-dom\";\nimport \"splittings-dom/dist/es/splittings-dom.css\";\nimport { Slot, Workspaces } from \"splittings/dist/es/splittings\";\n\n\nexport interface IUseWorkspacesOpts {\n  container: HTMLElement | null;\n  render?: (slot: Slot, el: HTMLElement, idx: number) => ReactNode;\n  key?: (slot: Slot, el: HTMLElement, idx: number) => Key\n}\nexport function useWorkspaces(opts: IUseWorkspacesOpts) {\n  const { render, key, container } = opts;\n\n  useEffect(() => {\n    const styling = new Styling().override('leaf', s => {\n      s.borderRight = '1px solid #5555CC55';\n      s.borderBottom = '1px solid #5555CC55';\n      return s\n    }).build();\n    styling.mount()\n    return () => { styling.unmount() }\n  }, [])\n\n  const [_container, set_container] = useState<HTMLElement | null>(container)\n  const [pairs, set_pairs] = useState<[Slot, HTMLElement][]>([])\n  const [workspace, set_workspace] = useState<Workspaces | null>(null)\n  useEffect(() => {\n    if (!_container) return;\n    const adpater = new DomAdapter(_container)\n    adpater.workspaces_rect = (ws) => {\n      const r = _container.getBoundingClientRect();\n      return { x: 0, y: 0, w: Math.ceil(r.width + 2), h: Math.ceil(r.height + 2) };\n    }\n\n    const workspace = new Workspaces(adpater)\n    workspace.root.keep = true;\n    workspace.on_leaves_changed = () => {\n      const pairs: [Slot, HTMLElement][] = []\n      for (const leaf of workspace.leaves) {\n        const cell = adpater.get_cell(leaf)\n        if (!cell || cell.children.length) continue;\n        if (!cell.parentElement) workspace.adapter.container.appendChild(cell);\n        pairs.push([leaf, cell]);\n      }\n      set_pairs(pairs)\n    }\n    workspace.confirm()\n    set_workspace(workspace);\n    return () => {\n      workspace.on_leaves_changed = void 0\n      workspace.root.release()\n      workspace.release()\n    }\n  }, [_container])\n\n  const context = useMemo(() => {\n    if (!render) return <></>\n    return (\n      <>\n        {pairs.map(([slot, el], idx) => ReactDOM.createPortal(render(slot, el, idx), el, key ? key(slot, el, idx) : idx))}\n      </>\n    )\n  }, [pairs, render, key])\n\n  return { workspace, set_container, pairs, context };\n}\n","export function set_obj_field<T extends {}, K extends keyof T>(\r\n  target: T | undefined,\r\n  key: K,\r\n  value: T[K],\r\n): T {\r\n  if (!target) target = {} as T;\r\n  target[key] = value;\r\n  return target;\r\n}\r\n","import { match_all } from \"./match_all\";\r\n\r\nexport function match_block(\r\n  text: string | null | undefined,\r\n  start: string,\r\n  end: string,\r\n): string[];\r\nexport function match_block(\r\n  text: string | null | undefined,\r\n  start: string,\r\n  end: string,\r\n  func: (text?: string) => void,\r\n): void;\r\nexport function match_block(\r\n  text: string | null | undefined,\r\n  start: string,\r\n  end: string,\r\n  func?: (text?: string) => void,\r\n) {\r\n  if (typeof text !== \"string\") return func ? void 0 : [];\r\n\r\n  const regexp = new RegExp(`${start.trim()}((.|\\\\n)+?)${end.trim()}`, \"g\");\r\n  if (func) return match_all(text, regexp, ([, c]) => func(c));\r\n  return match_all(text, regexp).map((v) => v[1]);\r\n}\r\n\r\nexport function match_block_once(\r\n  text: string | null | undefined,\r\n  start: string,\r\n  end: string,\r\n): string | null {\r\n  if (typeof text !== \"string\") return null;\r\n  return (\r\n    new RegExp(`${start.trim()}((.|\\\\n)+?)${end.trim()}`, \"g\").exec(\r\n      text,\r\n    )?.[1] ?? null\r\n  );\r\n}\r\n","\r\n/**\r\n * \r\n *\r\n * @export\r\n * @param {string} text \r\n * @param {RegExp} regexp \r\n * @returns {RegExpExecArray[]} \r\n */\r\nexport function match_all(text: string, regexp: RegExp): RegExpExecArray[];\r\n\r\n/**\r\n * \r\n *\r\n * @export\r\n * @param {string} text \r\n * @param {RegExp} regexp \r\n * @param {(result: RegExpExecArray) => void} func \r\n */\r\nexport function match_all(\r\n  text: string,\r\n  regexp: RegExp,\r\n  func: (result: RegExpExecArray) => void,\r\n): void;\r\nexport function match_all(\r\n  text: string,\r\n  regexp: RegExp,\r\n  func?: (result: RegExpExecArray) => void,\r\n): RegExpExecArray[] | void {\r\n  regexp = new RegExp(regexp, \"g\");\r\n  let result: RegExpExecArray | null = regexp.exec(text);\r\n  const results: RegExpExecArray[] = [];\r\n  while (result) {\r\n    func ? func(result) : results.push(result);\r\n    result = regexp.exec(text);\r\n  }\r\n  if (!func) return results;\r\n}\r\n","import { match_all } from \"./match_all\";\r\nexport const val_colon_exp = /\\s*(\\S*)\\s*:\\s*(\\S*)/g;\r\nexport function match_colon_value(\r\n  text: string | null | undefined,\r\n): [string, string][];\r\nexport function match_colon_value(\r\n  text: string | null | undefined,\r\n  func: (key: string, value: string) => void,\r\n): void;\r\nexport function match_colon_value(\r\n  text: string | null | undefined,\r\n  func?: (key: string, value: string) => void,\r\n) {\r\n  if (typeof text !== \"string\") return func ? void 0 : [];\r\n  if (func)\r\n    return match_all(text.trim(), val_colon_exp, ([, k, v]) => func(k, v));\r\n  return match_all(text.trim(), val_colon_exp).map(([, k, v]) => [k, v]);\r\n}\r\n","import { IBotData, IEntityData, StateEnum } from \"../../defines\";\nimport { IBotAction } from \"../../defines/IBotAction\";\nimport { IBotDataSet } from \"../../defines/IBotDataSet\";\nimport { find } from \"../../utils\";\nimport { traversal } from \"../../utils/container_help/traversal\";\n\nexport class BotBuilder {\n  static builders: BotBuilder[] = []\n  static make(data: IEntityData) {\n    const ret = new BotBuilder(data)\n    this.builders.push(ret);\n    return ret;\n  }\n  static check_all(): void {\n    this.builders.forEach(b => b.check())\n  }\n\n  readonly entity: IEntityData;\n  get bot(): IBotData {\n    let ret = this.entity.base.bot\n    if (!ret) ret = this.entity.base.bot = { id: this.entity.id, actions: {} }\n    return ret;\n  }\n  get frames(): Exclude<IBotData['frames'], undefined> {\n    const { bot } = this;\n    let frames = bot.frames\n    if (!frames) frames = bot.frames = {};\n    return frames;\n  }\n  get states(): Exclude<IBotData['states'], undefined> {\n    const { bot } = this;\n    let states = bot.states\n    if (!states) states = bot.states = {};\n    return states;\n  }\n  protected constructor(entity: IEntityData) {\n    this.entity = entity;\n  }\n  set_actions(...actions: (IBotAction | (() => IBotAction))[]): this {\n    const { bot } = this\n    for (const action of actions) {\n      const a = typeof action === 'function' ? action() : action\n      bot.actions[a.action_id] = a;\n    }\n    return this;\n  }\n  set_frames(frame_ids: (string | number)[], action_ids: string[]): this {\n    const { frames } = this\n    frames['' + frame_ids] = action_ids;\n    return this;\n  }\n  set_states(state_ids: (string | number | StateEnum)[], action_ids: string[]): this {\n    const { states } = this\n    states['' + state_ids] = action_ids;\n    return this;\n  }\n  check() {\n    const { states, frames, bot: { actions }, entity } = this;\n    const exists_action_ids = new Set<string>(Object.keys(actions));\n\n    traversal(states, (states, action_ids) => {\n      const state_ids = ('' + states).split(',')\n      for (const state_id of state_ids) {\n        const exists = !!find(entity.frames, ([_, frame]) => state_id == '' + frame.state);\n        if (!exists) console.warn(`[BotBuilder::check] state \"${state_id}\" is not used in any frames in entity: \"${entity.id}(${entity.base.name})\" .`)\n      }\n      if (!action_ids?.length) {\n        console.warn(`[BotBuilder::check] actions of states \"${states}\" should not be empty, but got ${action_ids}, entity: \"${entity.id}(${entity.base.name})\".`)\n      } else for (const action_id of action_ids) {\n        const exists = !!find(actions, ([aid]) => aid == '' + action_id);\n        if (!exists) console.warn(`[BotBuilder::check] action \"${action_id}\" of states \"${states}\" is not exists in entity: \"${entity.id}(${entity.base.name})\".`)\n      }\n      if (exists_action_ids.size > 0) action_ids?.forEach(v => exists_action_ids.delete(v))\n    })\n\n    traversal(frames, (frames, action_ids) => {\n      const frame_ids = ('' + frames).split(',')\n\n      for (const frame_id of frame_ids) {\n        const exists = Object.keys(entity.frames).some(v => v === frame_id);\n        if (!exists) console.warn(`[BotBuilder::check] frame \"${frame_id}\" is not exists in entity: \"${entity.id}(${entity.base.name})\".`)\n      }\n      if (!action_ids?.length) {\n        console.warn(`[BotBuilder::check] actions of frame \"${frames}\" should not be empty, but got ${action_ids}, entity: \"${entity.id}(${entity.base.name})\" .`)\n      } else for (const action_id of action_ids) {\n        const exists = !!find(actions, ([aid]) => aid == '' + action_id);\n        if (!exists) console.warn(`[BotBuilder::check] action \"${action_id}\" of \"${frames}\" is not exists in entity: \"${entity.id}(${entity.base.name})\".`)\n      }\n      if (exists_action_ids.size > 0) action_ids?.forEach(v => exists_action_ids.delete(v))\n    })\n\n    if (exists_action_ids.size > 0) {\n      console.warn(`[BotBuilder::check] actions \"${Array.from(exists_action_ids)}\" is not used in entity: \"${entity.id}(${entity.base.name})\"`)\n    }\n  }\n  set_dataset(dataset: IBotDataSet): this {\n    this.bot.dataset = { ...this.bot.dataset, ...dataset }\n    return this;\n  }\n}\n","import { is_num } from \"../type_check\";\r\n\r\nexport function to_num(v: any, or: number): number;\r\nexport function to_num(v: any, or?: number): number | undefined;\r\nexport function to_num(v: any, or?: number): number | undefined {\r\n  const n = Number(v);\r\n  return is_num(n) ? n : or;\r\n}\r\n","import type { TBinOp } from \"../defines/BinOp\";\r\nimport { is_str } from \"../utils/type_check\";\r\nexport class CondMaker<T extends string = string> {\r\n  readonly is_cond = true;\r\n  static is = (v: any): v is CondMaker => v?.is_cond === true;\r\n\r\n  private _parts: (string | CondMaker)[] = [];\r\n\r\n  add(func: (c: CondMaker<T>) => CondMaker<T>): this;\r\n  add(word: T, op: TBinOp, value: any): this;\r\n  add(\r\n    arg1: T | ((c: CondMaker<T>) => CondMaker<T>),\r\n    op?: TBinOp,\r\n    value?: any,\r\n  ): this {\r\n    if (typeof arg1 !== \"function\") this._parts.push(`${arg1}${op}${value}`);\r\n    else this._parts.push(arg1(new CondMaker()));\r\n    return this;\r\n  }\r\n  not(func: (c: CondMaker<T>) => CondMaker<T>): this {\r\n    this._parts.push(\"!\", func(new CondMaker()));\r\n    return this;\r\n  }\r\n  wrap(func: (c: CondMaker<T>) => CondMaker<T>): this {\r\n    this._parts.push(func(new CondMaker()));\r\n    return this;\r\n  }\r\n  one_of(word: T, ...values: (string | number)[]): this {\r\n    return this.wrap((c) => {\r\n      for (const v of values) c = c.or(word, \"==\", v);\r\n      return c;\r\n    });\r\n  }\r\n  not_in(word: T, ...values: (string | number)[]): this {\r\n    return this.wrap((c) => {\r\n      for (const v of values) c.and(word, \"!=\", v);\r\n      return c;\r\n    });\r\n  }\r\n  private _any(\r\n    word?: T | ((c: CondMaker<T>) => CondMaker<T>),\r\n    op?: TBinOp | (string | number)[],\r\n    value?: any,\r\n  ): this {\r\n    if (typeof word === \"function\") return this.wrap(word);\r\n    else if (word !== void 0)\r\n      if (Array.isArray(op)) return this.one_of(word, ...op);\r\n      else if (op !== void 0 && value !== void 0)\r\n        return this.add(word, op, value);\r\n    return this;\r\n  }\r\n  or(): this;\r\n  or(func: (c: CondMaker<T>) => CondMaker<T>): this;\r\n  or(word: T, op: TBinOp, value: any): this;\r\n  or(\r\n    word?: T | ((c: CondMaker<T>) => CondMaker<T>),\r\n    op?: TBinOp | (string | number)[],\r\n    value?: any,\r\n  ): this {\r\n    this._parts.length && this._parts.push(\"|\");\r\n    return this._any(word, op, value);\r\n  }\r\n\r\n  and(): this;\r\n  and(func: (c: CondMaker<T>) => CondMaker<T>): this;\r\n  and(word: T, op: TBinOp, value: any): this;\r\n  and(\r\n    word?: T | ((c: CondMaker<T>) => CondMaker<T>),\r\n    op?: TBinOp,\r\n    value?: any,\r\n  ): this {\r\n    this._parts.length && this._parts.push(\"&\");\r\n    return this._any(word, op, value);\r\n  }\r\n  done(): string {\r\n    let ret = this._parts\r\n      .map((v) => (is_str(v) ? v : `(${v.done()})`))\r\n      .join(\"\");\r\n    ret = ret.replace(/\\s|\\n|\\r/g, \"\"); // remove empty char;\r\n\r\n    // remove redundant bracket;\r\n    if (this._parts.length === 1 && CondMaker.is(this._parts[0]))\r\n      ret = ret.replace(/^\\(|\\)$/g, \"\");\r\n    return ret;\r\n  }\r\n}\r\n","import { IBdyInfo } from \"../defines\";\r\nexport function copy_bdy_info(\r\n  src: IBdyInfo,\r\n  edit: Partial<IBdyInfo>,\r\n): IBdyInfo {\r\n  return { ...(JSON.parse(JSON.stringify(src)) as any), ...edit };\r\n}\r\n","import { IBdyInfo } from \"../defines\";\r\nexport function edit_bdy_info(\r\n  src: IBdyInfo,\r\n  ...edit: Partial<IBdyInfo>[]\r\n): void {\r\n  Object.assign(src, ...edit);\r\n}\r\n","import { BuiltIn_OID } from \"../defines\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { HitFlag } from \"../defines/HitFlag\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { IBdyInfo } from \"../defines/IBdyInfo\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { IItrInfo } from \"../defines/IItrInfo\";\r\nimport { ItrEffect } from \"../defines/ItrEffect\";\r\nimport { ItrKind } from \"../defines/ItrKind\";\r\nimport { ensure } from \"../utils\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { copy_bdy_info } from \"./copy_bdy_info\";\r\nimport { edit_bdy_info } from \"./edit_bdy_info\";\r\n\r\nexport function cook_ball_frame_state_3000(e: IEntityData, frame: IFrameInfo) {\r\n  const bdy_list = frame.bdy ? frame.bdy : (frame.bdy = []);\r\n  const new_bdy: IBdyInfo[] = [];\r\n  for (const bdy of bdy_list) {\r\n\r\n    const cond = new CondMaker<C_Val>()\r\n      .add(C_Val.ItrKind, \"!=\", ItrKind.JohnShield)\r\n      .and(C_Val.ItrKind, \"!=\", ItrKind.Block)\r\n      .and((c) => c\r\n        .add(C_Val.AttackerType, \"==\", EntityEnum.Ball).or((c) => c\r\n          /** s */\r\n          .add(C_Val.AttackerType, \"==\", EntityEnum.Weapon)\r\n          .and(C_Val.ItrKind, \"!=\", ItrKind.WeaponSwing),\r\n        ),\r\n      ).and().not_in(\r\n        C_Val.ItrKind,\r\n        ItrKind.Block,\r\n        ItrKind.MagicFlute,\r\n        ItrKind.MagicFlute2,\r\n        ItrKind.Pick,\r\n        ItrKind.PickSecretly,\r\n      )\r\n      .and().not_in(\r\n        C_Val.ItrEffect,\r\n        ItrEffect.Ice2,\r\n        ItrEffect.MFire1\r\n      )\r\n    if (e.id === BuiltIn_OID.FreezeBall) \r\n      cond.and(C_Val.AttackerIsFreezableBall, '!=', 1)\r\n    \r\n    edit_bdy_info(bdy, {\r\n      /*  */\r\n      test: cond.done(),\r\n      actions: [{\r\n        type: ActionType.V_NextFrame,\r\n        data: {\r\n          id: \"20\"\r\n        }\r\n      }]\r\n    });\r\n\r\n    new_bdy.push(\r\n      copy_bdy_info(bdy, {\r\n        /*  */\r\n        hit_flag: HitFlag.AllBoth,\r\n        test: new CondMaker<C_Val>()\r\n          .wrap((c) => c\r\n            // \r\n            .add(C_Val.SameTeam, \"==\", 0)\r\n            .and(C_Val.AttackerType, \"==\", EntityEnum.Fighter)\r\n            .and(C_Val.ItrKind, \"==\", ItrKind.Normal)\r\n            .and(C_Val.ItrEffect, \"!=\", ItrEffect.Ice)\r\n            .and(C_Val.ItrEffect, \"!=\", ItrEffect.MFire1),\r\n          )\r\n          .or((c) => c\r\n            // \r\n            .add(C_Val.SameTeam, \"==\", 1)\r\n            .and(C_Val.AttackerType, \"==\", EntityEnum.Fighter)\r\n            .and(C_Val.SameFacing, \"==\", 0)\r\n            .and(C_Val.ItrKind, \"==\", ItrKind.Normal)\r\n            .and(C_Val.ItrEffect, \"!=\", ItrEffect.Ice),\r\n          )\r\n          .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n          .or((c) => c\r\n            //  () \r\n            .add(C_Val.SameTeam, \"==\", 1)\r\n            .and(C_Val.SameFacing, \"==\", 0)\r\n            .and(C_Val.ItrKind, \"==\", ItrKind.WeaponSwing),\r\n          )\r\n          .or((c) => c\r\n            //   \r\n            .add(C_Val.SameTeam, \"==\", 0)\r\n            .and(C_Val.ItrKind, \"==\", ItrKind.WeaponSwing),\r\n          )\r\n          .and().not_in(\r\n            C_Val.ItrKind,\r\n            ItrKind.Block,\r\n            ItrKind.MagicFlute,\r\n            ItrKind.MagicFlute2,\r\n            ItrKind.Pick,\r\n            ItrKind.PickSecretly,\r\n          )\r\n          .and().not_in(\r\n            C_Val.ItrEffect,\r\n            ItrEffect.Ice2,\r\n            ItrEffect.MFire1\r\n          )\r\n          .done(),\r\n        actions: [{\r\n          type: ActionType.V_NextFrame,\r\n          data: {\r\n            id: \"30\"\r\n          }\r\n        }]\r\n      }),\r\n    );\r\n\r\n  }\r\n  bdy_list.push(...new_bdy);\r\n\r\n  const itr_list = frame.itr ? frame.itr : (frame.itr = []);\r\n  const new_itr: IItrInfo[] = [];\r\n  for (const itr of itr_list) {\r\n    switch (itr.kind) {\r\n      case ItrKind.Normal:\r\n        itr.actions = ensure(itr.actions, {\r\n          type: ActionType.A_NextFrame,\r\n          data: { id: \"10\" }\r\n        });\r\n        break;\r\n      case ItrKind.Block:\r\n        bdy_list.length = 0;\r\n        bdy_list.push({\r\n          kind: 0,\r\n          hit_flag: HitFlag.AllBoth,\r\n          test: new CondMaker<C_Val>()\r\n            .not_in(\r\n              C_Val.ItrKind,\r\n              ItrKind.Block,\r\n              ItrKind.MagicFlute,\r\n              ItrKind.MagicFlute2,\r\n              ItrKind.Pick,\r\n              ItrKind.PickSecretly,\r\n            )\r\n            .and().not_in(\r\n              C_Val.ItrEffect,\r\n              ItrEffect.Ice2,\r\n              ItrEffect.MFire1\r\n            )\r\n            .done(),\r\n          z: itr.z,\r\n          l: itr.l,\r\n          x: itr.x,\r\n          y: itr.y,\r\n          w: itr.w,\r\n          h: itr.h,\r\n          actions: [{\r\n            type: ActionType.V_NextFrame,\r\n            data: {\r\n              id: \"30\"\r\n            }\r\n          }, {\r\n            type: ActionType.V_Sound,\r\n            data: { path: e.base.dead_sounds || [] }\r\n          }]\r\n        })\r\n        break\r\n    }\r\n  }\r\n  itr_list.push(...new_itr);\r\n}\r\n","import { INextFrame } from \"../defines\";\n\n\nexport function cook_next_frame_mp_hp(\n  ret: INextFrame,\n  type?: \"next\" | \"hit\",\n  frame_mp_hp_map?: Map<string, [number, number]>\n) {\n  if (!frame_mp_hp_map) return;\n  if (typeof ret.id !== \"string\") return;\n  const [mp, hp] = frame_mp_hp_map.get(ret.id) || [0, 0];\n  if (type === \"hit\") {\n    if (mp > 0) ret.mp = mp;\n    if (hp > 0) ret.hp = hp;\n  } else if (type === \"next\") {\n    if (mp < 0) ret.mp = -mp;\n    if (hp < 0) ret.hp = -hp;\n  }\n}\n","import { Builtin_FrameId, FacingFlag, INextFrame } from \"../defines\";\r\nimport { cook_next_frame_mp_hp } from \"./cook_next_frame_mp_hp\";\r\n\r\nexport const get_next_frame_by_raw_id = (\r\n  id: number | string,\r\n  type?: \"next\" | \"hit\",\r\n  frame_mp_hp_map?: Map<string, [number, number]>,\r\n): INextFrame => {\r\n  if (\"\" + id === \"1000\") return { id: Builtin_FrameId.Gone };\r\n  if (\"\" + id === \"999\") return { id: Builtin_FrameId.Auto };\r\n  if (\"\" + id === \"-999\")\r\n    return { id: Builtin_FrameId.Auto, facing: FacingFlag.Backward };\r\n  if (\"\" + id === \"0\") return {};\r\n\r\n  if (typeof id === \"number\") {\r\n    if (id >= 1100 && id <= 1299) {\r\n      // \r\n      return { id: Builtin_FrameId.Auto };\r\n    }\r\n    if (id <= -1100 && id >= -1299) {\r\n      // \r\n      return { id: Builtin_FrameId.Auto, facing: FacingFlag.Backward };\r\n    }\r\n    if (id < 0) {\r\n      const ret: INextFrame = {\r\n        id: \"\" + -id,\r\n        facing: FacingFlag.Backward,\r\n      };\r\n      cook_next_frame_mp_hp(ret, type, frame_mp_hp_map);\r\n      return ret;\r\n    }\r\n  }\r\n  if (typeof id === \"string\" && id.startsWith(\"-\")) {\r\n    const ret: INextFrame = {\r\n      id: id.substring(1),\r\n      facing: FacingFlag.Backward,\r\n    };\r\n    cook_next_frame_mp_hp(ret, type, frame_mp_hp_map);\r\n    return ret;\r\n  }\r\n  const ret: INextFrame = { id: \"\" + id };\r\n  cook_next_frame_mp_hp(ret, type, frame_mp_hp_map);\r\n  return ret;\r\n};\r\n","import { BuiltIn_OID, Defines, FacingFlag, ItrKind, OpointSpreading, StateEnum } from \"../defines\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { HitFlag } from \"../defines/HitFlag\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { EntityVal } from \"../defines/EntityVal\";\r\nimport { FrameBehavior } from \"../defines/FrameBehavior\";\r\nimport { IDatIndex } from \"../defines/IDatIndex\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IEntityInfo } from \"../defines/IEntityInfo\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { OpointKind } from \"../defines/OpointKind\";\r\nimport { OpointMultiEnum } from \"../defines/OpointMultiEnum\";\r\nimport { SpeedMode } from \"../defines/SpeedMode\";\r\nimport { ensure } from \"../utils\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { traversal } from \"../utils/container_help/traversal\";\r\nimport { to_num } from \"../utils/type_cast/to_num\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { cook_ball_frame_state_3000 } from \"./cook_ball_frame_state_3000\";\r\nimport { cook_ball_frame_state_3005 } from \"./cook_ball_frame_state_3005\";\r\nimport { cook_ball_frame_state_3006 } from \"./cook_ball_frame_state_3006\";\r\nimport { get_next_frame_by_raw_id } from \"./get_the_next\";\r\nimport { take, take_str } from \"./take\";\r\n\r\nconst hp_gt_0 = new CondMaker<EntityVal>().and(EntityVal.HP, '>', 0).done()\r\nexport function make_ball_data(\r\n  info: IEntityInfo,\r\n  frames: Record<string, IFrameInfo>,\r\n  datIndex: IDatIndex,\r\n): IEntityData {\r\n  info.hp = 500;\r\n\r\n  let weapon_broken_sound = take_str(info, \"weapon_broken_sound\");\r\n  if (weapon_broken_sound) {\r\n    weapon_broken_sound = (weapon_broken_sound + \".mp3\").replace(/\\\\/g, '/');\r\n    info.dead_sounds = [weapon_broken_sound];\r\n  }\r\n\r\n  let weapon_drop_sound = take_str(info, \"weapon_drop_sound\");\r\n  if (weapon_drop_sound) {\r\n    weapon_drop_sound = (weapon_drop_sound + \".mp3\").replace(/\\\\/g, '/');\r\n    info.drop_sounds = [weapon_drop_sound];\r\n  }\r\n\r\n  let weapon_hit_sound = take_str(info, \"weapon_hit_sound\");\r\n  if (weapon_hit_sound) {\r\n    weapon_hit_sound = (weapon_hit_sound + \".mp3\").replace(/\\\\/g, '/');\r\n    info.hit_sounds = [weapon_hit_sound];\r\n  }\r\n\r\n\r\n  const ret: IEntityData = {\r\n    id: datIndex.id,\r\n    type: EntityEnum.Ball,\r\n    base: info,\r\n    frames: frames,\r\n  };\r\n\r\n  traversal(ret.frames, (_, frame) => {\r\n    const hit_j = take(frame, \"hit_j\");\r\n    if (hit_j !== 0) {\r\n      frame.vzm = SpeedMode.Extra\r\n      frame.dvz = to_num(hit_j, 50) - 50;\r\n    }\r\n    const hit_a = take(frame, \"hit_a\");\r\n    if (hit_a) frame.hp = hit_a / 2;\r\n\r\n    const hit_d = take(frame, \"hit_d\");\r\n    if (hit_d && hit_d !== frame.id)\r\n      frame.on_dead = get_next_frame_by_raw_id(hit_d);\r\n\r\n    const hit_Fa = take(frame, \"hit_Fa\");\r\n    if (hit_Fa) {\r\n      frame.behavior = hit_Fa;\r\n      (frame as any).behavior_name = `FrameBehavior.` + FrameBehavior[hit_Fa]\r\n    }\r\n\r\n    switch (hit_Fa as FrameBehavior) {\r\n      case FrameBehavior.AngelBlessing:\r\n        frame.dvx = Defines.ANGEL_BLESSING_MAX_VX;\r\n        frame.acc_x = Defines.ANGEL_BLESSING_ACC_X;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.ANGEL_BLESSING_ACC_Z;\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.ANGEL_BLESSING_MAX_VY;\r\n        frame.acc_y = Defines.ANGEL_BLESSING_ACC_Y;\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_y = frame.ctrl_z = 1\r\n        frame.itr = ensure(frame.itr, {\r\n          kind: ItrKind.Heal,\r\n          x: 25,\r\n          y: 13,\r\n          w: 32,\r\n          h: 34,\r\n          injury: 100,\r\n          hit_flag: HitFlag.Ally | HitFlag.Fighter,\r\n          l: 24,\r\n          z: -12,\r\n          actions: [\r\n            {\r\n              type: ActionType.A_NextFrame,\r\n              data: {\r\n                id: \"60\"\r\n              }\r\n            }\r\n          ],\r\n          test: new CondMaker().and(C_Val.VictimIsChasing, \"==\", 1).done()\r\n        })\r\n        break;\r\n      case FrameBehavior.JohnChase:\r\n        frame.dvx = Defines.JOHN_CHASE_MAX_VX\r\n        frame.acc_x = Defines.JOHN_CHASE_ACC_X\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.JOHN_CHASE_ACC_Z\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.JOHN_CHASE_MAX_VY\r\n        frame.acc_y = Defines.JOHN_CHASE_ACC_Y\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_y = frame.ctrl_z = 1\r\n        break;\r\n      case FrameBehavior.DennisChase: {\r\n        frame.dvx = Defines.DENNIS_CHASE_MAX_VX;\r\n        frame.acc_x = Defines.DENNIS_CHASE_ACC_X;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.DENNIS_CHASE_ACC_Z;\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.DENNIS_CHASE_MAX_VY;\r\n        frame.acc_y = Defines.DENNIS_CHASE_ACC_Y;\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_y = frame.ctrl_z = 1\r\n        frame.on_dead = { id: '5' }\r\n        switch (frame.id) {\r\n          case '1': frame.key_down = { 'F': { id: '3', wait: 'i', expression: hp_gt_0 } }; break;\r\n          case '2': frame.key_down = { 'F': { id: '4', wait: 'i', expression: hp_gt_0 } }; break;\r\n          case '3': frame.key_down = { 'B': { id: '1', wait: 'i', expression: hp_gt_0 } }; break;\r\n          case '4': frame.key_down = { 'B': { id: '2', wait: 'i', expression: hp_gt_0 } }; break;\r\n        }\r\n        break;\r\n      }\r\n      case FrameBehavior._03:\r\n        break;\r\n      case FrameBehavior.AngelBlessingStart:\r\n        jan_chaseh_start(frame);\r\n        break;\r\n      case FrameBehavior.DevilJudgementStart:\r\n        jan_chase_start(frame);\r\n        break;\r\n      case FrameBehavior.ChasingSameEnemy:\r\n        frame.dvx = Defines.DISATER_CHASE_MAX_VX;\r\n        frame.acc_x = Defines.DISATER_CHASE_ACC_X;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.DISATER_CHASE_ACC_Z;\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.DISATER_CHASE_MAX_VY;\r\n        frame.acc_y = Defines.DISATER_CHASE_ACC_Y;\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_z = 1\r\n        switch (datIndex.id) {\r\n          case BuiltIn_OID.FirzenChasef:\r\n          case BuiltIn_OID.FirzenChasei:\r\n            frame.on_landing = { id: \"60\" };\r\n            break;\r\n          case BuiltIn_OID.JanChase:\r\n            frame.on_landing = { id: \"10\" };\r\n            break;\r\n        }\r\n        break;\r\n      case FrameBehavior.BatStart:\r\n        frame.opoint = ensure(frame.opoint, {\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.BatChase,\r\n          x: frame.centerx,\r\n          y: frame.centery,\r\n          action: { id: \"0\" },\r\n          multi: {\r\n            type: OpointMultiEnum.AccordingEnemies,\r\n            min: 3,\r\n          },\r\n          spreading: OpointSpreading.Bat,\r\n        });\r\n        break;\r\n      case FrameBehavior.FirzenDisasterStart:\r\n        firzen_disater_start(frame);\r\n        break;\r\n      case FrameBehavior.JohnBiscuitLeaving:\r\n        frame.dvx = 15;\r\n        frame.acc_x = 2;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        break;\r\n      case FrameBehavior.FirzenVolcanoStart:\r\n        firzen_disater_start(frame, frame.centerx, -79);\r\n        frame.opoint = ensure(frame.opoint, { // \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx,\r\n          y: 24,\r\n          action: { id: \"109\" },\r\n        }, { // \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: 135,\r\n          y: 24,\r\n          action: { id: \"100\" },\r\n        }, { // \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: 135,\r\n          y: 24,\r\n          z: -60,\r\n          dvz: -4,\r\n          action: { id: \"100\" },\r\n        }, { // \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: 135,\r\n          y: 24,\r\n          z: 60,\r\n          dvz: 4,\r\n          action: { id: \"100\" },\r\n        }, { // \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: -45,\r\n          y: 24,\r\n          action: { id: \"100\", facing: FacingFlag.Backward },\r\n        }, {// \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: -45,\r\n          y: 24,\r\n          z: -60,\r\n          dvz: -4,\r\n          action: { id: \"100\", facing: FacingFlag.Backward },\r\n        }, {// \r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FreezeColumn,\r\n          x: -45,\r\n          y: 24,\r\n          z: 60,\r\n          dvz: 4,\r\n          action: { id: \"100\", facing: FacingFlag.Backward },\r\n        }, { // 1\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx,\r\n          y: 26,\r\n          z: 0,\r\n          action: { id: \"54\" },\r\n        }, { // 2\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 25,\r\n          y: 26,\r\n          z: 0,\r\n          action: { id: \"54\" },\r\n        }, { // 3\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 25,\r\n          y: 26,\r\n          z: 0,\r\n          action: { id: \"54\", facing: 2 },\r\n        }, { // 4\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 50,\r\n          y: 26,\r\n          z: 0,\r\n          action: { id: \"54\" },\r\n        }, { // 5\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 50,\r\n          y: 26,\r\n          z: 0,\r\n          action: { id: \"54\", facing: 2 },\r\n        }, { // 6\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 38,\r\n          y: 26,\r\n          z: -15,\r\n          action: { id: \"54\" },\r\n        }, { // 7\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 38,\r\n          y: 26,\r\n          z: -15,\r\n          action: { id: \"54\", facing: 2 },\r\n        }, { // 8\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 38,\r\n          y: 26,\r\n          z: 15,\r\n          action: { id: \"54\" },\r\n        }, { // 9\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 38,\r\n          y: 26,\r\n          z: 15,\r\n          action: { id: \"54\", facing: 2 },\r\n        }, { // 10\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 10,\r\n          y: 26,\r\n          z: 25,\r\n          action: { id: \"54\" },\r\n        }, { // 11\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 10,\r\n          y: 26,\r\n          z: 25,\r\n          action: { id: \"54\", facing: 2 },\r\n        }, { // 12\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx + 10,\r\n          y: 26,\r\n          z: -25,\r\n          action: { id: \"54\" },\r\n        }, { // 13\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.FirenFlame,\r\n          x: frame.centerx - 10,\r\n          y: 26,\r\n          z: -25,\r\n          action: { id: \"54\", facing: 2 },\r\n        });\r\n        break;\r\n      case FrameBehavior.Bat:\r\n        frame.dvx = Defines.BAT_CHASE_MAX_VX\r\n        frame.acc_x = Defines.BAT_CHASE_ACC_X;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.BAT_CHASE_ACC_Z;\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.BAT_CHASE_MAX_VY;\r\n        frame.acc_y = Defines.BAT_CHASE_ACC_Y;\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_y = frame.ctrl_z = 1\r\n        break;\r\n      case FrameBehavior.JulianBallStart:\r\n        frame.opoint = ensure(frame.opoint, {\r\n          kind: OpointKind.Normal,\r\n          oid: BuiltIn_OID.JulianBall,\r\n          x: frame.centerx,\r\n          y: frame.centery,\r\n          dvx: 8,\r\n          action: { id: \"50\" },\r\n        });\r\n        break;\r\n      case FrameBehavior.JulianBall: {\r\n        frame.dvx = Defines.DENNIS_CHASE_MAX_VX;\r\n        frame.acc_x = Defines.DENNIS_CHASE_ACC_X;\r\n        frame.vxm = SpeedMode.AccTo;\r\n        frame.dvz = Defines.DEFAULT_OPOINT_SPEED_Z;\r\n        frame.acc_z = Defines.DENNIS_CHASE_ACC_Z;\r\n        frame.vzm = SpeedMode.AccTo;\r\n        frame.dvy = Defines.DENNIS_CHASE_MAX_VY;\r\n        frame.acc_y = Defines.DENNIS_CHASE_ACC_Y;\r\n        frame.vym = SpeedMode.AccTo;\r\n        frame.ctrl_x = frame.ctrl_y = frame.ctrl_z = 1\r\n        const fid = Number(frame.id)\r\n        if (fid >= 50 && fid <= 59) {\r\n          frame.key_down = { 'F': { id: '' + (fid - 50), wait: 'i', expression: hp_gt_0 } }; break;\r\n        } else if (fid >= 1 && fid <= 9) {\r\n          frame.key_down = { 'B': { id: '' + (fid + 50), wait: 'i', expression: hp_gt_0 } }; break;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    if (frame.itr) {\r\n      for (const itr of frame.itr) {\r\n        if (itr.kind === ItrKind.JohnShield) {\r\n          if (hit_d) {\r\n            itr.actions = ensure(itr.actions, {\r\n              type: ActionType.A_NextFrame,\r\n              test: new CondMaker<C_Val>()\r\n                .add(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n                .done(),\r\n              data: { id: hit_d }\r\n            })\r\n          }\r\n        }\r\n        if (\r\n          weapon_hit_sound &&\r\n          itr.kind !== ItrKind.Whirlwind &&\r\n          itr.kind !== ItrKind.Freeze &&\r\n          itr.kind !== ItrKind.Block &&\r\n          itr.kind !== ItrKind.Heal\r\n        ) {\r\n          itr.actions = ensure(itr.actions, {\r\n            type: ActionType.A_Sound,\r\n            data: { path: [weapon_hit_sound] }\r\n          })\r\n        }\r\n      }\r\n    }\r\n    frame.gravity_enabled = frame.gravity_enabled ?? false\r\n\r\n\r\n    switch (frame.state) {\r\n      case StateEnum.Ball_Flying:\r\n        return cook_ball_frame_state_3000(ret, frame);\r\n      case StateEnum.Ball_Hitting:\r\n        return cook_ball_frame_state_3000(ret, frame);\r\n      case StateEnum.Ball_3005:\r\n        return cook_ball_frame_state_3005(ret, frame);\r\n      case StateEnum.Ball_3006:\r\n        return cook_ball_frame_state_3006(ret, frame);\r\n    }\r\n\r\n    foreach(frame.itr, itr => {\r\n      switch (itr.kind as ItrKind) {\r\n        case ItrKind.Normal:\r\n        case ItrKind.JohnShield:\r\n        case ItrKind.CharacterThrew:\r\n        case ItrKind.WeaponSwing:\r\n          if (ret.base.hit_sounds?.length)\r\n            itr.actions = ensure(itr.actions, {\r\n              type: ActionType.A_Sound,\r\n              data: { path: ret.base.hit_sounds }\r\n            })\r\n          break;\r\n\r\n        case ItrKind.Catch:\r\n        case ItrKind.Pick:\r\n        case ItrKind.ForceCatch:\r\n        case ItrKind.SuperPunchMe:\r\n        case ItrKind.PickSecretly:\r\n        case ItrKind.Heal:\r\n        case ItrKind.MagicFlute:\r\n        case ItrKind.MagicFlute2:\r\n        case ItrKind.Block:\r\n        case ItrKind.Whirlwind:\r\n        case ItrKind.Freeze:\r\n      }\r\n    })\r\n\r\n\r\n  });\r\n  return ret;\r\n}\r\n\r\nfunction firzen_disater_start(frame: IFrameInfo, x: number = frame.centerx, y: number = frame.centery) {\r\n  frame.opoint = ensure(frame.opoint, {\r\n    kind: OpointKind.Normal,\r\n    oid: [\r\n      BuiltIn_OID.FirzenChasef,\r\n      BuiltIn_OID.FirzenChasei\r\n    ],\r\n    x,\r\n    y,\r\n    dvy: 6,\r\n    action: { id: \"0\" },\r\n    multi: { type: OpointMultiEnum.AccordingEnemies, min: 4 },\r\n    spreading: OpointSpreading.FirzenDisater,\r\n\r\n  });\r\n}\r\nfunction jan_chaseh_start(frame: IFrameInfo, x: number = frame.centerx, y: number = frame.centery) {\r\n  frame.opoint = ensure(frame.opoint, {\r\n    kind: OpointKind.Normal,\r\n    oid: BuiltIn_OID.JanChaseh,\r\n    x,\r\n    y,\r\n    action: { id: \"0\" },\r\n    multi: { type: OpointMultiEnum.AccordingAllies, min: 1 },\r\n    spreading: OpointSpreading.AngelBlessing\r\n  });\r\n}\r\nfunction jan_chase_start(frame: IFrameInfo, x: number = frame.centerx, y: number = frame.centery) {\r\n  frame.opoint = ensure(frame.opoint, {\r\n    kind: OpointKind.Normal,\r\n    oid: BuiltIn_OID.JanChase,\r\n    x, y, dvy: 6,\r\n    action: { id: \"0\" },\r\n    multi: { type: OpointMultiEnum.AccordingEnemies, min: 1 },\r\n    spreading: OpointSpreading.JanDevilJudgement\r\n  });\r\n}","import { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { ItrKind } from \"../defines/ItrKind\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { StateEnum } from \"../defines/StateEnum\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { ensure } from \"../utils\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\n\r\nexport function cook_ball_frame_state_3005(e: IEntityData, frame: IFrameInfo) {\r\n  if (frame.bdy) {\r\n    for (const bdy of frame.bdy) {\r\n      bdy.actions = bdy.actions || [];\r\n      bdy.actions.push({\r\n        type: ActionType.V_NextFrame,\r\n        test: new CondMaker<C_Val>()\r\n          .add(C_Val.AttackerState, \"==\", StateEnum.Ball_3005)\r\n          .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n          .done(),\r\n        data: {\r\n          id: \"20\"\r\n        }\r\n      })\r\n    }\r\n  }\r\n  foreach(frame.itr, itr => {\r\n    if (itr.kind === ItrKind.Normal)\r\n      itr.actions = ensure(itr.actions, {\r\n        type: ActionType.A_NextFrame,\r\n        test: new CondMaker<C_Val>()\r\n          .add(C_Val.VictimState, \"==\", StateEnum.Ball_3005)\r\n          .done(),\r\n        data: { id: \"20\" }\r\n      })\r\n  })\r\n}\r\n","import { ActionType } from \"../defines/ActionType\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { ItrKind } from \"../defines/ItrKind\";\r\nimport { StateEnum } from \"../defines/StateEnum\";\r\nimport { ensure } from \"../utils\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { CondMaker } from \"./CondMaker\";\r\n\r\nexport function cook_ball_frame_state_3006(e: IEntityData, frame: IFrameInfo) {\r\n  for (const bdy of frame.bdy || []) {\r\n    bdy.actions = ensure(bdy.actions, {\r\n      type: ActionType.V_NextFrame,\r\n      test: new CondMaker<C_Val>()\r\n        .one_of(C_Val.AttackerState, StateEnum.Ball_3005, StateEnum.Ball_3006)\r\n        .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n        .done(),\r\n      data: {\r\n        id: \"20\"\r\n      }\r\n    })\r\n  }\r\n  foreach(frame.itr, itr => {\r\n    if (itr.kind === ItrKind.Normal)\r\n      itr.actions = ensure(itr.actions, {\r\n        type: ActionType.A_NextFrame,\r\n        test: new CondMaker<C_Val>()\r\n          .one_of(C_Val.VictimState, StateEnum.Ball_3005, StateEnum.Ball_3006)\r\n          .done(),\r\n        data: {\r\n          id: \"20\"\r\n        }\r\n      })\r\n  })\r\n}\r\n","import { match_all } from \"./match_all\";\r\nexport interface ITakeBlocksResult {\r\n  blocks: string[];\r\n  remains: string\r\n}\r\nexport function take_blocks(\r\n  text: string,\r\n  start: string,\r\n  end: string\r\n): ITakeBlocksResult {\r\n  const regexp = new RegExp(`${start.trim()}((.|\\\\n)+?)${end.trim()}`, \"g\");\r\n  const positions: [number, number][] = [];\r\n  const ret: ITakeBlocksResult = {\r\n    blocks: match_all(text, regexp).map(v => {\r\n      positions.push([v.index, v.index + v[0].length]);\r\n      return v[1];\r\n    }),\r\n    remains: \"\"\r\n  }\r\n  if (positions.length) {\r\n    let start = 0;\r\n    for (const [from, to] of positions) {\r\n      ret.remains += text.substring(start, from);\r\n      start = to;\r\n    }\r\n    ret.remains += text.substring(start);\r\n  } else {\r\n    ret.remains = text;\r\n  }\r\n  return ret;\r\n}\r\n","enum ValueType {\r\n  Str,\r\n  Int,\r\n  Int_Int,\r\n}\r\n/**\r\n * \r\n *\r\n * @export\r\n */\r\nexport class ColonValueReader<Output = any> {\r\n  private _cells: [keyof Output, ValueType][] = [];\r\n  str(name: keyof Output): this {\r\n    this._cells.push([name, ValueType.Str]);\r\n    return this;\r\n  }\r\n  int(name: keyof Output): this {\r\n    this._cells.push([name, ValueType.Int]);\r\n    return this;\r\n  }\r\n  int_2(name: keyof Output): this {\r\n    this._cells.push([name, ValueType.Int_Int]);\r\n    return this;\r\n  }\r\n\r\n  read(text: string, output: Output): [Output | null, string] {\r\n    let rem_txt = text;\r\n    for (const [n, t] of this._cells) {\r\n      switch (t) {\r\n        case ValueType.Str: {\r\n          const reg_str = `${n.toString()}\\\\s*:\\\\s*(\\\\S+)[\\\\s|\\\\n]*`;\r\n          const reg_res = new RegExp(reg_str).exec(rem_txt);\r\n          if (!reg_res) break;\r\n          (output as any)[n] = reg_res[1];\r\n          rem_txt =\r\n            rem_txt.slice(0, reg_res.index) + rem_txt.slice(reg_res[0].length);\r\n          break;\r\n        }\r\n        case ValueType.Int: {\r\n          const reg_str = `${n.toString()}\\\\s*:\\\\s*(\\\\d+)[\\\\s|\\\\n]*`;\r\n          const reg_res = new RegExp(reg_str).exec(rem_txt);\r\n          if (!reg_res) break;\r\n          (output as any)[n] = Number(reg_res[1]);\r\n          rem_txt =\r\n            rem_txt.slice(0, reg_res.index) + rem_txt.slice(reg_res[0].length);\r\n          break;\r\n        }\r\n        case ValueType.Int_Int: {\r\n          const reg_str = `${n.toString()}\\\\s*:\\\\s*(\\\\d+)\\\\s*(\\\\d+)[\\\\s|\\\\n]*`;\r\n          const reg_res = new RegExp(reg_str).exec(rem_txt);\r\n          if (!reg_res) break;\r\n          (output as any)[n] = [Number(reg_res[1]), Number(reg_res[2])];\r\n          rem_txt =\r\n            rem_txt.slice(0, reg_res.index) + rem_txt.slice(reg_res[0].length);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return [output, rem_txt];\r\n  }\r\n}\r\n","import { BackgroundGroup } from \"../defines\";\r\nimport { IBgData } from \"../defines/IBgData\";\r\nimport { IBgLayerInfo } from \"../defines/IBgLayerInfo\";\r\nimport { IDatIndex } from \"../defines/IDatIndex\";\r\nimport { Defines } from \"../defines/defines\";\r\nimport { min } from \"../utils/math/base\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport { take_blocks } from \"../utils/string_parser/take_blocks\";\r\nimport { to_num } from \"../utils/type_cast/to_num\";\r\nimport { is_str } from \"../utils/type_check\";\r\nimport { ColonValueReader } from \"./ColonValueReader\";\r\nimport { take } from \"./take\";\r\nconst bg_color_translate = function (rect: number | string) {\r\n  switch (\"\" + rect) {\r\n    case \"4706\":\r\n      return \"rgb(16,79,16)\";\r\n    case \"16835\":\r\n      return \"rgb(66,56,24)\";\r\n    case \"21096\":\r\n      return \"rgb(90,78,75)\";\r\n    case \"25356\":\r\n      return \"rgb(103,103,103)\";\r\n    case \"29582\":\r\n      return \"rgb(119,119,119)\";\r\n    case \"33580\":\r\n      return \"rgb(135,107,103)\";\r\n    case \"37770\":\r\n      return \"rgb(154,110,90)\";\r\n    case \"37773\":\r\n      return \"rgb(151,119,111)\";\r\n    case \"34816\":\r\n      return \"rgb(143,7,7)\";\r\n    case \"40179\":\r\n    case \"40179b\":\r\n      return \"rgb(159,163,159)\";\r\n  }\r\n  if (is_str(rect)) return rect;\r\n  const r = (rect >> 11) << 3;\r\n  const g = ((rect >> 6) & 31) << 3;\r\n  const b = (rect & 31) << 3;\r\n  return (\r\n    \"rgb(\" +\r\n    (r + (r > 64 || r === 0 ? 7 : 0)) +\r\n    \",\" +\r\n    (g + (g > 64 || g === 0 ? 7 : 0) + ((rect >> 5) & 1 && g > 80 ? 4 : 0)) +\r\n    \",\" +\r\n    (b + (b > 64 || b === 0 ? 7 : 0)) +\r\n    \")\"\r\n  );\r\n};\r\nexport function make_bg_data(\r\n  full_str: string,\r\n  datIndex?: IDatIndex,\r\n): IBgData | void {\r\n  const [fields] = new ColonValueReader()\r\n    .str(\"name\")\r\n    .int(\"width\")\r\n    .int_2(\"zboundary\")\r\n    .str(\"shadow\")\r\n    .int_2(\"shadowsize\")\r\n    .read(full_str, {});\r\n\r\n  const width = take(fields, \"width\");\r\n  const [a, b] = take(fields, \"zboundary\");\r\n  fields.left = 0;\r\n  fields.right = width;\r\n  fields.far = 2 * (a - Defines.CLASSIC_SCREEN_HEIGHT);\r\n  fields.near = 2 * (b - Defines.CLASSIC_SCREEN_HEIGHT);\r\n\r\n  const ret: IBgData = {\r\n    type: \"background\",\r\n    id: datIndex?.id ?? fields.name,\r\n    base: fields,\r\n    layers: [],\r\n  };\r\n  ret.base.name = ret.base.name.replace(/_/g, \" \");\r\n  ret.base.shadow = ret.base.shadow.replace(/.bmp$/, \".png\").replace(/\\\\/g, '/');\r\n  const { blocks, remains } = take_blocks(full_str, \"layer:\", \"layer_end\");\r\n  full_str = remains\r\n\r\n  let min_y = Defines.CLASSIC_SCREEN_HEIGHT;\r\n  for (const block_str of blocks) {\r\n    const [file, remains] = block_str\r\n      .trim()\r\n      .split(/\\n|\\r/g)\r\n      .filter((v) => v)\r\n      .map((v) => v.trim());\r\n    const fields: any = {};\r\n    for (const [key, value] of match_colon_value(remains)) {\r\n      fields[key] = to_num(value) ?? value;\r\n    }\r\n    take(fields, \"transparency\");\r\n    const y = take(fields, \"y\");\r\n    const cc = take(fields, \"cc\");\r\n    const c1 = take(fields, \"c1\");\r\n    const c2 = take(fields, \"c2\");\r\n    const color = take(fields, \"rect\");\r\n    const layer: IBgLayerInfo = {\r\n      ...fields,\r\n      file: file.replace(/.bmp$/, \".png\").replace(/\\\\/g, '/'),\r\n      y: Defines.CLASSIC_SCREEN_HEIGHT - y,\r\n      z: ret.layers.length - blocks.length,\r\n    };\r\n    min_y = min(layer.y, min_y);\r\n    if (color) {\r\n      layer.absolute = 1;\r\n      layer.color = bg_color_translate(color);\r\n      delete layer.file;\r\n    } else if (\r\n      typeof cc === \"number\" &&\r\n      typeof c1 === \"number\" &&\r\n      typeof c2 === \"number\"\r\n    ) {\r\n      layer.cc = cc * 2;\r\n      layer.c1 = c1 * 2;\r\n      layer.c2 = c2 * 2 + 1;\r\n    }\r\n    ret.layers.push(layer);\r\n  }\r\n\r\n  if (datIndex && datIndex.file.startsWith(\"bg/template\")) {\r\n    ret.base.group = []\r\n  } else {\r\n    ret.base.group = [BackgroundGroup.Regular]\r\n  }\r\n  return ret;\r\n}\r\n","import { IEntityData } from \"../defines/IEntityData\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { IEntityInfo } from \"../defines/IEntityInfo\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\n\r\nexport function make_entity_data(\r\n  info: IEntityInfo,\r\n  frames: Record<string, IFrameInfo>,\r\n): IEntityData {\r\n  const ret: IEntityData = {\r\n    id: \"\",\r\n    type: EntityEnum.Entity,\r\n    base: info,\r\n    frames: frames,\r\n  };\r\n  return ret;\r\n}\r\n","export function take_number(v: any, k: any): number | undefined;\r\nexport function take_number<T>(v: any, k: any, or: T): number | T;\r\nexport function take_number<T>(v: any, k: any, or?: T): number | T | undefined {\r\n  const ret = typeof v[k] === \"number\" ? v[k] : or;\r\n  delete v[k];\r\n  return ret;\r\n}\r\n","import { INextFrame, TNextFrame } from \"../defines\";\r\n\r\nexport function edit_next_frame(\r\n  nexts: TNextFrame,\r\n  fn: (item: INextFrame, idx: number, arr: INextFrame[]) => void,\r\n) {\r\n  (Array.isArray(nexts) ? nexts : [nexts]).forEach(fn);\r\n  return nexts;\r\n}\r\nexport function add_next_frame(\r\n  src: TNextFrame | undefined,\r\n  ...items: INextFrame[]\r\n): TNextFrame | undefined {\r\n  if (!items.length) return src;\r\n\r\n  if (Array.isArray(src)) {\r\n    return [...src, ...items];\r\n  } else if (src) {\r\n    return [src, ...items];\r\n  }\r\n  return [...items];\r\n\r\n}\r\n","import { IFrameInfo, INextFrame, IHitKeyCollection } from \"../defines\";\nimport { IHoldKeyCollection } from \"../defines/IHoldKeyCollection\";\nimport { add_next_frame } from \"./edit_next_frame\";\n\n\nexport class FrameEditing {\n  frame: IFrameInfo;\n  constructor(frame: IFrameInfo) {\n    this.frame = frame;\n  }\n  init(frame: IFrameInfo) {\n    this.frame = frame;\n    return this;\n  }\n  keydown(key: keyof IHoldKeyCollection, ...nexts: INextFrame[]) {\n    this.frame.key_down = this.frame.key_down || {};\n    this.frame.key_down[key] = add_next_frame(this.frame.key_down[key], ...nexts);\n    return this;\n  }\n  hit(key: keyof IHitKeyCollection, ...nexts: INextFrame[]) {\n    this.frame.hit = this.frame.hit || {};\n    this.frame.hit[key] = add_next_frame(this.frame.hit[key], ...nexts);\n    return this;\n  }\n}\n","import { IEntityData } from \"../defines\";\nimport { ILegacyPictureInfo } from \"../defines/ILegacyPictureInfo\";\n\nconst suffix_reg = /\\.[^.]*$/\nconst get_letter = (offset: number) => String.fromCharCode(98 + offset);\n\nexport function cook_file_variants(ret: IEntityData) {\n  const file_keys = Object.keys(ret.base.files);\n  if (!file_keys.length || file_keys.length % 2 !== 0)\n    return;\n  const infos: ILegacyPictureInfo[] = file_keys.sort().map(k => ret.base.files[k] as ILegacyPictureInfo)\n  const indexes = [0]\n  const first_str = infos[0].path.replace(suffix_reg, '')\n  for (let i = 0; i < 16; ++i) {\n    const letter = get_letter(i);\n    const v_idx = infos.findIndex(info => info.path.replace(suffix_reg, '') === first_str + letter);\n    if (v_idx < 1) break;\n    indexes.push(v_idx);\n  }\n  const gap = indexes.reduce<number | null>((pre, item, idx, arr) => {\n    if (idx === 0) return item;\n    const diff = item - arr[idx - 1];\n    if (idx === 1) return diff\n    return pre === diff ? pre : null\n  }, 0)\n  if (!gap) return;\n  let is_match = true;\n  for (let i = 0; i < gap; ++i) {\n    const template = infos[i]\n    const variants = indexes.slice(1).map(j => infos[j + i])\n    is_match = !variants.some((variant, idx) => {\n      const is_path_ok =\n        variant.path.replace(suffix_reg, '') ===\n        template.path.replace(suffix_reg, '') + get_letter(idx);\n      return !is_path_ok ||\n        variant.col !== template.col ||\n        variant.row !== template.row ||\n        variant.cell_w !== template.cell_w ||\n        variant.cell_h !== template.cell_h\n    })\n    if (!is_match) return;\n  }\n  for (let i = 0; i < gap; ++i) {\n    infos[i].variants = indexes.slice(1).map(j => infos[j + i].id)\n  }\n}","import { FacingFlag, IEntityInfo, IFrameInfo, ItrKind, StateEnum, TNextFrame, WeaponType } from \"../defines\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { BdyKind } from \"../defines/BdyKind\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { EntityVal } from \"../defines/EntityVal\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IFrameIndexes } from \"../defines/IFrameIndexes\";\r\nimport { INextFrame } from \"../defines/INextFrame\";\r\nimport { Defines } from \"../defines/defines\";\r\nimport { ensure, round } from \"../utils\";\r\nimport { set_obj_field } from \"../utils/container_help/set_obj_field\";\r\nimport { take_number } from \"../utils/container_help/take_number\";\r\nimport { traversal } from \"../utils/container_help/traversal\";\r\nimport { is_num, is_str } from \"../utils/type_check\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { FrameEditing } from \"./FrameEditing\";\r\nimport { cook_file_variants } from \"./cook_file_variants\";\r\nimport { cook_next_frame_mp_hp } from \"./cook_next_frame_mp_hp\";\r\nimport { add_next_frame, edit_next_frame } from \"./edit_next_frame\";\r\nimport {\r\n  get_next_frame_by_raw_id,\r\n} from \"./get_the_next\";\r\nimport { take } from \"./take\";\r\nimport { take_raw_frame_mp } from \"./take_raw_frame_mp\";\r\nconst k_9 = [\"Fa\", \"Fj\", \"Da\", \"Dj\", \"Ua\", \"Uj\", \"ja\"] as const;\r\n\r\nconst set_hit_turn_back = (frame: IFrameInfo, back_frame_id?: string) => {\r\n  frame.key_down = frame.key_down || {};\r\n  frame.key_down.B = { id: back_frame_id, wait: \"i\", facing: FacingFlag.Backward };\r\n};\r\nexport function make_character_data(\r\n  info: IEntityInfo,\r\n  frames: Record<string, IFrameInfo>,\r\n): IEntityData {\r\n  const walking_frame_rate = take_number(info, \"walking_frame_rate\", 3);\r\n  const running_frame_rate = take_number(info, \"running_frame_rate\", 3);\r\n  const walking_speed = take_number(info, \"walking_speed\", 0);\r\n  const walking_speedz = take_number(info, \"walking_speedz\", 0);\r\n  const running_speed = take_number(info, \"running_speed\", 0);\r\n  const running_speedz = take_number(info, \"running_speedz\", 0);\r\n  const heavy_walking_speed = take_number(info, \"heavy_walking_speed\", 0);\r\n  const heavy_walking_speedz = take_number(info, \"heavy_walking_speedz\", 0);\r\n  const heavy_running_speed = take_number(info, \"heavy_running_speed\", 0);\r\n  const heavy_running_speedz = take_number(info, \"heavy_running_speedz\", 0);\r\n  const rowing_height = take_number(info, \"rowing_height\", 0);\r\n\r\n  if (info.jump_height)\r\n    info.jump_height = round((info.jump_height * info.jump_height) / 3.5);\r\n  if (info.dash_height)\r\n    info.dash_height = round((info.dash_height * info.dash_height) / 3.5);\r\n  if (info.rowing_height)\r\n    info.rowing_height = round(info.rowing_height * info.rowing_height / 3.5);\r\n  // if (info.rowing_height) info.rowing_height = -info.rowing_height;\r\n\r\n  if (info.dash_distance) info.dash_distance /= 2;\r\n  if (info.jump_distance) info.jump_distance /= 2;\r\n  if (info.rowing_distance) info.rowing_distance /= 2;\r\n\r\n  info.fall_value = Defines.DEFAULT_FALL_VALUE_MAX;\r\n  info.defend_value = Defines.DEFAULT_DEFEND_VALUE_MAX;\r\n  const round_trip_frames_map: any = {};\r\n  const frame_mp_hp_map = new Map<string, [number, number]>();\r\n\r\n  traversal(frames, (frame_id, frame) => {\r\n    frame_mp_hp_map.set(frame_id, take_raw_frame_mp(frame));\r\n  });\r\n\r\n  for (const [frame_id, frame] of traversal(frames)) {\r\n    if (Array.isArray(frame.next)) {\r\n      for (const n of frame.next)\r\n        cook_next_frame_mp_hp(n, \"next\", frame_mp_hp_map);\r\n    } else {\r\n      cook_next_frame_mp_hp(frame.next, \"next\", frame_mp_hp_map);\r\n    }\r\n\r\n    const hit_a = take(frame, \"hit_a\");\r\n    if (hit_a)\r\n      frame.hit = set_obj_field(\r\n        frame.hit,\r\n        \"a\",\r\n        get_next_frame_by_raw_id(hit_a, \"hit\", frame_mp_hp_map),\r\n      );\r\n    const hit_j = take(frame, \"hit_j\");\r\n    if (hit_j)\r\n      frame.hit = set_obj_field(\r\n        frame.hit,\r\n        \"j\",\r\n        get_next_frame_by_raw_id(hit_j, \"hit\", frame_mp_hp_map),\r\n      );\r\n    const hit_d = take(frame, \"hit_d\");\r\n    if (hit_d)\r\n      frame.hit = set_obj_field(\r\n        frame.hit,\r\n        \"d\",\r\n        get_next_frame_by_raw_id(hit_d, \"hit\", frame_mp_hp_map),\r\n      );\r\n\r\n    k_9.forEach((k) => {\r\n      const next = take(frame, `hit_${k}`);\r\n\r\n      if (!is_str(next) && !is_num(next)) return;\r\n      if (next === \"0\" || next === 0) return;\r\n\r\n      if (!frame.hit) frame.hit = {};\r\n      if (!frame.seqs) frame.seqs = {};\r\n      const nf = get_next_frame_by_raw_id(next, \"hit\", frame_mp_hp_map);\r\n\r\n      if (k === \"Fa\" || k === \"Fj\") {\r\n        frame.seqs[\"L\" + k[1]] = {\r\n          ...nf,\r\n          facing:\r\n            nf.facing === FacingFlag.Backward\r\n              ? FacingFlag.Right\r\n              : FacingFlag.Left,\r\n        };\r\n        frame.seqs[\"R\" + k[1]] = {\r\n          ...nf,\r\n          facing:\r\n            nf.facing === FacingFlag.Backward\r\n              ? FacingFlag.Right\r\n              : FacingFlag.Right,\r\n        };\r\n      } else {\r\n        frame.seqs[k] = nf;\r\n      }\r\n    });\r\n\r\n    const editing = new FrameEditing(frame);\r\n    switch (Number(frame.id)) {\r\n      /** standing */\r\n      case 0:\r\n      case 1:\r\n      case 2:\r\n      case 3:\r\n      case 4:\r\n        break;\r\n      /** walking */\r\n      case 5:\r\n      case 6:\r\n      case 7:\r\n      case 8: {\r\n        set_hit_turn_back(frame);\r\n        editing.hit('a', {\r\n          // weapon throw\r\n          id: \"45\", facing: FacingFlag.Ctrl,\r\n          expression: new CondMaker<EntityVal>()\r\n            .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Baseball)\r\n            .or(c => c\r\n              .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Knife)\r\n              .and(EntityVal.PressFB, \"!=\", 0),\r\n            ).done(),\r\n        }, { // weapon swing\r\n          id: [\"20\", \"25\"], facing: FacingFlag.Ctrl,\r\n          expression: new CondMaker<EntityVal>()\r\n            .one_of(EntityVal.Holding_W_Type, WeaponType.Knife, WeaponType.Stick)\r\n            .done(),\r\n        }, { // drink\r\n          id: \"55\", facing: FacingFlag.Ctrl,\r\n          expression: new CondMaker<EntityVal>()\r\n            .one_of(EntityVal.Holding_W_Type, WeaponType.Drink)\r\n            .done(),\r\n        }, { // super_punch\r\n          id: \"70\", facing: FacingFlag.Ctrl,\r\n          expression: new CondMaker<EntityVal>()\r\n            .add(EntityVal.RequireSuperPunch, \"==\", 1)\r\n            .done(),\r\n        }, { // punch\r\n          id: [\"60\", \"65\"], facing: FacingFlag.Ctrl\r\n        })\r\n          .hit('j', { id: \"210\" }) // jump\r\n          .hit('d', { id: \"110\" }) // defend\r\n          .hit('FF', { id: \"running_0\" })\r\n        frame.dvx = walking_speed / 2;\r\n        frame.dvz = walking_speedz;\r\n        frame.ctrl_z = 1;\r\n        frame.ctrl_x = 1;\r\n        break;\r\n      }\r\n      /** running */\r\n      case 9:\r\n      case 10:\r\n      case 11: {\r\n        editing.hit('a', {\r\n          // \r\n          id: \"45\",\r\n          expression: new CondMaker<EntityVal>()\r\n            .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Baseball)\r\n            .or(c => c\r\n              .add(EntityVal.PressFB, \"==\", 1)\r\n              .and(EntityVal.Holding_W_Type, \"!=\", WeaponType.None),\r\n            ).done(),\r\n        }, { // drink\r\n          id: \"55\",\r\n          expression: new CondMaker<EntityVal>()\r\n            .one_of(EntityVal.Holding_W_Type, WeaponType.Drink)\r\n            .done(),\r\n        }, {\r\n          id: \"35\",\r\n          expression: new CondMaker<EntityVal>()\r\n            .one_of(EntityVal.Holding_W_Type, WeaponType.Knife, WeaponType.Stick)\r\n            .done()\r\n        }, { // run_atk\r\n          id: \"85\"\r\n        }).hit('j', { id: \"213\" }) // dash\r\n          .hit('d', { id: \"102\" }) // rowing\r\n          .keydown('B', { id: \"218\" }); // running_stop\r\n        frame.dvx = Number((running_speed / 2).toFixed(1));\r\n        frame.dvz = running_speedz;\r\n        frame.ctrl_z = 1;\r\n        break;\r\n      }\r\n      /** heavy_obj_walk */\r\n      case 12:\r\n      case 13:\r\n      case 14:\r\n      case 15: {\r\n        set_hit_turn_back(frame);\r\n        // set_hold_turn_back(frame);\r\n        frame.hit = frame.hit || {};\r\n        frame.hit.FF = { id: \"heavy_obj_run_0\" };\r\n        frame.hit.a = add_next_frame(frame.hit.a, { id: \"50\", facing: FacingFlag.Ctrl }); // running_stop\r\n        frame.dvx = heavy_walking_speed / 2;\r\n        frame.dvz = heavy_walking_speedz;\r\n        frame.ctrl_x = frame.ctrl_z = 1;\r\n        break;\r\n      }\r\n      /** heavy_obj_run */\r\n      case 16:\r\n      case 17:\r\n      case 18: {\r\n        frame.hit = frame.hit || {};\r\n        frame.hold = frame.hold || {};\r\n        frame.key_down = frame.key_down || {};\r\n        frame.key_down.B = { id: \"19\" }; // running_stop\r\n        frame.hit.a = add_next_frame(frame.hit.a, { id: \"50\" });\r\n        frame.dvx = Number((heavy_running_speed / 2).toFixed(1));\r\n        frame.dvz = heavy_running_speedz;\r\n        frame.ctrl_z = 1;\r\n        break;\r\n      }\r\n      /*\r\n        defend 110\r\n        defend_hit 111\r\n       */\r\n      case 110:\r\n      case 111: {\r\n        set_hit_turn_back(frame);\r\n        // set_hold_turn_back(frame);\r\n        if (frame.bdy?.length)\r\n          for (const bdy of frame.bdy) {\r\n            bdy.actions = ensure(bdy.actions,\r\n              { type: ActionType.V_BrokenDefend, data: { id: \"112\" } },\r\n              { type: ActionType.V_Defend, data: { id: \"111\" } }\r\n            );\r\n          }\r\n        break;\r\n      }\r\n      /** broken_defend */\r\n      case 112: {\r\n        break;\r\n      }\r\n      /** jump */\r\n      case 210:\r\n      case 211:\r\n      case 212: {\r\n        set_hit_turn_back(frame);\r\n        // set_hold_turn_back(frame);\r\n        frame.hit = frame.hit || {};\r\n        frame.key_down = frame.hit || {};\r\n        frame.hold = frame.hold || {};\r\n\r\n        if (frame_id === \"211\") frame.jump_flag = 1;\r\n        if (frame_id === \"212\") {\r\n          add_key_down_jump_atk(frame); // jump_atk\r\n        }\r\n        frame.key_down.B = { facing: FacingFlag.Ctrl };\r\n        break;\r\n      }\r\n      /** dash */\r\n      case 213:\r\n      case 214:\r\n      case 216:\r\n      case 217: {\r\n        if (frame_id === \"213\" && frames[214]) set_hit_turn_back(frame, \"214\"); // turn back;\r\n        if (frame_id === \"216\" && frames[217]) set_hit_turn_back(frame, \"217\"); // turn back;\r\n        if (frame_id === \"214\" && frames[213]) set_hit_turn_back(frame, \"213\"); // turn back;\r\n        if (frame_id === \"217\" && frames[216]) set_hit_turn_back(frame, \"216\"); // turn back;\r\n        // julianknightdash\r\n        if (frame.state === StateEnum.Dash && (frame_id === \"213\" || frame_id === \"216\")) {\r\n          frame.key_down = frame.key_down || {};\r\n          frame.key_down.a = add_next_frame(frame.key_down.a,\r\n            {\r\n              id: \"52\", facing: FacingFlag.Ctrl,\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(\r\n                  EntityVal.Holding_W_Type,\r\n                  WeaponType.Baseball,\r\n                  WeaponType.Drink,\r\n                )\r\n                .done(),\r\n            },\r\n            {\r\n              id: \"40\", facing: FacingFlag.Ctrl,\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(\r\n                  EntityVal.Holding_W_Type,\r\n                  WeaponType.Knife,\r\n                  WeaponType.Stick,\r\n                ).done(),\r\n            },\r\n            { id: \"90\" },\r\n          ); // dash_atk\r\n        }\r\n\r\n        if (frame.state === StateEnum.Jump) {\r\n          add_key_down_jump_atk(frame)\r\n          frame.state = StateEnum.Dash\r\n        }\r\n        break;\r\n      }\r\n\r\n      /** catching */\r\n      case 120:\r\n      case 121:\r\n      case 122:\r\n      case 123:\r\n        if (frame.cpoint) {\r\n          if (frame.cpoint.vaction)\r\n            (frame.cpoint?.vaction as INextFrame).facing =\r\n              FacingFlag.OpposingCatcher;\r\n          const a_action = take(frame.cpoint, \"aaction\");\r\n          const t_action = take(frame.cpoint, \"taction\");\r\n          const s_hit_a = frame.hit?.a;\r\n          let t_hit_a: INextFrame[] | undefined;\r\n          let a_hit_a: INextFrame | undefined;\r\n          if (t_action) {\r\n            t_hit_a = [\r\n              {\r\n                ...get_next_frame_by_raw_id(t_action),\r\n                facing: FacingFlag.Ctrl,\r\n                expression: new CondMaker<EntityVal>()\r\n                  .add(EntityVal.Catching, \"==\", 1)\r\n                  .and()\r\n                  .wrap((c) => {\r\n                    return c\r\n                      .add(EntityVal.PressFB, \"!=\", 0)\r\n                      .or(EntityVal.PressUD, \"!=\", 0);\r\n                  })\r\n                  .done(),\r\n              },\r\n            ];\r\n          }\r\n          if (a_action)\r\n            a_hit_a = {\r\n              ...get_next_frame_by_raw_id(a_action),\r\n              expression: new CondMaker<EntityVal>()\r\n                .add(EntityVal.Catching, \"==\", 1)\r\n                .done(),\r\n            };\r\n          if (Array.isArray(s_hit_a)) {\r\n            t_hit_a && s_hit_a.unshift(...t_hit_a);\r\n            a_hit_a && s_hit_a.unshift(a_hit_a);\r\n          } else {\r\n            let c = 0;\r\n            if (s_hit_a) ++c;\r\n            if (t_hit_a) ++c;\r\n            if (a_hit_a) ++c;\r\n            if (c >= 2) {\r\n              const hit_a: INextFrame[] = [];\r\n              s_hit_a && hit_a.push(s_hit_a);\r\n              t_hit_a && hit_a.push(...t_hit_a);\r\n              a_hit_a && hit_a.push(a_hit_a);\r\n              frame.hit = frame.hit || {};\r\n              frame.hit.a = add_next_frame(frame.hit.a, ...hit_a);\r\n            } else if (c === 1) {\r\n              frame.hit = frame.hit || {};\r\n              if (s_hit_a)\r\n                frame.hit.a = add_next_frame(frame.hit.a, s_hit_a);\r\n              else if (t_hit_a)\r\n                frame.hit.a = add_next_frame(frame.hit.a, ...t_hit_a);\r\n              else if (a_hit_a)\r\n                frame.hit.a = add_next_frame(frame.hit.a, a_hit_a);\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      /** throw_lying_man */\r\n      case 232:\r\n      case 233:\r\n      case 234:\r\n        if (frame.cpoint?.vaction)\r\n          (frame.cpoint?.vaction as INextFrame).facing =\r\n            FacingFlag.OpposingCatcher;\r\n        break;\r\n      case 100:\r\n      case 108:\r\n        // frame.dvy = -rowing_height / frame.wait;\r\n        // frame.dvy = -rowing_height / frame.wait;\r\n        break;\r\n      /** 180~185falling  */\r\n      case 180:\r\n        break;\r\n      case 181:\r\n      case 182:\r\n        editing.hit('j', {\r\n          id: \"100\",\r\n          expression: new CondMaker<EntityVal>()\r\n            .add(EntityVal.HP, \">\", 0)\r\n            .and(EntityVal.LastestCollidedItrKind, \"!=\", ItrKind.MagicFlute)\r\n            .and(EntityVal.LastestCollidedItrKind, \"!=\", ItrKind.MagicFlute2)\r\n            .done(),\r\n        });\r\n        break;\r\n      case 183:\r\n      case 184:\r\n      case 185:\r\n        break;\r\n\r\n      /** 186~191falling  */\r\n      case 186:\r\n        break;\r\n      case 187:\r\n      case 188:\r\n        if (!frame.hit) frame.hit = {};\r\n        frame.hit.j = add_next_frame(frame.hit.j, {\r\n          id: \"108\",\r\n          expression: new CondMaker<EntityVal>()\r\n            .add(EntityVal.HP, \">\", 0)\r\n            .done(),\r\n        });\r\n        break;\r\n      case 189:\r\n      case 190:\r\n      case 191:\r\n        break;\r\n      case 200:\r\n        frame.state = StateEnum.Frozen;\r\n        break;\r\n      /** crouch */\r\n      case 215:\r\n        const to_dash_frame: TNextFrame = [\r\n          {\r\n            id: \"213\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.PressLR, \"==\", -1)\r\n              .done(),\r\n            facing: FacingFlag.Left,\r\n          },\r\n          {\r\n            id: \"213\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.PressLR, \"==\", 1)\r\n              .done(),\r\n            facing: FacingFlag.Right,\r\n          },\r\n          {\r\n            id: \"214\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.TrendX, \"==\", -1)\r\n              .done(),\r\n          },\r\n          {\r\n            id: \"213\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.TrendX, \"==\", 1)\r\n              .done(),\r\n          },\r\n        ]; // dash\r\n        frame.hit = frame.hit || {};\r\n        frame.hit.d = { id: \"102\", facing: FacingFlag.Ctrl };\r\n        frame.hit.j = to_dash_frame;\r\n        // frame.hold = frame.hold || {};\r\n        // frame.hold.d = { id: '102', facing: FacingFlag.ByController };\r\n        // frame.hold.j = to_dash_frame;\r\n        break;\r\n    }\r\n    switch (frame.state) {\r\n      case StateEnum.Frozen:\r\n        edit_next_frame(frame.next, (i) => {\r\n          const f = typeof i.id === \"string\" && frames[i.id];\r\n          if (!f) return;\r\n          if (f.state !== StateEnum.Frozen) {\r\n            i.blink_time = 60;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case StateEnum.Standing:\r\n        frame.hit = frame.hit || {};\r\n        frame.hold = frame.hold || {};\r\n        frame.key_down = frame.key_down || {}\r\n        frame.hit.a = [\r\n          {\r\n            id: \"45\",\r\n            facing: FacingFlag.Ctrl,\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Baseball)\r\n              .or((v) =>\r\n                v\r\n                  .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Knife)\r\n                  .and(EntityVal.PressFB, \"!=\", 0),\r\n              )\r\n              .done(),\r\n          },\r\n          {\r\n            id: [\"20\", \"25\"],\r\n            facing: FacingFlag.Ctrl,\r\n            expression: new CondMaker<EntityVal>()\r\n              .one_of(EntityVal.Holding_W_Type, WeaponType.Knife, WeaponType.Stick)\r\n              .done(),\r\n          },\r\n          {\r\n            id: \"55\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .one_of(EntityVal.Holding_W_Type, WeaponType.Drink)\r\n              .done(),\r\n            facing: FacingFlag.Ctrl,\r\n          },\r\n          {\r\n            id: \"70\",\r\n            expression: new CondMaker<EntityVal>()\r\n              .add(EntityVal.RequireSuperPunch, \"==\", 1)\r\n              .done(),\r\n          },\r\n          { id: [\"60\", \"65\"], facing: FacingFlag.Ctrl },\r\n        ]; // punch\r\n        frame.hit.j = { id: \"210\", facing: FacingFlag.Ctrl }; // jump\r\n        frame.hit.d = { id: \"110\", facing: FacingFlag.Ctrl }; // defend\r\n        frame.key_down.U = frame.key_down.D =\r\n          frame.key_down.L = frame.key_down.R =\r\n          { id: \"walking_0\", facing: FacingFlag.Ctrl }; // walking\r\n        frame.hit.FF = frame.hit.FF = { id: \"running_0\" };\r\n        break;\r\n      case StateEnum.BurnRun:\r\n      case StateEnum.Z_Moveable:\r\n        frame.dvz = running_speedz;\r\n        frame.ctrl_z = 1;\r\n        break;\r\n      case StateEnum.Defend: {\r\n        if (frame.bdy?.length)\r\n          for (const bdy of frame.bdy) {\r\n            bdy.kind = BdyKind.Defend;\r\n            bdy.kind_name = BdyKind[bdy.kind];\r\n            if (!bdy.actions?.find(v => v.type === ActionType.V_BrokenDefend)) {\r\n              bdy.actions = ensure(bdy.actions, {\r\n                type: ActionType.V_BrokenDefend,\r\n                data: { id: \"112\" }\r\n              })\r\n            }\r\n          }\r\n        break;\r\n      }\r\n      case StateEnum.Walking:\r\n        /** heavy_obj_walk */\r\n        if (\r\n          frame_id !== \"12\" &&\r\n          frame_id !== \"13\" &&\r\n          frame_id !== \"14\" &&\r\n          frame_id !== \"15\"\r\n        ) {\r\n          frame.hit = frame.hit || {};\r\n          frame.hit.a = [\r\n            {\r\n              id: [\"45\"],\r\n              facing: FacingFlag.Ctrl,\r\n              expression: new CondMaker<EntityVal>()\r\n                .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Baseball)\r\n                .or((v) =>\r\n                  v\r\n                    .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Knife)\r\n                    .and(EntityVal.PressFB, \"!=\", 0),\r\n                )\r\n                .done(),\r\n            },\r\n            {\r\n              id: [\"20\", \"25\"],\r\n              facing: FacingFlag.Ctrl,\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(\r\n                  EntityVal.Holding_W_Type,\r\n                  WeaponType.Knife,\r\n                  WeaponType.Stick,\r\n                )\r\n                .done(),\r\n            }, // drink\r\n            {\r\n              id: \"55\",\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(EntityVal.Holding_W_Type, WeaponType.Drink)\r\n                .done(),\r\n              facing: FacingFlag.Ctrl,\r\n            },\r\n            {\r\n              id: \"70\",\r\n              expression: new CondMaker<EntityVal>()\r\n                .add(EntityVal.RequireSuperPunch, \"==\", 1)\r\n                .done(),\r\n            },\r\n            { id: [\"60\", \"65\"], facing: FacingFlag.Ctrl },\r\n          ]; // punch\r\n          frame.hit.j = { id: \"210\" }; // jump\r\n          frame.hit.d = { id: \"110\" }; // defend\r\n          frame.hit.FF = { id: \"running_0\" };\r\n          frame.dvx = walking_speed / 2;\r\n          frame.dvz = walking_speedz;\r\n          frame.ctrl_x = frame.ctrl_z = 1;\r\n          frame.wait = walking_frame_rate * 2 - 1;\r\n        }\r\n        set_hit_turn_back(frame);\r\n        // set_hold_turn_back(frame);\r\n        round_trip_frames_map[frame.name] =\r\n          round_trip_frames_map[frame.name] || [];\r\n        round_trip_frames_map[frame.name].push(frame);\r\n        delete frames[frame_id];\r\n        break;\r\n      case StateEnum.Running: {\r\n        /** heavy_obj_run */\r\n        if (frame_id !== \"16\" && frame_id !== \"17\" && frame_id !== \"18\") {\r\n          frame.hit = frame.hit || {};\r\n          frame.hit.a = [\r\n            {\r\n              // \r\n              id: [\"45\"],\r\n              expression: new CondMaker<EntityVal>()\r\n                .add(EntityVal.Holding_W_Type, \"==\", WeaponType.Baseball)\r\n                .or((v) =>\r\n                  v\r\n                    .add(EntityVal.PressFB, \"==\", 1)\r\n                    .and(EntityVal.Holding_W_Type, \"!=\", WeaponType.None),\r\n                )\r\n                .done(),\r\n            }, // drink\r\n            {\r\n              id: \"55\",\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(EntityVal.Holding_W_Type, WeaponType.Drink)\r\n                .done(),\r\n            },\r\n            {\r\n              id: \"35\",\r\n              expression: new CondMaker<EntityVal>()\r\n                .one_of(\r\n                  EntityVal.Holding_W_Type,\r\n                  WeaponType.Knife,\r\n                  WeaponType.Stick,\r\n                )\r\n                .done(),\r\n              facing: FacingFlag.Ctrl,\r\n            },\r\n            { id: \"85\" },\r\n          ]; // run_atk\r\n          frame.hit.j = { id: \"213\" }; // dash\r\n          frame.hit.d = { id: \"102\" }; // rowing\r\n          frame.key_down = frame.key_down || {};\r\n          frame.key_down.B = { id: \"218\" }; // running_stop\r\n          frame.dvx = Number((running_speed / 2).toFixed(1));\r\n          frame.dvz = running_speedz;\r\n          frame.ctrl_z = 1;\r\n          /* \r\n            NOTE: \r\n              LF2\r\n              wait next\r\n              \r\n              \r\n              WEMAKE\r\n              \r\n              0 ==> 1 ==> 2 ==> 1 ==>0\r\n              WEMAKE: 0 ==> 1 ==> 2 ==> copy_1 ==> 0\r\n          */\r\n          frame.wait = running_frame_rate * 2 - 1;\r\n        }\r\n        round_trip_frames_map[frame.name] =\r\n          round_trip_frames_map[frame.name] || [];\r\n        round_trip_frames_map[frame.name].push(frame);\r\n        delete frames[frame_id];\r\n        break;\r\n      }\r\n      case StateEnum.NextAsLanding: {\r\n        frame.next = { id: \"94\" };\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  const make_round_trip_frames = (prefix: string, src_frames: IFrameInfo[]) => {\r\n    for (let i = 0; i < 2 * src_frames.length - 2; ++i) {\r\n      const frame =\r\n        i < src_frames.length\r\n          ? src_frames[i]\r\n          : { ...src_frames[2 * (src_frames.length - 1) - i] };\r\n      frame.id = `${prefix}_${i}`;\r\n      frame.next = {\r\n        id: `${prefix}_${i === 2 * src_frames.length - 3 ? 0 : i + 1}`,\r\n      };\r\n      if (\r\n        frame.state === StateEnum.Standing ||\r\n        frame.state === StateEnum.Walking\r\n      ) {\r\n        frame.next.facing = FacingFlag.Ctrl\r\n      }\r\n      frames[frame.id] = frame;\r\n    }\r\n  };\r\n  for (const key in round_trip_frames_map)\r\n    make_round_trip_frames(key, round_trip_frames_map[key]);\r\n\r\n  const indexes: IFrameIndexes = {\r\n    standing: \"0\",\r\n    heavy_obj_walk: [\"heavy_obj_walk_0\"],\r\n    picking_light: \"115\",\r\n    picking_heavy: \"117\",\r\n    ice: \"200\",\r\n    fire: [\"203\", \"205\"],\r\n    injured: {\r\n      [-1]: \"220\",\r\n      1: \"222\",\r\n    },\r\n    dizzy: \"226\",\r\n    lying: {\r\n      [-1]: \"230\",\r\n      1: \"231\",\r\n    },\r\n    grand_injured: {\r\n      [-1]: [\"220\"],\r\n      1: [\"222\"],\r\n    },\r\n    in_the_skys: [\"212\"],\r\n    critical_hit: {\r\n      [-1]: [\"180\"],\r\n      1: [\"186\"],\r\n    },\r\n    falling: {\r\n      [-1]: [\"181\", \"182\", \"183\"],\r\n      1: [\"187\", \"188\", \"189\"],\r\n    },\r\n    bouncing: {\r\n      [-1]: [\"184\", \"185\"],\r\n      1: [\"190\", \"191\"],\r\n    },\r\n    landing_1: \"215\",\r\n    landing_2: \"219\",\r\n  };\r\n\r\n  const ret: IEntityData = {\r\n    id: \"\",\r\n    type: EntityEnum.Fighter,\r\n    base: info,\r\n    indexes,\r\n    frames,\r\n  };\r\n  cook_transform_begin_expression_to_hit(ret.frames);\r\n  cook_file_variants(ret);\r\n  return ret;\r\n}\r\n\r\nfunction add_key_down_jump_atk(frame: IFrameInfo) {\r\n  frame.key_down = frame.key_down || {}\r\n  frame.key_down.a = add_next_frame({\r\n    id: \"52\", // \r\n    facing: FacingFlag.Ctrl,\r\n    expression: new CondMaker<EntityVal>()\r\n      .one_of(\r\n        EntityVal.Holding_W_Type,\r\n        WeaponType.Baseball,\r\n        WeaponType.Drink\r\n      )\r\n      .or((v) => v\r\n        .add(EntityVal.PressFB, \"!=\", 0)\r\n        .and(EntityVal.Holding_W_Type, \"!=\", WeaponType.None)\r\n      )\r\n      .done(),\r\n  }, {\r\n    id: \"30\", // \r\n    facing: FacingFlag.Ctrl,\r\n    expression: new CondMaker<EntityVal>()\r\n      .one_of(\r\n        EntityVal.Holding_W_Type,\r\n        WeaponType.Knife,\r\n        WeaponType.Stick\r\n      )\r\n      .done(),\r\n  }, {\r\n    id: \"80\", // \r\n    facing: FacingFlag.Ctrl,\r\n  });\r\n}\r\n\r\nfunction cook_transform_begin_expression_to_hit<\r\n  F extends IFrameInfo = IFrameInfo,\r\n>(frames: Record<string, F>) {\r\n  const transform_begin_frame_id_list: string[] = [];\r\n  for (const k in frames) {\r\n    const { state, id } = frames[k];\r\n    if (state === StateEnum.TransformToCatching_Begin) {\r\n      transform_begin_frame_id_list.push(id);\r\n    }\r\n  }\r\n  if (transform_begin_frame_id_list.length) {\r\n    const cook_hit_next_frame_to_transform = (n: TNextFrame | undefined) => {\r\n      if (\r\n        !n ||\r\n        Array.isArray(n) ||\r\n        !n.id ||\r\n        Array.isArray(n.id) ||\r\n        transform_begin_frame_id_list.indexOf(n.id) < 0\r\n      )\r\n        return;\r\n      n.expression = new CondMaker()\r\n        .add(EntityVal.HAS_TRANSFORM_DATA, \"==\", 1)\r\n        .done();\r\n    };\r\n    for (const k in frames) {\r\n      const frame = frames[k];\r\n      const { hit } = frame;\r\n      if (!hit) continue;\r\n      cook_hit_next_frame_to_transform(hit.a);\r\n      cook_hit_next_frame_to_transform(hit.j);\r\n      cook_hit_next_frame_to_transform(hit.d);\r\n      if (frame.seqs)\r\n        for (const k2 in frame.seqs)\r\n          cook_hit_next_frame_to_transform(frame.seqs[k2]);\r\n    }\r\n  }\r\n}\r\n\r\n","import { is_num } from \"../utils/type_check\";\r\nimport { take } from \"./take\";\r\n\r\n/**\r\n * frameLF2mp, LFJHP,MP\r\n *\r\n * - LF2frame.mp\r\n *    - hit:\r\n *      - +# mp\r\n *      - -# mp\r\n *    - next:\r\n *      - +# mp\r\n *      - -# mp\r\n *    - 1000hp4300 = 40hp + 300mp\r\n * \r\n * @export\r\n * @param {*} frame \r\n * @returns {[number, number]} [MP,HP]\r\n */\r\nexport function take_raw_frame_mp(frame: any): [number, number] {\r\n  const mp = take(frame, \"mp\");\r\n  if (!is_num(mp)) return [0, 0];\r\n  if (mp < 1000 && mp > -1000) return [mp, 0];\r\n  const _mp = mp % 1000;\r\n  const hp = (mp - _mp) / 100;\r\n  return [_mp, hp];\r\n}\r\n","export const DESIRE_RATIO = 0.033333 as const;","import {\n  BotStateEnum, BotVal, Defines, EntityVal,\n  IBotAction\n} from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\nexport function bot_front_test(\n  action_id: IBotAction['action_id'],\n  keys: IBotAction['keys'],\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = 0,\n  max_x?: number,\n  zable?: number\n): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>();\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp);\n    const ray_1 = {\n      x: 1, z: 0, min_x, max_x\n    };\n    const rays = [ray_1];\n    if (zable && zable > 0) rays.push(\n      { ...ray_1, z: -zable },\n      { ...ray_1, z: zable }\n    );\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      e_ray: rays,\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: keys\n    };\n    return fn ? fn(ret, cond) : ret;\n  };\n}\n","import { GameKey as GK } from \"../../defines\";\nimport { IBotAction } from \"../../defines/IBotAction\";\nimport { bot_front_test } from \"./bot_front_test\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\nconst MIN_X = 120 as const;\nconst ID = 'd>a' as const\n/**\n * D>A\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=120] xx\n * @param {number} [max_x] xx\n * @param {number} [max_x] xx\n * @return {IBotAction}\n */\nexport function bot_ball_dfa(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x?: number,\n  zable?: number\n): IEditBotActionFunc {\n  return bot_front_test(\n    ID,\n    [GK.d, 'F', GK.a],\n    min_mp,\n    desire,\n    min_x,\n    max_x,\n    zable,\n  )\n}\n\nbot_ball_dfa.ID = ID\nbot_ball_dfa.MIN_X = MIN_X\n","import { GK, IBotAction } from \"../../defines\";\nimport { bot_front_test } from \"./bot_front_test\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\nconst MIN_X = 120 as const;\nconst ID = 'd>j' as const\n/**\n * D>J\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=120] xx\n * @param {number} [max_x] xx\n * @param {number} [zable] \n * @return {IBotAction}\n */\nexport function bot_ball_dfj(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x?: number,\n  zable?: number\n): IEditBotActionFunc {\n  return bot_front_test(\n    ID,\n    [GK.d, 'F', GK.j],\n    min_mp,\n    desire,\n    min_x,\n    max_x,\n    zable,\n  )\n}\nbot_ball_dfj.ID = ID\nbot_ball_dfj.MIN_X = MIN_X\n\n\n","\nimport {\n  BotStateEnum, BotVal, Defines, EntityVal, GK, GameKey, IBotAction\n} from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\ntype Key1 = '^' | '>' | 'v' | 'j';\ntype Key2 = 'a' | 'j';\nexport function bot_chasing_skill_action(\n  keys_str: `d${Key1}${Key2}`,\n  action_id: string = keys_str,\n  min_mp: number = -1,\n  desire: number = DESIRE_RATIO\n): IEditBotActionFunc {\n  const keys: IBotAction['keys'] = [GK.d];\n  switch (keys_str[1]) {\n    case '^': keys.push(GameKey.U); break;\n    case 'v': keys.push(GameKey.D); break;\n    case '>': keys.push('F'); break;\n    case 'j': keys.push(GameKey.j); break;\n  }\n  switch (keys_str[2]) {\n    case 'a': keys.push(GameKey.a); break;\n    case 'j': keys.push(GameKey.j); break;\n  }\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>()\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp)\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: keys\n    }\n    return fn ? fn(ret, cond) : ret\n  };\n}\n\n\n","import { arithmetic_progression } from \"../../utils\";\n\n\nexport const frames = {\n  walkings: arithmetic_progression(0, 5, 1).map(v => 'walking_' + v),\n  standings: arithmetic_progression(0, 3, 1).map(v => '' + v),\n  runnings: arithmetic_progression(0, 3, 1).map(v => 'running_' + v),\n  punchs: arithmetic_progression(60, 69),\n  rowings: arithmetic_progression(103, 107),\n  super_punch: arithmetic_progression(70, 79),\n};\n","import { BotStateEnum, Defines, EntityVal, GK, IBotAction, LGK } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\nexport function bot_ball_continuation(\n  action_id: string,\n  desire: number = DESIRE_RATIO,\n  mp: number = 0,\n  ...keys: (\"F\" | \"B\" | LGK)[]\n): IEditBotActionFunc {\n  return (edit) => {\n    const cond = new CondMaker()\n    if (mp > 0) cond.add(EntityVal.MP, '>=', mp)\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      expression: mp > 0 ? cond.done() : void 0,\n      e_ray: [{ x: 1, z: 0 }],\n      keys: keys.length ? keys : [GK.Attack]\n    }\n    return edit ? edit(ret, cond) : ret;\n  }\n}\n","import { BotStateEnum, BotVal, Defines, EntityVal, IBotAction, LGK } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\nexport function bot_chasing_action(\n  action_id: string,\n  keys: (\"F\" | \"B\" | LGK)[],\n  min_mp: number = -1,\n  desire: number = DESIRE_RATIO\n): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>()\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp)\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: keys\n    }\n    return fn ? fn(ret, cond) : ret;\n  };\n}\n","import { BotStateEnum, BotVal, Defines, EntityVal, GK, IBotAction } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nconst MIN_X = -10 as const;\nconst MAX_X = 120 as const;\nexport const ID = 'd^a' as const\n/**\n * D^A\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=90]  \n * @param {number} [max_x=120] \n * @return {IBotAction}\n */\nexport function bot_uppercut_dua(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x: number = MAX_X\n): IBotAction {\n  const cond = new CondMaker<BotVal | EntityVal>().add(EntityVal.MP, '>=', min_mp)\n  return {\n    action_id: ID,\n    desire: Defines.desire(desire),\n    status: [BotStateEnum.Chasing],\n    e_ray: [{ x: 1, z: 0, min_x, max_x }],\n    expression: min_mp > 0 ? cond.done() : void 0,\n    keys: [GK.d, GK.U, GK.a]\n  };\n}\nbot_uppercut_dua.ID = ID\nbot_uppercut_dua.MIN_X = MIN_X\nbot_uppercut_dua.MAX_X = MAX_X","import {\n  BotStateEnum, BotVal, Defines, EntityVal, GK, IBotAction\n} from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\nconst MIN_X = -10 as const;\nconst MAX_X = 120 as const;\nexport const ID = 'dva' as const\n\n/**\n * D^A\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=90]  \n * @param {number} [max_x=120] \n * @return {IBotAction}\n */\nexport function bot_uppercut_dva(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x: number = MAX_X\n): IEditBotActionFunc {\n  return (edit): IBotAction => {\n    const cond = new CondMaker<BotVal | EntityVal>()\n      .add(EntityVal.MP, '>=', min_mp)\n    const ret: IBotAction = {\n      action_id: ID,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      e_ray: [{ x: 1, z: 0, min_x, max_x, max_d: 900 }],\n      expression: cond.done(),\n      keys: [GK.d, GK.D, GK.a]\n    }\n    if (!edit) return ret\n    return edit(ret, cond)\n  };\n}\nbot_uppercut_dva.ID = ID\nbot_uppercut_dva.MIN_X = MIN_X\nbot_uppercut_dva.MAX_X = MAX_X","import {\n  BotStateEnum, BotVal, Defines, EntityVal, GK, IBotAction\n} from \"../../defines\";\nimport { pow } from \"../../utils\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\nconst MIN_X = -120 as const;\nconst MAX_X = 120 as const;\nconst Z_LEN = 100 as const;\nconst ID = 'd^a' as const\n/**\n * D^Aa\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=-120]  \n * @param {number} [max_x=120] \n * @param {number} [z_len=120] Z\n * @return {IBotAction}\n */\nexport function bot_explosion_dua(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x: number = MAX_X,\n  z_len: number = Z_LEN\n): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>()\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp)\n    const ret = {\n      action_id: ID,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      e_ray: [{ x: 1, z: 0, min_x, max_x, max_d: pow(z_len, 2) }],\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: [GK.d, GK.U, GK.a]\n    };\n    return fn ? fn(ret, cond) : ret\n  }\n}\nbot_explosion_dua.ID = ID\nbot_explosion_dua.MIN_X = MIN_X\nbot_explosion_dua.MAX_X = MAX_X\nbot_explosion_dua.Z_LEN = Z_LEN","import { BotStateEnum, BotVal, Defines, EntityVal, GK, IBotAction } from \"../../defines\";\nimport { pow } from \"../../utils\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\nconst MIN_X = -120 as const;\nconst MAX_X = 120 as const;\nconst Z_LEN = 100 as const;\nconst ID = 'd^j' as const\n/**\n * D^J\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=-120]  \n * @param {number} [max_x=120] \n * @param {number} [z_len=120] Z\n * @return {IBotAction}\n */\nexport function bot_explosion_duj(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x: number = MAX_X,\n  z_len: number = Z_LEN\n): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>()\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp)\n    const ret = {\n      action_id: ID,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      e_ray: [{ x: 1, z: 0, min_x, max_x, max_d: pow(z_len, 2) }],\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: [GK.d, GK.U, GK.j]\n    };\n    return fn ? fn(ret, cond) : ret\n  }\n}\nbot_explosion_duj.ID = ID\nbot_explosion_duj.MIN_X = MIN_X\nbot_explosion_duj.MAX_X = MAX_X\nbot_explosion_duj.Z_LEN = Z_LEN","import {\n  Defines,\n  EntityGroup,\n  IEntityData,\n  StateEnum\n} from \"../../defines\";\nimport { ensure } from \"../../utils\";\nimport { probability } from \"../../utils/math/probability\";\nimport { bot_ball_cancelling } from \"./bot_ball_cancelling\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_explosion_dua } from \"./bot_explosion_dua\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_firzen(data: IEntityData) {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  data.base.group = ensure(data.base.group, EntityGroup.Boss);\n  data.base.mp_r_ratio = 2;\n  data.base.ce = 2;\n\n  BotBuilder.make(data).set_actions(\n    // d^a\n    bot_ball_dfj(50, void 0),\n\n    // d^j\n    bot_explosion_duj(250, void 0, -500, 500, 500),\n\n    // ball cancell\n    bot_ball_cancelling('cancel_d>j'),\n\n    // disaster\n    bot_explosion_dua(100, void 0, -700, 700, 500),\n\n    // disaster + ...a\n    bot_chasing_action('d^a+a', ['a'], void 0, probability(2, 0.1))\n  ).set_states(\n    [StateEnum.Attacking],\n    ['cancel_d>j', 'd^a+a']\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n    ],\n    [bot_ball_dfj.ID, bot_explosion_dua.ID, bot_explosion_duj.ID]\n  )\n  return data;\n}\n","import { BotStateEnum, Defines, GK, IBotAction, LGK } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n/**\n * BALL\n * \n * : \n * \n * \n * @export\n * @param {string} action_id\n * @param {number} [desire=0.1]\n * @param {(...('F' | 'B' | LGK)[])} keys\n * @return {IEditBotActionFunc} \n */\nexport function bot_ball_cancelling(action_id: string, desire: number = DESIRE_RATIO, ...keys: ('F' | 'B' | LGK)[]): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker();\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Chasing],\n      e_ray: [{ x: 1, z: 0, reverse: true }],\n      keys: keys.length ? keys : [GK.j]\n    };\n    return fn ? fn(ret, cond) : ret;\n  }\n\n}\n\n","import { LGK, BotVal, EntityVal, IBotAction, Defines, BotStateEnum } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nimport { IEditBotActionFunc } from \"./IEditBotAction\";\n\nexport function bot_idle_action(\n  action_id: string,\n  keys: (\"F\" | \"B\" | LGK)[],\n  min_mp: number = -1,\n  desire: number = DESIRE_RATIO\n): IEditBotActionFunc {\n  return (fn) => {\n    const cond = new CondMaker<BotVal | EntityVal>();\n    if (min_mp > 0) cond.add(EntityVal.MP, '>=', min_mp);\n    const ret: IBotAction = {\n      action_id: action_id,\n      desire: Defines.desire(desire),\n      status: [BotStateEnum.Idle],\n      expression: min_mp > 0 ? cond.done() : void 0,\n      keys: keys\n    };\n    return fn ? fn(ret, cond) : ret;\n  };\n}\n","import {\n  BotStateEnum, BotVal, Defines, EntityVal, GK, IBotAction\n} from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { DESIRE_RATIO } from \"./constants\";\nconst MIN_X = -10 as const;\nconst MAX_X = 120 as const;\nexport const ID = 'd^j' as const\n/**\n * D^A\n *\n * @export\n * @param {number} min_mp mp\n * @param {number} [desire=0.05] \n * @param {number} [min_x=90]  \n * @param {number} [max_x=120] \n * @return {IBotAction}\n */\nexport function bot_uppercut_duj(\n  min_mp: number,\n  desire: number = DESIRE_RATIO,\n  min_x: number = MIN_X,\n  max_x: number = MAX_X\n): IBotAction {\n  const cond = new CondMaker<BotVal | EntityVal>().add(EntityVal.MP, '>=', min_mp)\n  return {\n    action_id: ID,\n    desire: Defines.desire(desire),\n    status: [BotStateEnum.Chasing],\n    e_ray: [{ x: 1, z: 0, min_x, max_x }],\n    expression: min_mp > 0 ? cond.done() : void 0,\n    keys: [GK.d, GK.U, GK.j]\n  };\n}\nbot_uppercut_duj.ID = ID\nbot_uppercut_duj.MIN_X = MIN_X\nbot_uppercut_duj.MAX_X = MAX_X","import { BuiltIn_OID, EntityGroup } from \"../defines\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { ensure } from \"../utils\";\r\nimport { make_fighter_data_bat } from \"./fighters/make_fighter_data_bat\";\r\nimport { make_fighter_data_davis } from \"./fighters/make_fighter_data_davis\";\r\nimport { make_fighter_data_deep } from \"./fighters/make_fighter_data_deep\";\r\nimport { make_fighter_data_dennis } from \"./fighters/make_fighter_data_dennis\";\r\nimport { make_fighter_data_firen } from \"./fighters/make_fighter_data_firen\";\r\nimport { make_fighter_data_firzen } from \"./fighters/make_fighter_data_firzen\";\r\nimport { make_fighter_data_freeze } from \"./fighters/make_fighter_data_freeze\";\r\nimport { make_fighter_data_henry } from \"./fighters/make_fighter_data_henry\";\r\nimport { make_fighter_data_henter } from \"./fighters/make_fighter_data_henter\";\r\nimport { make_fighter_data_jack } from \"./fighters/make_fighter_data_jack\";\r\nimport { make_fighter_data_jan } from \"./fighters/make_fighter_data_jan\";\r\nimport { make_fighter_data_john } from \"./fighters/make_fighter_data_john\";\r\nimport { make_fighter_data_julian } from \"./fighters/make_fighter_data_julian\";\r\nimport { make_fighter_data_justin } from \"./fighters/make_fighter_data_justin\";\r\nimport { make_fighter_data_knigt } from \"./fighters/make_fighter_data_knigt\";\r\nimport { make_fighter_data_mark } from \"./fighters/make_fighter_data_mark\";\r\nimport { make_fighter_data_monk } from \"./fighters/make_fighter_data_monk\";\r\nimport { make_fighter_data_rudolf } from \"./fighters/make_fighter_data_rudolf\";\r\nimport { make_fighter_data_sorcerer } from \"./fighters/make_fighter_data_sorcerer\";\r\nimport { make_fighter_data_woody } from \"./fighters/make_fighter_data_woody\";\r\nimport { make_figther_data_louis } from \"./fighters/make_figther_data_louis\";\r\nimport { make_figther_data_louisex } from \"./fighters/make_figther_data_louisex\";\r\n\r\nexport function make_fighter_special(data: IEntityData): IEntityData {\r\n  const num_id = Number(data.id);\r\n\r\n  if ((num_id >= 30 && num_id <= 39) || (num_id >= 50 && num_id <= 59)) {\r\n    data.base.group = ensure(data.base.group, EntityGroup.Hidden);\r\n  }\r\n  if (num_id >= 1 && num_id <= 29) {\r\n    data.base.group = ensure(data.base.group, EntityGroup.Regular);\r\n  }\r\n  switch (data.id as BuiltIn_OID) {\r\n    case BuiltIn_OID.Julian: return make_fighter_data_julian(data)\r\n    case BuiltIn_OID.Firzen: return make_fighter_data_firzen(data);\r\n    case BuiltIn_OID.LouisEX: return make_figther_data_louisex(data);\r\n    case BuiltIn_OID.Bat: return make_fighter_data_bat(data);\r\n    case BuiltIn_OID.Knight: return make_fighter_data_knigt(data);\r\n    case BuiltIn_OID.Louis: return make_figther_data_louis(data);\r\n    case BuiltIn_OID.Rudolf: return make_fighter_data_rudolf(data);\r\n    case BuiltIn_OID.Deep: return make_fighter_data_deep(data);\r\n    case BuiltIn_OID.Davis: return make_fighter_data_davis(data);\r\n    case BuiltIn_OID.Dennis: return make_fighter_data_dennis(data);\r\n    case BuiltIn_OID.Woody: return make_fighter_data_woody(data);\r\n    case BuiltIn_OID.Firen: return make_fighter_data_firen(data);\r\n    case BuiltIn_OID.Freeze: return make_fighter_data_freeze(data);\r\n    case BuiltIn_OID.Jack: return make_fighter_data_jack(data);\r\n    case BuiltIn_OID.Mark: return make_fighter_data_mark(data);\r\n    case BuiltIn_OID.Monk: return make_fighter_data_monk(data);\r\n    case BuiltIn_OID.Henry: return make_fighter_data_henry(data);\r\n    case BuiltIn_OID.Hunter: return make_fighter_data_henter(data);\r\n    case BuiltIn_OID.Justin: return make_fighter_data_justin(data);\r\n    case BuiltIn_OID.Jan: return make_fighter_data_jan(data);\r\n    case BuiltIn_OID.Sorcerer: return make_fighter_data_sorcerer(data);\r\n    case BuiltIn_OID.John: return make_fighter_data_john(data);\r\n\r\n    case BuiltIn_OID.Template: break;\r\n    case BuiltIn_OID.Bandit: data.base.group = ensure(data.base.group, EntityGroup._3000); break;\r\n\r\n    // not charctor, ignore it;\r\n    case BuiltIn_OID.Weapon0:\r\n    case BuiltIn_OID.Weapon2:\r\n    case BuiltIn_OID.Weapon4:\r\n    case BuiltIn_OID.Weapon5:\r\n    case BuiltIn_OID.Weapon6:\r\n    case BuiltIn_OID.Weapon1:\r\n    case BuiltIn_OID.Weapon3:\r\n    case BuiltIn_OID.Weapon8:\r\n    case BuiltIn_OID.Weapon9:\r\n    case BuiltIn_OID.Weapon10:\r\n    case BuiltIn_OID.Weapon11:\r\n    case BuiltIn_OID.Criminal:\r\n    case BuiltIn_OID.JohnBall:\r\n    case BuiltIn_OID.HenryArrow1:\r\n    case BuiltIn_OID.RudolfWeapon:\r\n    case BuiltIn_OID.DeepBall:\r\n    case BuiltIn_OID.HenryWind:\r\n    case BuiltIn_OID.DennisBall:\r\n    case BuiltIn_OID.WoodyBall:\r\n    case BuiltIn_OID.DavisBall:\r\n    case BuiltIn_OID.HenryArrow2:\r\n    case BuiltIn_OID.FreezeBall:\r\n    case BuiltIn_OID.FirenBall:\r\n    case BuiltIn_OID.FirenFlame:\r\n    case BuiltIn_OID.FreezeColumn:\r\n    case BuiltIn_OID.Weapon7:\r\n    case BuiltIn_OID.JohnBiscuit:\r\n    case BuiltIn_OID.DennisChase:\r\n    case BuiltIn_OID.JackBall:\r\n    case BuiltIn_OID.JanChaseh:\r\n    case BuiltIn_OID.JanChase:\r\n    case BuiltIn_OID.FirzenChasef:\r\n    case BuiltIn_OID.FirzenChasei:\r\n    case BuiltIn_OID.FirzenBall:\r\n    case BuiltIn_OID.BatBall:\r\n    case BuiltIn_OID.BatChase:\r\n    case BuiltIn_OID.JustinBall:\r\n    case BuiltIn_OID.JulianBall:\r\n    case BuiltIn_OID.JulianBall2:\r\n    case BuiltIn_OID.Etc:\r\n    case BuiltIn_OID.BrokenWeapon:\r\n      break;\r\n  }\r\n  return data;\r\n}\r\n\r\n\r\n","import { ArmorEnum, BotVal, BuiltIn_OID, Defines, EntityGroup, EntityVal, GK, IEntityData, StateEnum } from \"../../defines\";\nimport { ensure } from \"../../utils\";\nimport { CondMaker } from \"../CondMaker\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { bot_uppercut_dua } from \"./bot_uppercut_dua\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_julian(data: IEntityData) {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  data.base.group = ensure(data.base.group, EntityGroup.Boss);\n  data.base.mp_r_ratio = 2;\n  data.base.ce = 3;\n  data.base.armor = {\n    fireproof: 1,\n    antifreeze: 1,\n    hit_sounds: [\"data/002.wav.mp3\"],\n    type: ArmorEnum.Fall,\n    toughness: Defines.DEFAULT_FALL_VALUE_CRITICAL,\n  };\n  for (const k in data.frames) {\n    data.frames[k].opoint?.forEach((opoint) => {\n      if (opoint.oid === BuiltIn_OID.Julian) {\n        opoint.hp = opoint.max_hp = 20;\n        opoint.mp = opoint.max_mp = 150;\n      }\n    });\n  }\n  BotBuilder.make(data).set_actions(\n    // ball\n    bot_chasing_skill_action('d>a', void 0, 25, 1 / 60),\n\n    // ball + ...a\n    bot_chasing_action('d>a+a', ['a'], void 0, 0.15),\n\n    // super-ball\n    bot_ball_dfj(125, void 0),\n\n    // explosion\n    bot_explosion_duj(100, void 0, -120, 120, 100),\n\n    // uppercut\n    bot_uppercut_dua(0, void 0), {\n    action_id: 'injured_dja',\n    desire: Defines.desire(0.08),\n    expression: new CondMaker<BotVal | EntityVal>()\n      .add(EntityVal.MP, '>', 25)\n      .done(),\n    keys: [GK.d, GK.j, GK.a]\n  }, {\n    action_id: 'shaking_dja',\n    desire: Defines.desire(0.08),\n    expression: new CondMaker<BotVal | EntityVal>()\n      .add(EntityVal.MP, '>', 25)\n      .and(EntityVal.Shaking, '>', 0)\n      .done(),\n    keys: [GK.d, GK.j, GK.a]\n  }).set_frames([\n    ...frames.standings,\n    ...frames.walkings,\n    ...frames.runnings\n  ], [\n    'shaking_dja',\n    'd^a',\n    'd^j',\n    'd>j',\n    'd>a'\n  ]).set_frames([\n    ...frames.punchs,\n  ], [\n    'd^a', 'shaking_dja'\n  ]).set_states(\n    [StateEnum.Attacking],\n    ['shaking_dja', 'd>a+a']\n  )\n\n  return data;\n}\n","import { Defines, EntityGroup, IEntityData } from \"../../defines\";\nimport { arithmetic_progression, ensure } from \"../../utils\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_uppercut_dva } from \"./bot_uppercut_dva\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n * @param data \n * @returns \n */\nexport function make_figther_data_louisex(data: IEntityData): IEntityData {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  data.base.group = ensure(data.base.group, EntityGroup.Boss);\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(100, void 0, 150, 400),\n    // `d>a+a`\n    bot_ball_continuation(`d>a+a`, 0.5, 100),\n    // d^j\n    bot_uppercut_dva(0, void 0, -10, 120),\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n    ],\n    ['d>a', 'dva']\n  ).set_frames(\n    [...frames.punchs],\n    ['dva']\n  ).set_frames(\n    arithmetic_progression(260, 269),\n    ['d>a+a']\n  ).set_dataset({\n    w_atk_f_x: 90,\n    w_atk_b_x: 90,\n    j_atk_f_x: 90,\n    j_atk_b_x: 90,\n  });\n  return data;\n}\n","import {\n  EntityGroup,\n  IEntityData,\n  StateEnum\n} from \"../../defines\";\nimport { ensure } from \"../../utils\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_bat(data: IEntityData) {\n  data.base.group = ensure(data.base.group, EntityGroup.Boss);\n\n  BotBuilder.make(data).set_actions(\n    // laser_eyes\n    bot_ball_dfa(25, void 0),\n    // fast_punch\n    bot_ball_dfj(50, void 0, 50, 120),\n    // bats\n    bot_chasing_skill_action('d^j', void 0, 200, 0.05),\n    // catching + fast_punch\n    bot_chasing_skill_action('dva', void 0)\n  ).set_states(\n    [StateEnum.Catching],\n    ['dva']\n  ).set_frames([\n    ...frames.standings,\n    ...frames.walkings,\n    ...frames.runnings\n  ], ['d^j', 'd>j', 'd>a'])\n  return data;\n}\n","import { IEntityData, ArmorEnum, Defines } from \"../../defines\";\n/**\n *\n * @todo\n * @export\n * @param {IEntityData} data\n * @return {IEntityData} \n */\nexport function make_fighter_data_knigt(data: IEntityData): IEntityData {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  data.base.armor = {\n    hit_sounds: [\"data/085.wav.mp3\"],\n    type: ArmorEnum.Fall,\n    toughness: Defines.DEFAULT_FALL_VALUE_CRITICAL,\n  };\n  return data;\n}\n","import { ArmorEnum, EntityVal, IEntityData } from \"../../defines\";\nimport { CondMaker } from \"../CondMaker\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_uppercut_duj } from \"./bot_uppercut_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n *\n * @export\n * @param {IEntityData} data\n * @return {IEntityData} \n */\nexport function make_figther_data_louis(data: IEntityData): IEntityData {\n  data.base.armor = {\n    hit_sounds: [\"data/085.wav.mp3\"],\n    type: ArmorEnum.Defend,\n    fulltime: false,\n    toughness: 30,\n  };\n  for (const k in data.frames) {\n    const ja = data.frames[k].seqs?.[\"ja\"];\n    if (!ja || !(\"id\" in ja) || ja.id !== \"300\") continue;\n    ja.expression = new CondMaker()\n      .add(EntityVal.HP_P, \"<=\", 33)\n      .or(EntityVal.LF2_NET_ON, \"==\", 1)\n      .done();\n  }\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(150, void 0, 120, 400),\n    // d>j\n    bot_ball_dfj(50, void 0, 120, 250),\n    // d^j\n    bot_uppercut_duj(100, void 0, -10, 120),\n    // dja\n    bot_chasing_skill_action('dja', void 0, void 0, 0.01)((e, c) => {\n      e.expression = c?.and(EntityVal.HP_P, '<', 33).done()\n      return e;\n    })\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n    ],\n    ['d^j', 'd>a', 'd>j', 'dja']\n  ).set_frames(\n    [\n      ...frames.punchs,\n    ],\n    ['d^j']\n  )\n  return data;\n}\n\n\n","import { BuiltIn_OID, Defines, IEntityData } from \"../../defines\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n *\n * @todo\n * @export\n * @param {IEntityData} data\n * @return {IEntityData}\n */\nexport function make_fighter_data_rudolf(data: IEntityData): IEntityData {\n  for (const k in data.frames) {\n    data.frames[k].opoint?.forEach((opoint) => {\n      if (opoint.oid === BuiltIn_OID.Rudolf) {\n        opoint.hp = opoint.max_hp = 20;\n        opoint.mp = opoint.max_mp = 150;\n      }\n    });\n  }\n  BotBuilder.make(data).set_dataset({\n    w_atk_m_x: 50,\n    w_atk_b_x: 300,\n    w_atk_f_x: 300,\n    r_desire_max: Defines.AI_R_DESIRE_MAX * 2,\n    r_desire_min: Defines.AI_R_DESIRE_MIN * 2\n  }).set_actions(\n    // d>a_1\n    bot_ball_dfa(100, void 0, 120, 300)((a, c) => {\n      a.action_id = 'd>a_1'\n      a.e_ray![0].max_d = 40000;\n      return a;\n    }),\n    // d>a_2\n    bot_ball_dfa(100, void 0, 300, 500)((a, c) => {\n      a.action_id = 'd>a_2'\n      a.e_ray![0].max_d = 160000;\n      return a;\n    }),\n    // d>a_2\n    bot_ball_dfj(0, void 0, 79, 120)\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n    ],\n    ['d>a_1', 'd>a_2', 'd>j']\n  )\n  return data;\n}\n","import { BotVal, Defines, GameKey, IEntityData, StateEnum } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { probability } from \"../../utils/math/probability\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_uppercut_dva } from \"./bot_uppercut_dva\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_deep(data: IEntityData) {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(75, void 0, 50, 200),\n\n    // d>a+a\n    bot_ball_continuation(\"d>a+a\", 0.5, 75),\n\n    // d>j\n    bot_ball_dfj(150, void 0, 50, 200)((a, c) => {\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a\n    }),\n\n    // catching_d>j\n    bot_chasing_skill_action('d>j', 'catching_d>j', 150),\n\n    // dva\n    bot_uppercut_dva(75, void 0, bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X),\n\n    // dva+a\n    bot_uppercut_dva(75, 1, bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X)((action, cond) => {\n      action.action_id = 'dva+a';\n      action.expression = cond!.and(BotVal.EnemyY, '<=', 0).done()\n      action.keys = [GameKey.a];\n      return action;\n    }),\n\n    // dva+j\n    bot_uppercut_dva(\n      150,\n      probability(4, 0.5),\n      0.5,\n      bot_uppercut_dva.MAX_X\n    )((action, cond) => {\n      action.action_id = 'dva+j';\n      action.keys = [GameKey.j];\n      action.expression = cond!.and(BotVal.EnemyY, '>', 0).done()\n      return action;\n    }),\n\n    // \"d^j\"\n    bot_uppercut_dva(0, void 0, bot_uppercut_dva.MAX_X, bot_uppercut_dva.MIN_X + bot_uppercut_dva.MAX_X)((action) => {\n      action.action_id = \"d^j\";\n      action.keys = [GameKey.d, GameKey.U, GameKey.j];\n      return action;\n    }),\n\n    // \"d^j+a\"\n    bot_uppercut_dva(150, 1, bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X)((action) => {\n      action.action_id = \"d^j+a\";\n      action.keys = [GameKey.a];\n      return action;\n    }),\n  ).set_states(\n    [StateEnum.Rowing],\n    [bot_ball_dfj.ID]\n  ).set_states(\n    [StateEnum.Catching],\n    ['catching_d>j']\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n      ...frames.runnings\n    ],\n    ['d^j', bot_ball_dfj.ID, bot_ball_dfa.ID, bot_uppercut_dva.ID]\n  ).set_frames(\n    [\n      ...frames.punchs\n    ],\n    [bot_uppercut_dva.ID]\n  ).set_frames(\n    arithmetic_progression(235, 250),\n    [\"d>a+a\"]\n  ).set_frames(\n    // jump_sword: ground_part\n    [\n      ...arithmetic_progression(260, 265),\n      ...arithmetic_progression(277, 282)\n    ],\n    [\"dva+a\", \"dva+j\"]\n  ).set_frames(\n    // jump_sword: jump_part\n    arithmetic_progression(266, 267),\n    [\"d^j+a\"]\n  );\n  return data;\n}\n","import { BotVal, GameKey, IEntityData, StateEnum } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { probability } from \"../../utils/math/probability\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_uppercut_dua } from \"./bot_uppercut_dua\";\nimport { bot_uppercut_dva } from \"./bot_uppercut_dva\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_davis(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(50, void 0, 50),\n\n    // d>a+a\n    bot_ball_continuation(\"d>a+a\", probability(3, 0.8), 50),\n\n    // d^a\n    bot_uppercut_dua(225, void 0, bot_uppercut_dua.MIN_X, bot_uppercut_dua.MAX_X),\n\n    // dva\n    bot_uppercut_dva(75, void 0, bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X),\n\n    // dva+j\n    bot_uppercut_dva(\n      25,\n      probability(5, 0.5),\n      bot_uppercut_dva.MIN_X,\n      bot_uppercut_dva.MAX_X\n    )((action, cond) => {\n      action.action_id = 'dva+j';\n      action.keys = [GameKey.j];\n      action.expression = cond!.and(BotVal.EnemyY, '>', 0).done()\n      return action;\n    }),\n\n    // \"d^j\"\n    bot_uppercut_dva(25, void 0, bot_uppercut_dva.MAX_X, bot_uppercut_dva.MIN_X + bot_uppercut_dva.MAX_X)((action) => {\n      action.action_id = \"d^j\";\n      action.keys = [GameKey.d, GameKey.U, GameKey.j];\n      return action;\n    }),\n\n    // \"d^j+a\"\n    bot_uppercut_dva(0, 1, bot_uppercut_dva.MIN_X, 40)((action) => {\n      action.action_id = \"d^j+a\";\n      action.keys = [GameKey.a];\n      return action;\n    }),\n\n    bot_chasing_action(\"dva+run\", [\"F\", \"F\"], 0, probability(7, 0.5))\n  ).set_states(\n    [StateEnum.Rowing],\n    [\"d^a\", \"d^j\"]\n  ).set_states(\n    [StateEnum.Catching],\n    [\"d^a\", \"dva\"]\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n      ...frames.runnings\n    ],\n    [\"d^a\", \"d^j\", \"d>a\", \"dva\"]\n  ).set_frames(\n    frames.punchs,\n    [\"dva\", \"d^a\"]\n  ).set_frames(\n    arithmetic_progression(240, 269),\n    [\"d>a+a\"]\n  ).set_frames(\n    // many punch + >>\n    [282],\n    [\"dva+run\"]\n  ).set_frames(\n    // many punch\n    [...arithmetic_progression(270, 289, 1)],\n    [\"dva+j\", \"d^a\"]\n  ).set_frames(\n    // super punch + j or d^a\n    [39],\n    [\"dva+j\", \"d^a\"]\n  ).set_frames(\n    // jumphit\n    arithmetic_progression(290, 292),\n    [\"d^j+a\"]\n  );\n  return data;\n}\n","import { BotVal, GameKey, IEntityData, StateEnum } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { probability } from \"../../utils/math/probability\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_explosion_dua } from \"./bot_explosion_dua\";\nimport { bot_uppercut_dva } from \"./bot_uppercut_dva\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_dennis(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(40, void 0, 50),\n\n    // d>a+a\n    bot_ball_continuation(\"d>a+a\", 0.8, 40),\n\n    // dva\n    bot_uppercut_dva(75, 1 / 60, bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X),\n\n\n    // d>j\n    bot_ball_dfj(75, 1 / 60, 50, 300)((a, c) => {\n      a.e_ray?.push(\n        { ...a.e_ray![0], z: 0.3 },\n        { ...a.e_ray![0], z: -0.3 }\n      )\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a;\n    }),\n\n    // run_atk+dva\n    bot_uppercut_dva(75, probability(6, 0.2), bot_uppercut_dva.MIN_X, bot_uppercut_dva.MAX_X)(e => {\n      e.action_id = 'run_atk+dva'\n      return e\n    }),\n    // run_atk+d>j\n    bot_ball_dfj(75, probability(6, 0.2), 10, 100)(e => {\n      e.action_id = 'run_atk+d>j'\n      e.e_ray?.push(\n        { ...e.e_ray![0], z: 0.3 },\n        { ...e.e_ray![0], z: -0.3 }\n      )\n      return e;\n    }),\n\n    // cancel_d>j\n    bot_ball_dfj(0, void 0, 0, 1000)((action, cond) => {\n      action.action_id = 'cancel_d>j'\n      const ray = action.e_ray![0]\n      ray.reverse = true\n      action.e_ray?.push(\n        { ...ray, z: 0.2 },\n        { ...ray, z: -0.2 }\n      );\n      action.expression = cond.or(BotVal.EnemyDiffX, \"<\", -100).done();\n      action.keys = [GameKey.Jump]\n      return action;\n    }),\n\n    // d^a\n    bot_explosion_dua(100, 1 / 60, bot_explosion_dua.MAX_X, 2000, 1000),\n\n    // catching_d>j\n    bot_chasing_skill_action('d>j', 'catching_d>j', 75),\n\n    // catching_dva\n    bot_chasing_skill_action('dva', 'catching_dva', 75),\n\n  ).set_states(\n    [StateEnum.Catching],\n    ['catching_d>j', 'catching_dva', 'd^a']\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd^a', 'dva', 'd>j']\n  ).set_frames(\n    [...frames.punchs],\n    ['dva', 'd>j']\n  ).set_frames(\n    [88, 89],\n    ['run_atk+dva', 'run_atk+d>j']\n  ).set_frames(\n    arithmetic_progression(235, 262),\n    [\"d>a+a\"]\n  ).set_frames(\n    arithmetic_progression(280, 290),\n    [\"cancel_d>j\"]\n  );\n  return data;\n}\n\n","import { BotVal, IEntityData, StateEnum } from \"../../defines\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_uppercut_dua } from \"./bot_uppercut_dua\";\nimport { bot_uppercut_dva } from \"./bot_uppercut_dva\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_woody(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(125, void 0, 50)(e => {\n      const ray = e.e_ray![0]\n      ray.z = 0.1;\n      e.e_ray?.push({ ...ray, z: -ray.z })\n      return e;\n    }),\n\n    // d>j\n    bot_ball_dfj(200, void 0, 50, 200)((a, c) => {\n      const ray = a.e_ray![0]\n      a.e_ray?.push(\n        { ...ray, z: 0.2 },\n        { ...ray, z: -0.2 }\n      )\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a;\n    }),\n\n    // c_d>j\n    bot_ball_dfj(200, 0.3, 50, 200)((a, c) => {\n      a.action_id = 'c_d>j'\n      const ray = a.e_ray![0]\n      a.e_ray?.push(\n        { ...ray, z: 0.2 },\n        { ...ray, z: -0.2 }\n      )\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a;\n    }),\n\n    // d^a\n    bot_uppercut_dua(0, void 0, bot_uppercut_dua.MIN_X, bot_uppercut_dua.MAX_X),\n\n    // d^j\n    bot_chasing_skill_action('d^j', void 0, 50, 0.01)((a, c) => {\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a;\n    }),\n\n    // dvj\n    bot_chasing_skill_action('dvj', void 0, 50, 0.01),\n\n    // catching_d^a\n    bot_chasing_skill_action('d^a', 'catching_d^a', 0),\n\n    // dva\n    bot_uppercut_dva(0, void 0, 80, bot_uppercut_dua.MAX_X),\n\n  ).set_states(\n    [StateEnum.Catching],\n    ['catching_d^a']\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd^a', 'dva', 'd>j', 'd^j', 'dvj']\n  ).set_states(\n    [StateEnum.Jump],\n    ['d^j', 'dvj']\n  ).set_frames(\n    [...frames.rowings],\n    ['dva']\n  ).set_frames(\n    [286, 287, 288, 301, 302, 303, 271],\n    ['c_d>j', 'd^a']\n  ).set_frames(\n    [215, 219],\n    ['c_d>j', 'd^a']\n  );\n  return data;\n}\n","import { BotVal, BuiltIn_OID, Defines, GameKey as GK, HitFlag, IEntityData, ItrEffect, ItrKind } from \"../../defines\";\nimport { ActionType } from \"../../defines/ActionType\";\nimport { CollisionVal as C_Val } from \"../../defines/CollisionVal\";\nimport { arithmetic_progression, ensure } from \"../../utils\";\nimport { CondMaker } from \"../CondMaker\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n *\n * @export\n * @param {IEntityData} data\n * @return {*} \n */\nexport function make_fighter_data_firen(data: IEntityData) {\n  [\n    data.frames[\"running_0\"],\n    data.frames[\"running_1\"],\n    data.frames[\"running_2\"],\n    data.frames[\"running_3\"]\n  ].filter(Boolean).map(frame => {\n    frame.itr = ensure(frame.itr, {\n      hit_flag: HitFlag.Fighter | HitFlag.Ally,\n      code: 123,\n      kind: ItrKind.Normal,\n      effect: ItrEffect.Ignore,\n      z: -Defines.DAFUALT_QUBE_LENGTH / 2,\n      l: Defines.DAFUALT_QUBE_LENGTH,\n      x: 35,\n      y: 19,\n      w: 10,\n      h: 60,\n      test: new CondMaker<C_Val>()\n        .add(C_Val.BdyCode, '==', 123)\n        .and(C_Val.BdyHitFlag, '==', HitFlag.Fighter | HitFlag.Ally)\n        .and(C_Val.SameFacing, '==', 0)\n        .done()\n    })\n  })\n\n\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(75, void 0, 50),\n\n    // d>a+a\n    bot_ball_continuation(\"d>a+a\", 0.8, 75),\n\n    // d>j\n    bot_ball_dfj(75, void 0, 50, 1000)((a, c) => {\n      a.e_ray?.push(\n        { ...a.e_ray![0], z: 0.2 },\n        { ...a.e_ray![0], z: -0.2 }\n      );\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a;\n    }),\n\n    // cancel_d>j\n    bot_ball_dfj(0, void 0, 0, 1000)((action, cond) => {\n      action.action_id = 'cancel_d>j'\n      const ray = action.e_ray![0]\n      ray.reverse = true\n      action.e_ray?.push(\n        { ...ray, z: 0.2 },\n        { ...ray, z: -0.2 }\n      );\n      action.expression = cond.or(BotVal.EnemyDiffX, \"<\", -100).done();\n      action.keys = [GK.Jump]\n      return action;\n    }),\n\n    // dvj\n    bot_ball_dfj(75, void 0, 50, 200)(action => {\n      action.action_id = 'dvj'\n      action.e_ray?.push(\n        { ...action.e_ray![0], z: 0.05 },\n        { ...action.e_ray![0], z: -0.1 }\n      );\n      action.keys = [GK.Defend, GK.Down, GK.Jump]\n      return action;\n    }),\n\n    // cancel_dvj\n    bot_ball_dfj(0, void 0, 50, 200)((action) => {\n      action.action_id = 'cancel_dvj'\n      const ray = action.e_ray![0]\n      ray.reverse = true\n      action.e_ray?.push(\n        { ...ray, z: 0.05 },\n        { ...ray, z: -0.05 }\n      );\n      action.keys = [GK.Jump]\n      return action;\n    }),\n\n    // d^j\n    bot_explosion_duj(300, 1 / 60, -110, 110, 900),\n\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd>j', 'd^j', 'dvj']\n  ).set_frames(\n    arithmetic_progression(255, 261),\n    [\"cancel_d>j\"]\n  ).set_frames(\n    arithmetic_progression(267, 275),\n    [\"cancel_dvj\"]\n  ).set_frames(\n    arithmetic_progression(235, 252),\n    [\"d>a+a\"]\n  );\n  return data;\n}\n","import { BdyKind, BuiltIn_OID, Defines, EntityVal, HitFlag, IEntityData, ItrEffect, ItrKind } from \"../../defines\";\nimport { ActionType } from \"../../defines/ActionType\";\nimport { C_Val } from \"../../defines/CollisionVal\";\nimport { ensure } from \"../../utils\";\nimport { CondMaker } from \"../CondMaker\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_skill_action } from \"./bot_chasing_skill_action\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n *\n * @export\n * @param {IEntityData} data\n * @return {IEntityData} \n */\nexport function make_fighter_data_freeze(data: IEntityData): IEntityData {\n  [\n    data.frames[\"running_0\"],\n    data.frames[\"running_1\"],\n    data.frames[\"running_2\"],\n    data.frames[\"running_3\"]\n  ].filter(Boolean).map(frame => {\n    frame.bdy = ensure(frame.bdy, {\n      hit_flag: HitFlag.Fighter | HitFlag.Ally,\n      code: 123,\n      kind: BdyKind.Normal,\n      z: -Defines.DAFUALT_QUBE_LENGTH / 2,\n      l: Defines.DAFUALT_QUBE_LENGTH,\n      x: 35,\n      y: 19,\n      w: 10,\n      h: 60,\n      actions: [{\n        type: ActionType.FUSION,\n        data: { oid: BuiltIn_OID.Firzen, act: { id: \"290\" }, time: 9000 }//\n      }],\n      test: new CondMaker<C_Val>()\n        .add(C_Val.ItrCode, '==', 123)\n        .and(C_Val.ItrHitFlag, '==', HitFlag.Fighter | HitFlag.Ally)\n        .and(C_Val.SameFacing, '==', 0)\n        .and(c => c\n          .add(C_Val.V_HP_P, '<=', 33)\n          .and(C_Val.A_HP_P, '<', 33)\n          .or(C_Val.LF2_NET_ON, '==', 1)\n        )\n        .done()\n    })\n  })\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(100, void 0, 50)(e => {\n      e.e_ray?.push(\n        { ...e.e_ray![0], z: 0.3 },\n        { ...e.e_ray![0], z: -0.3 }\n      );\n      return e;\n    }),\n\n    // d>j\n    bot_ball_dfj(150, void 0, 50, 300)(e => {\n      e.e_ray?.push(\n        { ...e.e_ray![0], z: 0.2 },\n        { ...e.e_ray![0], z: -0.2 }\n      );\n      return e;\n    }),\n\n    // dvj\n    bot_chasing_skill_action('dvj', void 0, 150, 1 / 180)((action, cond) => {\n      action.expression = cond.and(EntityVal.Holding, '==', 0).done()\n      return action\n    }),\n\n    // d^j\n    bot_explosion_duj(300, void 0, -110, 150, 1600),\n\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd>j', 'd^j', 'wa']\n  );\n  return data;\n}\n","\nimport { GK, IEntityData, StateEnum } from \"../../defines\";\nimport { probability } from \"../../utils/math/probability\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { bot_ball_continuation } from \"./bot_ball_continuation\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_uppercut_dua } from \"./bot_uppercut_dua\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_jack(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(40, void 0, 50),\n\n    // d>a+d>a\n    bot_ball_continuation(\"d>a+d>a\", probability(3, 0.3), 40, GK.d, 'F', GK.a),\n\n    // d^a\n    bot_uppercut_dua(225, 1 / 15, bot_uppercut_dua.MIN_X, bot_uppercut_dua.MAX_X),\n  ).set_states(\n    [StateEnum.Rowing, StateEnum.Catching],\n    [\"d^a\"]\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    [\"d^a\", \"d>a\"]\n  ).set_frames(\n    frames.punchs,\n    [\"d^a\"]\n  ).set_frames(\n    arithmetic_progression(240, 247),\n    [\"d>a+d>a\"]\n  );\n  return data;\n}\n","import { BotVal, Defines, GK, IEntityData } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { foreach } from \"../../utils/container_help/foreach\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_mark(data: IEntityData) {\n  data.base.strength = Defines.FIGHTER_STREAGTH_STRONG\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(0, void 0, 0, 80, 0.1)(a => {\n      foreach(a.e_ray, r => r.max_d = 1600)\n      return a\n    }),\n    // d>a+a\n    bot_chasing_action('d>a+a', [GK.a], 0, 1 / 15),\n\n    // d>j\n    bot_ball_dfj(50, void 0, 20, 200, 0.1)((a, c) => {\n      foreach(a.e_ray, r => r.max_d = 1600)\n      a.expression = c.and(BotVal.EnemyOutOfRange, '!=', 1).done()\n      return a\n    }),\n\n    // cancel_d>j\n    bot_ball_dfj(0, void 0, 0, 1000)((action, cond) => {\n      action.action_id = 'cancel_d>j'\n      const ray = action.e_ray![0]\n      ray.reverse = true\n      action.e_ray?.push(\n        { ...ray, z: 0.2 },\n        { ...ray, z: -0.2 }\n      );\n      action.expression = cond.or(BotVal.EnemyDiffX, \"<\", -100).done();\n      action.keys = [GK.Jump]\n      return action;\n    }),\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    [\"d>j\", \"d>a\"]\n  ).set_frames(\n    frames.punchs,\n    [\"d>j\", \"d>a\"]\n  ).set_frames(\n    arithmetic_progression(240, 244),\n    [\"cancel_d>j\"]\n  ).set_frames(\n    arithmetic_progression(85, 89),\n    [\"d>a+a\"]\n  );\n  return data;\n}\n\n\n\n","import { GK, IEntityData } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_monk(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(100, 1 / 15, 0, 400),\n    // d>a+d>a\n    bot_ball_dfa(100, 0.5, 0, 400)(a => {\n      a.keys = [GK.Defend, 'F', GK.Attack]\n      return a\n    }),\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    [\"d>a\"]\n  ).set_frames(\n    frames.punchs,\n    [\"d>a\"]\n  ).set_frames(\n    arithmetic_progression(240, 248),\n    [\"d>a+d>a\"]\n  );\n  return data;\n}\n","import { GK, IEntityData } from \"../../defines\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n/**\n *\n * @todo\n * @export\n * @param {IEntityData} data\n * @return {IEntityData}\n */\nexport function make_fighter_data_henry(data: IEntityData): IEntityData {\n  BotBuilder.make(data).set_dataset({\n    w_atk_m_x: 100,\n    w_atk_b_x: 350,\n    w_atk_f_x: 350\n  }).set_actions(\n    // d>a\n    bot_ball_dfa(150, void 0, 120, 400),\n    // d>j\n    bot_ball_dfj(200, void 0, 120, 1000, 0.3),\n    // dja_1\n    bot_ball_dfj(150, void 0, 120, 300)((a, c) => {\n      a.action_id = 'dja_1'\n      a.keys = [GK.d, GK.j, GK.a]\n      a.e_ray![0].max_d = 40000;\n      return a;\n    }),\n    // dja_2\n    bot_ball_dfj(150, void 0, 300, 500)((a, c) => {\n      a.action_id = 'dja_2'\n      a.keys = [GK.d, GK.j, GK.a]\n      a.e_ray![0].max_d = 160000;\n      return a;\n    }),\n    // d^j\n    bot_explosion_duj(350, void 0, -250, 250, 90000)\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings,\n    ],\n    ['d>a', 'd>j', 'dja_1', 'dja_2', 'd^j']\n  )\n  return data;\n}\n\n","import { EntityGroup, IEntityData } from \"../../defines\";\nimport { ensure } from \"../../utils\";\nimport { BotBuilder } from \"./BotBuilder\";\n\nexport function make_fighter_data_henter(data: IEntityData): IEntityData {\n  data.base.group = ensure(data.base.group, EntityGroup._3000);\n  BotBuilder.make(data).set_dataset({\n    w_atk_m_x: 100,\n    w_atk_b_x: 200,\n    w_atk_f_x: 200\n  });\n  return data;\n}\n","import { GK, IEntityData } from \"../../defines\";\nimport { arithmetic_progression } from \"../../utils\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_front_test } from \"./bot_front_test\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_justin(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(75, void 0, 50, 200),\n\n    // dva\n    bot_front_test('dva', [GK.d, GK.D, GK.a], 75, void 0, -10, 100),\n\n    // d>a+a\n    bot_chasing_action(\"d>a+a\", [GK.a], 75, void 0),\n    \n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['dva', 'd>a']\n  ).set_frames(\n    frames.punchs,\n    ['dva']\n  ).set_frames(\n    arithmetic_progression(240, 246),\n    ['d>a+a']\n  );\n  return data;\n}\n","import { Defines, IEntityData } from \"../../defines\";\nimport { bot_explosion_dua } from \"./bot_explosion_dua\";\nimport { bot_explosion_duj } from \"./bot_explosion_duj\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\nexport function make_fighter_data_jan(data: IEntityData) {\n  data.base.strength = Defines.FIGHTER_STREAGTH_WEAK\n  data.base.files['0'].variants = ['2']\n  data.base.files['1'].variants = ['3']\n  BotBuilder.make(data).set_actions(\n    // d^a\n    bot_explosion_dua(150, void 0, 50, 400, 160000),\n\n    // d^j\n    bot_explosion_duj(200, void 0, 0, 10000)((a, c) => {\n      return a\n    }),\n\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d^a', 'd^j']\n  );\n  return data;\n}\n","import { BotStateEnum, BotVal, EntityVal as E_Val, GK, IEntityData } from \"../../defines\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_idle_action } from \"./bot_idle_action\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_sorcerer(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(75, void 0, 100, 10000),\n    // d>j\n    bot_ball_dfj(125, void 0, 100, 10000),\n    // dvj\n    bot_idle_action('dvj', [GK.Defend, GK.Down, GK.Jump], 350)((a, c) => {\n      a.status = [BotStateEnum.Idle, BotStateEnum.Chasing, BotStateEnum.Avoiding]\n      a.expression = c.and(E_Val.HpRecoverable, '>=', 50).and(BotVal.Safe, '==', 1).done()\n      return a;\n    }),\n    // d^j\n    bot_idle_action('d^j', [GK.Defend, GK.Up, GK.Jump], 350)((a, c) => {\n      // todo, need ally test\n      a.status = [BotStateEnum.Idle, BotStateEnum.Chasing, BotStateEnum.Avoiding]\n      a.expression = c.and(E_Val.HpRecoverable, '>=', 50).and(BotVal.Safe, '==', 1).done()\n      return a;\n    }),\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd>j', 'd^j', 'dvj']\n  );\n  return data;\n}\n","import { BotStateEnum, BotVal, EntityVal as E_Val, GK, IEntityData, StateEnum } from \"../../defines\";\nimport { bot_ball_dfa } from \"./bot_ball_dfa\";\nimport { bot_ball_dfj } from \"./bot_ball_dfj\";\nimport { bot_chasing_action } from \"./bot_chasing_action\";\nimport { bot_idle_action } from \"./bot_idle_action\";\nimport { BotBuilder } from \"./BotBuilder\";\nimport { frames } from \"./frames\";\n\n\nexport function make_fighter_data_john(data: IEntityData) {\n  BotBuilder.make(data).set_actions(\n    // d>a\n    bot_ball_dfa(75, void 0, 100, 10000),\n    // d>j\n    bot_ball_dfj(100, void 0, 100, 10000),\n    // d^a\n    bot_chasing_action('d^a', [GK.Defend, GK.Up, GK.Attack], 250),\n    // dvj\n    bot_idle_action('dvj', [GK.Defend, GK.Down, GK.Jump], 350)((a, c) => {\n      a.status = [BotStateEnum.Idle, BotStateEnum.Chasing, BotStateEnum.Avoiding]\n      a.expression = c.and(E_Val.HpRecoverable, '>=', 100)\n        .and(BotVal.Safe, '==', 1)\n        .done()\n      return a;\n    }),\n    // d^j\n    bot_idle_action('d^j', [GK.Defend, GK.Up, GK.Jump], 350)((a, c) => {\n      // todo, need ally test\n      a.status = [BotStateEnum.Idle, BotStateEnum.Chasing, BotStateEnum.Avoiding]\n      a.expression = c\n        .and(E_Val.HpRecoverable, '>=', 100)\n        .and(BotVal.Safe, '==', 1).done()\n      return a;\n    }),\n\n    //s_punch+j\n    bot_chasing_action('s_punch+j', [GK.Jump])((a, c) => {\n      a.expression = c.and(BotVal.EnemyState, '==', StateEnum.Falling).done()\n      return a;\n    }),\n    //s_punch+d>a\n    bot_chasing_action('s_punch+d>a', [GK.Defend, 'F', GK.Attack], 100)((a, c) => {\n      a.expression = c.and(BotVal.EnemyState, '==', StateEnum.Falling).done()\n      return a;\n    }),\n    //s_punch+d>j\n    bot_chasing_action('s_punch+d>j', [GK.Defend, 'F', GK.Jump], 100)((a, c) => {\n      a.expression = c.and(BotVal.EnemyState, '==', StateEnum.BrokenDefend).done()\n      return a;\n    })\n  ).set_frames(\n    [\n      ...frames.standings,\n      ...frames.walkings\n    ],\n    ['d>a', 'd>j', 'd^a', 'd^j', 'dvj']\n  ).set_frames(\n    frames.super_punch,\n    ['s_punch+j', 's_punch+d>a', 's_punch+d>j']\n  );\n  return data;\n}\n","import { to_num } from \"../type_cast/to_num\";\r\nimport { match_colon_value } from \"./match_colon_value\";\r\nimport { take_blocks } from \"./take_blocks\";\r\n\r\nexport interface ITakeSectionsResult<T = any> {\r\n  sections: T[];\r\n  remains: string\r\n}\r\nexport default function take_sections<T = any>(\r\n  text: string,\r\n  start: string,\r\n  end: string,\r\n): ITakeSectionsResult<T> {\r\n  const { blocks, remains } = take_blocks(text, start, end)\r\n  const ret: ITakeSectionsResult<T> = {\r\n    sections: blocks.map<T>((content_str) => {\r\n      const item: any = {};\r\n      for (const [name, value] of match_colon_value(content_str)) {\r\n        item[name] = to_num(value) ?? value;\r\n      }\r\n      return item;\r\n    }),\r\n    remains\r\n  }\r\n  return ret;\r\n}\r\n","import { IFrameInfo, StateEnum } from \"../defines\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { B_K, bdy_kind_full_name, OLD_BDY_KIND_GOTO_MAX, OLD_BDY_KIND_GOTO_MIN } from \"../defines/BdyKind\";\r\nimport { O_ID } from \"../defines/BuiltIn_OID\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { Defines } from \"../defines/defines\";\r\nimport { E_E } from \"../defines/EntityEnum\";\r\nimport { HitFlag } from \"../defines/HitFlag\";\r\nimport { BdyKeyOrders as bdy_key_orders, IBdyInfo } from \"../defines/IBdyInfo\";\r\nimport { I_K } from \"../defines/ItrKind\";\r\nimport { between, ensure, sort_key_value } from \"../utils\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { take } from \"./take\";\r\n\r\nexport function cook_bdy(bdy: Partial<IBdyInfo>, frame: IFrameInfo): void {\r\n  if (!bdy) return;\r\n  bdy.hit_flag = HitFlag.AllEnemy;\r\n  bdy.l = Defines.DAFUALT_QUBE_LENGTH;\r\n  bdy.z = -Defines.DAFUALT_QUBE_LENGTH / 2;\r\n  const kind = Number(take(bdy, \"kind\"));\r\n  bdy.kind = kind;\r\n  bdy.kind_name = bdy_kind_full_name(bdy.kind);\r\n\r\n  if (bdy.kind === B_K.Normal && frame.state === StateEnum.Caught) {\r\n    bdy.hit_flag = HitFlag.AllBoth\r\n  }\r\n  if (between(bdy.kind, OLD_BDY_KIND_GOTO_MIN, OLD_BDY_KIND_GOTO_MAX)) {\r\n    bdy.kind = B_K.Criminal;\r\n    bdy.kind_name = bdy_kind_full_name(bdy.kind);\r\n    bdy.test = new CondMaker<C_Val>()\r\n      .add(c => c\r\n        .add(C_Val.SameTeam, \"==\", 0)\r\n        .and(C_Val.AttackerType, \"==\", E_E.Fighter)\r\n        .and(C_Val.ItrKind, \"==\", I_K.Normal),\r\n      ).or(c => c\r\n        .add(C_Val.SameTeam, \"==\", 0)\r\n        .and(C_Val.AttackerType, \"==\", E_E.Weapon)\r\n        .and(c => c\r\n          .add(C_Val.ItrKind, \"==\", I_K.WeaponSwing)\r\n          .or(C_Val.AttackerOID, \"==\", O_ID.HenryArrow1)\r\n          .or(C_Val.AttackerOID, \"==\", O_ID.RudolfWeapon),\r\n        ),\r\n      ).done();\r\n    bdy.actions = ensure(bdy.actions, {\r\n      type: ActionType.V_NextFrame,\r\n      data: { id: `${kind - 1000}` },\r\n    }, {\r\n      type: ActionType.V_TURN_TEAM,\r\n      data: \"\"\r\n    })\r\n  }\r\n  sort_key_value(bdy, bdy_key_orders)\r\n}\r\n","import { IBpointInfo, IFrameInfo } from \"../defines\";\n\nexport function cook_bpoint(bpoint: IBpointInfo, frame: IFrameInfo) {\n  // TODO\n}\n","import { not_zero_num } from \"../utils\";\nimport { take } from \"./take\";\n\n/**\n * 0\n *\n * @export\n * @param {*} any\n * @param {(string | number | symbol)} key\n * @param {(n: number) => number} [fn]\n * @return {(number | undefined)}\n */\nexport function take_not_zero_num(\n  any: any,\n  key: string | number | symbol,\n  fn?: (n: number) => number\n): number | undefined {\n  const v = Number(take(any, key));\n  if (!not_zero_num(v)) return void 0;\n\n  // 0xCDCDCDCD\n  if (v === -842150451) return void 0;\n  return fn ? fn(v) : v;\n}\n\n","import { IFrameInfo } from \"../defines\";\r\nimport { FacingFlag } from \"../defines/FacingFlag\";\r\nimport { ICpointInfo } from \"../defines/ICpointInfo\";\r\nimport { Defines } from \"../defines/defines\";\r\nimport { abs, sort_key_value } from \"../utils\";\r\nimport { take_number } from \"../utils/container_help/take_number\";\r\nimport { is_num, is_str, not_zero_num } from \"../utils/type_check\";\r\nimport { get_next_frame_by_raw_id } from \"./get_the_next\";\r\nimport { take } from \"./take\";\r\nimport { take_not_zero_num } from \"./take_not_zero_num\";\r\nimport { take_num } from \"./take_num\";\r\n\r\nexport function cook_cpoint(unsure_cpoint: ICpointInfo, frame: IFrameInfo): void {\r\n\r\n  unsure_cpoint.throwvx = take_not_zero_num(unsure_cpoint, \"throwvx\", n => n * 0.5);\r\n  unsure_cpoint.throwvy = take_not_zero_num(unsure_cpoint, \"throwvy\", n => n * -0.5);\r\n  unsure_cpoint.throwvz = take_not_zero_num(unsure_cpoint, \"throwvz\", n => n * 1);\r\n  unsure_cpoint.throwinjury = take_not_zero_num(unsure_cpoint, \"throwinjury\", n => n * 1);\r\n  unsure_cpoint.decrease = take_num(unsure_cpoint, 'decrease', n => -abs(n));\r\n\r\n  unsure_cpoint.z = 0;\r\n  const cover = take_not_zero_num(unsure_cpoint, \"cover\", n => n);\r\n  if (cover == 11) unsure_cpoint.z = 2;\r\n  if (cover == 10) unsure_cpoint.z = -2;\r\n\r\n  const vaction = take(unsure_cpoint, \"vaction\");\r\n  const raw_injury = take(unsure_cpoint, \"injury\");\r\n  if (is_num(raw_injury)) {\r\n    unsure_cpoint.injury = abs(raw_injury);\r\n    if (raw_injury > 0) unsure_cpoint.shaking = Defines.DEFAULT_ITR_SHAKING;\r\n  }\r\n\r\n  if (is_str(vaction) || is_num(vaction)) {\r\n    unsure_cpoint.vaction = get_next_frame_by_raw_id(vaction);\r\n    if (cover === 11 || cover === 10) // for louis throw\r\n      unsure_cpoint.vaction.facing = FacingFlag.SameAsCatcher\r\n\r\n    if (unsure_cpoint.throwvx)\r\n      delete unsure_cpoint.vaction?.facing;\r\n  }\r\n\r\n  if (unsure_cpoint.throwvx && unsure_cpoint.throwinjury != -1) {\r\n    // for normal throw & louis throw\r\n    unsure_cpoint.tx = unsure_cpoint.throwvx < 0 ? 0 : 80;\r\n    unsure_cpoint.ty = 10;\r\n  }\r\n}","import { is_num } from \"../utils\";\nimport { take } from \"./take\";\n\n\nexport function take_num(\n  any: any,\n  key: string | number | symbol,\n  fn?: (n: number) => number\n): number | undefined {\n  const v = Number(take(any, key));\n  if (!is_num(v)) return void 0;\n\n  // 0xCDCDCDCD\n  if (v === -842150451) return void 0;\n  return fn ? fn(v) : v;\n}\n","export function fixed_float(n: number, digits?: number) {\n  return Number(n.toFixed(1));\n}\n","import { is_positive } from \"../utils\";\nimport { take } from \"./take\";\n\n\nexport function take_positive_num(\n  any: any,\n  key: string | number | symbol,\n  fn?: (n: number) => number\n): number | undefined {\n  const v = Number(take(any, key));\n  return !is_positive(v) ? void 0 : fn ? fn(v) : v;\n}\n","import { BuiltIn_OID, FacingFlag, IFrameInfo, IItrInfo, ItrEffect, ItrKind, StateEnum } from \"../defines\";\r\nimport { BdyKind } from \"../defines/BdyKind\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { Defines } from \"../defines/defines\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { is_num, is_positive, not_zero_num } from \"../utils/type_check\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { get_next_frame_by_raw_id } from \"./get_the_next\";\r\nimport { take } from \"./take\";\r\nimport { take_not_zero_num } from \"./take_not_zero_num\";\r\nimport { HitFlag } from \"../defines/HitFlag\";\r\nimport { ensure, max } from \"../utils\";\r\nimport { fixed_float } from \"./fixed_float\";\r\nimport { take_positive_num } from \"./take_positive_num\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\n\r\nexport function cook_itr(itr?: Partial<IItrInfo>, frame?: IFrameInfo) {\r\n\r\n  if (!itr) return;\r\n  itr.hit_flag = HitFlag.AllEnemy;\r\n\r\n  itr.vrest = take_positive_num(itr, \"vrest\", n => max(2, 2 * n - Defines.DEFAULT_ITR_SHAKING - 4))\r\n  itr.arest = take_positive_num(itr, \"arest\", n => max(2, 2 * n - Defines.DEFAULT_ITR_MOTIONLESS - 4))\r\n\r\n  const src_dvx = itr.dvx\r\n  itr.dvx = take_not_zero_num(itr, \"dvx\", n => fixed_float(n * 0.5, 4));\r\n  itr.dvz = take_not_zero_num(itr, \"dvz\", n => fixed_float(n * 0.5, 4));\r\n  itr.dvy = take_not_zero_num(itr, \"dvy\", n => fixed_float(n * -0.59, 4));\r\n  itr.fall = take_not_zero_num(itr, \"fall\", n => n * 2);\r\n  itr.bdefend = take_not_zero_num(itr, \"bdefend\", n => n * 2);\r\n\r\n\r\n  const zwidth = take_not_zero_num(itr, \"zwidth\") ?? Defines.DAFUALT_QUBE_LENGTH / 2;\r\n  itr.l = 2 * zwidth;\r\n  itr.z = -zwidth;\r\n\r\n  const kind_name = (ItrKind as any)[itr.kind!];\r\n  if (kind_name) itr.kind_name = `ItrKind.${kind_name}`;\r\n\r\n  if (itr.effect !== void 0) {\r\n    const effect_name = ItrEffect[itr.effect as ItrEffect];\r\n    if (effect_name) itr.effect_name = `ItrEffect.${effect_name}`;\r\n  }\r\n\r\n  switch (itr.kind) {\r\n    case ItrKind.Normal: {\r\n      const cond_maker = new CondMaker<C_Val>()\r\n      switch (itr.effect) {\r\n        case ItrEffect.Fire:\r\n          cond_maker.and(c => c\r\n            .add(C_Val.VictimState, \"!=\", StateEnum.Burning)\r\n            .or(C_Val.AttackerState, \"!=\", StateEnum.BurnRun)\r\n          );\r\n          break;\r\n        case ItrEffect.MFire1:\r\n          cond_maker\r\n            .and(C_Val.VictimType, \"!=\", EntityEnum.Fighter)\r\n            .or(c => c\r\n              .add(C_Val.VictimState, \"!=\", StateEnum.BurnRun)\r\n              .and(C_Val.VictimState, \"!=\", StateEnum.Burning)\r\n            );\r\n          break;\r\n        case ItrEffect.MFire2:\r\n          cond_maker.and(c => c\r\n            .add(C_Val.VictimState, \"!=\", StateEnum.BurnRun)\r\n            .and(C_Val.VictimState, \"!=\", StateEnum.Burning),\r\n          );\r\n          break;\r\n        case ItrEffect.Through:\r\n          cond_maker.and(C_Val.VictimType, \"!=\", EntityEnum.Fighter);\r\n          break;\r\n        case ItrEffect.Ice2:\r\n          cond_maker.and(c => c\r\n            .add(C_Val.VictimState, \"!=\", StateEnum.Frozen)\r\n            .and(C_Val.VictimFrameId, \"!=\", C_Val.VictimFrameIndex_ICE),\r\n          );\r\n          break;\r\n      }\r\n      itr.test = cond_maker.done() || void 0;\r\n      break;\r\n    }\r\n    case ItrKind.Pick: {\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.AttackerHasHolder, \"==\", 0)\r\n        .and(C_Val.VictimHasHolder, \"==\", 0)\r\n        .and()\r\n        .one_of(\r\n          C_Val.VictimState,\r\n          StateEnum.Weapon_OnGround,\r\n          StateEnum.HeavyWeapon_OnGround,\r\n        )\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.PickSecretly: {\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.AttackerHasHolder, \"==\", 0)\r\n        .and(C_Val.VictimHasHolder, \"==\", 0)\r\n        .and(C_Val.VictimState, \"==\", StateEnum.Weapon_OnGround)\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.SuperPunchMe: {\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.MagicFlute:\r\n    case ItrKind.MagicFlute2: {\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .or(c => c\r\n          .add(C_Val.VictimType, \"==\", EntityEnum.Weapon)\r\n          .and(C_Val.VictimOID, \"!=\", BuiltIn_OID.HenryArrow1)\r\n          .and(C_Val.VictimOID, \"!=\", BuiltIn_OID.RudolfWeapon),\r\n        )\r\n        .done();\r\n      return;\r\n    }\r\n    case ItrKind.ForceCatch: {\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      if (itr.vrest) {\r\n        itr.arest = itr.vrest;\r\n        delete itr.vrest;\r\n      }\r\n      itr.test = new CondMaker<C_Val>()\r\n        .and(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .and(C_Val.VictimState, \"!=\", StateEnum.Falling)\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.Catch: {\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      if (itr.vrest) {\r\n        itr.arest = itr.vrest;\r\n        delete itr.vrest;\r\n      }\r\n      itr.test = new CondMaker<C_Val>()\r\n        .and(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .and(C_Val.VictimState, \"==\", StateEnum.Tired)\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.Block:\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.motionless = 0;\r\n      itr.shaking = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.BdyKind, \"==\", BdyKind.Normal)\r\n        .done();\r\n      break;\r\n    case ItrKind.JohnShield:\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .and(C_Val.VictimType, \"!=\", EntityEnum.Fighter)\r\n        .or(C_Val.SameTeam, \"!=\", 1)\r\n        .done();\r\n      break;\r\n    case ItrKind.Heal: {\r\n      itr.hit_flag = HitFlag.AllBoth; // \r\n\r\n\r\n      if (src_dvx) {\r\n        itr.actions = ensure(itr.actions, {\r\n          type: ActionType.A_NextFrame,\r\n          data: get_next_frame_by_raw_id(src_dvx),\r\n        })\r\n      }\r\n      itr.test = new CondMaker<C_Val>()\r\n        .and(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.Freeze: {\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.shaking = 0;\r\n      itr.motionless = 0;\r\n      itr.dvx = 0;\r\n      itr.dvy = 0;\r\n      itr.dvz = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n        .and(c => c\r\n          .add(C_Val.SameTeam, \"==\", 0)\r\n          .or(C_Val.VictimState, \"==\", StateEnum.Frozen),\r\n        )\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.Whirlwind: {\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.shaking = 0;\r\n      itr.motionless = 0;\r\n      itr.vrest = 1;\r\n      itr.injury = void 0;\r\n      itr.dvx = 0;\r\n      itr.dvy = 0;\r\n      itr.dvz = 0;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .wrap(c => c\r\n          .add(C_Val.VictimType, \"==\", EntityEnum.Weapon)\r\n          .and(C_Val.VictimOID, \"!=\", BuiltIn_OID.HenryArrow1)\r\n          .and(C_Val.VictimOID, \"!=\", BuiltIn_OID.Rudolf),\r\n        )\r\n        .or(c => c\r\n          .add(C_Val.VictimType, \"==\", EntityEnum.Fighter)\r\n          .and(c => c\r\n            .add(C_Val.SameTeam, \"==\", 0)\r\n            .or(C_Val.VictimState, \"==\", StateEnum.Frozen),\r\n          ),\r\n        )\r\n        .done();\r\n      break;\r\n    }\r\n    case ItrKind.CharacterThrew: {\r\n      itr.hit_flag = HitFlag.AllBoth;\r\n      itr.test = new CondMaker<C_Val>()\r\n        .add(C_Val.AttackerThrew, \"==\", 1)\r\n        .and(C_Val.AttackerType, \"==\", EntityEnum.Fighter)\r\n        .done();\r\n      break;\r\n    }\r\n  }\r\n  const catchingact = take(itr, \"catchingact\");\r\n  if (is_num(catchingact))\r\n    itr.catchingact = get_next_frame_by_raw_id(catchingact);\r\n\r\n  const caughtact = take(itr, \"caughtact\");\r\n  if (is_num(caughtact))\r\n    itr.caughtact = {\r\n      ...get_next_frame_by_raw_id(caughtact),\r\n      facing: FacingFlag.OpposingCatcher,\r\n    };\r\n}\r\n","import { FacingFlag, IFrameInfo, IOpointInfo } from \"../defines\";\r\nimport { floor } from \"../utils/math/base\";\r\nimport { is_num, not_zero_num } from \"../utils/type_check\";\r\nimport { get_next_frame_by_raw_id } from \"./get_the_next\";\r\nimport { take } from \"./take\";\r\nexport function cook_opoint(opoint: IOpointInfo, frame: IFrameInfo) {\r\n  const action = take(opoint, \"action\");\r\n  opoint.oid = \"\" + take(opoint, \"oid\");\r\n\r\n  if (is_num(action)) {\r\n    const act = get_next_frame_by_raw_id(action);\r\n    const facing = take(opoint, \"facing\");\r\n    if (is_num(facing)) {\r\n      act.facing =\r\n        facing % 2 ? FacingFlag.Backward : FacingFlag.None;\r\n      if (facing >= 2 && facing <= 19) {\r\n        act.facing = FacingFlag.Right;\r\n      } else if (facing >= 20) {\r\n        opoint.multi = floor(facing / 10);\r\n      }\r\n    } else {\r\n      act.facing = FacingFlag.None;\r\n    }\r\n    opoint.action = act;\r\n  }\r\n\r\n  const dvx = take(opoint, \"dvx\");\r\n  if (not_zero_num(dvx)) opoint.dvx = dvx * 0.5;\r\n  else opoint.dvx = 0;\r\n\r\n  const dvz = take(opoint, \"dvz\");\r\n  if (not_zero_num(dvz)) opoint.dvz = dvz * 0.5;\r\n\r\n  const dvy = take(opoint, \"dvy\");\r\n  if (not_zero_num(dvy)) opoint.dvy = dvy * -0.5;\r\n}\r\n","import { IFrameInfo, IWpointInfo } from \"../defines\";\r\nimport { not_zero_num } from \"../utils/type_check\";\r\nimport { take } from \"./take\";\r\nimport { take_not_zero_num } from \"./take_not_zero_num\";\r\n\r\nexport function cook_wpoint(unsure_wpoint: IWpointInfo, frame: IFrameInfo) {\r\n  const dvx = take(unsure_wpoint, \"dvx\");\r\n  if (not_zero_num(dvx)) unsure_wpoint.dvx = dvx * 0.5;\r\n\r\n  const dvz = take(unsure_wpoint, \"dvz\");\r\n  if (not_zero_num(dvz)) unsure_wpoint.dvz = dvz;\r\n\r\n  const dvy = take(unsure_wpoint, \"dvy\");\r\n  if (not_zero_num(dvy)) unsure_wpoint.dvy = dvy * -0.5;\r\n\r\n  const attacking = take(unsure_wpoint, \"attacking\");\r\n  if (attacking) unsure_wpoint.attacking = \"\" + attacking;\r\n\r\n  unsure_wpoint.z = 0;\r\n  const cover = take_not_zero_num(unsure_wpoint, \"cover\", n => n);\r\n  if (cover == 1) unsure_wpoint.z = -2;\r\n  if (cover == 0) unsure_wpoint.z = 2;\r\n}\r\n","import { BdyKind, Defines, FacingFlag, IFrameInfo, ItrKind, OpointKind, StateEnum } from \"../defines\";\nimport { HitFlag } from \"../defines/HitFlag\";\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\nimport { ensure } from \"../utils\";\nimport { foreach } from \"../utils/container_help/foreach\";\nimport { CondMaker } from \"./CondMaker\";\n\nexport function make_frame_state(frame: IFrameInfo) {\n  switch (frame.state) {\n    case StateEnum.Ball_3005:\n      frame.no_shadow = 1;\n      break;\n    case StateEnum.HeavyWeapon_OnHand:\n      frame.no_shadow = 1;\n      frame.gravity_enabled = false;\n      break;\n    case StateEnum.Weapon_OnHand:\n      frame.no_shadow = 1;\n      frame.gravity_enabled = false;\n      break;\n    case StateEnum.Burning: {\n      foreach(frame.itr, itr => {\n        itr.hit_flag = HitFlag.AllBoth;\n      })\n      break;\n    }\n    case StateEnum.OLD_LouisCastOff: {\n      frame.state = StateEnum.Attacking;\n      frame.opoint = ensure(frame.opoint,\n        {\n          kind: OpointKind.Normal,\n          x: 39,\n          y: 79,\n          oid: \"218\",\n          dvy: 5,\n          action: { id: \"auto\" },\n          speedz: 0\n        },\n        {\n          kind: OpointKind.Normal,\n          x: 39,\n          y: 79,\n          oid: \"217\",\n          dvy: 4,\n          dvx: -5,\n          dvz: 4,\n          action: { id: \"auto\", facing: FacingFlag.Backward },\n          speedz: 0\n        },\n        {\n          kind: OpointKind.Normal,\n          x: 39,\n          y: 79,\n          oid: \"217\",\n          dvy: 4,\n          dvx: -5,\n          dvz: -4,\n          action: { id: \"auto\", facing: FacingFlag.Backward },\n          speedz: 0\n        },\n        {\n          kind: OpointKind.Normal,\n          x: 39,\n          y: 79,\n          oid: \"217\",\n          dvy: 4,\n          dvx: -5,\n          dvz: 4,\n          action: { id: \"auto\" },\n          speedz: 0\n        },\n        {\n          kind: OpointKind.Normal,\n          x: 39,\n          y: 79,\n          oid: \"217\",\n          dvy: 4,\n          dvx: -5,\n          dvz: -4,\n          action: { id: \"auto\" },\n          speedz: 0\n        }\n      );\n      break;\n    }\n    case StateEnum.Falling: {\n      foreach(frame.bdy, bdy => {\n        if (bdy.kind !== BdyKind.Normal) return;\n        bdy.test = new CondMaker<C_Val>()\n          .add(\n            C_Val.ItrFall,\n            \">=\",\n            Defines.DEFAULT_FALL_VALUE_CRITICAL\n          )\n          .or(C_Val.ItrKind, \"==\", ItrKind.MagicFlute)\n          .or(C_Val.ItrKind, \"==\", ItrKind.MagicFlute2)\n          .done();\n      })\n      break;\n    }\n    case StateEnum.Frozen:\n      foreach(frame.bdy, bdy => bdy.hit_flag = HitFlag.AllBoth)\n      break;\n    case StateEnum.Message:\n      frame.no_shadow = 1;\n      break;\n  }\n}\n","import {\r\n  FacingFlag,\r\n  IBdyInfo,\r\n  IBpointInfo,\r\n  ICpointInfo,\r\n  IFramePictureInfo,\r\n  IItrInfo,\r\n  IOpointInfo,\r\n  ItrKind,\r\n  IWpointInfo,\r\n  StateEnum,\r\n  TNextFrame,\r\n} from \"../defines\";\r\nimport { IEntityInfo } from \"../defines/IEntityInfo\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { ILegacyPictureInfo } from \"../defines/ILegacyPictureInfo\";\r\nimport { SpeedMode } from \"../defines/SpeedMode\";\r\nimport { abs, floor } from \"../utils/math/base\";\r\nimport { match_all } from \"../utils/string_parser/match_all\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport take_sections from \"../utils/string_parser/take_sections\";\r\nimport { to_num } from \"../utils/type_cast/to_num\";\r\nimport { not_zero_num } from \"../utils/type_check\";\r\nimport { cook_bdy } from \"./cook_bdy\";\r\nimport { cook_bpoint } from \"./cook_bpoint\";\r\nimport { cook_cpoint } from \"./cook_cpoint\";\r\nimport { cook_itr } from \"./cook_itr\";\r\nimport { cook_opoint } from \"./cook_opoint\";\r\nimport { cook_wpoint } from \"./cook_wpoint\";\r\nimport { add_next_frame } from \"./edit_next_frame\";\r\nimport { FrameEditing } from \"./FrameEditing\";\r\nimport { get_next_frame_by_raw_id } from \"./get_the_next\";\r\nimport { make_frame_state } from \"./make_frame_state\";\r\nimport { take } from \"./take\";\r\n\r\nexport function make_frames(\r\n  text: string,\r\n  files: IEntityInfo[\"files\"],\r\n): Record<string, IFrameInfo> {\r\n  const frames: Record<string, IFrameInfo> = {};\r\n  const frame_regexp = /<frame>\\s+(.*?)\\s+(.*)((.|\\n)+?)<frame_end>/g;\r\n  for (const [, frame_id, frame_name, content] of match_all(\r\n    text,\r\n    frame_regexp,\r\n  )) {\r\n    let _content = content;\r\n    const r1 = take_sections<IBdyInfo>(_content, \"bdy:\", \"bdy_end:\");\r\n    const bdy_list = r1.sections;\r\n    _content = r1.remains;\r\n\r\n\r\n    const r2 = take_sections<IItrInfo>(_content, \"itr:\", \"itr_end:\");\r\n    const itr_list = r2.sections;\r\n    _content = r2.remains;\r\n\r\n\r\n    const r3 = take_sections<IOpointInfo>(_content, \"opoint:\", \"opoint_end:\");\r\n    const opoint_list = r3.sections;\r\n    _content = r3.remains;\r\n\r\n    const r4 = take_sections<IWpointInfo>(_content, \"wpoint:\", \"wpoint_end:\");\r\n    const wpoint_list = r4.sections;\r\n    _content = r4.remains;\r\n\r\n    const r5 = take_sections<IBpointInfo>(_content, \"bpoint:\", \"bpoint_end:\");\r\n    const bpoint_list = r5.sections;\r\n    _content = r5.remains;\r\n\r\n    const r6 = take_sections<ICpointInfo>(_content, \"cpoint:\", \"cpoint_end:\");\r\n    const cpoint_list = r6.sections;\r\n    _content = r6.remains;\r\n\r\n    const fields: any = {};\r\n    for (const [name, value] of match_colon_value(_content))\r\n      fields[name] = to_num(value) ?? value;\r\n\r\n    const raw_next = take(fields, \"next\");\r\n    const next = get_next_frame_by_raw_id(raw_next);\r\n    const pic_idx = take(fields, \"pic\");\r\n    let frame_pic_info: IFramePictureInfo | undefined = void 0;\r\n    let entity_pic_info: ILegacyPictureInfo | undefined = void 0;\r\n\r\n    let pic = pic_idx;\r\n    for (const key in files) {\r\n      const { row, col } = (entity_pic_info = files[key] as ILegacyPictureInfo);\r\n      if (pic < row * col) break;\r\n      pic -= row * col;\r\n    }\r\n\r\n    let error: any;\r\n    if (entity_pic_info) {\r\n      const { id, row, cell_w, cell_h } = entity_pic_info;\r\n      frame_pic_info = {\r\n        tex: id,\r\n        x: (cell_w + 1) * (pic % row),\r\n        y: (cell_h + 1) * floor(pic / row),\r\n        w: cell_w,\r\n        h: cell_h,\r\n      };\r\n    } else {\r\n      error = {\r\n        msg: \"entity_pic_info not found!\",\r\n        files,\r\n        pic_idx,\r\n      };\r\n    }\r\n\r\n    const wait = take(fields, \"wait\") * 2 + 1;\r\n    const frame: IFrameInfo = {\r\n      id: frame_id,\r\n      name: frame_name,\r\n      pic: frame_pic_info,\r\n      wait,\r\n      next,\r\n      ...fields,\r\n    };\r\n\r\n    for (const bdy of bdy_list) cook_bdy(bdy, frame);\r\n    for (const itr of itr_list) cook_itr(itr, frame);\r\n    for (const bpoint of bpoint_list) cook_bpoint(bpoint, frame);\r\n    for (const opoint of opoint_list) cook_opoint(opoint, frame);\r\n    for (const wpoint of wpoint_list) cook_wpoint(wpoint, frame);\r\n    for (const cpoint of cpoint_list) cook_cpoint(cpoint, frame);\r\n\r\n    if (itr_list.length) frame.itr = itr_list\r\n    if (bdy_list.length) frame.bdy = bdy_list\r\n    if (opoint_list.length) frame.opoint = opoint_list\r\n    if (wpoint_list.length) frame.wpoint = wpoint_list[0]\r\n    if (cpoint_list.length) frame.cpoint = cpoint_list[0]\r\n    if (bpoint_list.length) frame.bpoint = bpoint_list[0]\r\n\r\n    const state_name = StateEnum[frame.state!]\r\n    if (state_name) (frame as any).state_name = `StateEnum.${state_name}`\r\n\r\n    if (error) (frame as any).__ERROR__ = error;\r\n    if (\r\n      (raw_next >= 1100 && raw_next <= 1299) ||\r\n      (raw_next <= -1100 && raw_next >= -1299)\r\n    ) {\r\n      frame.invisible = 2 * (abs(raw_next) - 1100);\r\n    }\r\n\r\n    if (!frame.itr?.length) delete frame.itr;\r\n    if (!frame.bdy?.length) delete frame.bdy;\r\n    if (!frame.opoint?.length) delete frame.opoint;\r\n    if (!frame.wpoint) delete frame.wpoint;\r\n    if (!frame.bpoint) delete frame.bpoint;\r\n    if (!frame.cpoint) delete frame.cpoint;\r\n\r\n    const sound = take(frame, \"sound\");\r\n    if (sound) frame.sound = sound.replace(/\\\\/g, '/') + \".mp3\";\r\n    frames[frame_id] = frame;\r\n\r\n    const editing = new FrameEditing(frame).init(frame);\r\n\r\n    const dircontrol = take(cpoint_list[0], \"dircontrol\");\r\n    if (dircontrol) {\r\n      frame.hit = frame.hit || {};\r\n      if (dircontrol === 1) {\r\n        frame.hit.B = add_next_frame(frame.hit.B, {\r\n          wait: \"i\",\r\n          facing: FacingFlag.Backward,\r\n        });\r\n      } else {\r\n        frame.hit.F = add_next_frame(frame.hit.F, {\r\n          wait: \"i\",\r\n          facing: FacingFlag.Backward,\r\n        });\r\n      }\r\n    }\r\n\r\n    const dvx = take(frame, \"dvx\");\r\n    if (dvx === 550) {\r\n      frame.dvx = 0;\r\n      frame.vxm = SpeedMode.Fixed;\r\n      frame.ctrl_x = 0;\r\n    } else if (not_zero_num(dvx)) {\r\n      if (dvx >= 501 && dvx <= 549) {\r\n        frame.dvx = Number(((dvx - 550) * 0.5).toFixed(1));\r\n        frame.vxm = SpeedMode.FixedLf2;\r\n      } else if (dvx >= 551) {\r\n        frame.dvx = Number(((dvx - 550) * 0.5).toFixed(1));\r\n        frame.vxm = SpeedMode.FixedLf2;\r\n      } else {\r\n        frame.dvx = Number((dvx * 0.5).toFixed(1));\r\n      }\r\n    }\r\n\r\n    const dvy = take(frame, \"dvy\");\r\n    if (dvy === 550) {\r\n      frame.dvy = 0;\r\n      frame.vym = SpeedMode.Fixed;\r\n      frame.gravity_enabled = false;\r\n      frame.ctrl_y = 0;\r\n    } else if (not_zero_num(dvy)) {\r\n      if (dvy >= 501 && dvy <= 549) {\r\n        frame.dvy = (dvy - 550) * -0.285;\r\n        frame.vym = SpeedMode.FixedLf2;\r\n      } else if (dvy >= 551) {\r\n        frame.dvy = (dvy - 550) * -0.285;\r\n        frame.vym = SpeedMode.FixedLf2;\r\n      } else {\r\n        frame.dvy = dvy * -0.285;\r\n      }\r\n    }\r\n\r\n    const dvz = take(frame, \"dvz\");\r\n    if (dvz === 550) {\r\n      frame.dvz = 0;\r\n      frame.vzm = SpeedMode.Fixed;\r\n      frame.ctrl_z = 0;\r\n    } else if (not_zero_num(dvz)) {\r\n      if (dvz >= 501 && dvz <= 549) {\r\n        frame.dvz = (dvz - 550);\r\n        frame.vzm = SpeedMode.FixedLf2;\r\n      } else if (dvz >= 551) {\r\n        frame.dvz = (dvz - 550);\r\n        frame.vzm = SpeedMode.FixedLf2;\r\n      } else {\r\n        frame.dvz = dvz;\r\n      }\r\n      frame.ctrl_z = 1;\r\n    }\r\n\r\n    if (frame.itr) {\r\n      for (const itr of frame.itr) {\r\n        if (\r\n          itr.kind === ItrKind.SuperPunchMe &&\r\n          (!itr.vrest || itr.vrest < frame.wait)\r\n        ) {\r\n          itr.vrest = frame.wait;\r\n        }\r\n      }\r\n    }\r\n    make_frame_state(frame);\r\n  }\r\n  return frames;\r\n}\r\n\r\n","export function match_hash_end(\r\n  text: string | null | undefined,\r\n): string | undefined {\r\n  if (typeof text !== \"string\") return void 0;\r\n  return text.match(/#(.*)[\\n|\\r|\\0]*/)?.[1];\r\n}\r\n","import { Builtin_FrameId, IDatIndex, IEntityInfo, StateEnum, WeaponType } from \"../defines\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IFrameIndexes } from \"../defines/IFrameIndexes\";\r\nimport { IFrameInfo } from \"../defines/IFrameInfo\";\r\nimport { traversal } from \"../utils/container_help/traversal\";\r\nimport { make_itr_prefabs } from \"./make_itr_prefabs\";\r\nimport { take } from \"./take\";\r\n\r\nconst indexes_map: Record<WeaponType, IFrameIndexes> = {\r\n  [WeaponType.None]: {\r\n    on_ground: \"\",\r\n    just_on_ground: \"\",\r\n    throw_on_ground: \"\",\r\n  },\r\n  [WeaponType.Stick]: {\r\n    on_ground: \"60\",\r\n    just_on_ground: \"70\",\r\n    throw_on_ground: \"71\",\r\n  },\r\n  [WeaponType.Heavy]: {\r\n    on_ground: \"20\",\r\n    just_on_ground: \"21\",\r\n    throw_on_ground: \"71\",\r\n  },\r\n  [WeaponType.Knife]: {\r\n    on_ground: \"60\",\r\n    just_on_ground: \"70\",\r\n    throw_on_ground: \"71\",\r\n  },\r\n  [WeaponType.Baseball]: {\r\n    on_ground: \"60\",\r\n    just_on_ground: \"70\",\r\n    throw_on_ground: \"71\",\r\n  },\r\n  [WeaponType.Drink]: {\r\n    on_ground: \"60\",\r\n    just_on_ground: \"70\",\r\n    throw_on_ground: \"71\",\r\n  },\r\n};\r\n\r\nexport function make_weapon_data(\r\n  info: IEntityInfo,\r\n  full_str: string,\r\n  frames: Record<string, IFrameInfo>,\r\n  datIndex: IDatIndex,\r\n): IEntityData {\r\n  info.name = datIndex.hash ?? datIndex.file.replace(/[^a-z|A-Z|0-9|_]/g, \"\");\r\n  switch ('' + datIndex.type) {\r\n    case \"1\":\r\n      info.bounce = 0.2;\r\n      info.type = {\r\n        \"120\": WeaponType.Knife, // Knife\r\n        \"124\": WeaponType.Knife, // Boomerang\r\n      }[\"\" + datIndex.id] ?? WeaponType.Stick;\r\n      break;\r\n    case \"2\":\r\n      info.type = WeaponType.Heavy;\r\n      switch (datIndex.id) {\r\n        case \"150\": info.bounce = 0.2; break;\r\n        default: info.bounce = 0.1; break;\r\n      }\r\n      break;\r\n    case \"4\":\r\n      info.type = WeaponType.Baseball;\r\n      info.bounce = 0.45;\r\n      break;\r\n    case \"6\":\r\n      info.type = WeaponType.Drink;\r\n      info.bounce = 0.45;\r\n      break;\r\n  }\r\n\r\n  const itr_prefabs = make_itr_prefabs(full_str);\r\n  const indexes =\r\n    indexes_map[info.type as WeaponType] ??\r\n    indexes_map[WeaponType.None];\r\n  const sound_1 = take(info, \"weapon_broken_sound\");\r\n  if (sound_1) info.dead_sounds = [sound_1.replace(/\\\\/g, '/') + \".mp3\"];\r\n\r\n  const sound_2 = take(info, \"weapon_drop_sound\");\r\n  if (sound_2) info.drop_sounds = [sound_2.replace(/\\\\/g, '/') + \".mp3\"];\r\n\r\n  const sound_3 = take(info, \"weapon_hit_sound\");\r\n  if (sound_3) info.hit_sounds = [sound_3.replace(/\\\\/g, '/') + \".mp3\"];\r\n\r\n\r\n\r\n  const drop_hurt = take(info, \"weapon_drop_hurt\");\r\n  if (drop_hurt && Number(drop_hurt)) info.drop_hurt = Number(drop_hurt);\r\n\r\n  const weapon_hp = take(info, \"weapon_hp\");\r\n  if (weapon_hp && Number(weapon_hp)) info.hp = Number(weapon_hp);\r\n\r\n  const in_the_skys: string[] = []\r\n  const throwings: string[] = []\r\n  const on_hands: string[] = []\r\n  traversal(frames, (k, v) => {\r\n    if (\r\n      v.state === StateEnum.Weapon_InTheSky ||\r\n      v.state === StateEnum.HeavyWeapon_InTheSky\r\n    ) in_the_skys.push(k)\r\n    if (\r\n      v.state === StateEnum.Weapon_Throwing ||\r\n      v.state === StateEnum.HeavyWeapon_InTheSky\r\n    ) throwings.push(k)\r\n    if (\r\n      v.state === StateEnum.Weapon_OnHand ||\r\n      v.state === StateEnum.HeavyWeapon_OnHand\r\n    ) on_hands.push(k)\r\n  })\r\n\r\n  indexes.in_the_skys = in_the_skys.length ? in_the_skys : void 0\r\n  indexes.throwings = in_the_skys.length ? throwings : void 0;\r\n  indexes.on_hands = on_hands.length ? on_hands : void 0;\r\n\r\n  return {\r\n    id: \"\",\r\n    on_dead: { id: Builtin_FrameId.Gone },\r\n    type: EntityEnum.Weapon,\r\n    base: info,\r\n    itr_prefabs,\r\n    frames,\r\n    indexes,\r\n  };\r\n}\r\n","import { IItrPrefab } from \"../defines/IItrPrefab\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { match_all } from \"../utils/string_parser/match_all\";\r\nimport { match_block_once } from \"../utils/string_parser/match_block\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport { to_num } from \"../utils/type_cast/to_num\";\r\nimport { is_non_empty_str } from \"../utils/type_check\";\r\nimport { cook_itr } from \"./cook_itr\";\r\n\r\nexport function make_itr_prefabs(full_str: string): IEntityData[\"itr_prefabs\"] {\r\n  const weapon_strength_str = match_block_once(\r\n    full_str,\r\n    \"<weapon_strength_list>\",\r\n    \"<weapon_strength_list_end>\",\r\n  )?.trim();\r\n  if (!is_non_empty_str(weapon_strength_str)) return void 0;\r\n  const list = match_all(\r\n    weapon_strength_str,\r\n    /entry:\\s*(\\d+)\\s*(\\S+)\\s*\\n?(.*)\\n?/g,\r\n  ).map(([, id, name, remain]) => {\r\n    const entry: IItrPrefab = { id, name };\r\n    for (const [key, value] of match_colon_value(remain)) {\r\n      (entry as any)[key] = to_num(value) ?? value;\r\n    }\r\n    cook_itr(entry);\r\n    return entry;\r\n  });\r\n  if (!list.length) return void 0;\r\n  const itr_prefab: IEntityData[\"itr_prefabs\"] = {};\r\n  for (const item of list) itr_prefab[item.id] = item;\r\n  return itr_prefab;\r\n}\r\n","import { arithmetic_progression } from \"../utils/math/arithmetic_progression\"\n\nexport const stone = arithmetic_progression(0, 3).map(v => '' + v)\nexport const sstone = arithmetic_progression(4, 7).map(v => '' + v)\nexport const stick = arithmetic_progression(10, 13).map(v => '' + v)\nexport const sstick = arithmetic_progression(14, 17).map(v => '' + v)\nexport const hoe = arithmetic_progression(20, 23).map(v => '' + v)\nexport const s_hoe = arithmetic_progression(24, 27).map(v => '' + v)\nexport const k_hoe = arithmetic_progression(30, 33).map(v => '' + v)\nexport const box0 = arithmetic_progression(40, 43).map(v => '' + v)\nexport const box1 = arithmetic_progression(44, 47).map(v => '' + v)\nexport const box2 = arithmetic_progression(50, 53).map(v => '' + v)\nexport const box3 = arithmetic_progression(54, 57).map(v => '' + v)\nexport const baseball = arithmetic_progression(60, 63).map(v => '' + v)\nexport const milk1 = arithmetic_progression(70, 73).map(v => '' + v)\nexport const milk2 = arithmetic_progression(74, 77).map(v => '' + v)\nexport const milk3 = arithmetic_progression(80, 83).map(v => '' + v)\nexport const ice1 = arithmetic_progression(120, 123).map(v => '' + v)\nexport const ice2 = arithmetic_progression(125, 128).map(v => '' + v)\nexport const ice3 = arithmetic_progression(130, 133).map(v => '' + v)\nexport const ice4 = arithmetic_progression(130, 133).map(v => '' + v)\nexport const ice5 = arithmetic_progression(135, 138).map(v => '' + v)\nexport const burning_smoke = arithmetic_progression(140, 143).map(v => '' + v)\nexport const icesword1 = arithmetic_progression(150, 153).map(v => '' + v)\nexport const icesword2 = arithmetic_progression(154, 157).map(v => '' + v)\nexport const beer1 = arithmetic_progression(160, 163).map(v => '' + v)\nexport const beer2 = arithmetic_progression(164, 167).map(v => '' + v)\nexport const boomerang = arithmetic_progression(170, 173).map(v => '' + v)\nexport const armour = arithmetic_progression(174, 177).map(v => '' + v)","import { BdyKind, Builtin_FrameId, BuiltIn_OID, Defines, EntityEnum, EntityGroup, IOpointInfo, StateEnum } from \"../defines\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { OpointKind } from \"../defines/OpointKind\";\r\nimport { ensure, make_arr } from \"../utils\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { armour, baseball, beer1, beer2, boomerang, box0, box1, box2, box3, hoe, icesword1, icesword2, k_hoe, milk1, milk2, milk3, s_hoe, sstick, sstone, stick, stone } from \"./broken_piece_frames\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nDefines.WEAPON_WEIGHT_HEAVY\r\nconst broken_pieces_opoints = (...frame_ids: (string | string[])[]): IOpointInfo[] => {\r\n  const aa = [\r\n    { dvy: 5, dvx: -1 },\r\n    { dvy: 5, dvx: 1 },\r\n    { dvy: 3 },\r\n    { dvy: 2, dvx: 2 },\r\n    { dvy: 2, dvx: -2 },\r\n    { dvy: 4, dvx: -1.5 },\r\n    { dvy: 4, dvx: 1.5 },\r\n    { dvy: 2 },\r\n    { dvy: 1, dvx: 1 },\r\n    { dvy: 1, dvx: -1 },\r\n  ];\r\n  return frame_ids.map<IOpointInfo>((frame_id, idx) => {\r\n    return {\r\n      kind: OpointKind.Normal,\r\n      x: 0,\r\n      y: 0,\r\n      origin_type: 1,\r\n      action: { id: frame_id },\r\n      oid: \"999\",\r\n      ...aa[idx % aa.length],\r\n    };\r\n  });\r\n};\r\nconst handled = new Set<any>();\r\nexport function make_weapon_special(data: IEntityData) {\r\n  const num_data_id = Number(data.id);\r\n  if (num_data_id >= 100 || num_data_id <= 199) {\r\n    data.base.group = ensure(data.base.group,\r\n      EntityGroup.VsWeapon,\r\n      EntityGroup.StageWeapon,\r\n    );\r\n  }\r\n  switch (data.id) {\r\n    case BuiltIn_OID.HenryArrow1:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_ARROW;\r\n      delete data.base.group\r\n      foreach(data.frames, frame => {\r\n        if (frame.state === StateEnum.Weapon_Rebounding) {\r\n          delete frame.itr\r\n          return;\r\n        }\r\n        foreach(frame.itr, (itr, idx) => {\r\n          if (handled.has(itr)) throw new Error('already handle!')\r\n          handled.add(itr)\r\n          itr.actions = ensure(itr.actions, {\r\n            type: ActionType.A_NextFrame,\r\n            data: { id: Builtin_FrameId.Gone },\r\n            pretest: true,\r\n            test: new CondMaker<C_Val>()\r\n              .add(C_Val.VictimType, '==', EntityEnum.Fighter)\r\n              .and(C_Val.BdyKind, '==', BdyKind.Normal)\r\n              .and(C_Val.VictimState, '!=', StateEnum.Defend)\r\n              .and(C_Val.ArmorWork, '==', 0)\r\n              .done()\r\n          })\r\n        })\r\n      })\r\n      break;\r\n    case BuiltIn_OID.RudolfWeapon:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_ARROW\r\n      delete data.base.group\r\n      foreach(data.frames, frame => {\r\n        if (frame.state === StateEnum.Weapon_Rebounding) {\r\n          delete frame.itr\r\n          return;\r\n        }\r\n      })\r\n      break;\r\n    case BuiltIn_OID.Weapon_Stick:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_NOMRAL;\r\n      data.base.brokens = broken_pieces_opoints(\r\n        stick, stick,\r\n        sstick, sstick, sstick\r\n      );\r\n      break;\r\n    case BuiltIn_OID.Weapon_Hoe:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_HOE;\r\n      data.base.brokens = broken_pieces_opoints(k_hoe, k_hoe, hoe, hoe, s_hoe, s_hoe);\r\n      break;\r\n    case BuiltIn_OID.Weapon_Knife:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_LIGHT;\r\n      data.base.brokens = broken_pieces_opoints(k_hoe, k_hoe, s_hoe, s_hoe);\r\n      break;\r\n    case BuiltIn_OID.Weapon_baseball:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_BASEBALL;\r\n      data.base.brokens = broken_pieces_opoints(\r\n        ...make_arr(5, () => baseball)\r\n      );\r\n      break;\r\n    case BuiltIn_OID.Weapon_milk:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_LIGHT;\r\n      data.base.brokens = broken_pieces_opoints(\r\n        milk1,\r\n        ...make_arr(4, () => milk3),\r\n        ...make_arr(5, () => milk2)\r\n      );\r\n      data.base.group = [EntityGroup.VsWeapon];\r\n      data.base.drink = {\r\n        hp_h_total: 160,\r\n        hp_h_value: 4,\r\n        hp_h_ticks: 5,\r\n        hp_r_total: 80,\r\n        hp_r_value: 2,\r\n        hp_r_ticks: 5,\r\n        mp_h_total: 166,\r\n        mp_h_value: 5,\r\n        mp_h_ticks: 6,\r\n      }\r\n      break;\r\n    case BuiltIn_OID.Weapon_Stone:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_HEAVY;\r\n      data.base.brokens = broken_pieces_opoints(stone, stone, sstone, sstone, sstone);\r\n      break;\r\n    case BuiltIn_OID.Weapon_WoodenBox:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_HEAVY;\r\n      data.base.brokens = broken_pieces_opoints(box0, box1, box2, box3, box3);\r\n      break;\r\n    case BuiltIn_OID.Weapon_Beer:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_LIGHT;\r\n      data.base.brokens = broken_pieces_opoints(\r\n        beer1, beer2, beer2, beer2, beer2, milk2, milk2, milk2, milk2, milk2\r\n      );\r\n      data.base.group = ensure(data.base.group, EntityGroup.VsWeapon);\r\n      data.base.drink = {\r\n        mp_h_total: 750,\r\n        mp_h_value: 12,\r\n        mp_h_ticks: 1,\r\n      }\r\n      break;\r\n    case BuiltIn_OID.Weapon_Boomerang:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_LIGHT;\r\n      data.base.brokens = broken_pieces_opoints(boomerang, boomerang, boomerang);\r\n      break;\r\n    case BuiltIn_OID.Weapon_LouisArmourA:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_HEAVY;\r\n      delete data.base.group\r\n      data.base.brokens = broken_pieces_opoints(armour, armour, armour, armour, armour);\r\n      break;\r\n    case BuiltIn_OID.Weapon_LouisArmourB:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_HEAVY;\r\n      delete data.base.group\r\n      data.base.brokens = broken_pieces_opoints(armour, armour, armour, armour, armour);\r\n      break;\r\n    case BuiltIn_OID.Weapon_IceSword:\r\n      data.base.weight = Defines.WEAPON_WEIGHT_NOMRAL;\r\n      delete data.base.group\r\n      data.base.brokens = broken_pieces_opoints(icesword1, icesword1, icesword1, icesword2, icesword2, icesword2, icesword2);\r\n      break;\r\n  }\r\n}\r\n","import { IBgData, IStageInfo, WeaponType } from \"../defines\";\r\nimport { EntityEnum } from \"../defines/EntityEnum\";\r\nimport { IBaseData } from \"../defines/IBaseData\";\r\nimport { IDatIndex } from \"../defines/IDatIndex\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { IEntityInfo } from \"../defines/IEntityInfo\";\r\nimport { ILegacyPictureInfo } from \"../defines/ILegacyPictureInfo\";\r\nimport { set_obj_field } from \"../utils/container_help/set_obj_field\";\r\nimport { match_block_once } from \"../utils/string_parser/match_block\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport { BotBuilder } from \"./fighters/BotBuilder\";\r\nimport { make_ball_data } from \"./make_ball_data\";\r\nimport { make_ball_special } from \"./make_ball_special\";\r\nimport { make_bg_data } from \"./make_bg_data\";\r\nimport { make_entity_data } from \"./make_entity_data\";\r\nimport { make_entity_special } from \"./make_entity_special\";\r\nimport { make_character_data } from \"./make_fighter_data\";\r\nimport { make_fighter_special } from \"./make_fighter_special\";\r\nimport { make_frames } from \"./make_frames\";\r\nimport { make_frames_special } from \"./make_frames_special\";\r\nimport { make_stage_info_list as make_stage_infos } from \"./make_stage_info_list\";\r\nimport { make_weapon_data } from \"./make_weapon_data\";\r\nimport { make_weapon_special } from \"./make_weapon_special\";\r\n\r\nexport default function dat_to_json(\r\n  full_str: string,\r\n  datIndex: IDatIndex,\r\n): void | IStageInfo[] | IBgData | IBaseData {\r\n  full_str = full_str.replace(/\\\\\\\\/g, \"/\");\r\n  if (full_str.startsWith(\"<stage>\")) return make_stage_infos(full_str);\r\n  if (full_str.startsWith(\"name:\")) return make_bg_data(full_str, datIndex);\r\n  const infos_str = match_block_once(full_str, \"<bmp_begin>\", \"<bmp_end>\");\r\n  if (!infos_str) {\r\n    return;\r\n  }\r\n\r\n  let ret: IEntityData | undefined = void 0;\r\n  const base: IEntityInfo = {\r\n    name: \"\",\r\n    files: {},\r\n  };\r\n  for (const info_str of infos_str.trim().split(\"\\n\")) {\r\n    let reg_result;\r\n    reg_result = info_str.match(/name:\\s*(\\S*)/);\r\n    if (reg_result) {\r\n      base.name = reg_result[1];\r\n      continue;\r\n    }\r\n    reg_result = info_str.match(/head:\\s*(\\S*)/);\r\n    if (reg_result) {\r\n      base.head = reg_result[1].replace(/.bmp$/, \".png\").replace(/\\\\/g, '/');\r\n      continue;\r\n    }\r\n    reg_result = info_str.match(/small:\\s*(\\S*)/);\r\n    if (reg_result) {\r\n      base.small = reg_result[1].replace(/.bmp$/, \".png\").replace(/\\\\/g, '/');\r\n      continue;\r\n    }\r\n    if (info_str.startsWith(\"file(\")) {\r\n      const file_id = base.files ? Object.keys(base.files).length : 0;\r\n      const file: ILegacyPictureInfo = {\r\n        id: \"\" + file_id,\r\n        path: \"\",\r\n        row: 0,\r\n        col: 0,\r\n        cell_w: 0,\r\n        cell_h: 0,\r\n      };\r\n      for (const [key, value] of match_colon_value(info_str)) {\r\n        if (key.startsWith(\"file\")) {\r\n          file.path = value.replace(/.bmp$/, \".png\").replace(/\\\\/g, \"/\");\r\n        } else if (key === \"w\") {\r\n          file.cell_w = Number(value);\r\n        } else if (key === \"h\") {\r\n          file.cell_h = Number(value);\r\n        } else {\r\n          (file as any)[key] = Number(value);\r\n        }\r\n      }\r\n      base.files = set_obj_field(base.files, \"\" + file_id, file);\r\n      continue;\r\n    }\r\n\r\n    reg_result = info_str.match(/(\\S*)\\s*:\\s*([+-]?([0-9]*[.])?[0-9]+)/);\r\n    if (reg_result) {\r\n      (base as any)[reg_result[1] as any] = Number(reg_result[2]);\r\n      continue;\r\n    }\r\n\r\n    // reading field like: `name: value`;\r\n    reg_result = info_str.match(/(\\S*)\\s*:\\s*(\\S*)/);\r\n    if (reg_result) {\r\n      (base as any)[reg_result[1] as any] = reg_result[2];\r\n      continue;\r\n    }\r\n\r\n    // reading field like: `name 10086.00`;\r\n    reg_result = info_str.match(/(\\S*)\\s*([+-]?([0-9]*[.])?[0-9]+)/);\r\n    if (reg_result) {\r\n      (base as any)[reg_result[1] as any] = Number(reg_result[2]);\r\n      continue;\r\n    }\r\n\r\n    // reading field like: `name value`;\r\n    reg_result = info_str.match(/(\\S*)\\s*(\\S*)/);\r\n    if (reg_result) {\r\n      (base as any)[reg_result[1] as any] = reg_result[2];\r\n      continue;\r\n    }\r\n  }\r\n\r\n  switch (\"\" + datIndex.type) {\r\n    case \"0\":\r\n      ret = make_character_data(base, make_frames(full_str, base.files));\r\n      break;\r\n    case \"1\":\r\n      ret = make_weapon_data(base, full_str, make_frames(full_str, base.files), datIndex);\r\n      break;\r\n    case \"2\":\r\n      ret = make_weapon_data(base, full_str, make_frames(full_str, base.files), datIndex);\r\n      break;\r\n    case \"3\":\r\n      ret = make_ball_data(base, make_frames(full_str, base.files), datIndex);\r\n      break;\r\n    case \"4\":\r\n      ret = make_weapon_data(base, full_str, make_frames(full_str, base.files), datIndex);\r\n      break;\r\n    case \"5\":\r\n      ret = make_entity_data(base, make_frames(full_str, base.files));\r\n      break;\r\n    case \"6\":\r\n      ret = make_weapon_data(base, full_str, make_frames(full_str, base.files), datIndex);\r\n      break;\r\n    default:\r\n      console.warn(\r\n        \"[dat_to_json] unknow dat type:\",\r\n        JSON.stringify(datIndex.type),\r\n      );\r\n      ret = make_entity_data(base, make_frames(full_str, base.files));\r\n      break;\r\n  }\r\n  if (ret) ret.id = datIndex.id;\r\n  if (!ret.base.name) ret.base.name = ret.type + \"_\" + ret.id;\r\n\r\n  switch (ret.type) {\r\n    case EntityEnum.Entity:\r\n      make_entity_special(ret);\r\n      break;\r\n    case EntityEnum.Fighter:\r\n      make_fighter_special(ret);\r\n      break;\r\n    case EntityEnum.Weapon:\r\n      make_weapon_special(ret);\r\n      break;\r\n    case EntityEnum.Ball:\r\n      make_ball_special(ret);\r\n      break;\r\n  }\r\n  make_frames_special(ret);\r\n  BotBuilder.check_all();\r\n  BotBuilder.builders.length = 0\r\n  return ret;\r\n}\r\n","import { Difficulty } from \"../defines\";\r\nimport { IStageInfo } from \"../defines/IStageInfo\";\r\nimport { IStageObjectInfo } from \"../defines/IStageObjectInfo\";\r\nimport { IStagePhaseInfo } from \"../defines/IStagePhaseInfo\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport { match_hash_end } from \"../utils/string_parser/match_hash_end\";\r\nimport { take_blocks } from \"../utils/string_parser/take_blocks\";\r\nimport { to_num } from \"../utils/type_cast/to_num\";\r\n\r\nexport function make_stage_info_list(full_str: string): IStageInfo[] | void {\r\n  full_str = full_str.replace(\r\n    /<phase_end>[\\n|\\s|\\r]*<stage>/g,\r\n    \"<phase_end><stage_end><stage>\",\r\n  );\r\n  const stage_infos: IStageInfo[] = [];\r\n  const r_0 = take_blocks(full_str, \"<stage>\", \"<stage_end>\")\r\n  full_str = r_0.remains;\r\n  for (let stage_str of r_0.blocks) {\r\n    const stage_info: IStageInfo = {\r\n      bg: \"0\",\r\n      id: \"\",\r\n      name: \"\",\r\n      phases: [],\r\n    };\r\n    const r1 = take_blocks(stage_str, \"<phase>\", \"<phase_end>\")\r\n    stage_str = r1.remains\r\n    for (let phase_str of r1.blocks) {\r\n      const phase_info: IStagePhaseInfo = {\r\n        bound: 0,\r\n        desc: \"\",\r\n        objects: [],\r\n      };\r\n      for (let line of phase_str.trim().split(\"\\n\")) {\r\n        line = line.trim();\r\n        if (!line) continue;\r\n        if (line.startsWith(\"bound\")) {\r\n          for (const [key, value] of match_colon_value(line)) {\r\n            if (key === \"bound\")\r\n              phase_info.bound = to_num(value) ?? phase_info.bound;\r\n            if (key === \"music\")\r\n              phase_info.music = value.replace(/\\\\/g, \"/\") + \".mp3\";\r\n          }\r\n          phase_info.desc = match_hash_end(line)?.trim() ?? \"\";\r\n        } else if (line.startsWith(\"music\")) {\r\n          for (const [key, value] of match_colon_value(line)) {\r\n            if (key === \"music\")\r\n              phase_info.music = value.replace(/\\\\/g, \"/\") + \".mp3\";\r\n          }\r\n        } else if (line.startsWith(\"id\")) {\r\n          const object: IStageObjectInfo = {\r\n            id: [],\r\n            x: phase_info.bound,\r\n          };\r\n          if (line.indexOf(\"<soldier>\") >= 0) object.is_soldier = true;\r\n          if (line.indexOf(\"<boss>\") >= 0) object.is_boss = true;\r\n          for (const [key, value] of match_colon_value(line)) {\r\n            if (key === \"id\") object.id = [value];\r\n            else if (key === \"act\") object.act = value;\r\n            else (object as any)[key] = to_num(value) ?? (object as any)[key];\r\n          }\r\n          phase_info.objects.push(object);\r\n        }\r\n      }\r\n      stage_info.phases.push(phase_info);\r\n    }\r\n    const head = stage_str.replace(/\\s+\\n+/g, \"\\n\").trim();\r\n    for (const [key, value] of match_colon_value(head)) {\r\n      (stage_info as any)[key] = value;\r\n    }\r\n    const nid = Number(stage_info.id);\r\n    stage_info.name = (match_hash_end(head) ?? stage_info.id)\r\n      .replace(/stage/gi, \"\")\r\n      .trim();\r\n\r\n    if (nid % 10 === 0) {\r\n      stage_info.is_starting = true;\r\n      stage_info.starting_name = \"\" + (1 + nid / 10);\r\n\r\n    }\r\n    for (const p of stage_info.phases) {\r\n      p.enemy_r = p.bound + 200;\r\n      p.enemy_l = -200;\r\n    }\r\n    if (nid < 49 && stage_info.phases[0]) {\r\n      stage_info.phases[0]!.health_up = stage_info.phases[0]!.respawn = {\r\n        [Difficulty.Easy]: 200,\r\n        [Difficulty.Normal]: 150,\r\n        [Difficulty.Difficult]: 100,\r\n        [Difficulty.Crazy]: 50,\r\n      };\r\n      stage_info.phases[0]!.mp_up = {\r\n        [Difficulty.Easy]: 500,\r\n        [Difficulty.Normal]: 500,\r\n        [Difficulty.Difficult]: 500,\r\n        [Difficulty.Crazy]: 500,\r\n      };\r\n    }\r\n    if (nid === 50) {\r\n      for (const p of stage_info.phases) {\r\n        p.respawn = {\r\n          [Difficulty.Easy]: 300,\r\n          [Difficulty.Normal]: 150,\r\n          [Difficulty.Difficult]: 5,\r\n          [Difficulty.Crazy]: 5,\r\n        };\r\n      }\r\n    }\r\n\r\n    if (nid === 50) {\r\n      stage_info.starting_name = \"Survival\";\r\n      stage_info.chapter = \"survival\"\r\n      stage_info.bg = \"8\";\r\n      stage_info.title = 'SURVIVAL STAGE'\r\n      for (const p of stage_info.phases) {\r\n        p.drink_l = 0;\r\n        p.drink_r = p.bound;\r\n      }\r\n    }\r\n    if (nid <= 9) {\r\n      stage_info.bg = \"2\";\r\n      stage_info.chapter = \"chapter_1\"\r\n      stage_info.title = `STAGE 1-${nid + 1}`\r\n      if (nid < 9) stage_info.next = \"\" + (nid + 1);\r\n    } else if (nid <= 19) {\r\n      stage_info.bg = \"3\";\r\n      stage_info.chapter = \"chapter_2\"\r\n      stage_info.title = `STAGE 2-${nid + 1 - 10}`\r\n      if (nid < 19) stage_info.next = \"\" + (nid + 1);\r\n    } else if (nid <= 29) {\r\n      stage_info.bg = \"5\";\r\n      stage_info.chapter = \"chapter_3\"\r\n      stage_info.title = `STAGE 3-${nid + 1 - 20}`\r\n      if (nid < 29) stage_info.next = \"\" + (nid + 1);\r\n    } else if (nid <= 39) {\r\n      stage_info.bg = \"6\";\r\n      stage_info.chapter = \"chapter_4\"\r\n      stage_info.title = `STAGE 4-${nid + 1 - 30}`\r\n      if (nid < 39) stage_info.next = \"\" + (nid + 1);\r\n    } else if (nid <= 49) {\r\n      stage_info.bg = \"7\";\r\n      stage_info.chapter = \"chapter_5\"\r\n      stage_info.title = `STAGE 5-${nid + 1 - 40}`\r\n      if (nid < 49) stage_info.next = \"\" + (nid + 1);\r\n    }\r\n    stage_infos.push(stage_info);\r\n  }\r\n\r\n  for (const stage_info of stage_infos) {\r\n    const first_phase = stage_info.phases[0];\r\n    if (!first_phase) return;\r\n    first_phase.cam_jump_to_x = 0;\r\n    first_phase.player_jump_to_x = 0;\r\n  }\r\n  stage_infos.sort((a, b) => Number(a.id) - Number(b.id));\r\n  for (const s of stage_infos) {\r\n    if (!s.next) continue;\r\n    const next_ok = !!stage_infos.find(v => v.id === s.next)\r\n    if (next_ok) continue;\r\n    delete s.next;\r\n    const nid = Number(s.id);\r\n    if (nid <= 9) { s.next = '10' }\r\n    else if (nid <= 19) { s.next = '20' }\r\n    else if (nid <= 29) { s.next = '30' }\r\n    else if (nid <= 39) { s.next = '40' }\r\n  }\r\n  return stage_infos\r\n}\r\n","import { BuiltIn_OID, EntityGroup, FrameBehavior, ItrKind, OpointKind, StateEnum } from \"../defines\";\r\nimport { IEntityData } from \"../defines/IEntityData\";\r\nimport { traversal } from \"../utils/container_help/traversal\";\r\nimport { HitFlag } from \"../defines/HitFlag\";\r\nimport { ensure, find, floor } from \"../utils\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { ActionType } from \"../defines/ActionType\";\r\nimport { CondMaker } from \"./CondMaker\";\r\nimport { CollisionVal as C_Val } from \"../defines/CollisionVal\";\r\n\r\nexport function make_ball_special(data: IEntityData) {\r\n  switch (data.id as BuiltIn_OID) {\r\n    case BuiltIn_OID.FirenFlame:\r\n      traversal(data.frames, (_, frame) => {\r\n        if (frame.itr) for (const itr of frame.itr)\r\n          itr.hit_flag = HitFlag.AllEnemy;\r\n      });\r\n      break;\r\n    case BuiltIn_OID.FirzenBall:\r\n      traversal(data.frames, (_, frame) => {\r\n        frame.no_shadow = 1;\r\n      });\r\n      break;\r\n    case BuiltIn_OID.BatBall:\r\n      traversal(data.frames, (_, frame) => {\r\n        frame.no_shadow = 1;\r\n      });\r\n      break;\r\n    case BuiltIn_OID.JanChase:\r\n      data.frames['50'].invisible = data.frames['50'].wait;\r\n      data.frames['51'].invisible = data.frames['51'].wait;\r\n      data.frames['52'].invisible = data.frames['52'].wait;\r\n      traversal(data.frames, (_, f) => {\r\n        if (f.behavior === FrameBehavior.ChasingSameEnemy) {\r\n          f.opoint = ensure(f.opoint, {\r\n            oid: BuiltIn_OID.JanChase,\r\n            action: { id: \"40\" },\r\n            x: f.centerx,\r\n            y: f.centery,\r\n            kind: OpointKind.Normal,\r\n            is_entity: false,\r\n            speedz: 0,\r\n            dvx: 0,\r\n            dvy: 0,\r\n            dvz: 0,\r\n            interval: 1,\r\n            interval_id: '1',\r\n            interval_mode: 1\r\n          })\r\n        }\r\n        const tail = find(f.opoint, o => o.oid === BuiltIn_OID.JanChase && (o.action as any).id === '40')\r\n        if (tail) {\r\n          tail.speedz = tail.dvx = tail.dvy = tail.dvz = 0;\r\n          tail.is_entity = false\r\n        }\r\n      })\r\n      break;\r\n    case BuiltIn_OID.JanChaseh:\r\n      data.frames['50'].invisible = data.frames['50'].wait;\r\n      data.frames['51'].invisible = data.frames['51'].wait;\r\n      data.frames['52'].invisible = data.frames['52'].wait;\r\n      traversal(data.frames, (_, f) => {\r\n        const tail = find(f.opoint, o => o.oid === BuiltIn_OID.JanChaseh && (o.action as any).id === '40')\r\n        if (tail) {\r\n          tail.speedz = tail.dvx = tail.dvy = tail.dvz = 0;\r\n          tail.is_entity = false\r\n        }\r\n      })\r\n      break;\r\n    case BuiltIn_OID.FirzenChasef:\r\n      data.frames['59'].invisible = data.frames['59'].wait;\r\n      data.frames['80'].invisible = data.frames['80'].wait;\r\n      data.frames['81'].invisible = data.frames['81'].wait;\r\n      traversal(data.frames, (_, f) => {\r\n        if (f.behavior === FrameBehavior.ChasingSameEnemy) {\r\n          f.opoint = ensure(f.opoint, {\r\n            oid: BuiltIn_OID.FirzenChasef,\r\n            action: { id: \"40\" },\r\n            x: floor(f.pic!.w / 2),\r\n            y: floor(f.pic!.h / 2),\r\n            kind: OpointKind.Normal,\r\n            is_entity: false,\r\n            speedz: 0,\r\n            dvx: 0,\r\n            dvy: 0,\r\n            dvz: 0,\r\n            interval: 1,\r\n            interval_id: '1',\r\n            interval_mode: 1\r\n          })\r\n        }\r\n      })\r\n      break;\r\n    case BuiltIn_OID.FirzenChasei:\r\n      traversal(data.frames, (_, f) => {\r\n        if (f.behavior === FrameBehavior.ChasingSameEnemy) {\r\n          f.opoint = ensure(f.opoint, {\r\n            oid: BuiltIn_OID.FirzenChasei,\r\n            action: { id: \"40\" },\r\n            x: floor(f.pic!.w / 2),\r\n            y: floor(f.pic!.h / 2),\r\n            kind: OpointKind.Normal,\r\n            is_entity: false,\r\n            speedz: 0,\r\n            dvx: 0,\r\n            dvy: 0,\r\n            dvz: 0,\r\n            interval: 1,\r\n            interval_id: '1',\r\n            interval_mode: 1\r\n          })\r\n        }\r\n      })\r\n      break;\r\n    case BuiltIn_OID.DeepBall:\r\n    case BuiltIn_OID.DennisBall:\r\n    case BuiltIn_OID.WoodyBall:\r\n    case BuiltIn_OID.DavisBall:\r\n    case BuiltIn_OID.DennisChase:\r\n    case BuiltIn_OID.JackBall:\r\n    case BuiltIn_OID.JohnBall: {\r\n      data.base.group = ensure(data.base.group, EntityGroup.FreezableBall)\r\n      break;\r\n    }\r\n\r\n    case BuiltIn_OID.JohnBiscuit: {\r\n      foreach(data.frames, (frame) => {\r\n        foreach(frame.bdy, bdy => {\r\n          bdy.actions = ensure([], {\r\n            type: ActionType.V_REBOUND_VX,\r\n            test: new CondMaker<C_Val>()\r\n              .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n              .done(),\r\n            data: ''\r\n          }, {\r\n            type: ActionType.V_TURN_FACE,\r\n            test: new CondMaker<C_Val>()\r\n              .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n              .done(),\r\n            data: ''\r\n          }, {\r\n            type: ActionType.V_TURN_TEAM,\r\n            test: new CondMaker<C_Val>()\r\n              .or(C_Val.ItrKind, \"==\", ItrKind.JohnShield)\r\n              .done(),\r\n            data: ''\r\n          }, {\r\n            type: ActionType.V_NextFrame,\r\n            test: new CondMaker<C_Val>()\r\n              .one_of(C_Val.AttackerState, StateEnum.Ball_3005, StateEnum.Ball_3006)\r\n              .and(C_Val.ItrKind, \"!=\", ItrKind.JohnShield)\r\n              .done(),\r\n            data: {\r\n              id: \"20\"\r\n            }\r\n          })\r\n        })\r\n      })\r\n      break;\r\n    }\r\n    case BuiltIn_OID.Template:\r\n    case BuiltIn_OID.Julian:\r\n    case BuiltIn_OID.Firzen:\r\n    case BuiltIn_OID.LouisEX:\r\n    case BuiltIn_OID.Bat:\r\n    case BuiltIn_OID.Justin:\r\n    case BuiltIn_OID.Knight:\r\n    case BuiltIn_OID.Jan:\r\n    case BuiltIn_OID.Monk:\r\n    case BuiltIn_OID.Sorcerer:\r\n    case BuiltIn_OID.Jack:\r\n    case BuiltIn_OID.Mark:\r\n    case BuiltIn_OID.Hunter:\r\n    case BuiltIn_OID.Bandit:\r\n    case BuiltIn_OID.Deep:\r\n    case BuiltIn_OID.John:\r\n    case BuiltIn_OID.Henry:\r\n    case BuiltIn_OID.Rudolf:\r\n    case BuiltIn_OID.Louis:\r\n    case BuiltIn_OID.Firen:\r\n    case BuiltIn_OID.Freeze:\r\n    case BuiltIn_OID.Dennis:\r\n    case BuiltIn_OID.Woody:\r\n    case BuiltIn_OID.Davis:\r\n    case BuiltIn_OID.Weapon0:\r\n    case BuiltIn_OID.Weapon2:\r\n    case BuiltIn_OID.Weapon4:\r\n    case BuiltIn_OID.Weapon5:\r\n    case BuiltIn_OID.Weapon6:\r\n    case BuiltIn_OID.Weapon1:\r\n    case BuiltIn_OID.Weapon3:\r\n    case BuiltIn_OID.Weapon8:\r\n    case BuiltIn_OID.Weapon9:\r\n    case BuiltIn_OID.Weapon10:\r\n    case BuiltIn_OID.Weapon11:\r\n    case BuiltIn_OID.Criminal:\r\n    case BuiltIn_OID.HenryArrow1:\r\n    case BuiltIn_OID.RudolfWeapon:\r\n    case BuiltIn_OID.HenryWind:\r\n    case BuiltIn_OID.HenryArrow2:\r\n    case BuiltIn_OID.FreezeBall:\r\n    case BuiltIn_OID.FirenBall:\r\n    case BuiltIn_OID.FreezeColumn:\r\n    case BuiltIn_OID.Weapon7:\r\n    case BuiltIn_OID.BatChase:\r\n    case BuiltIn_OID.JustinBall:\r\n    case BuiltIn_OID.JulianBall:\r\n    case BuiltIn_OID.JulianBall2:\r\n    case BuiltIn_OID.Etc:\r\n    case BuiltIn_OID.BrokenWeapon:\r\n  }\r\n}\r\n","import { IEntityData } from \"../defines/IEntityData\";\r\nimport { foreach } from \"../utils/container_help/foreach\";\r\nimport { take } from \"./take\";\r\n\r\nexport function make_frames_special(ret: IEntityData) {\r\n  foreach(ret.frames, frame => {\r\n    take(frame, \"hit_a\")\r\n    take(frame, \"hit_j\")\r\n    take(frame, \"hit_d\")\r\n    take(frame, \"hit_Fa\")\r\n    take(frame, \"hit_Fj\")\r\n    take(frame, \"hit_Ua\")\r\n    take(frame, \"hit_Uj\")\r\n    take(frame, \"hit_Da\")\r\n    take(frame, \"hit_Dj\")\r\n    take(frame, \"hit_Ua\")\r\n    take(frame, \"hit_ja\")\r\n  })\r\n\r\n\r\n}\r\n","const pwd = \"SiuHungIsAGoodBearBecauseHeIsVeryGood\";\r\nconst head_placeholder_length = 123;\r\nfunction decode(buf: { [i in number]: number }, len: number) {\r\n  for (let i = 0; i < len; ++i) buf[i] -= pwd.charCodeAt(i % pwd.length);\r\n}\r\nexport default async function decode_lf2_dat(\r\n  array_buffer: ArrayBuffer,\r\n): Promise<string> {\r\n  const buf = new Uint8Array(array_buffer);\r\n  decode(buf, buf.byteLength);\r\n  const char_code_arr = Array.from(buf);\r\n  char_code_arr.splice(0, head_placeholder_length);\r\n  return String.fromCharCode(...char_code_arr);\r\n}\r\n","import List from \"rc-virtual-list\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Button } from \"../../../Component/Buttons/Button\";\nimport Frame from \"../../../Component/Frame\";\n\nexport interface IFilesViewProps {\n  files: File[];\n  onClick?: (file: File) => void;\n}\nexport function FilesView(props: IFilesViewProps) {\n  const { files } = props;\n  const ref_el = useRef<HTMLDivElement>(null);\n  const [height, set_height] = useState(0)\n  useEffect(() => {\n    const el = ref_el.current;\n    if (!el) return;\n    const on_resize = () => {\n      set_height(el.getBoundingClientRect().height || 0)\n    }\n    const ob = new ResizeObserver(on_resize)\n    ob.observe(el)\n    on_resize();\n    return () => ob.disconnect()\n  }, [])\n  return (\n    <Frame\n      style={{\n        height: '100%',\n        width: '100%',\n        paddingLeft: 0,\n        paddingRight: 0,\n        paddingBottom: 0,\n        flexDirection: 'column',\n        overflow: 'hidden',\n        display: 'flex',\n      }}\n      label=\"\"\n      variants={['no_border', 'no_shadow', 'no_round']}>\n      <div ref={ref_el} style={{ position: 'relative', overflow: 'hidden', height: 1, flex: 1 }}>\n        <List\n          data={files}\n          height={height}\n          itemHeight={32}\n          itemKey=\"name\"\n          styles={{ verticalScrollBarThumb: { backgroundColor: 'rgba(0,0,0,0.2)' } }}\n          virtual\n          style={{ resize: 'horizontal', width: '100%' }}>\n          {(file) => (\n            <Button\n              styles={{ inner: { textAlign: 'left', width: '100%' } }}\n              variants={['no_border', 'no_shadow', 'no_round']}\n              onClick={e => {\n                props.onClick?.(file);\n                e.stopPropagation();\n                e.preventDefault();\n              }}>\n              {file.name}\n            </Button>\n          )}\n        </List>\n      </div>\n    </Frame >\n  )\n}","import json5 from \"json5\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Slot } from \"splittings/dist/es/splittings\";\r\nimport { Button } from \"../../Component/Buttons/Button\";\r\nimport { Flex } from \"../../Component/Flex\";\r\nimport Frame from \"../../Component/Frame\";\r\nimport { ITextAreaRef, TextArea } from \"../../Component/TextArea\";\r\nimport dat_to_json from \"../../LF2/dat_translator/dat_2_json\";\r\nimport decode_lf2_dat from \"../../LF2/dat_translator/decode_lf2_dat\";\r\nimport { read_indexes } from \"../../LF2/dat_translator/read_indexes\";\r\nimport { IDataLists } from \"../../LF2/defines\";\r\nimport { open_dir, read_file } from \"../../Utils/open_file\";\r\nimport { FilesView } from \"./FilesView\";\r\nimport { useWorkspaces } from \"./useWorkspaces\";\r\n\r\nexport interface IDatViewerProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  onClose?: (e: React.MouseEvent<HTMLButtonElement>) => void;\r\n  loading?: boolean;\r\n  open?: boolean;\r\n}\r\nexport function DatViewer(props: IDatViewerProps) {\r\n  const { onClose, loading, open, ..._p } = props;\r\n  const _ref_textarea_dat = useRef<ITextAreaRef>(null);\r\n  const _ref_textarea_json = useRef<ITextAreaRef>(null);\r\n  const _ref_txt_dat = useRef<string>(\"\");\r\n  const _ref_txt_json = useRef<string>(\"\");\r\n  const [files, set_files] = useState<File[]>([])\r\n  const ref_data_indexes = useRef<IDataLists | null>(null)\r\n  const on_click_open_dir = async () => {\r\n    const files = await open_dir();\r\n    set_files(files)\r\n    const data_txt = files.find(v => v.name === 'data.txt')\r\n    if (data_txt) on_click_file(data_txt)\r\n  }\r\n  const on_click_file = async (file: File) => {\r\n    if (file.name.endsWith(\".txt\")) {\r\n      const txt = await read_file(file, { as: \"Text\" }).then(v => v.replace(/\\r/g, \"\"));\r\n      const data_indexes = read_indexes(txt, 'json5')\r\n      if (data_indexes) ref_data_indexes.current = data_indexes;\r\n      _ref_txt_dat.current = txt;\r\n      _ref_txt_json.current = json5.stringify(data_indexes, null, 2);\r\n      if (_ref_textarea_dat.current)\r\n        _ref_textarea_dat.current.value = _ref_txt_dat.current;\r\n      if (_ref_textarea_json.current)\r\n        _ref_textarea_json.current.value = _ref_txt_json.current;\r\n    } else if (file.name.endsWith(\".dat\")) {\r\n      const buf = await read_file(file, { as: \"ArrayBuffer\" });\r\n      const str_dat = await decode_lf2_dat(buf);\r\n      const json5_file_name = 'data/' + file.name.replace(/\\.dat$/, \".json5\").replace(/\\\\/g, \"/\");\r\n      const index_info =\r\n        ref_data_indexes.current?.objects.find((v) => json5_file_name === v.file) ||\r\n        ref_data_indexes.current?.backgrounds.find((v) => json5_file_name === v.file);\r\n      if (!index_info) debugger\r\n      const data = dat_to_json(str_dat, index_info!);\r\n      _ref_txt_dat.current = str_dat;\r\n      _ref_txt_json.current = json5.stringify(data, null, 2);\r\n      if (_ref_textarea_dat.current)\r\n        _ref_textarea_dat.current.value = _ref_txt_dat.current;\r\n      if (_ref_textarea_json.current)\r\n        _ref_textarea_json.current.value = _ref_txt_json.current;\r\n    }\r\n  }\r\n  const ref_container = useRef<HTMLDivElement>(null);\r\n  const { context, workspace, set_container } = useWorkspaces({\r\n    container: ref_container.current,\r\n    render: useCallback((slot: Slot, el: HTMLElement, idx: number) => {\r\n      switch (slot.id) {\r\n        case 'files':\r\n          return <FilesView files={files} onClick={on_click_file} />\r\n        case 'dat_txt':\r\n          return (\r\n            <TextArea\r\n              variants={['no_border', 'no_shadow', 'no_round']}\r\n              ref={_ref_textarea_dat}\r\n              wrap=\"off\"\r\n              style={{ resize: 'none', width: '100%', height: '100%' }} />\r\n          )\r\n        case 'json5_txt':\r\n          return (\r\n            <TextArea\r\n              variants={['no_border', 'no_shadow', 'no_round']}\r\n              ref={_ref_textarea_json}\r\n              wrap=\"off\"\r\n              style={{ resize: 'none', width: '100%', height: '100%' }} />\r\n          )\r\n      }\r\n      return <>{slot.id}</>\r\n    }, [files]),\r\n    key: useCallback((slot: Slot, el: HTMLElement, idx: number) => 'slot_' + slot.id || idx, [])\r\n  })\r\n\r\n  useEffect(() => set_container(ref_container.current), [])\r\n  useEffect(() => {\r\n    if (!workspace) return\r\n    workspace.add(0, 0, { id: 'files' })\r\n    workspace.add('files', \"right\", { id: 'dat_txt' })\r\n    workspace.add('dat_txt', \"down\", { id: 'json5_txt' })\r\n    workspace.confirm()\r\n    return () => {\r\n      workspace.del('files')\r\n      workspace.del('dat_txt')\r\n      workspace.del('json5_txt')\r\n    }\r\n  }, [workspace])\r\n\r\n  if (!open) return <></>;\r\n  return (\r\n    <Flex direction=\"column\" align='stretch' {..._p}>\r\n      <Frame\r\n        variants={['no_shadow', 'no_round']}\r\n        style={{\r\n          padding: 0,\r\n          borderTop: `none`,\r\n          borderLeft: `none`,\r\n          borderRight: `none`,\r\n          borderBottom: `1px solid #5555CC55`,\r\n          boxSizing: 'border-box'\r\n        }}>\r\n        <Button\r\n          variants={['no_border', 'no_shadow', 'no_round']}\r\n          onClick={onClose}\r\n          disabled={loading}>\r\n          \r\n        </Button>\r\n        <Button\r\n          variants={['no_border', 'no_shadow', 'no_round']}\r\n          onClick={() => on_click_open_dir().catch(console.warn)}\r\n          disabled={loading}>\r\n          \r\n        </Button>\r\n      </Frame>\r\n      <Frame\r\n        variants={['no_border', 'no_shadow', 'no_round']}\r\n        style={{ flex: 1, overflow: 'hidden', boxSizing: 'border-box' }}\r\n        ref={ref_container} />\r\n      {context}\r\n    </Flex>\r\n  );\r\n}\r\n","import { IDataLists } from \"../defines/IDataLists\";\r\nimport { IDatIndex } from \"../defines/IDatIndex\";\r\nimport { match_block_once } from \"../utils/string_parser/match_block\";\r\nimport { match_colon_value } from \"../utils/string_parser/match_colon_value\";\r\nimport { match_hash_end } from \"../utils/string_parser/match_hash_end\";\r\n\r\nexport function read_indexes(\r\n  text: string | undefined | null,\r\n  suffix: 'json5' | 'json'\r\n): IDataLists | undefined {\r\n  if (!text) return void 0;\r\n  const objects = match_block_once(text, \"<object>\", \"<object_end>\")\r\n    ?.split(/\\n|\\r/)\r\n    .filter((v) => v)\r\n    .map<IDatIndex>((line) => {\r\n      const item: IDatIndex = { id: \"\", type: \"\", file: \"\" };\r\n      for (const [name, value] of match_colon_value(line)) {\r\n        switch (name) {\r\n          case \"id\":\r\n            item[name] = value;\r\n            break;\r\n          case \"type\":\r\n            item[name] = value;\r\n            break;\r\n          case \"file\":\r\n            item[name] = value.replace(/\\\\/g, \"/\").replace(/.dat$/, `.${suffix}`);\r\n            break;\r\n        }\r\n      }\r\n      const hash = match_hash_end(line);\r\n      if (hash) item.hash = hash;\r\n      if (item.id === \"217\") item.hash = \"louis_limbs_armour\";\r\n      if (item.id === \"216\") item.hash = \"louis_body_armour\";\r\n      if (item.id === \"124\") item.hash = \"boomerang\";\r\n      if (item.id === \"201\") item.hash = \"henry_arrow\";\r\n      if (item.id === \"202\") item.hash = \"rudolf_weapon\";\r\n      return item;\r\n    });\r\n\r\n  const backgrounds = match_block_once(text, \"<background>\", \"<background_end>\")\r\n    ?.split(/\\n|\\r/)\r\n    .filter((v) => v)\r\n    .map<IDatIndex>((line) => {\r\n      const item: IDatIndex = { id: \"\", type: \"bg\", file: \"\" };\r\n      for (const [name, value] of match_colon_value(line)) {\r\n        switch (name) {\r\n          case \"id\":\r\n            item[name] = \"bg_\" + value;\r\n            break;\r\n          case \"file\":\r\n            item[name] = value.replace(/\\\\/g, \"/\").replace(/.dat$/, `.${suffix}`);\r\n            break;\r\n        }\r\n      }\r\n      return item;\r\n    });\r\n  if (!objects || !backgrounds) return void 0;\r\n  return { objects, backgrounds };\r\n}\r\n"],"names":["CollisionVal","C_Val","open_file","opts","Promise","resolve","reject","input","document","createElement","type","multiple","accept","click","oncancel","onchange","files","length","Array","from","open_dir","setAttribute","read_file","file","file_reader","FileReader","as","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","encoding","onload","r","result","useWorkspaces","render","key","container","useEffect","styling","Styling","override","s","borderRight","borderBottom","build","mount","unmount","_container","set_container","useState","pairs","set_pairs","workspace","set_workspace","adpater","DomAdapter","workspaces_rect","ws","getBoundingClientRect","x","y","w","Math","ceil","width","h","height","Workspaces","root","keep","on_leaves_changed","leaf","leaves","cell","get_cell","children","parentElement","adapter","appendChild","push","confirm","release","context","useMemo","_jsx","_Fragment","map","_ref","idx","slot","el","ReactDOM","set_obj_field","target","value","match_block_once","text","start","end","_RegExp$exec$","_RegExp$exec","RegExp","trim","exec","match_all","regexp","func","results","val_colon_exp","match_colon_value","k","v","_ref2","BotBuilder","make","data","ret","this","builders","check_all","forEach","b","check","bot","entity","base","id","actions","frames","states","constructor","set_actions","_len","arguments","_key","action","a","action_id","set_frames","frame_ids","action_ids","set_states","state_ids","exists_action_ids","Set","Object","keys","traversal","split","state_id","find","_","frame","state","console","warn","name","aid","size","delete","frame_id","some","_ref3","set_dataset","dataset","to_num","or","n","Number","is_num","CondMaker","is_cond","_parts","add","arg1","op","not","wrap","one_of","word","values","c","not_in","_len2","_key2","and","_any","isArray","done","is_str","join","replace","is","copy_bdy_info","src","edit","JSON","parse","stringify","edit_bdy_info","assign","cook_ball_frame_state_3000","e","bdy_list","bdy","new_bdy","cond","ItrKind","JohnShield","Block","AttackerType","EntityEnum","Ball","Weapon","WeaponSwing","MagicFlute","MagicFlute2","Pick","PickSecretly","ItrEffect","Ice2","MFire1","BuiltIn_OID","FreezeBall","AttackerIsFreezableBall","test","ActionType","V_NextFrame","hit_flag","HitFlag","AllBoth","SameTeam","Fighter","Normal","Ice","SameFacing","itr_list","itr","kind","ensure","A_NextFrame","z","l","V_Sound","path","dead_sounds","cook_next_frame_mp_hp","frame_mp_hp_map","mp","hp","get","get_next_frame_by_raw_id","Builtin_FrameId","Gone","Auto","facing","FacingFlag","Backward","startsWith","substring","hp_gt_0","EntityVal","HP","make_ball_data","info","datIndex","weapon_broken_sound","take_str","weapon_drop_sound","drop_sounds","weapon_hit_sound","hit_sounds","_frame$gravity_enable","hit_j","take","vzm","SpeedMode","Extra","dvz","hit_a","hit_d","on_dead","hit_Fa","behavior","behavior_name","FrameBehavior","AngelBlessing","dvx","Defines","ANGEL_BLESSING_MAX_VX","acc_x","ANGEL_BLESSING_ACC_X","vxm","AccTo","DEFAULT_OPOINT_SPEED_Z","acc_z","ANGEL_BLESSING_ACC_Z","dvy","ANGEL_BLESSING_MAX_VY","acc_y","ANGEL_BLESSING_ACC_Y","vym","ctrl_x","ctrl_y","ctrl_z","Heal","injury","Ally","VictimIsChasing","JohnChase","JOHN_CHASE_MAX_VX","JOHN_CHASE_ACC_X","JOHN_CHASE_ACC_Z","JOHN_CHASE_MAX_VY","JOHN_CHASE_ACC_Y","DennisChase","DENNIS_CHASE_MAX_VX","DENNIS_CHASE_ACC_X","DENNIS_CHASE_ACC_Z","DENNIS_CHASE_MAX_VY","DENNIS_CHASE_ACC_Y","key_down","wait","expression","_03","AngelBlessingStart","undefined","centerx","centery","opoint","OpointKind","oid","JanChaseh","multi","OpointMultiEnum","AccordingAllies","min","spreading","OpointSpreading","jan_chaseh_start","DevilJudgementStart","JanChase","AccordingEnemies","JanDevilJudgement","jan_chase_start","ChasingSameEnemy","DISATER_CHASE_MAX_VX","DISATER_CHASE_ACC_X","DISATER_CHASE_ACC_Z","DISATER_CHASE_MAX_VY","DISATER_CHASE_ACC_Y","FirzenChasef","FirzenChasei","on_landing","BatStart","BatChase","Bat","FirzenDisasterStart","firzen_disater_start","JohnBiscuitLeaving","FirzenVolcanoStart","FirenFlame","FreezeColumn","BAT_CHASE_MAX_VX","BAT_CHASE_ACC_X","BAT_CHASE_ACC_Z","BAT_CHASE_MAX_VY","BAT_CHASE_ACC_Y","JulianBallStart","JulianBall","fid","VictimType","Whirlwind","Freeze","A_Sound","gravity_enabled","StateEnum","Ball_Flying","Ball_Hitting","Ball_3005","AttackerState","foreach","VictimState","cook_ball_frame_state_3005","Ball_3006","cook_ball_frame_state_3006","_ret$base$hit_sounds","CharacterThrew","Catch","ForceCatch","SuperPunchMe","FirzenDisater","take_blocks","positions","blocks","index","remains","to","ValueType","ColonValueReader","_cells","str","Str","int","Int","int_2","Int_Int","read","output","rem_txt","t","reg_str","toString","reg_res","slice","bg_color_translate","rect","g","make_bg_data","full_str","_datIndex$id","fields","left","right","far","CLASSIC_SCREEN_HEIGHT","near","layers","shadow","min_y","block_str","filter","_to_num","cc","c1","c2","color","layer","absolute","group","BackgroundGroup","Regular","make_entity_data","Entity","take_number","edit_next_frame","nexts","fn","add_next_frame","items","FrameEditing","init","keydown","hit","suffix_reg","get_letter","offset","String","fromCharCode","k_9","set_hit_turn_back","back_frame_id","B","make_character_data","_frame$cpoint2","_frame$cpoint3","walking_frame_rate","running_frame_rate","walking_speed","walking_speedz","running_speed","running_speedz","heavy_walking_speed","heavy_walking_speedz","heavy_running_speed","heavy_running_speedz","jump_height","round","dash_height","rowing_height","dash_distance","jump_distance","rowing_distance","fall_value","DEFAULT_FALL_VALUE_MAX","defend_value","DEFAULT_DEFEND_VALUE_MAX","round_trip_frames_map","Map","set","_mp","take_raw_frame_mp","next","seqs","nf","Right","Left","editing","Ctrl","Holding_W_Type","WeaponType","Baseball","Knife","PressFB","Stick","Drink","RequireSuperPunch","None","toFixed","FF","hold","_frame$bdy","V_BrokenDefend","V_Defend","jump_flag","add_key_down_jump_atk","Dash","Jump","cpoint","_frame$cpoint","_frame$hit","vaction","OpposingCatcher","a_action","t_action","s_hit_a","t_hit_a","a_hit_a","Catching","PressUD","unshift","LastestCollidedItrKind","j","Frozen","to_dash_frame","PressLR","TrendX","d","i","f","blink_time","Standing","U","D","L","R","BurnRun","Z_Moveable","Defend","_frame$bdy2","_bdy$actions","BdyKind","kind_name","Walking","Running","NextAsLanding","make_round_trip_frames","prefix","src_frames","indexes","standing","heavy_obj_walk","picking_light","picking_heavy","ice","fire","injured","dizzy","lying","grand_injured","in_the_skys","critical_hit","falling","bouncing","landing_1","landing_2","transform_begin_frame_id_list","TransformToCatching_Begin","cook_hit_next_frame_to_transform","indexOf","HAS_TRANSFORM_DATA","k2","cook_transform_begin_expression_to_hit","file_keys","infos","sort","first_str","letter","v_idx","findIndex","gap","reduce","pre","item","arr","diff","is_match","template","variant","col","row","cell_w","cell_h","variants","cook_file_variants","DESIRE_RATIO","bot_front_test","min_mp","desire","min_x","max_x","zable","MP","ray_1","rays","status","BotStateEnum","Chasing","e_ray","MIN_X","ID","bot_ball_dfa","GK","bot_ball_dfj","bot_chasing_skill_action","keys_str","GameKey","walkings","arithmetic_progression","standings","runnings","punchs","rowings","super_punch","bot_ball_continuation","Attack","bot_chasing_action","MAX_X","bot_uppercut_dua","bot_uppercut_dva","max_d","Z_LEN","bot_explosion_dua","z_len","pow","bot_explosion_duj","make_fighter_data_firzen","strength","FIGHTER_STREAGTH_STRONG","EntityGroup","Boss","mp_r_ratio","ce","reverse","bot_ball_cancelling","probability","Attacking","bot_idle_action","Idle","bot_uppercut_duj","make_fighter_special","num_id","Hidden","Julian","armor","fireproof","antifreeze","ArmorEnum","Fall","toughness","DEFAULT_FALL_VALUE_CRITICAL","_data$frames$k$opoint","max_hp","max_mp","Shaking","make_fighter_data_julian","Firzen","LouisEX","w_atk_f_x","w_atk_b_x","j_atk_f_x","j_atk_b_x","make_figther_data_louisex","make_fighter_data_bat","Knight","make_fighter_data_knigt","Louis","fulltime","_data$frames$k$seqs","ja","HP_P","LF2_NET_ON","make_figther_data_louis","Rudolf","w_atk_m_x","r_desire_max","AI_R_DESIRE_MAX","r_desire_min","AI_R_DESIRE_MIN","make_fighter_data_rudolf","Deep","BotVal","EnemyOutOfRange","EnemyY","Rowing","make_fighter_data_deep","Davis","make_fighter_data_davis","Dennis","_a$e_ray","_e$e_ray","_action$e_ray","ray","EnemyDiffX","make_fighter_data_dennis","Woody","_a$e_ray2","make_fighter_data_woody","Firen","Boolean","code","effect","Ignore","DAFUALT_QUBE_LENGTH","BdyCode","BdyHitFlag","_action$e_ray2","Down","_action$e_ray3","make_fighter_data_firen","FUSION","act","time","ItrCode","ItrHitFlag","V_HP_P","A_HP_P","_e$e_ray2","Holding","make_fighter_data_freeze","Jack","make_fighter_data_jack","Mark","make_fighter_data_mark","Monk","make_fighter_data_monk","Henry","make_fighter_data_henry","Hunter","_3000","make_fighter_data_henter","Justin","make_fighter_data_justin","Jan","FIGHTER_STREAGTH_WEAK","make_fighter_data_jan","Sorcerer","Avoiding","E_Val","HpRecoverable","Safe","Up","make_fighter_data_sorcerer","John","EnemyState","Falling","BrokenDefend","make_fighter_data_john","Template","Bandit","Weapon0","Weapon2","Weapon4","Weapon5","Weapon6","Weapon1","Weapon3","Weapon8","Weapon9","Weapon10","Weapon11","Criminal","JohnBall","HenryArrow1","RudolfWeapon","DeepBall","HenryWind","DennisBall","WoodyBall","DavisBall","HenryArrow2","FirenBall","Weapon7","JohnBiscuit","JackBall","FirzenBall","BatBall","JustinBall","JulianBall2","Etc","BrokenWeapon","take_sections","sections","content_str","cook_bdy","AllEnemy","bdy_kind_full_name","B_K","Caught","between","OLD_BDY_KIND_GOTO_MIN","OLD_BDY_KIND_GOTO_MAX","E_E","I_K","AttackerOID","O_ID","V_TURN_TEAM","sort_key_value","bdy_key_orders","cook_bpoint","bpoint","take_not_zero_num","any","not_zero_num","cook_cpoint","unsure_cpoint","throwvx","throwvy","throwvz","throwinjury","decrease","take_num","abs","cover","raw_injury","_unsure_cpoint$vactio","shaking","DEFAULT_ITR_SHAKING","SameAsCatcher","tx","ty","fixed_float","digits","take_positive_num","is_positive","cook_itr","_take_not_zero_num","vrest","max","arest","DEFAULT_ITR_MOTIONLESS","src_dvx","fall","bdefend","zwidth","effect_name","cond_maker","Fire","Burning","MFire2","Through","VictimFrameId","VictimFrameIndex_ICE","motionless","AttackerHasHolder","VictimHasHolder","Weapon_OnGround","HeavyWeapon_OnGround","VictimOID","Tired","AttackerThrew","catchingact","caughtact","cook_opoint","floor","cook_wpoint","unsure_wpoint","attacking","make_frame_state","no_shadow","HeavyWeapon_OnHand","Weapon_OnHand","OLD_LouisCastOff","speedz","ItrFall","Message","make_frames","frame_regexp","frame_name","content","_frame$itr","_frame$opoint","_content","r1","r2","r3","opoint_list","r4","wpoint_list","r5","bpoint_list","r6","cpoint_list","raw_next","pic_idx","frame_pic_info","entity_pic_info","error","pic","tex","msg","wpoint","state_name","__ERROR__","invisible","sound","dircontrol","F","Fixed","FixedLf2","match_hash_end","_text$match","match","indexes_map","on_ground","just_on_ground","throw_on_ground","Heavy","make_weapon_data","_datIndex$hash","_$","_indexes_map","hash","bounce","itr_prefabs","_match_block_once","weapon_strength_str","is_non_empty_str","list","remain","entry","itr_prefab","make_itr_prefabs","sound_1","sound_2","sound_3","drop_hurt","weapon_hp","throwings","on_hands","Weapon_InTheSky","HeavyWeapon_InTheSky","Weapon_Throwing","stone","sstone","stick","sstick","hoe","s_hoe","k_hoe","box0","box1","box2","box3","baseball","milk1","milk2","milk3","icesword1","icesword2","beer1","beer2","boomerang","armour","WEAPON_WEIGHT_HEAVY","broken_pieces_opoints","aa","origin_type","handled","dat_to_json","stage_infos","r_0","stage_str","_match_hash_end2","stage_info","bg","phases","phase_str","phase_info","bound","desc","objects","line","_match_hash_end$trim","_match_hash_end","music","object","is_soldier","is_boss","_to_num2","head","nid","is_starting","starting_name","p","enemy_r","enemy_l","health_up","respawn","Difficulty","Easy","Difficult","Crazy","mp_up","chapter","title","drink_l","drink_r","first_phase","cam_jump_to_x","player_jump_to_x","make_stage_infos","infos_str","info_str","reg_result","small","file_id","num_data_id","VsWeapon","StageWeapon","weight","WEAPON_WEIGHT_ARROW","Weapon_Rebounding","has","Error","pretest","ArmorWork","Weapon_Stick","WEAPON_WEIGHT_NOMRAL","brokens","Weapon_Hoe","WEAPON_WEIGHT_HOE","Weapon_Knife","WEAPON_WEIGHT_LIGHT","Weapon_baseball","WEAPON_WEIGHT_BASEBALL","make_arr","Weapon_milk","drink","hp_h_total","hp_h_value","hp_h_ticks","hp_r_total","hp_r_value","hp_r_ticks","mp_h_total","mp_h_value","mp_h_ticks","Weapon_Stone","Weapon_WoodenBox","Weapon_Beer","Weapon_Boomerang","Weapon_LouisArmourA","Weapon_LouisArmourB","Weapon_IceSword","make_weapon_special","is_entity","interval","interval_id","interval_mode","tail","o","FreezableBall","V_REBOUND_VX","V_TURN_FACE","make_ball_special","make_frames_special","pwd","head_placeholder_length","async","decode_lf2_dat","array_buffer","buf","Uint8Array","len","charCodeAt","decode","byteLength","char_code_arr","splice","FilesView","props","ref_el","useRef","set_height","current","on_resize","ob","ResizeObserver","observe","disconnect","Frame","style","paddingLeft","paddingRight","paddingBottom","flexDirection","overflow","display","label","ref","position","flex","List","itemHeight","itemKey","styles","verticalScrollBarThumb","backgroundColor","virtual","resize","Button","inner","textAlign","onClick","_props$onClick","call","stopPropagation","preventDefault","DatViewer","onClose","loading","open","_p","_ref_textarea_dat","_ref_textarea_json","_ref_txt_dat","_ref_txt_json","set_files","ref_data_indexes","on_click_file","endsWith","txt","then","data_indexes","suffix","_match_block_once2","backgrounds","read_indexes","json5","_ref_data_indexes$cur","_ref_data_indexes$cur2","str_dat","json5_file_name","index_info","ref_container","useCallback","TextArea","del","_jsxs","Flex","direction","align","padding","borderTop","borderLeft","boxSizing","disabled","data_txt","on_click_open_dir","catch"],"sourceRoot":""}