"use strict";(self.webpackChunklittle_fighter_j=self.webpackChunklittle_fighter_j||[]).push([[366],{7798:(e,t,s)=>{s.d(t,{DX:()=>_,vm:()=>c});class i{lines=[];workspaces;type;constructor(e,t,s){this.workspaces=e,this.lines=s,this.type=t,e.adapter.crossdot_create(this)}release(){this.workspaces.adapter.crossdot_release(this)}update(){this.workspaces.adapter.crossdot_update(this)}}class n{slot;prev;next;snapshots=(()=>new Map)();ok_weights=(()=>new Map)();workspaces;prev_cross_dot=null;next_cross_dot=null;get actived(){return this._actived}_actived=!1;_down={x:0,y:0};_move={x:0,y:0};save_weights(e){this.ok_weights.set(e,{f:e.weight,r:{...e.rect}});for(const t of e.children)this.save_weights(t)}restore_weights(e){const{f:t,r:s}=this.ok_weights.get(e);e.weight=t,e.edit_rect(e=>(e.x=s.x,e.y=s.y,e.w=s.w,e.h=s.h,e));for(const i of e.children)this.restore_weights(i)}drag_begin(e,t){this._down.x=e,this._down.y=t,this.snapshots.clear(),this.ok_weights.clear();for(const s of this.slot.children)this.snapshots.set(s,s.snapshot(!0));this.save_weights(this.slot),this._actived=!0}drag_move(e,t){const{workspaces:s}=this,{slot:i}=this;this._move.x=e,this._move.y=t;let n="h"===i.type?this._move.x-this._down.x:this._move.y-this._down.y;if(0===n)return;const r="h"===i.type?"w":"h",o=n>0?"prev":"next",h=n>0?"next":"prev";let l=Math.abs(n);const _=this[o];let c=this.snapshots.get(_).weight(0)+l;const a={..._.rect};a[r]=c,_.update_rect(a),_.weight=c;let d=_[o];for(;d;){const e=this.snapshots.get(d);d.weight=e.weight(0);const{x:t,y:s,w:i,h:n}=e.rect(0);d.edit_rect(e=>(e.x=t,e.y=s,e.w=i,e.h=n,e)),d=d[o]}let p=this[h];do{let e=this.snapshots.get(p).weight(0)-l;const t=p.crosscut*this.workspaces.slot_min_size[r];e<t?(l=t-e,e=t):l=0;const s={...p.rect};if(s[r]=e,p.update_rect(s),p.weight=e,!p[h]||l<=0)break;p=p[h]}while(p&&l>0);const u=i.children.reduce((e,t)=>e+this.snapshots.get(t).weight(0),0),g=i.children.reduce((e,t)=>e+t.weight,0);if(g>u){const e=Math.floor(u-(g-_.weight)),t={..._.rect};t[r]=e,_.update_rect(t),_.weight=e}s.update()}drag_end(){this._actived=!1}constructor(e,t,s,i){this.workspaces=e,e.adapter.line_create(this),this.update_slots(t,s,i)}_update_dot(e){const t=`${e}_cross_dot`,s=this.workspaces[`${e}_line_map`];let n,r=this.slot;for(;r&&(r[e]&&(n=s.get(r[e].id)),!n);)r=r.grandparent;if(!n)return this[t]?.release(),void(this[t]=null);this[t]?this[t].lines[1]=n:this[t]=new i(this.workspaces,e,[this,n]),this[t].update()}update_slots(e,t,s){this.slot=e,this.prev=t,this.next=s,this.workspaces.adapter.line_update(this)}update_dots(){this._update_dot("prev"),this._update_dot("next")}release(){this.workspaces.adapter.line_release(this),this._actived&&this.drag_end(),this.prev_cross_dot?.release(),this.next_cross_dot?.release(),this.prev_cross_dot=null,this.next_cross_dot=null}}class r{slot;slots;constructor(e){this.slot=e;const t=this.slots=new Map,s=e=>{t.set(""+e.id,e),e.children?.forEach(s)};s(e)}find(e){return 0===e?this.slot:this.slots.get(e)}rect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.find(e)?.rect}w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.rect(e)?.w??t}weight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.find(e)?.weight}pure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.slot;const{parent:t,prev:s,next:i,...n}=e;return n.children=n.children?.map(e=>this.pure(e)),n}}function o(e,t){t(e);for(const s of e.children)t(s)}const{floor:h,max:l}=Math;class _{_children=[];workspaces;id="";_parent=null;_prev=null;_next=null;_type="v";_min_size={w:50,h:50};_crosscut=1;_slitting=1;_keep=!1;_weight=50;_rect={x:0,y:0,w:0,h:0};get rect(){return this._rect}set rect(e){this._rect.x=h(e.x),this._rect.y=h(e.y),this._rect.w=h(e.w),this._rect.h=h(e.h)}edit_rect(e){this.rect=e(this._rect)}get weight(){return this._weight}set weight(e){this._weight=Number(e.toFixed(4))}get type(){return this._type}set type(e){this._type=e;const t="v"===e?"w":"h";this.weight=l(this.rect[t],this.workspaces.slot_min_size[t]),this.edit_rect(e=>(e[t]=this.weight,e));const s={...this.rect};s[t]=this.weight,this.rect=s}get min_size(){return this._min_size}get children(){return this._children}get parent(){return this._parent}get grandparent(){return this.parent?.parent||null}get prev(){return this._prev}get next(){return this._next}get keep(){return this._keep}set keep(e){this._keep=e}get root(){let e=this;for(;e?.parent;)e=e.parent;return e}get crosscut(){return this._crosscut}get slitting(){return this._slitting}set crosscut(e){this._crosscut=e;const t="v"===this._type?"w":"h";this._min_size[t]=e*this.workspaces.slot_min_size[t]}set slitting(e){this._slitting=e;const t="v"===this._type?"h":"w";this._min_size[t]=e*this.workspaces.slot_min_size[t]}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.workspaces=e;const{rect:s,children:i,...n}=t;this.keep=n.keep??this.keep,this.type=n.type??this.type,this.weight=n.weight??this.weight,this._rect.x=h(s?.x??this._rect.x),this._rect.y=h(s?.y??this._rect.y),this._rect.w=h(s?.w??this._rect.w),this._rect.h=h(s?.h??this._rect.h),this.id=t.id??e.new_slot_id(),this._children=i?.map(t=>new _(e,t))??[],this._link_up(),this.workspaces.adapter.slot_create(this)}confirm(){this.workspaces.confirm()}clone(){return new _(this.workspaces,this)}snapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new r(this._snapshot(e))}update_dimension(){const e=t=>{t.children.length<=1&&(t.crosscut=1,t.slitting=1);const s=[];for(const i of t.children)e(i),s.push(i.children.reduce((e,t)=>e+t.crosscut,0));t.crosscut=l(...s,1),t.slitting=l(t.children.reduce((e,t)=>e+t.crosscut,0),1)};return e(this)}update_weight(){const e=t=>{t.weight=t.rect["v"===t.parent?.type?"h":"w"],t.children.forEach(t=>e(t))};e(this)}update_rect(e){const t=(e,s)=>{const i="v"===e._type?"y":"x",n="v"===e._type?"h":"w";e.edit_rect(t=>(t.x=s.x,t.y=s.y,t.w=l(s.w,e.min_size.w),t.h=l(s.h,e.min_size.h),t));const r=e.children.reduce((e,t)=>e+t.weight,0);let o=0;const h=e.children.map(t=>{let s=e.rect[n]*t.weight/r;const i=t.min_size[n];return s<i?(o+=i-s,[t,i]):(o>s-i?(o-=s-i,s=i):o&&(s-=o,o=0),[t,s])});let _=e.rect[i];h.forEach((s,r)=>{let[o,h]=s;const l={...e.rect};l[i]=_,l[n]=h,t(o,l),_+=o.rect[n]})};t(this,e),this.update_weight()}_link_up(){let e=null;for(const t of this.children)t._type="h"===this._type?"v":"h",t._parent=this,t._prev=e,t._next=null,e&&(e._next=t),e=t;this.workspaces.slots_dirty()}_snapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[],s={id:this.id,type:this.type,parent:null,rect:{...this.rect},weight:this.weight,children:t,prev:null,next:null,keep:this.keep};if(!e){let e=null;for(const i of this.children){const n=i._snapshot();n.parent=s,n.prev=e,e&&(e.next=n),e=n,t.push(n)}}return s}_handle_new_children(e){const t=this.children.reduce((e,t)=>e+t.weight,0)||1,s=t/(e.length+this.children.length),i=(t-s*e.length)/t;this.children.forEach(e=>e.weight*=i),e.forEach(e=>e.weight=s)}insert(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];s.length&&(this._handle_new_children(s),this._children.splice(e,0,...s),this._link_up())}unshift(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t.length&&(this._handle_new_children(t),this._children.unshift(...t),this._link_up())}shift(){if(!this._children.length)return;const e=this._children[0];return this.remove(e),e}remove(e){const t=this._children.indexOf(e);return!(t<0)&&(this._children.splice(t,1),e._parent=null,e._prev=null,e._next=null,this._link_up(),this.workspaces.adapter.slot_release(e),!0)}replace(e){if("number"!==typeof e&&(e=this.children.indexOf(e)),e<0||e>=this.children.length)throw new Error(`[Slot::replace] index out of bounds, idx: ${e}, size: ${this.children.length}`);for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];if(!s.length){const t=this.children[e];return this.remove(t),t}const n=this._children.splice(e,1)[0],r=s.reduce((e,t)=>t.weight+e,0);for(const o of s)o._parent=this,o._type=n.type,o.weight=n.weight*o.weight/r;return n._parent=null,n._prev=null,n._next=null,this._children.splice(e,0,...s),this._link_up(),n}push(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];t.length&&(this._handle_new_children(t),this._children.push(...t),this._link_up())}removed(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.workspaces.debug_output("[Slot::removed]",this.id);do{this.workspaces.prev_line_map.get(this.id)?.release(),this.workspaces.next_line_map.get(this.id)?.release(),this.workspaces.prev_line_map.delete(this.id),this.workspaces.next_line_map.delete(this.id);let{parent:t}=this;if(!t)break;if(t.remove(this),!e||t.keep)break;if(0===t.children.length){t.release();break}if(t.children.length>1)break;const s=t.shift(),i=[t];let n=t.parent;for(;n&&!(n.children.length>1||n.keep);)t=n,i.push(t),n=n.parent;n?n.type===s.type&&s.children.length?n.replace(t,...s.children):n.replace(t,s):this.workspaces.set_root(s);for(const e of i)e.release()}while(0);o(this,e=>this.workspaces.adapter.slot_release(e))}release(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.workspaces.debug_output("[Slot::release]",this.id),this.removed(e),this._parent=null,this._prev=null,this._next=null,this.workspaces.slots.delete(this.id)}get_my_depth(){let e=0,t=this;for(;t.parent;)t=t.parent,++e;return e}get_max_depth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.children.map(t=>t.get_max_depth(e+1));return l(e,...t)}find_slot(e){return e(this)?this:this.children.find(t=>t.find_slot(e))}}class c{_adapter;_slot_min_size={w:150,h:75};_new_slot_id=0;_root;prev_line_map=(()=>new Map)();next_line_map=(()=>new Map)();_slots=(()=>new Map)();_leaves=[];_leaf_dirty=0;_leaf_ids="";get slots(){return this._slots}get leaves(){return this._leaves}get slot_min_size(){return this._slot_min_size}get root(){return this._root}get adapter(){return this._adapter}constructor(e,t){this._adapter=e,this._root=this.new_slot(this,t),this.adapter.workspaces_create(this)}release(){this.adapter.workspaces_release(this);for(const[,e]of this.prev_line_map)e.release();for(const[,e]of this.next_line_map)e.release()}on_resize=()=>this.update();on_leaves_changed;on_changed;new_slot_id(){const e="slot_"+ ++this._new_slot_id%Number.MAX_SAFE_INTEGER;return this._slots.has(e)?this.new_slot_id():e}set_root(e){if(this._root===e)return;for(const[,s]of this.prev_line_map)s.release();this.prev_line_map.clear();for(const[,s]of this.next_line_map)s.release();this.next_line_map.clear();for(const[,s]of this._slots)s.release();this._slots.clear(),this._leaves.length=0;const t=this.adapter.workspaces_rect(this);this._root=e,this._root.edit_rect(e=>(e.x=0,e.y=0,e.w=Math.floor(t.w),e.h=Math.floor(t.h),e)),this._leaf_dirty=1,this._leaf_ids="",this._slots.clear(),o(e,e=>this._slots.set(e.id,e))}del_slot(e){if(!e.parent)throw new Error("[Workspaces::del_slot] can not delete root slot");e.release(),this._leaf_dirty=1}del(e){this.debug_output("[Workspaces::del]",e);const t=this._slots.get(e);return t?(this.del_slot(t),t):t}find(e){if(0===e)return this._root;if("string"===typeof e)return this._slots.get(e);if("function"===typeof e)return this._root.find_slot(e);if(Array.isArray(e)){let t=this._root;for(let s=0;s<e.length&&t;s++){const i=e[s];t="number"===typeof i?t.children[i]:"string"===typeof i?t.children.find(e=>e.id===i):"function"===typeof i?t.children.find(i):void 0}return t}return this._root}edits(e,t,s){const i=e.map(e=>this.find(e));switch(t){case 0:return void s(i);case 1:return void(i.indexOf(void 0)<0&&s(i));case 2:return void s(i.filter(Boolean))}}edit(e,t){if(0===e){const e=this._root;e&&t(e)}else if("string"===typeof e){const s=this._slots.get(e);s&&t(s)}}new_slot(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const i=new _(...t);if(this._slots.get(i.id)){const e=`[Workspaces::new_slot] slot id ${JSON.stringify(i.id)} repeated!`,t=new Error(e);throw this.error_output(t),t}return this._slots.set(i.id,i),i}add(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.debug_output("[Workspaces::add]",e,t,s);const i=this.find(e);if(!i){const t=new Error(`[Workspaces::add]anchor_slot not found, id: ${e}`);return this.error_output(t),[null,null]}const n=i?.parent,r=n?.children.indexOf(i),o=this.new_slot(this,s);let h=null;if(this._slots.set(o.id,o),"number"===typeof t)return i.insert(t,o),[null,null];const l=e=>{const s=this.root;if("string"===typeof t)switch(t){case"up":case"down":e.type="v";break;case"left":case"right":e.type="h"}this._root=e,e.push(s)},_=()=>{if(this.debug_output("[Workspaces::add] split_as_first"),h=this.new_slot(this),n){const e=n.replace(r,h);h.push(o,e)}else l(h),h.unshift(o)},c=()=>{if(this.debug_output("[Workspaces::add] split_as_last"),h=this.new_slot(this),n){const e=n.replace(r,h);h.push(e,o)}else l(h),h.push(o)},a=()=>{this.debug_output("[Workspaces::add] insert_before"),n?n.insert(r,o):_()},d=()=>{this.debug_output("[Workspaces::add] insert_after"),n?n.insert(1+r,o):c()};switch(`${i.type} ${t}`){case"v up":case"h left":_();break;case"v down":case"h right":c();break;case"v left":case"h up":a();break;case"v right":case"h down":d()}return this._leaf_dirty=1,[o,h]}move(e,t,s){this.debug_output("[Workspaces::move]",e,t,s);const i=this.find(e);if(!i){const t=new Error(`[Workspaces::move] target_slot not found, id: ${e}`);return void this.error_output(t)}const n=this.find(t);if(!n){const e=new Error(`[Workspaces::move] anchor_slot not found, id: ${t}`);return void this.error_output(e)}i.removed();const r=n.parent,o=r?.children.indexOf(n);if("number"===typeof s)return n.insert(s,i),i;const h=e=>{const t=this.root;if("string"===typeof s)switch(s){case"up":case"down":e.type="v";break;case"left":case"right":e.type="h"}this._root=e,e.push(t)},l=()=>{this.debug_output("[Workspaces::add] split_as_first");const e=this.new_slot(this);if(r){const t=r.replace(o,e);e.push(i,t)}else h(e),e.unshift(i)},_=()=>{this.debug_output("[Workspaces::add] split_as_last");const e=this.new_slot(this);if(r){const t=r.replace(o,e);e.push(t,i)}else h(e),e.push(i)},c=()=>{this.debug_output("[Workspaces::add] insert_before"),r?r.insert(o,i):l()},a=()=>{this.debug_output("[Workspaces::add] insert_after"),r?r.insert(1+o,i):_()};switch(`${n.type} ${s}`){case"v up":case"h left":l();break;case"v down":case"h right":_();break;case"v left":case"h up":c();break;case"v right":case"h down":a()}this._leaf_dirty=1}update_rects(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ok:!0};if(!e.children?.length)return t.ok;let{x:s,y:i,w:n,h:r}=e.rect;const o="h"===e.type?"w":"h",h="h"===e.type?"x":"y";let l="h"===e.type?s:i;const _=e.children.reduce((e,t)=>e+t.weight,0);let c=e.rect[o];const a=[];for(let d=0;d<e.children.length;++d){const t=e.children[d],s=Math.max(e.rect[o]*t.weight/_,t.crosscut*this.slot_min_size[o]),i=Math.floor(s);a.push(i),c-=i}for(;c>0;)for(let e=0;e<a.length&&c;++e)a[e]+=1,--c;return c<0&&(t.ok=!1),e.children.forEach((e,_)=>{let c=a[_];if(void 0===c)throw new Error("number of cell_size not equals to number of children");const d={x:s,y:i,w:n,h:r};d[o]=c,d[h]=l,e.rect={...d},e.rect[o]!==d[o]&&(t.ok=!1),this.update_rects(e,t),l+=c}),t.ok}update_lines(e){e.children.forEach((t,s,i)=>{const r=i[s+1];if(this.update_lines(t),!r)return;let o=this.prev_line_map.get(t.id);o?(this.prev_line_map.delete(o.prev.id),this.next_line_map.delete(o.next.id),o.update_slots(e,t,r)):o=new n(this,e,t,r),this.prev_line_map.set(t.id,o),this.next_line_map.set(r.id,o)})}update_slot(e){this._slots.set(e.id,e),this.adapter.slot_update(e),e.children.length?e.children.forEach(e=>this.update_slot(e)):this._leaves.push(e)}confirm(){for(const[,e]of this.prev_line_map)e.release();for(const[,e]of this.next_line_map)e.release();this.prev_line_map.clear(),this.next_line_map.clear(),this.update()}update(){const{_root:e}=this;if(!e)return!1;if(e.update_dimension(),e.update_rect(this.adapter.workspaces_rect(this)),this.update_lines(e),this._slots.clear(),this._leaves=[],this.update_slot(e),this.prev_line_map.forEach(e=>e.update_dots()),this.next_line_map.forEach(e=>e.update_dots()),this.on_changed?.(this),this.on_leaves_changed){const e=this._leaves.map(e=>e.id).join();(this._leaf_ids!==e||this._leaf_dirty)&&(this._leaf_ids=e,this.on_leaves_changed?.(this),this._leaf_dirty=0)}}slots_dirty(){for(const[,e]of this.prev_line_map)e.actived&&e.drag_end()}debug_output(){}error_output(e){}print_slot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.debug_output(t+e.id+"["+(e.children?.length?e.type:"-")+"]"),e.children?.forEach(e=>this.print_slot(e,t+"    "))}array_tree(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;return e.children?.length?[`[${e.type}]${e.id}`,e.children.map(e=>this.array_tree(e))]:`[${e.type}]${e.id}`}}},8376:()=>{},9668:(e,t,s)=>{s.d(t,{HJ:()=>o,qj:()=>n});var i={size:"4px",zone:"splittings_zone_CnPI-",cell:"splittings_cell_LnYyq",leaf:"splittings_leaf_-pTwe",_resizing:"splittings__resizing_D1EOr",zone_free_resizing:"splittings_zone_free_resizing_7x4gB",zone_v_resizing:"splittings_zone_v_resizing_JGUiM",zone_h_resizing:"splittings_zone_h_resizing_LpDdC",_line:"splittings__line_2-jCC",h_line:"splittings_h_line_frm5b",v_line:"splittings_v_line_jbxr8",crossdot:"splittings_crossdot_j4z9s",_line_hover:"splittings__line_hover_o0XQ2"};class n{line_size(){return parseInt(i.size)}slot_z_index(e){return""+e.get_my_depth()}crossdot_z_index(e){return""+e.workspaces.root.get_max_depth()+10}line_z_index(e){return""+e.workspaces.root.get_max_depth()+10}_crossdot_map=(()=>new Map)();_line_map=(()=>new Map)();_slot_cell_map=(()=>new Map)();_cell_slot_map=(()=>new Map)();_container;get container(){return this._container}set container(e){this._container=e}_resize_ob;constructor(e){this._container=e}get_slot(e){return this._cell_slot_map.get(e)}get_cell(e){return this._slot_cell_map.get(e)}workspaces_create(e){this.container.classList.add(i.zone),this._resize_ob=new ResizeObserver(e.on_resize),this._resize_ob.observe(this.container)}workspaces_release(e){this.container.classList.remove(i.zone,i.zone_h_resizing,i.zone_v_resizing),this.container.innerHTML="",this._resize_ob?.disconnect()}workspaces_rect(e){const t=this.container.getBoundingClientRect();return{x:0,y:0,w:t.width,h:t.height}}slot_create(e){const t=document.createElement("div");t.id=e.id,t.draggable=!1,t.className=i.cell,t.style.left=e.rect.x+"px",t.style.top=e.rect.y+"px",t.style.width=e.rect.w+"px",t.style.height=e.rect.h+"px",t.draggable=!1,this._slot_cell_map.set(e,t),this._cell_slot_map.set(t,e),this.container.appendChild(t)}slot_rect(e){return e.rect}slot_update(e){const t=this._slot_cell_map.get(e);if(!t)return;const{x:s,y:n,w:r,h:o}=this.slot_rect(e);t.style.left=`${s}px`,t.style.top=`${n}px`,t.style.width=`${r}px`,t.style.height=`${o}px`,t.style.zIndex=this.slot_z_index(e),t.classList[e.children.length?"remove":"add"](i.leaf)}slot_release(e){const t=this._slot_cell_map.get(e);t&&t.remove()}crossdot_create(e){const t=document.createElement("div"),s={element:t,enter:()=>this.crossdot_hover_begin(e),leave:()=>this.crossdot_hover_end(e),begin:t=>{this.crossdot_drag_begin(e,t.clientX,t.clientY),t.preventDefault()},end:()=>this.crossdot_drag_end(e)};t.addEventListener("pointerdown",s.begin),t.addEventListener("pointerenter",s.enter),t.addEventListener("pointerleave",s.leave),t.classList.add(i.crossdot),t.draggable=!1,this._crossdot_map.set(e,{...s,element:t}),this.container.appendChild(t)}crossdot_drag_begin(e,t,s){e.lines.forEach(e=>this.line_drag_begin(e,t,s)),this.container.classList.add(i.zone_free_resizing);const n=this._crossdot_map.get(e);n&&(n.element.removeEventListener("pointerenter",n.enter),n.element.removeEventListener("pointerleave",n.leave),document.addEventListener("pointercancel",n.end,{once:!0}),document.addEventListener("pointerup",n.end,{once:!0}),window.addEventListener("blur",n.end,{once:!0}))}crossdot_drag_end(e){this.container.classList.remove(i.zone_free_resizing);const t=this._crossdot_map.get(e);t&&(t.element.addEventListener("pointerenter",t.enter),t.element.addEventListener("pointerleave",t.leave))}crossdot_hover_begin=e=>{for(const t of e.lines){const e=this._line_map.get(t);e&&e.element.classList.add(i._line_hover)}};crossdot_hover_end=e=>{for(const t of e.lines){const e=this._line_map.get(t);e&&e.element.classList.remove(i._line_hover)}};crossdot_update(e){const t=this._crossdot_map.get(e);if(!t)return;t.element.style.zIndex=this.crossdot_z_index(e);const{lines:[s]}=e;if(!s)return;const i=this.line_size();t.element.style.width=t.element.style.height=`${i}px`,"prev"===e.type?"h"===s.slot.type?(t.element.style.top=s.slot.rect.y-.5*i+"px",t.element.style.left=s.next.rect.x-.5*i+"px"):(t.element.style.left=s.slot.rect.x-.5*i+"px",t.element.style.top=s.next.rect.y-.5*i+"px"):"h"===s.slot.type?(t.element.style.left=s.next.rect.x-.5*i+"px",t.element.style.top=s.slot.rect.y+s.slot.rect.h-.5*i+"px"):(t.element.style.left=s.slot.rect.x+s.slot.rect.w-.5*i+"px",t.element.style.top=s.next.rect.y-.5*i+"px")}crossdot_release(e){const t=this._crossdot_map.get(e);if(!t)return;const{element:s}=t;s.remove(),s.removeEventListener("pointerdown",t.begin),s.removeEventListener("pointerenter",t.enter),s.removeEventListener("pointerleave",t.leave),document.removeEventListener("pointercancel",t.end),document.removeEventListener("pointerup",t.end),window.removeEventListener("blur",t.end)}line_create(e){const t=document.createElement("div"),s={element:t,begin:t=>{this.line_drag_begin(e,t.clientX,t.clientY),t.preventDefault()},move:t=>this.line_drag_move(e,t.clientX,t.clientY),end:()=>this.line_drag_end(e)};t.addEventListener("pointerdown",s.begin),t.draggable=!1,this._line_map.set(e,s),this.container.appendChild(t)}line_drag_begin(e,t,s){e.drag_begin(t,s);const n=this._line_map.get(e);if(!n)return;const{slot:r}=e;n.element.classList.add(i._line_hover),this.container.classList.add("h"===r.type?i.zone_h_resizing:i.zone_v_resizing),document.addEventListener("pointermove",n.move),document.addEventListener("pointercancel",n.end,{once:!0}),document.addEventListener("pointerup",n.end,{once:!0}),window.addEventListener("blur",n.end,{once:!0})}line_drag_move(e,t,s){e.drag_move(t,s)}line_drag_end(e){e.drag_end();const t=this._line_map.get(e);t&&(document.removeEventListener("pointermove",t.move),document.removeEventListener("pointercancel",t.end),document.removeEventListener("pointerup",t.end),window.removeEventListener("blur",t.end),t.element.classList.remove(i._line_hover),this.container.classList.remove(i.zone_h_resizing,i.zone_v_resizing,i.zone_free_resizing))}line_update(e){const t=this._line_map.get(e);if(!t)return;const{element:s}=t,{slot:n,prev:r,next:o}=e;s.style.zIndex=this.line_z_index(e),s.setAttribute("slot",n.id),s.setAttribute("type",n.type),s.setAttribute("prev",r.id),s.setAttribute("next",o.id);const h=this.line_size();"h"===n.type?(s.classList.add(i.v_line),s.classList.remove(i.h_line),s.style.height=`${n.rect.h}px`,s.style.width=`${h}px`,s.style.left=o.rect.x-.5*h+"px",s.style.top=`${n.rect.y}px`):(s.classList.add(i.h_line),s.classList.remove(i.v_line),s.style.height=`${h}px`,s.style.width=`${n.rect.w}px`,s.style.left=`${n.rect.x}px`,s.style.top=o.rect.y-.5*h+"px")}line_release(e){const t=this._line_map.get(e);t&&(t.element.removeEventListener("pointerdown",t.begin),t.element.remove(),document.removeEventListener("pointermove",t.move),document.removeEventListener("pointercancel",t.end),document.removeEventListener("pointerup",t.end),window.removeEventListener("blur",t.end))}}class r{cell=(()=>`.${i.zone}>.${i.cell}`)();leaf=(()=>`.${i.zone}>.${i.cell}.${i.leaf}`)();zone_h_resizing=(()=>`.${i.zone}.${i.zone_h_resizing}`)();zone_v_resizing=(()=>`.${i.zone}.${i.zone_v_resizing}`)();zone_free_resizing=(()=>`.${i.zone}.${i.zone_free_resizing}`)();crossdot=(()=>`.${i.zone}>.${i.crossdot}`)();v_line=(()=>`.${i.zone}>.${i.v_line}`)();h_line=(()=>`.${i.zone}>.${i.h_line}`)();line=(()=>`.${i.zone}>.${i.v_line},.${i.zone}>.${i.h_line}`)();line_and_crossdot=(()=>`${this.line},${this.crossdot}`)();line_hover=(()=>`.${i.zone}>.${i.v_line}.${i._line_hover},.${i.zone}>.${i.h_line}.${i._line_hover},.${i.zone}>.${i.v_line}:hover,.${i.zone}>.${i.h_line}:hover,.${i.zone}>.${i._line}:hover`)()}class o{css=(()=>new r)();ele;styles=[];constructor(e){this.ele=document.createElement("style"),this.ele.id="splittings_dom_js_stylings",e?.(this.ele)}override(e,t){if("function"===typeof t){t=t(this.styles.find(t=>{let[s]=t;return s===e})?.[1]||{})}return this.styles.push([e,t]),this}build(){let e="";for(const[t,s]of this.styles){e+=`${this.css[t]} {\n`;for(const t in s){const i=s[t],n=t.replace(/([A-Z])/g,"-$1").toLowerCase();switch(t){case"transitionDelay":case"transitionDuration":e+="number"===typeof i?`  ${n}: ${i}ms;\n`:`  ${n}: ${i};\n`;break;default:e+=`  ${n}: ${i};\n`}}e+="}\n"}return this.ele.innerHTML=e,this}_add_ele(){document.getElementById(this.ele.id)?.remove(),document.head.appendChild(this.ele)}_head_ob=(()=>new MutationObserver(()=>{this._add_ele()}))();mount(){if(this._add_ele(),"1"===this.ele.getAttribute("stay_at_bottom")){(this._head_ob=new MutationObserver(()=>{document.head.children.item(document.head.children.length-1)!==this.ele&&this._add_ele()})).observe(document.head,{childList:!0})}return this}unmount(){return this.ele.remove(),this._head_ob?.disconnect(),this}}}}]);