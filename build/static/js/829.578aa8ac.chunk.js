(self.webpackChunklittle_fighter_j=self.webpackChunklittle_fighter_j||[]).push([[829],{853:(t,e,i)=>{"use strict";i.d(e,{f:()=>n});var g=i(5043),A=i(2544),s=i(579);function n(t){const{children:e,onChange:i,value:n,...I}=t,[C,a]=(0,g.useState)(!1),o=(0,g.useMemo)(()=>{if(Array.isArray(e)){const[t,i=t]=e;return[{value:!1,label:t},{value:!0,label:i}]}return[{value:!1,label:e},{value:!0,label:e}]},[e]);return(0,s.jsx)(A.p,{...I,items:o,value:null!==n&&void 0!==n?n:C,parse:t=>[t.value,t.label],onChange:t=>(null!==i&&void 0!==i?i:a)(!!t)})}},1313:()=>{},1829:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>kA});var g=i(8139),A=i.n(g),s=i(5043),n=i(7950),I=i(9668),C=(i(8376),i(7798));const a={game_contiainer:"App_game_contiainer__qPMMT",game_canvas:"App_game_canvas__zAs50",game_overlay:"App_game_overlay__4KlY0",gone:"App_gone__aZUed",debug_pannel:"App_debug_pannel__wcl1w",loading_img:"App_loading_img__tD1mM",loading_img_l:"App_loading_img_l__NyeNP",loading_img_s:"App_loading_img_s__UqQzE",app:"App_app__GuJBs",editor_view:"App_editor_view__yjUhY",top:"App_top__didI7",main:"App_main__5VZ13",debug_ui:"App_debug_ui__SMXDo",mobile:"App_mobile__cBbeb",landscape:"App_landscape__8ibI8",debug_ui_top:"App_debug_ui_top__6URKy",debug_ui_bottom:"App_debug_ui_bottom__IqgXH",debug_ui_left:"App_debug_ui_left__lJdlT",debug_ui_right:"App_debug_ui_right__sl4Q+",portrait:"App_portrait__8qkSq",settings_row:"App_settings_row__Vc4jm"};var o=i(1231),r=i(2544),l=i(853),d=i(7339),h=i(9500),c=i(3821);const _={lf2ui_img_button:"ToggleImgButton_lf2ui_img_button__R4GeW",inner_div:"ToggleImgButton_inner_div__AEB9q",inner_0:"ToggleImgButton_inner_0__oGWlh",false:"ToggleImgButton_false__Em5Y7",inner_1:"ToggleImgButton_inner_1__Jt7Sp"};var u=i(579);const p=d.A.desktop(),m=s.forwardRef((t,e)=>{var i,g;const{src:n=[],checked:I=!1,onClick:C,onToggle:a,shortcut:o,shortcutTarget:r=window,show_shortcut:l,className:d,alt:m,...f}=t,[v,b]=(0,h.N)(e);(0,s.useRef)(I).current=I;(0,s.useRef)(a).current=a;const y=null!==(i=n[1])&&void 0!==i?i:n[0],w=n[0],k=Array.isArray(m)?m[0]:m,x=Array.isArray(m)?m[1]:m;(0,c.w)(o,t.disabled,v,r);const[j,G]=(0,s.useState)(p);(0,s.useEffect)(()=>{const t=()=>G(!0);return window.addEventListener("keydown",t,{once:!0}),()=>window.removeEventListener("keydown",t)},[]);const T=null!==l&&void 0!==l?l:j,D=A()(_.lf2ui_img_button,d);return(0,u.jsx)("button",{...f,className:D,type:null!==(g=t.type)&&void 0!==g?g:"button",ref:b,onClick:t=>{null===C||void 0===C||C(t),null===a||void 0===a||a(!I)},title:T?o:"",children:(0,u.jsxs)("div",{className:_.inner_div,children:[(0,u.jsx)("img",{draggable:!1,className:A()(_.inner_0,_[""+I]),src:y,alt:k}),(0,u.jsx)("img",{draggable:!1,className:A()(_.inner_1,_[""+I]),src:w,alt:x})]})})});var f=i(6156),v=i(969),b=i(3124),y=i(4727),w=i(2204),k=i(8933),x=i(583),j=i(7936),G=i(2564),T=i(9903),D=i(4886);class E extends D.C{constructor(){super(...arguments),this.time=0,this.free=!0,this._staring=void 0,this.keys={[x.kG.L]:new T.U(this),[x.kG.R]:new T.U(this),[x.kG.U]:new T.U(this),[x.kG.D]:new T.U(this),[x.kG.a]:new T.U(this),[x.kG.j]:new T.U(this),[x.kG.d]:new T.U(this)}}get staring(){return this._staring}set staring(t){this._staring=t}get lr(){return(this.keys.R.is_end()?0:1)-(this.keys.L.is_end()?0:1)}on_key_down(t){this.keys[t.game_key].hit()}on_key_up(t){this.keys[t.game_key].end()}update(t){var e;const{lr:i}=this;if(i){this.free=!1;const e=this.world.renderer.cam_x;this.world.lock_cam_x=e+10*t*i}else if(this.keys.j.is_end())if(this.keys.d.is_end()){if(this.keys.U.is_start()){this.keys.U.use();const t=this.lf2.characters.list(),e=t.indexOf(this.staring),i=t.length;this.staring=t[(e+i-1)%i],this.free=!!this.staring}else if(this.keys.D.is_start()){this.keys.D.use();const t=this.lf2.characters.list(),e=t.indexOf(this.staring),i=t.length;this.staring=t[(e+1)%i],this.free=!!this.staring}}else this.world.lock_cam_x=void 0,this.free=!0;else{this.free=!1;const t=this.world.renderer.cam_x;this.world.lock_cam_x=t}!1===(null===(e=this.staring)||void 0===e?void 0:e.is_attach)&&(this._staring=void 0),this.free&&this.staring&&(this.world.lock_cam_x=this.staring.position.x-this.world.screen_w/2),this.time+=t}}E.TAG="CameraCtrl";var R=i(5001),M=i(1598);const N=t=>({wins:0,loses:0,kills:0,damages:0,pickings:0,spawns:0,deads:0,team:t,latest_dead_time:-1,hp_lost:0,mp_usage:0,lost:!1}),B=t=>({...N(""),data:t});class L extends D.C{constructor(){super(...arguments),this.fighters=new Map,this.players=new Map,this.teams=new Map,this.losing_teams=new Set,this._world_cb={on_fighter_del:t=>this.on_fighter_del(t),on_fighter_add:t=>this.on_fighter_add(t)},this._fighter_cb={on_damage_sum_changed:(t,e,i)=>{var g;!0!==(null===(g=t.emitter)||void 0===g?void 0:g.is_attach)&&(this.team_sum(t.team).damages+=e-i,this.fighter_sum(t).damages+=e-i,this.player_sum(t).damages+=e-i)},on_kill_sum_changed:(t,e,i)=>{var g;!0!==(null===(g=t.emitter)||void 0===g?void 0:g.is_attach)&&(this.team_sum(t.team).kills+=e-i,this.fighter_sum(t).kills+=e-i,this.player_sum(t).kills+=e-i)},on_picking_sum_changed:(t,e,i)=>{this.team_sum(t.team).pickings+=e-i,this.fighter_sum(t).pickings+=e-i,this.player_sum(t).pickings+=e-i},on_dead:t=>{if(t.emitter)return;const e=this.team_sum(t.team);e.deads++,e.lives--,e.latest_dead_time=this.node.update_times,e.deads===e.spawns&&this.losing_teams.add(e),this.fighter_sum(t).deads++,this.player_sum(t).deads++},on_hp_changed:(t,e,i)=>{const g=this.team_sum(t.team);if(g.hp+=(0,M.T9)(e,0)-i,i<=0&&e>0)g.deads--,this.fighter_sum(t).deads--,this.player_sum(t).deads--,g.lives++;else if(i>e){const A=i-e;g.hp_lost+=A,this.fighter_sum(t).hp_lost+=A,this.player_sum(t).hp_lost+=A}},on_mp_changed:(t,e,i)=>{if(i>e){const g=i-e;this.team_sum(t.team).mp_usage+=g,this.fighter_sum(t).mp_usage+=g,this.player_sum(t).mp_usage+=g}},on_reserve_changed:(t,e,i)=>{this.team_sum(t.team).reserve+=e-i}},this._temps=[]}team_sum(t){let e=this.teams.get(t);return e||this.teams.set(t,e=(t=>({...N(t),lives:0,hp:0,reserve:0}))(t)),e}fighter_sum(t){let e=this.fighters.get(t.data.id);return e||this.fighters.set(t.data.id,e=B(t.data)),e}player_sum(t){let e=this.players.get(t.ctrl.player_id);var i;return e||this.players.set(t.ctrl.player_id,e={...B((i=t).data),player_id:i.ctrl.player_id}),e}on_fighter_add(t){const e=this.team_sum(t.team);e.hp+=t.hp,e.reserve+=t.reserve,e.lives++,t.emitter||(e.spawns++,this.losing_teams.delete(e),this.fighter_sum(t).spawns++,this.player_sum(t).spawns++),t.callbacks.add(this._fighter_cb)}on_fighter_del(t){t.callbacks.del(this._fighter_cb)}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this);for(const e of this.world.entities)(0,R.vP)(e)&&this.on_fighter_add(e);this.world.callbacks.add(this._world_cb)}on_stop(){var t;null===(t=super.on_stop)||void 0===t||t.call(this),this.world.callbacks.del(this._world_cb)}update(t){var e;if(null===(e=super.update)||void 0===e||e.call(this,t),this.losing_teams.size)for(const i of this.losing_teams){this.node.update_times-i.latest_dead_time<180||(i.loses++,this._temps.push(i))}this._temps.length&&(this._temps.forEach(t=>this.losing_teams.delete(t)),this._temps.length=0)}}L.TAG="SummaryLogic";class S extends L{constructor(){super(...arguments),this._staring_countdown=new G.F(0,1800),this._gameover_countdown=new G.F(0,300),this._teams=new Set,this._cam_ctrl=void 0,this.time=0}init(){return super.init(...arguments),this}update_teams(){const t=this.lf2.characters.list();this._teams.clear();for(const e of t)this._teams.add(e.team)}on_fighter_add(t){super.on_fighter_add(t),this.update_teams()}on_fighter_del(t){var e;super.on_fighter_del(t),this.update_teams(),this._cam_ctrl&&(null===(e=this._cam_ctrl)||void 0===e?void 0:e.staring)===t&&(this._staring_countdown.reset(),this._cam_ctrl.staring=this.lf2.random_get(this.lf2.characters.list()))}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.update_bg(),this.lf2.sounds.play_bgm("?"),this.lf2.on_component_broadcast(this,S.BROADCAST_ON_START),this._cam_ctrl=this.node.find_component(E)}on_stop(){var t;null===(t=super.on_stop)||void 0===t||t.call(this),this.world.lock_cam_x=void 0,this.lf2.on_component_broadcast(this,S.BROADCAST_ON_STOP),this.lf2.change_bg(x.Tc.VOID_BG)}update_bg(){var t,e;for(const A of this.world.entities)A.enter_frame({id:x.Vp.Gone});const i=t=>{t.key_role=t.dead_gone=!0,t.name=t.data.base.name,t.blinking=120};this.lf2.change_bg("bg_4"),this.lf2.characters.add(x.PC.John,4,j.H.Team_1).forEach(i),this.lf2.characters.add(x.PC.Sorcerer,6,j.H.Team_2).forEach(i),this.update_staring(),this._staring_countdown.reset();const g=null===(t=this._cam_ctrl)||void 0===t?void 0:t.staring;if(g&&0!=(null===(e=this._cam_ctrl)||void 0===e?void 0:e.free)){const{left:t,right:e}=this.world.stage;let i=g.position.x-this.world.screen_w/2;const A=e;i<t&&(i=t),i>A-this.world.screen_w&&(i=A-this.world.screen_w),this.world.lock_cam_x=i,this.world.renderer.cam_x=i}}update_staring(){if(!this._cam_ctrl)return;const t=this.lf2.characters.list();this._cam_ctrl.staring=this.lf2.random_get(t)}update(t){var e,i,g;this.time+=t,null===(e=super.update)||void 0===e||e.call(this,t),this._staring_countdown.add(),this._staring_countdown.end()&&this.update_staring();const A=null===(i=this._cam_ctrl)||void 0===i?void 0:i.staring;if(A&&0!=(null===(g=this._cam_ctrl)||void 0===g?void 0:g.free)?this.world.lock_cam_x=A.position.x-this.world.screen_w/2:A||this.update_staring(),this._teams.size<=1)if(this._gameover_countdown.end()){if(this._teams.size)for(const[t,e]of this.teams)this._teams.has(t)&&(e.wins+=1);this._gameover_countdown.reset(),this.update_bg()}else this._gameover_countdown.add();else this._gameover_countdown.reset()}}S.TAG="DanmuGameLogic",S.BROADCAST_ON_START="DanmuGameLogic_ON_START",S.BROADCAST_ON_STOP="DanmuGameLogic_ON_STOP";const Z=t=>t.toFixed(2).replace(/0+$/,"").replace(/\.$/,""),Y=function(t){return`<span style="display:inline-block;width:100px;color:${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white"};">${t}</span>:`};class F{constructor(t){this.lf2=void 0,this.component=void 0,this.timer=null,this.ele=null,this.times=new G.F(0,Number.MAX_SAFE_INTEGER),this.lf2=t,this.lf2.callbacks.add(this)}release(){this.lf2.callbacks.del(this)}on_component_broadcast(t,e){var i;if(e===S.BROADCAST_ON_START)this.component=t,null===(i=this.open)||void 0===i||i.call(this),this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>this.update(),1e3),this.update();else if(e===S.BROADCAST_ON_STOP){var g;this.component=t,null===(g=this.close)||void 0===g||g.call(this),this.timer&&clearInterval(this.timer),this.timer=null}}update(){const{ele:t,component:e}=this;if(!t||!e)return;t.innerHTML="";const i=Array.from(e.teams.values()).sort((t,e)=>{const i=e.wins-t.wins;if(i)return i;const g=e.kills-t.kills;if(g)return g;const A=t.deads-e.deads;if(A)return A;const s=e.spawns-t.spawns;return s||e.damages-t.damages});if(t.innerHTML+='Bot "AI"\u6d4b\u8bd5\u4e2d(\u6570\u636e\u4e0d\u4fdd\u7559)\n',t.innerHTML+="\ud83c\udf96\ufe0f=\u51fb\u8d25\u6570 \u2620\ufe0f=\u6218\u8d25\u6570 \ud83d\udc23=\u51fa\u573a\u6570 \ud83d\udca5=\u4f24\u5bb3\u503c \u2694\ufe0f=KD\u503c\n",t.innerHTML+="\ud83c\udfc6=\u80dc\u5c40\u6570 \ud83d\ude35=\u8d25\u5c40\u6570\n",i.length){t.innerHTML+="------------------------------\u3010\u961f\u4f0d\u3011------------------------------\n";for(const e of i)e.spawns&&(t.innerHTML+=`${Y("Team "+e.team,(0,k.H)(e.team))} \ud83c\udfc6|\ud83d\ude35|\ud83c\udf96\ufe0f|\u2620\ufe0f|\ud83d\udc23|\ud83d\udca5 = ${e.wins} | ${e.loses} | ${e.kills} | ${e.deads} | ${e.spawns} | ${e.damages}\n`)}this.times.add();const g=(0,M.RI)(this.times.value/16),A=16*(g+1)-this.times.value-1;switch(g%3){case 0:{const i=Array.from(e.fighters.values()).sort(W);let g=0;t.innerHTML+=`------------------------------\u3010\u89d2\u8272-KD\u6392\u540d\u3011${A}\u79d2------------------------------\n`;for(const e of i){const{spawns:i,kills:A,deads:s,damages:n}=e;if(!i)continue;const{name:I}=e.data.base;t.innerHTML+=s?`${Y(`${++g}.${I}`)} \u2694\ufe0f|\ud83d\udc23|\ud83d\udca5 = ${Z(A/s)} | ${i} | ${n}\n`:A?`${Y(`${++g}.${I}`)} \ud83c\udf96\ufe0f|\ud83d\udc23|\ud83d\udca5 = ${Z(A)} | ${i} | ${n}\n`:`${Y(`${++g}.${I}`)} \ud83d\udc23|\ud83d\udca5 = ${i} | ${n}\n`}break}case 1:{const i=Array.from(e.fighters.values()).sort(U);t.innerHTML+=`------------------------------\u3010\u89d2\u8272-\u573a\u5747\u51fb\u8d25\u6392\u540d\u3011${A}\u79d2------------------------------\n`;let g=0;for(const e of i){const{spawns:i,kills:A}=e;if(!i||!A)continue;const{name:s}=e.data.base;t.innerHTML+=`${Y(`${++g}.${s}`)} \ud83c\udf96\ufe0f|\ud83d\udc23 = ${Z(A/i)} | ${i}\n`}break}case 2:{const i=Array.from(e.fighters.values()).sort(O);t.innerHTML+=`------------------------------\u3010\u89d2\u8272-\u573a\u5747\u4f24\u5bb3\u6392\u540d\u3011${A}\u79d2------------------------------\n`;let g=0;for(const e of i){const{spawns:i,damages:A}=e;if(!i||!A)continue;const{name:s}=e.data.base;t.innerHTML+=`${Y(`${++g}.${s}`)} \ud83d\udca5|\ud83d\udc23 = ${Z(A/i)} | ${i}\n`}break}}}}function W(t,e){if(t.spawns&&!e.spawns)return-1;if(!t.spawns&&e.spawns)return 1;if(t.deads&&e.deads){const i=t.kills/t.deads,g=e.kills/e.deads-i;if(g)return g}const i=e.kills-t.kills;if(i)return i;const g=t.deads-e.deads;if(g)return g;const A=t.spawns-e.spawns;return A||e.damages-t.damages}function O(t,e){return t.spawns&&!e.spawns?-1:!t.spawns&&e.spawns?1:e.damages/e.spawns-t.damages/t.spawns}function U(t,e){return t.spawns&&!e.spawns?-1:!t.spawns&&e.spawns?1:e.kills/e.spawns-t.kills/t.spawns}function z(t){const{lf2:e}=t,i=(0,s.useRef)(null),[g,A]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!e)return;const t=i.current;if(!t)return;const g=new F(e);return g.ele=t,g.open=()=>A(!0),g.close=()=>A(!1),()=>g.release()},[e,i]),(0,u.jsx)("div",{ref:i,style:{position:"fixed",color:"white",pointerEvents:"none",display:g?"block":"none",whiteSpace:"pre-wrap",left:30,top:50,fontSize:20,opacity:.7,fontFamily:"Arial",textShadow:"-1px 1px 0 #000, 1px 1px 0 #000,1px -1px 0 #000,-1px -1px 0 #000"}})}var V=i(9683),H=i(8004),K=i(3580),X=i(8602),Q=i(9956);const P="game_overlay_txt_game_overlay__LHYv2",J="game_overlay_camera_ctrl__21+Zb",q="game_overlay_btn_free_cam__RuxPa",$=document.createElement.bind(document);class tt{release(){this.ele_fps.remove(),this.ele_ups.remove(),this.ele_sps.remove(),this.ele_cam_bar.remove(),this.ele_loading.remove(),this.ele_btn_free_cam.remove()}constructor(t,e){this.world=void 0,this.ele=void 0,this.ele_fps=void 0,this.ele_ups=void 0,this.ele_sps=void 0,this.ele_cam_bar=void 0,this.ele_loading=void 0,this.ele_btn_free_cam=void 0,this.cam_bar_pressing=!1,this.ctx_cam_bar=null,this.cam_locked=!1,this._pointer_down=t=>{t.isPrimary&&(this.cam_locked||(this.cam_locked=!0),this.cam_bar_pressing=!0,this.handle_cam_ctrl_pointer_event(t))},this._pointer_move=t=>{t.isPrimary&&this.cam_bar_pressing&&this.handle_cam_ctrl_pointer_event(t)},this._pointer_up=t=>{t.isPrimary&&this.cam_bar_pressing&&(this.cam_bar_pressing=!1,this.handle_cam_ctrl_pointer_event(t))},this.cam_bar_handle_padding=2.5,this.ele_loading_tid=0,this.update_timer=void 0,this.update_camera=()=>{this.world.update_camera(),this.world.stage.bg.update()},this._l_listener={on_loading_content:(t,e)=>this.loading=`${t}, ${e}%`},this._w_listener={on_ups_update:(t,e)=>{this.UPS=t,this.SPS=e},on_fps_update:t=>this.FPS=t,on_pause_change:t=>{t?this.update_timer=setInterval(this.update_camera,1e3/60):clearInterval(this.update_timer)},on_stage_change:t=>{var e,i;t.bg.id===X.T.VOID_BG.id?this.ele_cam_bar.style.display=this.ele_btn_free_cam.style.display="none":this.ele_cam_bar.style.display=this.ele_btn_free_cam.style.display="unset",null===(e=(i=this._w_listener).on_cam_move)||void 0===e||e.call(i,this.world.renderer.cam_x)},on_cam_move:t=>{const{width:e,height:i}=this.ele_cam_bar.getBoundingClientRect();this.ele_cam_bar.width=e,this.ele_cam_bar.height=i;const g=t*e/this.world.stage.width;this.draw_cam_bar(g)},on_disposed:()=>{clearInterval(this.update_timer),this.update_timer=void 0,this.world.lf2.callbacks.del(this._l_listener),this.world.callbacks.del(this._w_listener)}},this.world=t,this.ele=e,this.ele_fps=$("span"),this.ele_fps.className=P,this.ele_ups=$("span"),this.ele_ups.className=P,this.ele_sps=$("span"),this.ele_sps.className=P,this.ele_loading=$("span"),this.ele_loading.className=P,this.ele_cam_bar=$("canvas"),this.ele_btn_free_cam=$("button"),this.init_ele_btn_free_cam(),this.init_ele_cam_bar(),t.lf2.callbacks.add(this._l_listener),t.callbacks.add(this._w_listener),e&&(e.innerHTML="",e.append(this.ele_fps,$("br"),this.ele_ups,$("br"),this.ele_loading,$("br"),this.ele_cam_bar,this.ele_btn_free_cam))}init_ele_btn_free_cam(){this.ele_btn_free_cam.style.display="none",this.ele_btn_free_cam.className=`${o.$.default_class_name} ${q}`,this.ele_btn_free_cam.innerText="\u91ca\u653e",this.ele_btn_free_cam.type="button",this.ele_btn_free_cam.addEventListener("click",()=>{this.cam_locked=!1,(0,Q.AK)(this.world.lock_cam_x)&&(this.draw_cam_bar(this.world.lock_cam_x),this.world.lock_cam_x=void 0)})}init_ele_cam_bar(){this.ele_cam_bar.style.display="none",this.ele_cam_bar.className=`${o.$.default_class_name} ${J}`,this.ctx_cam_bar=this.ele_cam_bar.getContext("2d"),this.ele_cam_bar.addEventListener("pointerdown",this._pointer_down),window.addEventListener("pointermove",this._pointer_move),window.addEventListener("pointerup",this._pointer_up),window.addEventListener("pointercancel",this._pointer_up)}handle_cam_ctrl_pointer_event(t){if(!this.ctx_cam_bar)return;const{left:e,width:i}=this.ele_cam_bar.getBoundingClientRect(),g=this.world.stage.width,A=Math.floor(i*X.T.CLASSIC_SCREEN_WIDTH/g),s=Math.min(i-A-3,Math.max(0,Math.floor(t.pageX-e-A/2)));this.world.lock_cam_x=g*s/i}draw_cam_bar(t){if(!this.ctx_cam_bar)return;const e=this.world.stage.width,i=X.T.CLASSIC_SCREEN_WIDTH,{width:g,height:A}=this.ele_cam_bar,{player_l:s,player_r:n}=this.world.stage,I=Math.floor(g*s/e),C=Math.floor(g*n/e),a=this.cam_bar_handle_padding,o=Math.floor(g*i/e)-a,r=A-2*a;this.ctx_cam_bar.fillStyle=this.ctx_cam_bar.strokeStyle="#FF000055",this.ctx_cam_bar.fillRect(0,0,I,A),this.ctx_cam_bar.fillRect(C,0,g-C,A),this.ctx_cam_bar.lineWidth=1,this.ctx_cam_bar.strokeStyle="#FFFFFF55",this.ctx_cam_bar.strokeRect(t+a,a,o,r),this.cam_locked&&(this.ctx_cam_bar.fillStyle="#FFFFFF88",this.ctx_cam_bar.fillRect(t+a,a,o,r))}set FPS(t){this.ele_fps.innerText="FPS:"+t.toFixed(0)}set UPS(t){this.ele_ups.innerText="UPS:"+t.toFixed(0)}set SPS(t){this.ele_sps.innerText="SPS:"+t.toFixed(0)}set loading(t){this.ele_loading.innerText=t,this.ele_loading.style.transition="",this.ele_loading.style.opacity="1",window.clearTimeout(this.ele_loading_tid),this.ele_loading_tid=window.setTimeout(()=>{this.ele_loading.style.transition="opacity 500ms",this.ele_loading.style.opacity="0"},1e3)}}const et="GamePad_pad_text__K6c0S",it="GamePad_left_pad__rGtks",gt="GamePad_right_pad__eEjYt",At="GamePad_btn_up__mzNng",st="GamePad_btn_down__LG9oY",nt="GamePad_btn_right__fQxRX",It="GamePad_btn_left__b708P",Ct="GamePad_btn_attack__ZSUAy",at="GamePad_btn_jump__V+PYI",ot="GamePad_btn_defense__u8+n-";var rt=i(4503);const lt="data:image/png;base64,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";class dt{constructor(){this._stopped=0}get stopped(){return this._stopped}stop_propagation(){this._stopped=1}stop_immediate_propagation(){this._stopped=2}}class ht extends dt{get player(){return this._player}get game_key(){return this._key}get key(){return this._key_code}constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;super(),this._player=void 0,this._key=void 0,this._key_code=void 0,this._player=t,this._key=e,this._key_code=i}}const ct=t=>{if(!t.current)return{l:0,t:0,r:0,b:0};const{x:e,y:i,width:g,height:A}=t.current.getBoundingClientRect();return{l:e,t:i,r:e+g,b:i+A}},_t=t=>{if(!t.current)return{x:0,y:0,r:0};const{x:e,y:i,width:g,height:A}=t.current.getBoundingClientRect();return{x:e+g/2,y:i+A/2,r:g/2}};function ut(t){return{id:t.identifier,x:t.pageX,y:t.pageY,r:Math.max(t.radiusX,t.radiusY,20),end:!1}}function pt(t){const{player_id:e,lf2:i,...g}=t,[A,n]=(0,s.useState)(void 0),I=(0,s.useRef)(null),C=(0,s.useRef)(null),a=(0,s.useRef)(null),o=(0,s.useRef)(null),r=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(null),h=(0,s.useRef)(null),c=(0,s.useRef)(null),_=(0,s.useRef)(null),[p,f]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(i&&e)return i.world.callbacks.add({on_player_character_add(t){var g;t===e&&n(null===(g=i.player_characters.get(e))||void 0===g?void 0:g.ctrl)},on_player_character_del(t){t===e&&n(void 0)}})},[i,e]);const v=h.current,b=c.current;if((0,s.useEffect)(()=>{if(!v||!b)return;const t=()=>{{const t=[I.current,C.current,a.current,o.current];let e=1/0,i=0,g=0,A=1/0;for(const{x:s,y:n,width:I,height:C}of t.map(t=>(null===t||void 0===t?void 0:t.getBoundingClientRect())||{x:0,y:0,width:0,height:0}))e=Math.min(e,s),A=Math.min(A,n),i=Math.max(i,s+I),g=Math.max(g,n+C);v.style.left=e+"px",v.style.width=i-e+"px",v.style.top=A+"px",v.style.height=g-A+"px"}{const t=[r.current,l.current,d.current];let e=1/0,i=0,g=0,A=1/0;for(const{x:s,y:n,width:I,height:C}of t.map(t=>(null===t||void 0===t?void 0:t.getBoundingClientRect())||{x:0,y:0,width:0,height:0}))e=Math.min(e,s),A=Math.min(A,n),i=Math.max(i,s+I),g=Math.max(g,n+C);b.style.left=e+"px",b.style.width=i-e+"px",b.style.top=A+"px",b.style.height=g-A+"px"}f(t=>t+1)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("contextmenu",t)},[v,b]),(0,s.useEffect)(()=>{if(!e||!i||!v)return;const t=v,g=[{key:rt.k.U,rect:ct(I),circ:_t(I)},{key:rt.k.D,rect:ct(C),circ:_t(C)},{key:rt.k.L,rect:ct(a),circ:_t(a)},{key:rt.k.R,rect:ct(o),circ:_t(o)}],s=new Map([[rt.k.L,!1],[rt.k.R,!1],[rt.k.U,!1],[rt.k.D,!1]]),n=[],r=t=>n.findIndex(e=>e.id===t),l=_.current;if(!l)return;const d=()=>{const t=new Map([[rt.k.L,!1],[rt.k.R,!1],[rt.k.U,!1],[rt.k.D,!1]]);for(const e of n)for(const{circ:i,key:A}of g)t.set(A,Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)<Math.pow(e.r+i.r,2));for(const[g,n]of t)if(n!==s.get(g)){var I,C;if(n)null===i||void 0===i||null===(I=i.ui)||void 0===I||I.on_key_down(new ht(e,g)),null===A||void 0===A||A.start(g),l.innerText.length>10&&(l.innerText=l.innerText.substring(2)),l.innerText+=g+"\u2b07";else null===i||void 0===i||null===(C=i.ui)||void 0===C||C.on_key_up(new ht(e,g)),null===A||void 0===A||A.end(g),l.innerText.length>10&&(l.innerText=l.innerText.substring(2)),l.innerText+=g+"\u2b06";s.set(g,n)}},h=t=>{t.preventDefault();for(const e of t.changedTouches)n.push(ut(e));d()},c=t=>{t.preventDefault();for(const e of t.changedTouches){const t=r(e.identifier);t>=0&&n.splice(t,1,ut(e))}d()},u=t=>{for(const e of t.changedTouches){const t=r(e.identifier);t>=0&&n.splice(t,1)}d()};return t.addEventListener("touchstart",h,{passive:!1}),t.addEventListener("touchmove",c,{passive:!1}),t.addEventListener("touchend",u,{passive:!1}),t.addEventListener("touchcancel",u,{passive:!1}),()=>{t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",c),t.removeEventListener("touchend",u),t.removeEventListener("touchcancel",u)}},[A,i,e,p,v]),(0,s.useEffect)(()=>{if(!e||!i||!b)return;const t=b,g=[{key:rt.k.a,rect:ct(r),circ:_t(r)},{key:rt.k.j,rect:ct(l),circ:_t(l)},{key:rt.k.d,rect:ct(d),circ:_t(d)}],s=new Map([[rt.k.a,!1],[rt.k.j,!1],[rt.k.d,!1]]),n=[],I=t=>n.findIndex(e=>e.id===t),C=_.current;if(!C)return;const a=()=>{const t=new Map([[rt.k.a,!1],[rt.k.j,!1],[rt.k.d,!1]]);for(const e of n)for(const{circ:i,key:A}of g)t.set(A,Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)<Math.pow(e.r+i.r,2));for(const[g,n]of t)if(n!==s.get(g)){var I,a;if(n)null===i||void 0===i||null===(I=i.ui)||void 0===I||I.on_key_down(new ht(e,g)),null===A||void 0===A||A.start(g),C.innerText.length>10&&(C.innerText=C.innerText.substring(2)),C.innerText+=g+"\u2b07";else null===i||void 0===i||null===(a=i.ui)||void 0===a||a.on_key_up(new ht(e,g)),null===A||void 0===A||A.end(g),C.innerText.length>10&&(C.innerText=C.innerText.substring(2)),C.innerText+=g+"\u2b06";s.set(g,n)}},o=t=>{t.preventDefault();for(const e of t.changedTouches)n.push(ut(e));a()},h=t=>{t.preventDefault();for(const e of t.changedTouches){const t=I(e.identifier);t>=0&&n.splice(t,1,ut(e))}a()},c=t=>{for(const e of t.changedTouches){const t=I(e.identifier);t>=0&&n.splice(t,1)}a()};return t.addEventListener("touchstart",o,{passive:!1}),t.addEventListener("touchmove",h,{passive:!1}),t.addEventListener("touchend",c,{passive:!1}),t.addEventListener("touchcancel",c,{passive:!1}),()=>{t.removeEventListener("touchstart",o),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",c),t.removeEventListener("touchcancel",c)}},[A,i,e,p,b]),!e)return(0,u.jsx)(u.Fragment,{});return(0,u.jsxs)("div",{...g,children:[(0,u.jsx)("div",{className:et,ref:_}),(0,u.jsxs)("div",{className:it,ref:h,children:[(0,u.jsx)(m,{className:At,ref:I,...(rt.k.U,{style:{pointerEvents:"none"},disabled:!0}),src:[lt],alt:"up",draggable:!1}),(0,u.jsx)(m,{className:st,ref:C,...(rt.k.D,{style:{pointerEvents:"none"},disabled:!0}),src:[lt],alt:"down",draggable:!1}),(0,u.jsx)(m,{className:It,ref:a,...(rt.k.L,{style:{pointerEvents:"none"},disabled:!0}),src:[lt],alt:"left",draggable:!1}),(0,u.jsx)(m,{className:nt,ref:o,...(rt.k.R,{style:{pointerEvents:"none"},disabled:!0}),src:[lt],alt:"right",draggable:!1})]}),(0,u.jsxs)("div",{className:gt,ref:c,children:[(0,u.jsx)(m,{className:Ct,ref:r,...(rt.k.a,{style:{pointerEvents:"none"},disabled:!0}),src:["data:image/png;base64,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"],alt:"attack",draggable:!1}),(0,u.jsx)(m,{className:at,ref:l,...(rt.k.j,{style:{pointerEvents:"none"},disabled:!0}),src:["data:image/png;base64,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"],alt:"jump",draggable:!1}),(0,u.jsx)(m,{className:ot,ref:d,...(rt.k.d,{style:{pointerEvents:"none"},disabled:!0}),src:["data:image/png;base64,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"],alt:"defense",draggable:!1})]})]})}var mt=i(793),ft=i(3031),vt=i(7516);const{L:bt,R:yt,U:wt,D:kt,j:xt,d:jt}=x.GK;class Gt extends vt.wp{constructor(){super(...arguments),this.__is_ball_ctrl__=!0,this.target_position=null}update(){this.entity.chasing&&(this.target_position=this.entity.chasing.position.clone(),this.target_position.y+=this.entity.chasing.frame.centery/2);const{facing:t,hp:e,frame:i}=this.entity;if(this.target_position)if(e>0){const e=this.entity.position,i=this.target_position,g=this.entity.velocity.x;this.entity.merge_velocities(),i.x<e.x?this.press(bt).release(yt):i.x>e.x?this.press(yt).release(bt):this.release(bt,yt),i.z<e.z?this.press(wt).release(kt):i.z>e.z?this.press(kt).release(wt):this.release(wt,kt),e.y>i.y?this.press(jt).release(xt):e.y<i.y?this.press(xt).release(jt):this.release(xt,jt),g>0&&t<0?this.entity.facing=1:g<0&&t>0&&(this.entity.facing=-1)}else this.target_lost(i,t);else this.target_lost(i,t);return super.update()}target_lost(t,e){if(t.behavior===x.q.JohnBiscuitLeaving){const t=this.entity.position;this.press(-1===e?bt:yt),this.release(-1===e?yt:bt,wt,kt),t.y>40?this.press(jt).release(xt):t.y<40?this.press(xt).release(jt):this.release(xt,jt)}else{const t=this.entity.position;this.press(-1===e?bt:yt),this.release(-1===e?yt:bt,wt,kt),t.y>40?this.press(jt).release(xt):t.y<40?this.press(xt).release(jt):this.release(xt,jt)}}}let Tt=function(t){return t[t.Keyboard=0]="Keyboard",t[t.Gamepad_1=1]="Gamepad_1",t[t.Gamepad_2=2]="Gamepad_2",t[t.Gamepad_3=3]="Gamepad_3",t[t.Gamepad_4=4]="Gamepad_4",t}({});var Dt=i(7033);class Et extends vt.wp{on_key_up(t){var e;const i=null===(e=t.key)||void 0===e?void 0:e.toLowerCase();if(!i)return;const g=this._code_key_map[i];g&&this.end(g)}on_key_down(t){var e;const i=null===(e=t.key)||void 0===e?void 0:e.toLowerCase();if(!i)return;const g=this._code_key_map[i];g&&this.start(g)}constructor(t,e,i){super(t,e),this.__is_local_ctrl__=!0,this.player=void 0,this._key_code_map={},this._code_key_map={},this._ax_using=0,this._ay_using=0,this.player=this.lf2.ensure_player(t),i&&this.set_key_code_map(i),this.disposer=e.world.lf2.keyboard.callback.add(this)}set_key_code_map(t){this._key_code_map={},this._code_key_map={};for(const i of Object.keys(t)){var e;const g=null===(e=t[i])||void 0===e?void 0:e.toLowerCase();g&&(this._key_code_map[i]=g,this._code_key_map[g]=i)}}update(){if(this.player&&this.player.ctrl!==Tt.Keyboard){const[t=0,e=0]=this.lf2.keyboard.axes(this.player.ctrl-1);t>.22?(this._ax_using=1,this.is_end(rt.k.R)&&this.start(rt.k.R),this.is_end(rt.k.L)||this.end(rt.k.L)):t<-.22?(this._ax_using=1,this.is_end(rt.k.L)&&this.start(rt.k.L),this.is_end(rt.k.R)||this.end(rt.k.R)):(0,M.tn)(t)<.12&&this._ax_using&&(this._ax_using=0,this.is_end(rt.k.L)||this.end(rt.k.L),this.is_end(rt.k.R)||this.end(rt.k.R)),e>.22?(this._ay_using=1,this.is_end(rt.k.D)&&this.start(rt.k.D),this.is_end(rt.k.U)||this.end(rt.k.U)):e<-.22?(this._ay_using=1,this.is_end(rt.k.U)&&this.start(rt.k.U),this.is_end(rt.k.D)||this.end(rt.k.D)):(0,M.tn)(e)<.12&&this._ay_using&&(this._ay_using=0,this.is_end(rt.k.U)||this.end(rt.k.U),this.is_end(rt.k.D)||this.end(rt.k.D))}return super.update()}}const Rt=Et;var Mt=i(6791),Nt=i(1072),Bt=i(1546);class Lt{constructor(t){this.lf2=void 0,this.lf2=t}list(){const t=[];return this.lf2.world.entities.forEach(e=>(0,Bt.HY)(e)&&t.push(e)),t}at(t){return this.list()[t]}}class St{constructor(t){this.lf2=void 0,this.lf2=t}list(){const t=[];return this.lf2.world.entities.forEach(e=>(0,Bt.vP)(e)&&t.push(e)),t}at(t){return this.list()[t]}add(t,e,i){return"string"===typeof t&&(t=this.lf2.datas.find_character(t)),t?this.lf2.entities.add(t,e,i):[]}add_random(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const g=[];for(;--t>=0;){const t=this.lf2.random_get(this.lf2.datas.characters.filter(t=>!i||i(t)));t&&g.push(...this.add(t,1,e))}return g}}var Zt=i(2927);class Yt{constructor(t){this.lf2=void 0,this.team_randoming=void 0,this.lf2=t,this.team_randoming=new Zt.K([j.H.Team_1,j.H.Team_2,j.H.Team_3,j.H.Team_4],this.lf2)}list(){const t=[];return this.lf2.world.entities.forEach(e=>t.push(e)),t}at(t){return this.list()[t]}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;const g=R.$7.inst.get_entity_creator(t.type);if(!g)return[];const A=[];for(;--e>=0;){const e=g(this.lf2.world,t);e.ctrl=R.$7.inst.get_ctrl(e.data.id,"",e),e.team="?"===i?this.team_randoming.take():i||(0,ft.fA)(),this.lf2.random_entity_info(e).attach(),A.push(e)}return A}del_all(){this.lf2.world.del_entities(Array.from(this.lf2.world.entities))}}class Ft{constructor(t){this.lf2=void 0,this.random_map=new Map,this.random_d_map=new Map,this.lf2=t}list(){const t=[];return this.lf2.world.entities.forEach(e=>(0,Bt.EQ)(e)&&t.push(e)),t}at(t){return this.list()[t]}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;return"string"===typeof t&&(t=this.lf2.datas.find_weapon(t)),t?this.lf2.entities.add(t,e,i):[]}randoms(t,e){const i=e?this.random_d_map:this.random_map;let g=i.get(t);if(!g){let A=this.lf2.datas.weapons;if(t&&(A=A.filter(e=>{var i;return null===(i=e.base.group)||void 0===i?void 0:i.some(e=>e===t)})),!A.length)return;g=new Zt.K(A,this.lf2,e),i.set(t,g)}return g}add_random(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const g=this.randoms(i,e),A=[];if(!g)return A;for(;--t>=0;){const t=g.take();t&&A.push(...this.add(t,1))}return A}}var Wt=i(5077);function Ot(t,e){return(0,M.tn)(t.position.x-e.position.x)+(0,M.tn)(t.position.z-e.position.z)}let Ut=function(t){return t.LockAtMid_Stand="1",t.LockAtMid_Defend="2",t.LockAtMid_RowingWhenFalling="3",t.LockAtMid_JumpAndRowingWhenFalling="4",t.AvoidEnemyAllTheTime="5",t.LockAtMid_dUa="6",t.LockAtMid_dUj="7",t.LockAtMid_dDa="8",t.LockAtMid_dDj="9",t.LockAtMid_dLa="10",t.LockAtMid_dLj="11",t.LockAtMid_dRa="12",t.LockAtMid_dRj="13",t.LockAtMid_dja="14",t.LockAtMid_dUa_auto="15",t.LockAtMid_dUj_auto="16",t.LockAtMid_dDa_auto="17",t.LockAtMid_dDj_auto="18",t.LockAtMid_dLa_auto="18",t.LockAtMid_dLj_auto="19",t.LockAtMid_dRa_auto="20",t.LockAtMid_dRj_auto="21",t.LockAtMid_dja_auto="22",t}({});const zt={[Ut.LockAtMid_Stand]:{update:t=>{t.lock_when_stand_and_rest()}},[Ut.LockAtMid_Defend]:{update:t=>{const e=[x.GK.d];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_RowingWhenFalling]:{update:t=>{t.lock_when_stand_and_rest(),t.entity.frame.state===x.Fb.Falling&&t.key_down(x.GK.j).key_up(x.GK.j)}},[Ut.LockAtMid_JumpAndRowingWhenFalling]:{update:t=>{t.lock_when_stand_and_rest()||t.entity.frame.state===x.Fb.Falling?t.key_down(x.GK.j).key_up(x.GK.j):t.end(x.GK.j)}},[Ut.AvoidEnemyAllTheTime]:{update:t=>{}},[Ut.LockAtMid_dUa]:{update:t=>{const e=[x.GK.d,x.GK.U,x.GK.a];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dUj]:{update:t=>{const e=[x.GK.d,x.GK.U,x.GK.j];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dDa]:{update:t=>{const e=[x.GK.d,x.GK.D,x.GK.a];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dDj]:{update:t=>{const e=[x.GK.d,x.GK.D,x.GK.j];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dLa]:{update:t=>{const e=[x.GK.d,x.GK.L,x.GK.a];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dLj]:{update:t=>{const e=[x.GK.d,x.GK.L,x.GK.j];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dRa]:{update:t=>{const e=[x.GK.d,x.GK.R,x.GK.a];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dRj]:{update:t=>{const e=[x.GK.d,x.GK.L,x.GK.j];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dja]:{update:t=>{const e=[x.GK.d,x.GK.j,x.GK.a];t.lock_when_stand_and_rest()&&t.key_down(...e).key_up(...e)}},[Ut.LockAtMid_dUa_auto]:void 0,[Ut.LockAtMid_dUj_auto]:void 0,[Ut.LockAtMid_dDa_auto]:void 0,[Ut.LockAtMid_dDj_auto]:void 0,[Ut.LockAtMid_dLj_auto]:void 0,[Ut.LockAtMid_dRa_auto]:void 0,[Ut.LockAtMid_dRj_auto]:void 0,[Ut.LockAtMid_dja_auto]:void 0};class Vt{constructor(t){this.targets=[],this.max=5,this.entities=new Set,this.max=t}get(){return this.targets[0]}look(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{targets:g}=this;if(!t||this.entities.has(e))return;const A=Ot(t,e),s=g.length;if(s<this.max)return g.push({entity:e,distance:A,defendable:i}),void this.entities.add(e);for(let n=0;n<s;++n){if(A>g[n].distance)continue;this.targets.splice(n,0,{entity:e,distance:A,defendable:i}),this.entities.add(e);const{entity:t}=this.targets[this.max];this.entities.delete(t),this.targets.length=this.max;break}}del(t){this.targets=this.targets.filter(e=>{const i=!t(e);return i||this.entities.delete(e.entity),i})}sort(t){this.targets.sort((e,i)=>(e.distance=Ot(t,e.entity),i.distance=Ot(t,i.entity),e.distance-i.distance))}}var Ht=i(9651);class Kt{constructor(t){this.key=void 0,this.ctrl=void 0,this.ctrl=t}defend_test(){const{ctrl:t}=this,e=t.entity,{facing:i}=e;return!(t.defends.targets.length<=0)&&(i<0?t.key_down(x.GK.R).key_up(x.GK.L):t.key_down(x.GK.L).key_up(x.GK.R),t.start(x.GK.d).end(x.GK.d),!0)}random_jumping(){const t=this.ctrl,{state:e}=t.entity.frame,i=t.desire();switch(e){case x.Fb.Running:(i<t.dash_desire?t.key_down:t.key_up).call(t,x.GK.j);break;case x.Fb.Standing:case x.Fb.Walking:(i<t.jump_desire?t.key_down:t.key_up).call(t,x.GK.j);break;default:t.key_up(x.GK.j)}}update(t){const e=this.ctrl,i=e.entity;e.world.stage.is_stage_finish&&(e.key_down(x.GK.R).key_up(...vt.Di),(0,M.I6)(i.v_rests,t=>t[1].itr.kind===x.w7.Block)&&e.start(x.GK.a).end(x.GK.a))}handle_defends(){const{ctrl:t}=this,e=t.entity;if(t.defends.targets.length<=0||t.action_desire()>t.d_desire)return e.frame.state===x.Fb.Defend;if(1===t.defends.targets[0].defendable){const i=t.defends.targets[0].entity.position.x-e.position.x,g=t.defends.targets[0].entity.facing;i>0&&g<0&&t.keep_press(x.GK.R),i<0&&g>0&&t.keep_press(x.GK.L),t.fast_click(x.GK.d).key_up(x.GK.L,x.GK.R)}return!0}handle_block(){const{ctrl:t}=this,{entity:e}=t;(0,M.I6)(e.v_rests,t=>t[1].itr.kind===x.w7.Block)&&t.start(x.GK.a).end(x.GK.a)}handle_bot_actions(){var t,e;const{ctrl:i}=this,g=i.entity,{bot:A}=g.data.base;if(!A)return!1;const s=[];let n=null===(t=A.frames)||void 0===t?void 0:t[g.frame.id];if(n)for(const C of n){const t=this.ctrl.handle_action(A.actions[C]);t&&s.push(t)}if(n=null===(e=A.states)||void 0===e?void 0:e[g.frame.state],n)for(const C of n){const t=this.ctrl.handle_action(A.actions[C]);t&&s.push(t)}if(!s.length)return!1;const I=(0,M.Pp)(s);return I&&this.ctrl.start(...I).end(...I),!0}}class Xt extends Kt{constructor(){super(...arguments),this.key=Ht.S.Avoiding}update(t){var e,i;if(super.update(t),this.handle_defends())return;if(this.handle_bot_actions())return;this.random_jumping();const{ctrl:g}=this;if(g.following)return Ht.S.Following;const A=g.entity,s=null===(e=g.get_chasing())||void 0===e?void 0:e.entity,n=null===(i=g.get_avoiding())||void 0===i?void 0:i.entity,{state:I}=A.frame;if(s&&n&&Ot(A,n)<Ot(A,s))return Ht.S.Avoiding;if(s)return Ht.S.Chasing;if(!n)return Ht.S.Idle;switch(I){case x.Fb.Normal:case x.Fb.Standing:case x.Fb.Walking:case x.Fb.Running:if(this.defend_test())return}(0,M.I6)(A.v_rests,t=>t[1].itr.kind===x.w7.Block)&&g.start(x.GK.a).end(x.GK.a);const{x:C,z:a}=A.position,{x:o,z:r}=n.position,l=g.manhattan_to(n);if(l>200)return void g.end(x.GK.L,x.GK.R,x.GK.U,x.GK.D);const{left:d,right:h,near:c,far:_}=g.lf2.world.bg;let u=0;switch(u=o<=C?o<h-200?1:-1:o>d+200?-1:1,u){case 1:l<25?g.db_hit(x.GK.R).end(x.GK.L):g.is_end(x.GK.R)&&g.start(x.GK.R).end(x.GK.L);break;case-1:l<25?g.db_hit(x.GK.L).end(x.GK.R):g.is_end(x.GK.L)&&g.start(x.GK.L).end(x.GK.R)}let p=0;switch(p=a<=r?r>_+50?1:-1:r<c-50?-1:1,p){case 1:g.is_end(x.GK.U)&&g.start(x.GK.U).end(x.GK.D);break;case-1:g.is_end(x.GK.D)&&g.start(x.GK.D).end(x.GK.U)}}}class Qt extends Kt{constructor(){super(...arguments),this.key=Ht.S.Chasing}update(t){var e,i;if(super.update(t),this.handle_defends())return;if(this.handle_bot_actions())return;this.random_jumping();const{ctrl:g}=this;if(g.following)return Ht.S.Following;const A=g.entity,s=null===(e=g.get_chasing())||void 0===e?void 0:e.entity,n=null===(i=g.get_avoiding())||void 0===i?void 0:i.entity;if(s&&n&&Ot(A,n)<Ot(A,s))return Ht.S.Avoiding;if(!s)return Ht.S.Idle;const{facing:I}=A,{x:C,z:a,y:o}=A.position,{next_x:r,next_z:l,next_y:d}=g.guess_entity_pos(s),{state:h}=A.frame,c=I*(r-C),_=d-o,u=(0,M.tn)(C-r),p=(0,M.tn)(a-l),m=u<=g.w_atk_x,f=p<=g.w_atk_z,v=g.en_out_of_range=u>x.Tc.AI_STAY_CHASING_RANGE&&"stay"===g.behavior||A.team!==g.world.stage.team&&(r<g.world.stage.player_l-80||r>g.world.stage.player_r+80);switch(h){case x.Fb.Normal:if(this.defend_test())return;break;case x.Fb.Running:if(this.defend_test())return;if(this.handle_block(),I>0&&(u<g.w_atk_x||v))g.keep_press(x.GK.L);else if(I<0&&(u<g.w_atk_x||v))g.keep_press(x.GK.R);else if(g.desire()<g.r_atk_desire&&(0,M.Tq)(c,0,g.r_atk_x)&&(0,M.Tq)(p,0,g.r_atk_z))g.fast_click(x.GK.a).key_up(x.GK.R,x.GK.L);else{if(!(g.desire()<g.r_stop_desire))break;g.fast_click(I<0?x.GK.R:x.GK.L)}return;case x.Fb.Injured:g.action_desire()<g.d_desire&&g.fast_click(x.GK.d);break;case x.Fb.Catching:A.catching&&g.fast_click(x.GK.a);break;case x.Fb.Attacking:case x.Fb.BurnRun:case x.Fb.Z_Moveable:a<l-g.w_atk_z?g.keep_press(x.GK.D):a>l+g.w_atk_z?g.keep_press(x.GK.U):g.key_up(x.GK.D,x.GK.U);break;case x.Fb.Standing:case x.Fb.Walking:if(this.defend_test())return;if((0,M.I6)(A.v_rests,t=>t[1].itr.kind===x.w7.Block)&&g.start(x.GK.a).end(x.GK.a),!v){const{r_desire:t}=g;if(t>0)g.db_hit(x.GK.R).end(x.GK.R);else{if(!(t<0))break;g.db_hit(x.GK.L).end(x.GK.L)}}break;case x.Fb.Dash:if(this.handle_block(),(0,M.Tq)(c,0,g.d_atk_x)&&(0,M.Tq)(p,0,g.d_atk_z))return void g.keep_press(x.GK.a);break;case x.Fb.Jump:if(o>10&&(0,M.Tq)(c,0,g.j_atk_x)&&(0,M.Tq)(p,0,g.j_atk_z)&&(0,M.Tq)(_,g.j_atk_y_min,g.j_atk_y_max))g.fast_click(x.GK.a);else if(!v)if(C<r&&u>g.w_atk_x)g.keep_press(x.GK.R);else{if(!(C>r&&u>g.w_atk_x)){g.key_up(x.GK.L,x.GK.R);break}g.keep_press(x.GK.L)}return;default:g.key_up(...vt.Di)}v?A.facing>0&&C>r?g.fast_click(x.GK.L):A.facing<0&&C<r?g.fast_click(x.GK.R):g.key_up(x.GK.L,x.GK.R,x.GK.U,x.GK.D):(C<r-g.w_atk_x?g.keep_press(x.GK.R):C>r+g.w_atk_x?g.keep_press(x.GK.L):g.key_up(x.GK.L,x.GK.R),a<l-g.w_atk_z?g.keep_press(x.GK.D):a>l+g.w_atk_z?g.keep_press(x.GK.U):g.key_up(x.GK.U,x.GK.D)),(0,M.Tq)(c,0,g.w_atk_x)&&(0,M.Tq)(p,0,g.w_atk_z)?g.fast_click(x.GK.a):g.key_up(x.GK.a),m&&f&&(u<=5?g.key_up(x.GK.L,x.GK.R):C>r&&A.facing>0?g.key_down(x.GK.L).key_up(x.GK.R):C<r&&A.facing<0&&g.key_down(x.GK.R).key_up(x.GK.L))}}class Pt extends Kt{constructor(){super(...arguments),this.key=Ht.S.Idle}enter(){this.ctrl.key_up(...vt.Di)}update(t){var e,i;if(super.update(t),this.handle_defends())return;if(this.handle_bot_actions())return;this.random_jumping();const{ctrl:g}=this;if(g.following)return Ht.S.Following;const A=g.entity,s=null===(e=g.get_chasing())||void 0===e?void 0:e.entity,n=null===(i=g.get_avoiding())||void 0===i?void 0:i.entity;return s&&n&&Ot(A,n)<Ot(A,s)?Ht.S.Avoiding:s?Ht.S.Chasing:n?Ht.S.Avoiding:void this.ctrl.key_up(...vt.Di)}}class Jt extends Kt{constructor(){super(...arguments),this.key=x.Sl.Following}enter(){this.ctrl.key_up(...vt.Di)}update(t){var e,i;if(super.update(t),this.handle_defends())return;this.random_jumping();const{ctrl:g}=this,A=g.entity;if(g.following){const[t,,e]=g.following,{x:i,z:s}=A.position,n=x.Tc.AI_FOLLOWING_RANGE_X,I=x.Tc.AI_FOLLOWING_RANGE_Z,C=t-n,a=t+n,o=e-I,r=e+I;switch(A.frame.state){case x.Fb.Standing:case x.Fb.Walking:this.handle_block(),i<C?g.fast_click(x.GK.R):i>a?g.fast_click(x.GK.L):g.key_up(x.GK.R,x.GK.L),s<o?g.keep_press(x.GK.D):s>r?g.keep_press(x.GK.U):g.key_up(x.GK.U,x.GK.D);break;case x.Fb.Dash:case x.Fb.Jump:case x.Fb.Running:this.handle_block(),i>a?g.keep_press(x.GK.L):i<C?g.keep_press(x.GK.R):g.keep_press(A.facing<0?x.GK.R:x.GK.L),s<o?g.keep_press(x.GK.D):s>r?g.keep_press(x.GK.U):g.key_up(x.GK.U,x.GK.D)}if(!(0,M.Tq)(i,C,a)||!(0,M.Tq)(s,o,r))return}delete g.following,this.ctrl.key_up(...vt.Di);const s=null===(e=g.get_chasing())||void 0===e?void 0:e.entity,n=null===(i=g.get_avoiding())||void 0===i?void 0:i.entity;return s&&n&&Ot(A,n)<Ot(A,s)?x.Sl.Avoiding:s?x.Sl.Chasing:n?x.Sl.Avoiding:x.Sl.Idle}}function qt(t,e,i){const g=t.position,A=e.position,{x:s,z:n,min_x:I=0,max_x:C=1e4,min_z:a=0,max_z:o=1e4,max_d:r=x.Tc.DAFUALT_QUBE_LENGTH_POW2,reverse:l=!1}=i,d=A.x-g.x,h=A.z-g.z;if(!(0,M.Tq)(t.facing*d,I,C))return l;if(!(0,M.Tq)((0,M.tn)(h),a,o))return l;const[c,_]=(0,M.kv)(d,h,s*t.facing,n),u=(0,M.n7)(d-c,2)+(0,M.n7)(h-_,2)<r;return l?!u:u}class $t extends vt.wp{get w_atk_x(){var t;const e=null===(t=this.get_chasing())||void 0===t?void 0:t.entity;return e?this.entity.facing===e.facing?this.w_atk_f_x:this.w_atk_b_x:0}get r_atk_x(){var t;const e=null===(t=this.get_chasing())||void 0===t?void 0:t.entity;return e?this.entity.facing===e.facing?this.r_atk_b_x:this.r_atk_f_x:0}get d_atk_x(){var t;const e=null===(t=this.get_chasing())||void 0===t?void 0:t.entity;return e?this.entity.facing===e.facing?this.d_atk_b_x:this.d_atk_f_x:0}get j_atk_x(){var t;const e=null===(t=this.get_chasing())||void 0===t?void 0:t.entity;return e?this.entity.facing===e.facing?this.j_atk_b_x:this.j_atk_f_x:0}get r_desire(){var t;const e=null===(t=this.get_chasing())||void 0===t?void 0:t.entity;if(!e)return 0;let i=(0,M.tn)(this.entity.position.x-e.position.x)-this.r_x_min;if(i<0)return 0;let g=!1;const A=this.r_x_max-this.r_x_min;return 0===A?(i=(0,M.RI)((0,M.qE)(i,0,A)/A),g=this.desire()<this.r_desire_min+(this.r_desire_max-this.r_desire_min)*i):g=this.desire()<this.r_x_min,g?this.entity.position.x>e.position.x?-1:1:0}get_chasing(){return this.chasings.get()}get_avoiding(){return this.avoidings.get()}get dummy(){return this._dummy}set dummy(t){this.end(...Object.values(x.GK)),this._dummy=t}constructor(t,e){super(t,e),this.player=void 0,this.fsm=(new Wt.A).add(new Pt(this),new Qt(this),new Xt(this),new Jt(this)).use(x.Sl.Idle),this.__is_bot_ctrl__=!0,this.w_atk_f_x=x.Tc.AI_W_ATK_F_X,this.w_atk_b_x=x.Tc.AI_W_ATK_B_X,this.w_atk_m_x=x.Tc.AI_W_ATK_M_X,this.w_atk_z=x.Tc.AI_W_ATK_Z,this.data_set=void 0,this.behavior=void 0,this.following=void 0,this.en_out_of_range=!1,this.r_atk_desire=x.Tc.AI_R_ATK_DESIRE,this.r_atk_f_x=x.Tc.AI_R_ATK_F_X,this.r_atk_b_x=x.Tc.AI_R_ATK_F_X,this.r_atk_z=x.Tc.AI_R_ATK_Z,this.d_atk_f_x=x.Tc.AI_D_ATK_F_X,this.d_atk_b_x=x.Tc.AI_D_ATK_B_X,this.d_atk_z=x.Tc.AI_D_ATK_Z,this.j_atk_f_x=x.Tc.AI_J_ATK_F_X,this.j_atk_b_x=x.Tc.AI_J_ATK_B_X,this.j_atk_z=x.Tc.AI_J_ATK_Z,this.j_atk_y_min=x.Tc.AI_J_ATK_Y_MIN,this.j_atk_y_max=x.Tc.AI_J_ATK_Y_MAX,this.jump_desire=x.Tc.AI_J_DESIRE,this.dash_desire=x.Tc.AI_D_DESIRE,this.r_desire_min=x.Tc.AI_R_DESIRE_MIN,this.r_desire_max=x.Tc.AI_R_DESIRE_MAX,this.r_x_min=x.Tc.AI_R_X_MIN,this.r_x_max=x.Tc.AI_R_X_MAX,this.r_stop_desire=x.Tc.AI_R_STOP_DESIRE,this.d_desire=x.Tc.AI_DEF_DESIRE,this.chasings=new Vt(5),this.avoidings=new Vt(5),this.defends=new Vt(5),this._dummy=void 0,this.player=this.lf2.players.get(t)}manhattan_to(t){const{x:e,z:i}=this.entity.position,{x:g,z:A}=t.position;return(0,M.tn)(g-e)+(0,M.tn)(A-i)}should_chase(t){return!(!(this.entity.hp>0&&null!==t&&void 0!==t&&t.is_attach&&t.hp>0&&t.frame.state!==x.Fb.Lying)||t.invisible||t.blinking||t.invulnerable)}should_avoid(t){var e;if(this.entity.hp<=0||null===t||void 0===t||!t.is_attach||t.hp<=0)return!1;return!!(Ot(this.entity,t)<300&&(t.frame.state===x.Fb.Lying||t.invisible||t.blinking||t.invulnerable||null===(e=t.frame.bdy)||void 0===e||!e.length))}should_defend(t){if(1!=(null===t||void 0===t?void 0:t.is_attach)||this.entity.toughness||this.entity.invisible||this.entity.blinking||this.entity.invulnerable)return 0;const{itr:e}=t;if(!x.br.some(e=>e===t.frame.state))return 0;if(!qt(t,this.entity,{x:(0,M.T9)(t.velocity.x,1),z:t.velocity.z,min_x:-80,max_x:(0,M.T9)((0,M.tn)(10*t.velocity.x),60),min_z:-2*x.Tc.DAFUALT_QUBE_LENGTH,max_z:(0,M.T9)((0,M.tn)(10*t.velocity.z),2*x.Tc.DAFUALT_QUBE_LENGTH)}))return 0;if(null!==e&&void 0!==e&&e.length){let i=!1,g=!0;for(const t of e)if(x.iA.some(e=>t.kind===e)){if(i=!0,x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE===t.bdefend)return 2;t.vrest&&(g=!1)}if(!i)return 0;if(g&&t.a_rest)return 0}return 1}look_other(t){if((0,R.vP)(t)){if(this.entity.is_ally(t))return;if(this.should_avoid(t))return void this.avoidings.look(this.entity,t);const e=this.should_defend(t);if(e)return void this.defends.look(this.entity,t,e);if(this.should_chase(t))return void this.chasings.look(this.entity,t)}else if((0,R.HY)(t)||(0,R.EQ)(t)){if(this.entity.is_ally(t))return;const e=this.should_defend(t);if(e)return void this.defends.look(this.entity,t,e)}}guess_entity_pos(t){const{x:e,z:i,y:g}=t.position,{x:A,z:s,y:n}=t.velocity;let I=e+A,C=i+s,a=g+n;switch(t.frame.state){case x.Fb.Jump:I+=2*A,C+=1*s,a+=1*n;break;case x.Fb.Running:I+=3*A,C+=1.5*s,a+=1.5*n;break;case x.Fb.Dash:I+=4*A,C+=2*s,a+=2*n}return{x:e,z:i,next_x:I,next_z:C,next_y:a}}key_up(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)this.is_end(g)||this.end(g);return this}key_down(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)this.is_end(g)&&this.start(g);return this}fast_click(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e){this.key_down(g).key_up(g);const t=vt.Db[g];t&&this.key_up(t)}return this}keep_press(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e){this.key_down(g);const t=vt.Db[g];t&&this.key_up(t)}return this}desire(){return this.lf2.random_in(0,x.Tc.MAX_AI_DESIRE)}update(){var t,e,i,g;this.data_set!==(null===(t=this.entity.data.base.bot)||void 0===t?void 0:t.dataset)&&(this.data_set=null===(e=this.entity.data.base.bot)||void 0===e?void 0:e.dataset,Object.assign(this,null===(i=this.entity.data.base.bot)||void 0===i?void 0:i.dataset));this.dummy?null===(g=zt[this.dummy])||void 0===g||g.update(this):this.world.stage.is_chapter_finish||this.entity.hp<=0?this.key_up(...vt.Di):(this.chasings.del(t=>{let{entity:e}=t;return!this.should_chase(e)}),this.chasings.sort(this.entity),this.avoidings.del(t=>{let{entity:e}=t;return!this.should_avoid(e)}),this.avoidings.sort(this.entity),this.defends.del(t=>{let{entity:e}=t;return!this.should_defend(e)}),this.defends.sort(this.entity),this.fsm.update(1));return super.update()}lock_when_stand_and_rest(){return this.entity.frame.state===x.Fb.Standing&&this.entity.resting<=0&&(this.entity.position.x=this.world.bg.width/2,this.entity.position.z=(this.world.bg.near+this.world.far)/2,!0)}action_desire(){let t=this.desire();for(let e=x.sL.MAX-this.lf2.difficulty;e>0;--e)t+=this.lf2.random_in(0,t);return t}handle_action(t){if(!t)return!1;const{facing:e}=this.entity,{status:i,e_ray:g,judger:A,desire:s,keys:n}=t,I=this.action_desire();if(!s||I>s)return!1;if(i&&!i.some(t=>{var e;return t===(null===(e=this.fsm.state)||void 0===e?void 0:e.key)}))return!1;if(g){var C;const t=null===(C=this.get_chasing())||void 0===C?void 0:C.entity;if(!t)return!1;let e=!1;for(const i of g)if(e=qt(this.entity,t,i),e)break;if(!e)return!1}if(A&&!A.run(this))return!1;return n.map(t=>"F"===t||"B"===t?e>0?x.GK.R:x.GK.L:t)}move(){this.behavior="move"}stay(){this.behavior="stay"}goto(t,e,i){this.following=[t,e,i]}}var te=i(3602),ee=i(7919);class ie{}class ge extends ie{constructor(t){super(),this.values=void 0,this.values=t}check(t){return this.values.some(e=>e===t)}toString(){return`one_of(${this.values.map(t=>JSON.stringify(t)).join()})`}}class Ae{}class se extends ie{check(t){return(0,M.ve)(t)}}function ne(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new ge(e)}function Ie(t,e,i,g,A){const{TAG:s}=Ie,n=t[i],I=typeof n,C=Array.isArray(g)?g:[g],a=C.some(t=>{if(t instanceof Ae){if(Array.isArray(n))return!0}else if(t instanceof ie){if(t.check(n))return!0}else if(I===t)return!0})?void 0:C.map(t=>JSON.stringify(t)).join(" | ");if(a){const t=`[${s}] ${e}.${i.toString()} must be ${C}, but got ${n}.`;return null===A||void 0===A||A.push(t),!1}return!0}function Ce(t,e){const i=[];return Ie(t,"stage","bg","string",i),Ie(t,"stage","id","string",i),Ie(t,"stage","name","string",i),Ie(t,"stage","phases",new Ae,i),Ie(t,"stage","next",["string","undefined"],i),Ie(t,"stage","chapter",["string","undefined"],i),null===e||void 0===e||e.push(...i),!i.length}function ae(t,e,i){const{layers:g,base:{shadow:A}}=e;(0,ee.gp)(A)&&i.push(t.images.load_img(A,A));for(const{file:s}of g)(0,ee.gp)(s)&&i.push(t.images.load_img(s,s));return e}Ie.TAG="check_field",ae.TAG="preprocess_bg_data";let oe=function(t){return t.LESS="<",t.LESS_OR_EQUAL="<=",t.EQUAL="==",t.GREATER_OR_EQUAL=">=",t.GREATER=">",t.NOT_EQUAL="!=",t.IncludedBy="}}",t.Include="{{",t.NotIncludedBy="!}",t.NotInclude="!{",t}({});const re=(t,e)=>!e.length||-1===e.findIndex(e=>t.indexOf(e)<0),le={"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,">=":(t,e)=>t>=e,"<=":(t,e)=>t<=e,"<":(t,e)=>t<e,">":(t,e)=>t>e,"{{":re,"}}":(t,e)=>re(e,t),"!{":(t,e)=>!re(t,e),"!}":(t,e)=>!re(e,t)};class de{constructor(t,e){if(this.is_expression=!0,this.children=[],this.get_val_getter=void 0,this.err=void 0,this.text="",this.result=void 0,this.before="",this.not=!1,this.op=void 0,this.val_1=void 0,this.val_2=void 0,this.run=t=>{let e=!1;const i=this.children.length;for(let g=0;g<i;++g){const i=this.children[g];i.before?"|"===i.before?e=e||i.run(t):"&"===i.before&&(e=e&&i.run(t)):e=i.run(t)}return this.result=this.not?!e:e},this.get_val_getter=e,"string"===typeof t){this.text=t.replace(/\s|\n|\r/g,"");let i=0;const g=this.text.length+1;let A=0,s="",n="";for(;A<g;++A)if(s=this.text[A]||"","!"===s&&"("===this.text[A+1]){const t=new de(this.text.substring(A+2),e);t.not=!0,t.before=n,A+=t.text.length+2,i=A+2,this.children.push(t)}else if("("===s){const t=new de(this.text.substring(A+1),e);t.before=n,A+=t.text.length+1,i=A+1,this.children.push(t)}else if("|"===s||"&"===s){if(i<A){const t=new de(null,e);t.judger(this.text.substring(i,A).replace(/\)*$/g,"")),t.before=n,this.children.push(t),n=s}else n=s;i=A+1}else if(")"===s||""===s){if(i<A){const t=new de(null,e);t.judger(this.text.substring(i,A)),t.before=n,this.children.push(t)}break}this.text=this.text.substring(0,A)}}alway_false(t){this.err=t,this.result=!1,this.run=()=>!1}judger(t){if(this.text=t,!t)return this.alway_false("[empty text]");const e=t.match(/(\S*)\s*(==|!=|<=|>=|\{\{|\}\}|!\{|!\})\s?(\S*)/)||t.match(/(\S*)\s*(=|<|>)\s?(\S*)/);if(!e)return this.alway_false(`[wrong expression: ${t}]`);const[,i,g,A]=e;if(this.op=g,!i||!A)return this.alway_false(`[wrong expression: ${t}]`);const s=le[g];if(!s)return this.alway_false(`wrong operator: ${g}`);const n=this.get_val_getter(i),I=this.get_val_getter(A);let C=i,a=A;if(g!==oe.Include&&g!==oe.IncludedBy&&g!==oe.NotInclude&&g!==oe.IncludedBy||(n||(C=i.split(",")),I||(a=A.split(","))),!n&&!I){const e=this.result=s(this.val_1=C,this.val_2=a);return console.warn("[Expression] warning,",JSON.stringify(t),"always got",e),void(this.run=()=>e)}this.run=t=>this.result=s(this.val_1=n?n(t,i,g):C,this.val_2=I?I(t,A,g):a)}}de.is=t=>!0===(null===t||void 0===t?void 0:t.is_expression);var he=i(5721);function ce(t,e,i){var g,A;const s=[],n=`${t.base.name}#frame`;return Ie(e,n,"id","string",s),Ie(e,n,"name","string",s),Ie(e,n,"state","number",s),Ie(e,n,"wait","number",s),Ie(e,n,"dvx",["number","undefined"],s),Ie(e,n,"dvy",["number","undefined"],s),Ie(e,n,"dvz",["number","undefined"],s),Ie(e,n,"acc_x",["number","undefined"],s),Ie(e,n,"acc_y",["number","undefined"],s),Ie(e,n,"acc_z",["number","undefined"],s),Ie(e,n,"vxm",["number","undefined"],s),Ie(e,n,"vym",["number","undefined"],s),Ie(e,n,"vzm",["number","undefined"],s),Ie(e,n,"centerx","number",s),Ie(e,n,"centery","number",s),Ie(e,n,"sound",["string","undefined"],s),Ie(e,n,"hp",["number","undefined"],s),null===(g=e.bdy)||void 0===g||g.forEach((t,e)=>!0),null===(A=e.itr)||void 0===A||A.forEach((t,e)=>!0),Ie(e,n,"invisible",[new se,"undefined"],s),Ie(e,n,"no_shadow",[ne(0,1),"undefined"],s),Ie(e,n,"jump_flag",[ne(1,0),"undefined"],s),i&&i.push(...s),!s.length}ce.TAG="check_frame";var _e=i(3084),ue=i(5584),pe=i(8932),me=i(3441);const fe={[ue.A.TrendX]:t=>t.velocity_0.x<0?-t.facing:t.velocity_0.x>0?t.facing:0,[ue.A.PressFB]:t=>t.ctrl.LR*t.facing,[ue.A.PressUD]:t=>t.ctrl.UD,[ue.A.PressLR]:t=>t.ctrl.LR,[ue.A.Holding_W_Type]:t=>{var e,i;return null!==(e=null===(i=t.holding)||void 0===i?void 0:i.data.base.type)&&void 0!==e?e:0},[ue.A.HP_P]:t=>(0,me.qE)((0,me.LI)(100*t.hp/t.hp_max),0,100),[ue.A.LF2_NET_ON]:t=>t.lf2.is_cheat_enabled(x.U1.LF2_NET)?1:0,[ue.A.HERO_FT_ON]:t=>t.lf2.is_cheat_enabled(x.U1.HERO_FT)?1:0,[ue.A.GIM_INK_ON]:t=>t.lf2.is_cheat_enabled(x.U1.GIM_INK)?1:0,[ue.A.HAS_TRANSFORM_DATA]:t=>t.transform_datas?1:0,[ue.A.Catching]:t=>t.catching?1:0,[ue.A.CAUGHT]:t=>t.catcher?1:0,[ue.A.RequireSuperPunch]:t=>{for(const[,{itr:e,attacker:i}]of t.v_rests){if(e.kind!==x.w7.SuperPunchMe)continue;const g=t.position.x-i.position.x;if((0,me.Tq)(g,-20,20)||g<-20&&1===t.facing||g>20&&-1===t.facing)return 1}return 0},[ue.A.HitByCharacter]:t=>(0,pe.I6)(t.collided_list,t=>(0,Bt.vP)(t.attacker))?1:0,[ue.A.HitByWeapon]:t=>(0,pe.I6)(t.collided_list,t=>(0,Bt.EQ)(t.attacker))?1:0,[ue.A.HitByBall]:t=>(0,pe.I6)(t.collided_list,t=>(0,Bt.HY)(t.attacker))?1:0,[ue.A.HitByState]:t=>t.collided_list.map(t=>t.aframe.state),[ue.A.HitByItrKind]:t=>t.collided_list.map(t=>t.itr.kind),[ue.A.HitByItrEffect]:t=>t.collided_list.map(t=>t.itr.effect),[ue.A.HitOnCharacter]:t=>(0,pe.I6)(t.collision_list,t=>(0,Bt.vP)(t.victim))?1:0,[ue.A.HitOnWeapon]:t=>(0,pe.I6)(t.collision_list,t=>(0,Bt.EQ)(t.victim))?1:0,[ue.A.HitOnBall]:t=>(0,pe.I6)(t.collision_list,t=>(0,Bt.HY)(t.victim))?1:0,[ue.A.HitOnState]:t=>t.collision_list.map(t=>t.bframe.state),[ue.A.HitOnSth]:t=>t.collision_list.length,[ue.A.HP]:t=>t.hp,[ue.A.MP]:t=>t.mp,[ue.A.VX]:t=>t.velocity.x,[ue.A.VY]:t=>t.velocity.y,[ue.A.VZ]:t=>t.velocity.z,[ue.A.FrameState]:t=>t.frame.state,[ue.A.Shaking]:t=>t.shaking,[ue.A.Holding]:t=>t.holding?1:0,[ue.A.HpRecoverable]:t=>t.hp_r-t.hp,[ue.A.LastestCollidedItrKind]:t=>{var e;return null===(e=t.lastest_collided)||void 0===e?void 0:e.itr.kind}},ve=new Map,be=t=>{const e=fe[t];if(e)return e;if(ve.has(t))return ve.get(t);const i=(t=>{{const e=(t=>()=>t)(t);return function(t){for(var i=arguments.length,g=new Array(i>1?i-1:0),A=1;A<i;A++)g[A-1]=arguments[A];return null===e||void 0===e?void 0:e(t.lf2,...g)}}})(t);if(!i)return void ve.set(t,i);const g=function(t){for(var e=arguments.length,g=new Array(e>1?e-1:0),A=1;A<e;A++)g[A-1]=arguments[A];return i(t.world,...g)};return ve.set(t,g),g},ye={[_e.N.Desire]:t=>t.desire(),[_e.N.BotState]:t=>{var e,i;return null!==(e=null===(i=t.fsm.state)||void 0===i?void 0:i.key)&&void 0!==e?e:""},[_e.N.EnemyY]:t=>{var e,i;return null===(e=t.get_chasing())||void 0===e||null===(i=e.entity)||void 0===i?void 0:i.position.y},[_e.N.EnemyDiffY]:t=>{var e;const i=null===(e=t.get_chasing())||void 0===e?void 0:e.entity;return i?i.position.y-t.entity.position.y:NaN},[_e.N.EnemyX]:t=>{var e,i;return null===(e=t.get_chasing())||void 0===e||null===(i=e.entity)||void 0===i?void 0:i.position.x},[_e.N.EnemyDiffX]:t=>{var e;const i=null===(e=t.get_chasing())||void 0===e?void 0:e.entity;return i?t.entity.facing*(i.position.x-t.entity.position.x):NaN},[_e.N.EnemyState]:t=>{var e,i;return null===(e=t.get_chasing())||void 0===e||null===(i=e.entity)||void 0===i?void 0:i.frame.state},[_e.N.Safe]:t=>{var e,i;if(t.defends.entities.size)return 0;const g=null===(e=t.get_chasing())||void 0===e?void 0:e.entity,A=null===(i=t.get_avoiding())||void 0===i?void 0:i.entity;return g&&(0,M.tn)(g.position.x-t.entity.position.x)<200&&(0,M.tn)(g.position.z-t.entity.position.z)<150||g&&x.br.some(t=>g.frame.state===t)||A&&(0,M.tn)(A.position.x-t.entity.position.x)<200&&(0,M.tn)(A.position.z-t.entity.position.z)<150||A&&x.br.some(t=>A.frame.state===t)?0:1},[_e.N.EnemyOutOfRange]:t=>t.en_out_of_range?1:0},we=new Map,ke=t=>{const e=ye[t];if(e)return e;let i=we.get(t);if(!i){const e=be(t);i=e?function(t){for(var i=arguments.length,g=new Array(i>1?i-1:0),A=1;A<i;A++)g[A-1]=arguments[A];return e(t.entity,...g)}:()=>t,we.set(t,i)}return i};var xe=i(9854),je=i(3845);function Ge(t){const{victim:e}=t,{armor:i}=e;if(!i||e.toughness<=0)return!1;const{bframe:g}=t;if(g.state===x.Fb.Caught||g.state===x.Fb.Injured||g.state===x.Fb.Falling||g.state===x.Fb.Frozen||g.state===x.Fb.Lying||g.state===x.Fb.Tired||g.state===x.Fb.BrokenDefend||g.state===x.Fb.Burning)return!1;if(!1===(null===i||void 0===i?void 0:i.fulltime)&&x.Fb.Standing!==g.state&&x.Fb.Walking!==g.state&&x.Fb.Running!==g.state&&x.Fb.Jump!==g.state&&x.Fb.Dash!==g.state)return!1;const{itr:A}=t,{effect:s}=A;if(!i.fireproof&&(s===x.pd.Fire||s===x.pd.MFire1||s===x.pd.MFire2||s===x.pd.FireExplosion))return!1;if(!i.antifreeze&&(s===x.pd.Ice2||s===x.pd.Ice))return!1;const{bdefend:n=0}=A;if(n>=x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE)return!1;const{aframe:I}=t;return I.state!==x.Fb.Ball_3006}var Te=i(6063);const De={[Te.W.AttackerType]:t=>t.attacker.data.type,[Te.W.VictimType]:t=>t.victim.data.type,[Te.W.ItrKind]:t=>t.itr.kind,[Te.W.ItrEffect]:t=>t.itr.effect,[Te.W.SameTeam]:t=>t.attacker.is_ally(t.victim)?1:0,[Te.W.SameFacing]:t=>t.attacker.facing===t.victim.facing?1:0,[Te.W.AttackerState]:t=>t.aframe.state,[Te.W.VictimState]:t=>t.bframe.state,[Te.W.AttackerHasHolder]:t=>t.attacker.holder?1:0,[Te.W.VictimHasHolder]:t=>t.victim.holder?1:0,[Te.W.AttackerHasHolding]:t=>t.attacker.holding?1:0,[Te.W.VictimHasHolding]:t=>t.victim.holding?1:0,[Te.W.AttackerOID]:t=>t.attacker.data.id,[Te.W.VictimOID]:t=>t.victim.data.id,[Te.W.BdyKind]:t=>t.bdy.kind,[Te.W.VictimFrameId]:t=>t.bframe.id,[Te.W.VictimFrameIndex_ICE]:t=>{var e;return null===(e=t.victim.data.indexes)||void 0===e?void 0:e.ice},[Te.W.ItrFall]:t=>t.itr.fall,[Te.W.AttackerThrew]:t=>void 0!==t.attacker.throwinjury?1:0,[Te.W.VictimThrew]:t=>void 0!==t.victim.throwinjury?1:0,[Te.W.VictimIsChasing]:t=>t.victim===t.attacker.chasing?1:0,[Te.W.VictimIsFreezableBall]:t=>{var e;return null!==(e=t.victim.group)&&void 0!==e&&e.some(t=>t===x.hG.FreezableBall)?1:0},[Te.W.AttackerIsFreezableBall]:t=>{var e;return null!==(e=t.attacker.group)&&void 0!==e&&e.some(t=>t===x.hG.FreezableBall)?1:0},[Te.W.ArmorWork]:t=>Ge(t)?1:0,[Te.W.V_FrameBehavior]:t=>t.victim.frame.behavior,[Te.W.NoItrEffect]:t=>void 0===t.itr.effect?1:0,[Te.W.A_HP_P]:t=>(0,M.RI)(100*t.attacker.hp/t.attacker.hp_max),[Te.W.V_HP_P]:t=>(0,M.RI)(100*t.victim.hp/t.victim.hp_max),[Te.W.LF2_NET_ON]:t=>t.attacker.lf2.is_cheat_enabled(x.U1.LF2_NET)?1:0,[Te.W.BdyHitFlag]:t=>t.bdy.hit_flag,[Te.W.ItrHitFlag]:t=>t.itr.hit_flag,[Te.W.BdyCode]:t=>t.bdy.code,[Te.W.ItrCode]:t=>t.itr.code},Ee=t=>De[t];var Re=i(4878);function Me(t){return Array.isArray(t)?t.map(t=>Me(t)):("string"!==typeof t.expression||(t.judger=new de(t.expression,be)),t)}function Ne(t,e,i){switch(e.tester=e.test?new de(e.test,Ee):void 0,e.type){case Re.X.A_Sound:case Re.X.V_Sound:for(const g of e.data.path)(0,M.gp)(g)&&!t.sounds.has(g)&&i.push(t.sounds.load(g,g));break;case Re.X.A_NextFrame:case Re.X.V_NextFrame:case Re.X.A_Defend:case Re.X.V_Defend:case Re.X.A_BrokenDefend:case Re.X.V_BrokenDefend:Me(e.data)}return e}function Be(t,e,i,g){var A,s,n;const I=e.prefab_id?null===(A=i.bdy_prefabs)||void 0===A?void 0:A[e.prefab_id]:void 0;return I&&(e={...I,...e}),e.hit_flag=null!==(s=e.hit_flag)&&void 0!==s?s:je._0.AllEnemy,e.tester=e.test?new de(e.test,Ee):void 0,null===(n=e.actions)||void 0===n||n.forEach((e,i,A)=>A[i]=Ne(t,e,g)),e}Me.Tag="preprocess_next_frame",Ne.TAG="preprocess_action",Be.TAG="preprocess_bdy";const Le=new Map;function Se(t,e,i){var g;const{pic:A}=i;if(!A)return A;const s=null===(g=(0,M.I6)(e.base.files,t=>{let[,e]=t;return e.id===A.tex}))||void 0===g?void 0:g[1];if(!s)return Mt.X.warn(Se.TAG,"file info not found, pic:",A),A;const n=t.images.find_by_pic_info(s);if(!n)return Mt.X.warn(Se.TAG,"img info not found",s),A;const I=(a=n,[(C=A).tex,C.x,C.y,C.w,C.h,a.w,a.h,a.scale].join());var C,a;let o=Le.get(I);if(o)return o;const r=n.w/n.scale,l=n.h/n.scale,d={tex:A.tex,x:A.x/r,y:1-(A.y+A.h)/l,w:A.w/r,h:A.h/l,pixel_w:A.w,pixel_h:A.h},h={...d,x:-d.x-d.w};return o={...A,1:d,[-1]:h},Le.set(I,o),o}function Ze(t,e,i,g){var A,s,n;const I=void 0!==e.prefab_id?null===(A=i.itr_prefabs)||void 0===A?void 0:A[e.prefab_id]:void 0;return I&&(e={...I,...e}),e.catchingact&&Me(e.catchingact),e.caughtact&&Me(e.caughtact),e.test&&(e.tester=new de(e.test,Ee)),e.hit_flag=null!==(s=e.hit_flag)&&void 0!==s?s:je._0.AllEnemy,null===(n=e.actions)||void 0===n||n.forEach((e,i,A)=>A[i]=Ne(t,e,g)),e}function Ye(t,e,i,g){var A,s;!function(t){const{pic:e,bdy:i,itr:g,opoint:A,cpoint:s,bpoint:n,wpoint:I}=t;if(!e||!("w"in e))return;const C={x:-t.centerx,y:t.centery-e.h,w:e.w,h:e.h,z:0,l:0},a={...C,x:t.centerx-C.w};if(t.indicator_info={1:C,[-1]:a},null===A||void 0===A||A.forEach(t=>{const e={w:2,h:2,x:C.x+t.x-1,y:C.y+C.h-t.y-1,z:t.z||0,l:0},i={...e,x:a.x+C.w-2-t.x};t.indicator_info={1:e,[-1]:i}}),s){const t=s,e=2,i=2,g={w:e,h:i,x:C.x+t.x-e/2,y:C.y+C.h-t.y-i/2,z:t.z||0,l:0},A={...g,x:a.x+C.w-e-t.x};t.indicator_info={1:g,[-1]:A}}if(n){const t=n,e=2,i=2,g={w:e,h:i,x:C.x+t.x-e/2,y:C.y+C.h-t.y-i/2,z:t.z||0,l:0},A={...g,x:a.x+C.w-e-t.x};t.indicator_info={1:g,[-1]:A}}if(I){const t=I,e=2,i=2,g={w:e,h:i,x:C.x+t.x-e/2,y:C.y+C.h-t.y-i/2,z:t.z||0,l:0},A={...g,x:a.x+C.w-e-t.x};t.indicator_info={1:g,[-1]:A}}null===i||void 0===i||i.forEach(t=>{const e={w:t.w,h:t.h,x:C.x+t.x,y:C.y+C.h-t.y-t.h,z:t.z,l:t.l},i={...e,x:a.x+C.w-t.w-t.x};t.indicator_info={1:e,[-1]:i}}),null===g||void 0===g||g.forEach(t=>{const e={w:t.w,h:t.h,x:C.x+t.x,y:C.y+C.h-t.y-t.h,z:t.z,l:t.l},i={...e,x:a.x+C.w-t.w-t.x};t.indicator_info={1:e,[-1]:i}})}(i),i.sound&&!t.sounds.has(i.sound)&&g.push(t.sounds.load(i.sound,i.sound)),i.seqs&&(i.seq_map=new Map,(0,he.R)(i.seqs,(t,e,g)=>{if(!e)return;const A=Me(e);i.seq_map.set(t,g[t]=A)})),(0,he.R)(i.hit,(t,e,i)=>{e&&(i[t]=Me(i[t]))}),(0,he.R)(i.hold,(t,e,i)=>{e&&(i[t]=Me(e))}),(0,he.R)(i.key_down,(t,e,i)=>{e&&(i[t]=Me(e))}),(0,he.R)(i.key_up,(t,e,i)=>{e&&(i[t]=Me(e))}),i.next&&(i.next=Me(i.next)),i.on_dead&&(i.on_dead=Me(i.on_dead)),i.on_exhaustion&&(i.on_exhaustion=Me(i.on_exhaustion)),i.on_landing&&(i.on_landing=Me(i.on_landing)),null===(A=i.bdy)||void 0===A||A.forEach((i,A,s)=>s[A]=Be(t,i,e,g)),null===(s=i.itr)||void 0===s||s.forEach((i,A,s)=>s[A]=Ze(t,i,e,g));const n=i;if(n&&n.center){var I,C;const[t,e]=(0,xe.A)(n.center,2,[null!==(I=i.centerx)&&void 0!==I?I:0,null!==(C=i.centery)&&void 0!==C?C:0]);i.centerx=t,i.centery=e}return i.pic=Se(t,e,i),i}Se.TAG="preprocess_frame_pic",Ze.TAG="cook_frame",Ye.TAG="preprocess_frame";class Fe{get cancelled(){return this.mgr.inner_id!==this.id}get lf2(){return this.mgr.lf2}constructor(t,e){this.mgr=void 0,this.id=void 0,this.data_list_map={background:[X.T.VOID_BG],[te.D2.Entity]:[],[te.D2.Fighter]:[],[te.D2.Weapon]:[],[te.D2.Ball]:[],all:[]},this.data_map=new Map,this.stages=[X.T.VOID_STAGE],this.mgr=t,this.id=e}async _cook_data(t){const e=[];return(0,Bt.kk)(t)&&(t=ae(this.lf2,t,e)),(0,Bt._M)(t)?R.$7.inst.set_ctrl_creator(t.id,(t,e)=>new Gt(t,e)):(0,Bt.zm)(t)?R.$7.inst.set_ctrl_creator(t.id,(t,e)=>new Dt.K(t,e)):(0,Bt.Yo)(t)&&R.$7.inst.set_ctrl_creator(t.id,(t,e)=>new $t(t,e)),(0,Bt.U_)(t)&&(t=await async function(t,e,i){var g,A,s,n,I,C,a,o,r,l;const{images:d,sounds:h}=t,{small:c,head:_}=e.base;e.base.fall_value=null!==(g=e.base.fall_value)&&void 0!==g?g:x.Tc.DEFAULT_FALL_VALUE_MAX,e.base.defend_value=null!==(A=e.base.defend_value)&&void 0!==A?A:x.Tc.DEFAULT_DEFEND_VALUE_MAX,e.base.hp=null!==(s=e.base.hp)&&void 0!==s?s:x.Tc.DEFAULT_HP,e.base.mp=null!==(n=e.base.mp)&&void 0!==n?n:x.Tc.DEFAULT_MP,(0,M.gp)(c)&&i.push(d.load_img(c,c)),(0,M.gp)(_)&&i.push(d.load_img(_,_)),null===(I=e.base.dead_sounds)||void 0===I||I.forEach(t=>(0,M.gp)(t)&&h.load(t,t)),null===(C=e.base.drop_sounds)||void 0===C||C.forEach(t=>(0,M.gp)(t)&&h.load(t,t)),null===(a=e.base.hit_sounds)||void 0===a||a.forEach(t=>(0,M.gp)(t)&&h.load(t,t)),e.on_dead&&(e.on_dead=Me(e.on_dead)),e.on_exhaustion&&(e.on_exhaustion=Me(e.on_exhaustion));const{frames:u,base:{files:p}}=e;return(0,he.R)(p,(t,e)=>i.push(d.load_by_e_pic_info(e))),i.length&&await Promise.all(i),(0,he.R)(u,(g,A,s)=>s[g]=Ye(t,e,A,i)),(0,he.R)(u,(t,i)=>{const g=[];ce(e,i,g),g.length&&Mt.X.warn(g)}),(0,he.R)(null===(o=e.base.bot)||void 0===o?void 0:o.actions,(t,e)=>{e&&e.expression&&(e.judger=new de(e.expression,ke))}),(0,he.R)(null===(r=e.base.bot)||void 0===r?void 0:r.frames,(t,e,i)=>{if(!e)return;const g=t.split(",");if(!(g.length<=1)){delete i[t];for(const t of g)i[t]=[...e]}}),(0,he.R)(null===(l=e.base.bot)||void 0===l?void 0:l.states,(t,e,i)=>{if(!e)return;const g=(""+t).split(",");if(!(g.length<=1)){delete i[t];for(const t of g)i[t]=[...e]}}),e}(this.lf2,t,e)),t}async _add_data(t,e){const i=await this._cook_data(e),g=""+t,A=""+i.id;A!==g&&Mt.X.warn(We.TAG+"::_add_data","index_id not equal to data_id,",`index_id: ${g}, data_id: ${A},`,"will use index_id as data key."),this.data_map.has(g)&&Mt.X.warn(We.TAG+"::_add_data","id duplicated, old data will be overwritten!","old data:",this.data_map.get(g),"new data:",i),this.data_map.set(g,i)}async load(){for(const s of Object.keys(X.T.BuiltIn_Imgs)){const t=X.T.BuiltIn_Imgs[s];(0,ee.gp)(t)&&(this.lf2.on_loading_content(`${t}`,0),await this.lf2.images.load_img(t,t))}for(const s of Object.keys(X.T.BuiltIn_Dats)){const t=X.T.BuiltIn_Dats[s];(0,ee.gp)(t)&&(this.lf2.on_loading_content(`${t}`,0),await this._add_data(t,await this.lf2.import_json(t).then(t=>t[0])))}const{objects:t=[],backgrounds:e=[]}=await this.lf2.import_json("data/data.json5").then(t=>t[0]).catch(()=>({}));if(this.cancelled)throw new Error("cancelled");if(this.cancelled)throw new Error("cancelled");for(const{id:s,file:n}of t){if(this.cancelled)throw new Error("cancelled");this.lf2.on_loading_content(`${n}`,0),await this._add_data(s,await this.lf2.import_json(n).then(t=>t[0]))}for(const{id:s,file:n}of e){if(this.cancelled)throw new Error("cancelled");this.lf2.on_loading_content(`${n}`,0),await this._add_data(s,await this.lf2.import_json(n).then(t=>t[0]))}for(const[,s]of this.data_map){var i;if(this.cancelled)throw new Error("cancelled");const t=s.type;null===(i=this.data_list_map[t])||void 0===i||i.push(s),this.data_list_map.all.push(s)}const g="data/stage.json5";this.lf2.on_loading_content(`${g}`,0);const A=await this.lf2.import_json("data/stage.json5").then(t=>t[0]).catch(t=>[]);this.stages.find(t=>t.id===X.T.VOID_STAGE.id)||this.stages.unshift(X.T.VOID_STAGE);for(const s of A){const t=this.stages.findIndex(t=>t.id===s.id);Ce(s),t<0&&this.stages.push(s),this.stages[t]=s}this.lf2.on_loading_content(`${g}`,100)}process_entity_data(t){}}class We{find_group(t){const e=e=>{var i;return null===(i=e.base.group)||void 0===i?void 0:i.some(e=>e===t)};return{characters:this.characters.filter(e),weapons:this.weapons.filter(e),entity:this.entity.filter(e),balls:this.balls.filter(e)}}get inner_id(){return this._inner_id}constructor(t){this._inner_id=0,this._inner=new Fe(this,++this._inner_id),this.lf2=void 0,this.randomings=new Map,this.lf2=t}load(){return this.clear(),this._inner.load()}dispose(){++this._inner_id}clear(){this._inner=new Fe(this,++this._inner_id)}get characters(){return this._inner.data_list_map[te.D2.Fighter]}get weapons(){return this._inner.data_list_map[te.D2.Weapon]}get backgrounds(){return this._inner.data_list_map.background}get balls(){return this._inner.data_list_map[te.D2.Ball]}get entity(){return this._inner.data_list_map[te.D2.Entity]}get all(){return this._inner.data_list_map.all}get stages(){return this._inner.stages}find(t){return this._inner.data_map.get(""+t)}get_randoming_by_group(t){let e=this.randomings.get(t);if(!e){const{characters:i,weapons:g,entity:A,balls:s}=this.find_group(t);this.randomings.set(t,e=new Zt.K([...i,...g,...A,...s],this.lf2))}return e}find_weapon(t){return(0,ee.Hl)(t)?this.weapons.find(e=>e.id===t):this.weapons.find(t)}find_character(t){return(0,ee.Hl)(t)?this.characters.find(e=>e.id===t):this.characters.find(t)}find_background(t){return(0,ee.Hl)(t)?this.backgrounds.find(e=>e.id===t):this.backgrounds.find(t)}get_characters_of_group(t){return this.characters.filter(e=>e.base.group&&e.base.group.indexOf(t)>=0)}get_characters_not_in_group(t){return this.characters.filter(e=>!e.base.group||e.base.group.indexOf(t)<0)}}function Oe(t,e){if(!t.endsWith(e))return;const i=t.lastIndexOf("/");return[t.substring(0,i+1),t.substring(i+1,t.length-e.length),e]}function Ue(t){const e=[t];let i;return(i=Oe(t,".png")||Oe(t,".bmp")||Oe(t,".webp"))?(e.unshift(...[i[0]+i[1]+"@4x.webp",i[0]+i[1]+"@4x.png",i[0]+i[1]+"@3x.webp",i[0]+i[1]+"@3x.png",i[0]+i[1]+"@2x.webp",i[0]+i[1]+"@2x.png",i[0]+"@4x/"+i[1]+".webp",i[0]+"@4x/"+i[1]+".png",i[0]+"@3x/"+i[1]+".webp",i[0]+"@3x/"+i[1]+".png",i[0]+"@2x/"+i[1]+".webp",i[0]+"@2x/"+i[1]+".png",i[0]+i[1]+".webp",i[0]+i[1]+".png"].filter(e=>e!==t)),[e,i[2]]):(i=Oe(t,".wav")||Oe(t,".wma"))?(e.unshift(i[0]+i[1]+".mp3",i[0]+i[1]+i[2]+".mp3"),[e,i[2]]):[e,""]}We.TAG="DatMgr";var ze=i(7282),Ve=i(2614),He=i.n(Ve);class Ke{get id(){return this._info.id}get storage_key(){return"player_info_"+this.id}get name(){return this._info.name}set name(t){this._info.name=t,this.debug("setter:name",t)}get keys(){return this._info.keys}get team(){return this._info.team}set team(t){this._info.team=t,this.debug("setter:team",t)}get character(){return this._info.character||this._random_character}set character(t){this._info.character=t,this.debug("setter:character",t)}get random_character(){return this._random_character}set random_character(t){this._random_character=t,this.debug("setter:random_character",t)}get is_random(){return!this._info.character}get joined(){return this._joined}set joined(t){this._joined=t,this.debug("setter:joined",t)}get is_com(){return this._is_com}set is_com(t){this._is_com=t,this.debug("setter:is_com",t)}get team_decided(){return this._team_decided}set team_decided(t){this._team_decided=t,this.debug("setter:team_decided",t)}get character_decided(){return this._character_decided}set character_decided(t){this._character_decided=t,this.debug("setter:character_decided",t)}get ctrl(){return this._info.ctrl}set ctrl(t){this._info.ctrl=t,this.debug("setter:ctrl",t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.Tc.get_default_keys(t);this.__debugging=void 0,this.callbacks=new ft.nq,this._info=void 0,this._joined=!1,this._is_com=!1,this._team_decided=!1,this._character_decided=!1,this._random_character="",this._info={id:t,name:e,keys:i,team:"",version:0,character:"",ctrl:Tt.Keyboard},this.load(),(0,Nt.Q)(this)}debug(t){}warn(t){}log(t){}save(){Mt.X.Cache.del(this.storage_key).then(()=>{Mt.X.Cache.put({name:this.storage_key,type:Ke.DATA_TYPE,version:Ke.DATA_VERSION,data:(new TextEncoder).encode(JSON.stringify(this._info))})})}load(){Mt.X.Cache.get(this.storage_key).then(t=>{if(!t)return;const{data:e}=t;try{const t=(new TextDecoder).decode(e),i=He().parse(t),{name:g,keys:A,ctrl:s=this.ctrl,version:n}=i;if(n!==this._info.version)return this.warn("load","version changed"),!1;if((0,ee.Hl)(g)&&this.set_name(g,!0),A)for(const e in A)this.set_key(e,A[e],!0);return s!==this.ctrl&&this.set_ctrl(s,!0),!0}catch(i){return this.warn("load","load failed, ",i),!1}})}set_ctrl(t,e){const i=this._info.ctrl;return i===t||(this.ctrl=t,e&&this.callbacks.emit("on_ctrl_changed")(t,i)),this}set_name(t,e){const i=this._info.name;return i===t||(this.name=t,e&&this.callbacks.emit("on_name_changed")(t,i)),this}set_character(t,e){const i=this._info.character;return i===t||(this.character=t,e&&this.callbacks.emit("on_character_changed")(t,i)),this}set_random_character(t,e){const i=this._random_character;return i===t||(this.random_character=t,e&&this.callbacks.emit("on_random_character_changed")(t,i)),this}set_team(t,e){const i=this._info.team;return i===t||(this.team=t,e&&this.callbacks.emit("on_team_changed")(t,i)),this}set_joined(t,e){return this._joined===t||(this.joined=t,e&&this.callbacks.emit("on_joined_changed")(t)),this}set_is_com(t,e){return this._is_com===t||(this.is_com=t,e&&this.callbacks.emit("on_is_com_changed")(t)),this}set_character_decided(t,e){return this._character_decided===t||(this.character_decided=t,e&&this.callbacks.emit("on_character_decided")(t)),this}set_team_decided(t,e){return this._team_decided===t||(this.team_decided=t,e&&this.callbacks.emit("on_team_decided")(t)),this}set_key(t,e,i){if(this._info.keys[t]===e)return this;const g=this._info.keys[t];return this._info.keys[t]=e.toLowerCase(),i&&this.callbacks.emit("on_key_changed")(t,e.toLowerCase(),g),this}get_key(t){return this._info.keys[t]}}Ke.TAG="PlayerInfo",Ke.DATA_TYPE="PlayerInfo",Ke.DATA_VERSION=1;i(1313);var Xe=i(1588),Qe=i(5041);const Pe=class{constructor(t,e){this.bg=void 0,this.info=void 0,this.visible=!1,this.bg=t,this.info=e}update(t){const{info:{c1:e,c2:i,cc:g}}=this;if(void 0!==g&&void 0!==e&&void 0!==i){const A=t%g;this.visible=A>=e&&A<=i}else this.visible=!0}dispose(){}};class Je{get name(){return this.data.base.name}get id(){return this.data.id}get left(){return this.data.base.left}get right(){return this.data.base.right}get near(){return this.data.base.near}get far(){return this.data.base.far}get layers(){return this._layers}constructor(t,e){this.data=void 0,this._layers=[],this.width=void 0,this.depth=void 0,this.middle=void 0,this.world=void 0,this._update_times=0,this.data=e,this.world=t,this.width=this.data.base.right-this.data.base.left,this.depth=this.data.base.near-this.data.base.far,this.middle={x:(this.data.base.right+this.data.base.left)/2,z:(this.data.base.far+this.data.base.near)/2};for(const i of e.layers)this.add_layer(i)}add_layer(t){let{x:e,loop:i=0}=t;if(i<=0)this._layers.push(new Pe(this,t));else{const g=this.width+i;for(e-=i;e<g;e+=i)this._layers.push(new Pe(this,{...t,x:e}))}}update(){this._update_times++;for(const t of this._layers)t.update(this._update_times)}dispose(){for(const t of this._layers)t.dispose();this._layers.length=0}}var qe=i(9171);class $e{get lf2(){return this.stage.lf2}get world(){return this.stage.world}constructor(t,e){this.times=void 0,this.data=void 0,this.randoming=void 0,this.info=void 0,this.fighters=new Set,this.stage=void 0,this.entity_cb={on_team_changed:t=>{var e,i;(this.fighters.delete(t),t.team!==this.stage.team)&&(null===(e=(i=this.entity_cb).on_disposed)||void 0===e||e.call(i,t))},on_disposed:t=>{t.callbacks.del(this.entity_cb),this.info.is_soldier?this.stage.all_boss_dead()?this.dispose():void 0===this.times||this.times>=1?this.spawn():this.dispose():this.times&&this.times>=1?this.spawn():this.dispose(),this.stage.all_enemies_dead()&&this.stage.enter_phase(this.stage.phase_idx+1)}},this.stage=t,this.info=e,this.times=e.times?(0,M.RI)(e.times):void 0;const i=[],g=[];for(const A of this.info.id){const t=this.lf2.datas.find(A);if(t){i.push(t);continue}const e=this.lf2.datas.get_randoming_by_group(A);e.src.length&&g.push(e)}1!==i.length||g.length?i.length&&!g.length?g.push(new Zt.K(i,this.lf2)):!i.length&&g.length?this.randoming=new Zt.K(g,t.lf2):i.length&&g.length&&(g.push(new Zt.K(i,this.lf2)),this.randoming=new Zt.K(g,t.lf2)):this.data=i[0]}spawn(){var t,e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const A=this.data||(null===(t=this.randoming)||void 0===t?void 0:t.take().take());if(!A)return!1;const s=qe.$.inst.get_entity_creator(A.type);if(!s)return!1;let{hp:n,act:I,x:C,y:a,z:o,reserve:r,hp_map:l,mp:d,mp_map:h}=this.info;this.times&&this.times--;const c=s(this.world,A);c.ctrl=qe.$.inst.get_ctrl(c.data.id,"",c),c.dead_gone=!0,c.reserve=null!==r&&void 0!==r?r:0,c.position.x=this.lf2.random_in(C,C+i),c.position.z=(0,Q.AK)(o)?this.lf2.random_in(o-g,o+g):this.lf2.random_in(this.stage.near,this.stage.far),this.info.join&&(c.dead_join={hp:this.info.join,team:null!==(e=this.info.join_team)&&void 0!==e?e:j.H.Team_1});let _=null===l||void 0===l?void 0:l[this.lf2.difficulty];if(!(0,Q.AK)(_)&&(0,Q.AK)(n))switch(this.lf2.difficulty){case x.sL.Easy:_=(0,M.RI)(3*n/4);break;case x.sL.Crazy:_=(0,M.RI)(3*n/2);break;default:_=n}(0,Q.AK)(_)&&(c.hp=c.hp_r=c.hp_max=_);let u=null===h||void 0===h?void 0:h[this.lf2.difficulty];return(0,Q.AK)(d)&&!(0,Q.AK)(u)&&(u=d),(0,Q.AK)(u)&&(c.mp=c.mp_max=u),(0,Q.AK)(a)&&(c.position.y=a),(0,Bt.vP)(c)?c.name=c.data.base.name:(0,Bt.EQ)(c)&&!(0,Q.AK)(a)&&(c.position.y=450),c.team=this.stage.team,c.attach(),c.callbacks.add(this.entity_cb),(0,ee.Hl)(I)?c.enter_frame({id:I}):c.enter_frame(x.Tc.NEXT_FRAME_AUTO),(0,Bt.vP)(c)&&this.fighters.add(c),!0}dispose(){this.stage.items.delete(this);for(const t of this.fighters)t.callbacks.del(this.entity_cb)}}let ti=function(t){return t.Running="Running",t.Completed="Completed",t.End="End",t}({});class ei{get is_stage_finish(){return this._is_stage_finish}get is_chapter_finish(){return this._is_chapter_finish}get bg(){return this._bg}get phases(){return this.data.phases}get id(){return this.data.name}get name(){return this.data.name}get lf2(){return this.world.lf2}get time(){return this.fsm.time}get phase_idx(){return this._phase_idx}get phase(){return this._phase}change_bg(t){if(this._bg){if(this._bg.data.id===t.id)return this._bg;this._bg.dispose()}return this.world.stage&&this.world.bg.data.id===t.id?this._bg=this.world.bg:(this._bg=new Je(this.world,t),this.left=this.cam_l=this.player_l=this.enemy_l=this._bg.left,this.right=this.cam_r=this.player_r=this.enemy_r=this._bg.right,this.near=this._bg.near,this.far=this._bg.far,this.width=this._bg.width,this.depth=this._bg.depth,this.middle=this._bg.middle,this.drink_l=-1e3,this.drink_r=this.bg.width+1e3,this._bg)}constructor(t,e){if(this.world=void 0,this.data=void 0,this.next_stage=void 0,this.team=void 0,this.callbacks=new Xe.A,this._disposed=!1,this._disposers=[],this._bg=void 0,this._phase_idx=0,this._phase=void 0,this.items=new Set,this._is_stage_finish=!1,this._is_chapter_finish=!1,this.left=void 0,this.right=void 0,this.near=void 0,this.far=void 0,this.width=void 0,this.depth=void 0,this.middle=void 0,this.player_l=void 0,this.player_r=void 0,this.cam_l=void 0,this.cam_r=void 0,this.enemy_l=void 0,this.enemy_r=void 0,this.drink_l=void 0,this.drink_r=void 0,this.fsm=(new Wt.A).add({key:ti.Running,update:()=>{if(this._is_stage_finish)return ti.Completed}},{key:ti.Completed,enter:()=>{this.callbacks.emit("on_stage_finish")(this),this.is_chapter_finish&&this.callbacks.emit("on_chapter_finish")(this)},update:()=>{if(this.should_goto_next_stage)return this.callbacks.emit("on_requrie_goto_next_stage")(this),ti.End}},{key:ti.End}).use(ti.Running),this._stop_bgm=void 0,this.world=t,"type"in e&&"background"===e.type)this.data=x.Tc.VOID_STAGE,this._bg=this.change_bg(e);else if("bg"in e){this.data=e;const t=this.data.bg,i=this.world.lf2.datas.backgrounds.find(e=>e.id===t||e.id==="bg_"+t);i||t===x.Tc.VOID_BG.id||Mt.X.warn(ei.TAG+"::constructor",`bg_data not found, id: ${t}`),this._bg=this.change_bg(null!==i&&void 0!==i?i:x.Tc.VOID_BG)}else this.data=x.Tc.VOID_STAGE,this._bg=this.change_bg(x.Tc.VOID_BG);this.left=this.cam_l=this.player_l=this.enemy_l=this._bg.left,this.right=this.cam_r=this.player_r=this.enemy_r=this._bg.right,this.near=this._bg.near,this.far=this._bg.far,this.width=this._bg.width,this.depth=this._bg.depth,this.middle=this._bg.middle,this.drink_l=-1e3,this.drink_r=this.bg.width+1e3,this.data.next&&(this.next_stage=this.lf2.stages.find(t=>t.id===this.data.next)),this.team=(0,Qe.f)()}play_phase_bgm(){const{phase:t}=this;if(!t)return;const{music:e}=t;e&&(this._stop_bgm=this.lf2.sounds.play_bgm(e))}stop_bgm(){var t;null===(t=this._stop_bgm)||void 0===t||t.call(this)}set_phase(t){var e,i,g,A,s,n,I,C,a,o,r;if(t===this.phase)return;const l=this.phase;if(this.callbacks.emit("on_phase_changed")(this,this._phase=t,l),this.player_l=0,this.player_r=this.bg.right,!t)return;const{objects:d,respawn:h,health_up:c,mp_up:_}=t,u=(null===c||void 0===c?void 0:c[this.lf2.difficulty])||0,p=(null===h||void 0===h?void 0:h[this.lf2.difficulty])||0,m=(null===_||void 0===_?void 0:_[this.lf2.difficulty])||0;if(u||p||m){const t=new Set;for(const[,e]of this.world.slot_fighters)t.add(e.team);for(const e of this.world.entities)if((0,Bt.vP)(e)||t.has(e.team)){if(e.hp<=0&&p){const t=p<1?(0,M.jk)(e.hp_max*p,e.hp_max):(0,M.jk)(p,e.hp_max);e.hp=e.hp_r=t}else if(e.hp>0&&u){const t=u<1?(0,M.jk)(e.hp_r+(e.hp_max-e.hp_r)*u,e.hp_max):(0,M.jk)(e.hp_r+u,e.hp_max);e.hp=e.hp_r=t}m&&(e.mp=(0,M.jk)(e.mp+m,e.mp_max))}}this.play_phase_bgm();for(const f of d)this.spawn_object(f);if((0,Q.AK)(t.cam_jump_to_x)&&(this.world.renderer.cam_x=t.cam_jump_to_x),(0,Q.AK)(t.player_jump_to_x)){const e=t.player_jump_to_x,i=new Set;for(const[,t]of this.lf2.world.slot_fighters)i.add(t.team);for(const t of this.world.entities)(0,Bt.vP)(t)&&i.has(t.team)&&(t.position.x=this.lf2.random_in(e,e+50))}this.player_l=null!==(e=t.player_l)&&void 0!==e?e:0,this.cam_l=null!==(i=t.camera_l)&&void 0!==i?i:0,this.enemy_l=null!==(g=t.enemy_l)&&void 0!==g?g:0,this.drink_l=null!==(A=t.drink_l)&&void 0!==A?A:-1e3,this.player_r=null!==(s=null!==(n=t.player_r)&&void 0!==n?n:t.bound)&&void 0!==s?s:this.bg.right,this.cam_r=null!==(I=null!==(C=t.camera_r)&&void 0!==C?C:t.bound)&&void 0!==I?I:this.bg.right,this.enemy_r=null!==(a=null!==(o=t.enemy_r)&&void 0!==o?o:t.bound)&&void 0!==a?a:this.bg.right,this.drink_r=null!==(r=t.drink_r)&&void 0!==r?r:this.bg.right+1e3}enter_phase(t){var e;this.set_phase(this.data.phases[this._phase_idx=t]),this._is_stage_finish=this.data.phases.length>0&&this._phase_idx>=this.data.phases.length,this._is_chapter_finish=this._is_stage_finish&&(null===(e=this.next_stage)||void 0===e?void 0:e.chapter)!==this.data.chapter}async spawn_object(t){let e=0;for(const[,n]of this.world.slot_fighters){var i;e+=null!==(i=n.data.base.ce)&&void 0!==i?i:1}switch(e||(e=1),this.lf2.difficulty){case x.sL.Crazy:e*=2;case x.sL.Easy:case x.sL.Normal:case x.sL.Difficult:}const{ratio:g,times:A=1}=t;let s=void 0===g?1:(0,M.RI)(e*g);if(!(s<=0)&&A)for(;s>0;){const e=new $e(this,t);e.spawn(),this.items.add(e),--s}}kill_all_enemies(){for(const t of this.items)for(const e of t.fighters)(0,Bt.vP)(e)&&e.team===this.team&&(e.hp=0)}kill_soliders(){for(const t of this.items)if(t.info.is_soldier)for(const e of t.fighters)(0,Bt.vP)(e)&&e.team===this.team&&(e.hp=0)}kill_boss(){for(const t of this.items)if(t.info.is_boss)for(const e of t.fighters)(0,Bt.vP)(e)&&e.team===this.team&&(e.hp=0)}kill_others(){for(const t of this.items)if(!t.info.is_boss&&!t.info.is_soldier)for(const e of t.fighters)(0,Bt.vP)(e)&&e.team===this.team&&(e.hp=0)}dispose(){this._disposed=!0;for(const i of this._disposers)i();this._bg!==this.world.bg&&this._bg.dispose();for(const i of this.items)i.dispose();const t=[],e=new Set;for(const[,i]of this.lf2.world.slot_fighters)e.add(i.team);for(const i of this.world.entities)(0,Bt.vP)(i)&&e.has(i.team)||(0,Bt.EQ)(i)&&i.holder&&e.has(i.holder.team)||t.push(i);this.world.del_entities(t),this.callbacks.clear()}all_boss_dead(){return!(0,pe.I6)(this.items,t=>t.info.is_boss)}all_enemies_dead(){return!(0,pe.I6)(this.items,t=>t.fighters.size)}get should_goto_next_stage(){return!(this.is_chapter_finish||!this.is_stage_finish)&&!(0,pe.I6)(this.world.entities,t=>(0,Bt.vP)(t)&&t.hp>0&&t.position.x<this.cam_r)}update(){this.fsm.update(1)}}ei.TAG="Stage";const ii=gi(t=>"object"===typeof t&&!Array.isArray(t));gi(t=>Array.isArray(t));function gi(t){return Object.assign(t,{_judger:!0})}function Ai(t,e,i){var g;const A=null===(g=t.values)||void 0===g?void 0:g[i];return null===A||void 0===A?t.parent?Ai(t.parent,e,i):null:"string"===typeof e?typeof A===e?A:null:"function"===typeof(s=e)&&!0===s._judger?e(A)?A:null:(0,M.mJ)(A,e)?A:null;var s}function si(t,e,i){var g;return null===i||void 0===i?null:"string"!==typeof i?i:t&&i.startsWith("$val:")&&null!==(g=Ai(t,e,i.substring(5).trim()))&&void 0!==g?g:i}async function ni(t,e,i){const g=function(t,e){const i=[];for(let g of t){const t=[];if(g="string"===typeof g?{path:g}:g,Mg(g,t),t.length)throw new Error(t.join("\n"));const{x:A=0,y:s=0,w:n=0,h:I=0,col:C=1,row:a=1,count:o=0}=g;let r=0;for(let l=0;l<a&&(o<=0||r<o);++l)for(let t=0;t<C&&(o<=0||r<o);++t){const C={...g,x:A+t*n,y:s+l*I};i.push(C),null===e||void 0===e||e.push(C),++r}}return i}((0,M.p0)(e)?e:[e],i);return await Promise.all(g.map(e=>{const{path:i,x:g,y:A,w:s=0,h:n=0,dw:I=s,dh:C=n}=e,a=`${i}?x=${g}&y=${A}&w=${s}&h=${n}&dw=${I}&dh=${C}`;return t.images.load_img(a,i,[{type:"crop",...e}])}))}async function Ii(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const g=Array.isArray(e)?e:[e];if(!g.length)return[];const A=await Promise.all(g.map(e=>{const i=t.string(e.i18n);return t.images.load_text(i,e.style)}));return i.push(...A),A}const Ci=class{get_value(t){return t.is_func?t.v():t.v}value_to_state(t){return"function"===typeof t?{is_func:!0,v:t}:{is_func:!1,v:t}}set dirty(t){this._dirty=t}get dirty(){const t=this._dirty;return this._dirty=!1,t}set default_value(t){this._default_value=this.value_to_state(t),0===this._values.length&&(this._dirty=!0)}get default_value(){return this.get_value(this._default_value)}set value(t){this.set((0,M.T9)(0,this._values.length-1),t)}get value(){for(let t=this._values.length-1;t>=0;--t){const e=this._values[t],i=this.get_value(e);if(null!==i&&void 0!==i)return i}return this.default_value}constructor(t){this._dirty=!0,this._default_value=void 0,this._values=[],this._default_value=this.value_to_state(t)}set(t,e){(t=(0,M.RI)(t))<0||(this._values[t]=this.value_to_state(e),t===this._values.length-1&&(this._dirty=!0))}delete(t){(t=(0,M.RI)(t))<0||t>=this._values.length||(this._values.splice(t,1),t===this._values.length&&(this._dirty=!0))}insert(t,e){t=(0,M.RI)(t),this._values.splice(t,0,this.value_to_state(e)),t>=this._values.length-1&&(this._dirty=!0)}pop(){this._values.length&&(this._values.pop(),this._dirty=!0)}push(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._values.push(...e.map(t=>this.value_to_state(t))),this._dirty=!0}unshift(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._values.unshift(...e.map(t=>this.value_to_state(t)))}};var ai=i(7522);function oi(t){const e=t.match(/(<.*>)?(!?)(.*)\((.*)\)/);if(!e)return null;const[,i="",g,A,s]=e.map(t=>null===t||void 0===t?void 0:t.trim());return A?s?{id:i.substring(1,i.length-1),name:A,args:s.split(",").map(t=>t.trim()),enabled:"!"!==g,properties:{}}:{id:i.substring(1,i.length-1),name:A,args:[],enabled:"!"!==g,properties:{}}:null}class ri{constructor(){this._handler_map=new Map([["alert",(t,e)=>alert(e)],["link_to",(t,e)=>window.open(e)],["set_layout",(t,e)=>{let{lf2:i}=t;return e&&i.set_ui(e)}],["push_layout",(t,e)=>{let{lf2:i}=t;return e&&i.push_ui(e)}],["pop_layout",t=>{let{lf2:e}=t;return e.pop_ui()}],["loop_img",t=>t.to_next_img()],["load_data",(t,e)=>{let{lf2:i}=t;i.loading||i.load(e).catch(t=>Mt.X.warn(`[${ri.TAG}::load_data] ${e} not exists, err: ${t}`))}],["broadcast",(t,e)=>{let{lf2:i}=t;return e&&i.broadcast(e)}],["sound",(t,e)=>{let{lf2:i}=t;return e&&i.sounds.play_preset(e)}],["switch_difficulty",t=>{let{lf2:e}=t;return e.switch_difficulty()}],["destory_stage",t=>{let{lf2:e}=t;return e.remove_stage()}],["remove_all_entities",t=>{let{lf2:e}=t;return e.entities.del_all()}],["exit",()=>window.confirm("\u786e\u5b9a\u9000\u51fa?")&&window.close()]])}add(t,e){this._handler_map.set(t,e)}act(t,e){if(Array.isArray(e)||(e=[e]),e.length)for(const i of e){const e=(0,ee.Hl)(i)?oi(i):i;if(!e){Mt.X.warn(`[${ri.TAG}::act] failed to act, expression incorrect, expression: ${i}`);continue}const{name:g,args:A=[]}=e,s=this._handler_map.get(g);s?s(t,...A):Mt.X.warn(`[${ri.TAG}::act] failed to act, handler not found by name, expression: ${i}`)}else Mt.X.warn(`[${ri.TAG}::act] failed to act, actions empty`)}}ri.TAG="Actor";const li=new ri;class di extends D.C{update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t)}}di.TAG="Alignment";class hi{constructor(t){this.node=void 0,this._jid=new G.F,this._style=()=>({}),this.node=t}_load_txt(t){const e=this.node(),i=e.lf2.string(t.i18n);return e.lf2.images.load_text(i,t.style)}_out_of_date(t){return Object.assign(new Error("out_of_date"),{__is_out_of_date_error:!0,textures:t})}set_style(t){return this._style="function"===typeof t?t:()=>t,this}ignore_out_of_date(){return this._jid.max=this._jid.min=this._jid.value=0,this}set_text(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=t.map(t=>({i18n:t,style:this._style()}));return this.load(i,e)}load(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._jid.add();const i=this._jid.value,g=this.node();return new Promise((A,s)=>{if(i!==this._jid.value)return void s(this._out_of_date());const n=t.map(t=>this._load_txt(t));Promise.all(n).then(t=>{if(i!==this._jid.value)throw this._out_of_date(t);if("number"===typeof e){const{w:i,h:s,scale:n}=t[e];g.txts.value=t,g.txt_idx.value=0,g.size.value=[i/n,s/n],A(t)}else g.txts.value=t,A(t)}).catch(s)})}}class ci extends D.C{constructor(){super(...arguments),this._background=X.T.RANDOM_BG,this._text_loader=new hi(()=>this.node).set_style({fill_style:"#9b9bff",font:"15px Arial"}).ignore_out_of_date()}get backgrounds(){var t;const e=(null===(t=this.lf2.datas.backgrounds)||void 0===t?void 0:t.filter(t=>t.id!==X.T.VOID_BG.id))||[];return e.unshift(X.T.RANDOM_BG),e}get background(){return this._background}get text(){return this._background.base.name}on_resume(){super.on_resume(),this.update_text(),this.lf2.callbacks.add(this)}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}update_text(){this._text_loader.set_text([this.text])}on_broadcast(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.T.BuiltIn_Broadcast.SwitchBackground)!==X.T.BuiltIn_Broadcast.SwitchBackground)return;const{backgrounds:t}=this;if(t.length){const e=this.background.id,i=t.findIndex(t=>t.id===e),g=(i+1)%t.length;this._background=t[g]}else this._background=X.T.VOID_BG;this.update_text()}}ci.TAG="BackgroundNameText";class _i{constructor(){var t=this;this._f_list=new Set,this.clear_fn=function(){return t.invoke_and_clear(...arguments)}}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)g&&this._f_list.add(g);return this}del(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)this._f_list.delete(g);return this}invoke(){const t=[];for(const e of this._f_list)t.push(e(...arguments));return t}clear(){return this._f_list.clear(),this}invoke_and_clear(){this.invoke(...arguments),this.clear()}}var ui=i(7708);let pi=function(t){return t.Empty="Empty",t.Fighter="Fighter",t.Team="Team",t.Ready="Ready",t}({});class mi extends D.C{constructor(){super(...arguments),this._unmount_jobs=new _i,this.fsm=(new Wt.A).add({key:pi.Empty,enter:()=>{this.joined=!1,this.team_decided=!1,this.character_decided=!1,this.gpl.state!==vi.Computer&&(this.is_com=!1),this.player.set_random_character("",!0)},on_player_key_down:t=>{this.player_id!=t.player&&this.gpl.handling_com!==this||"a"===t.game_key&&(this.fsm.use(pi.Fighter),this.lf2.sounds.play_preset("join"),t.stop_immediate_propagation())}},{key:pi.Fighter,enter:()=>{this.joined=!0,this.character_decided=!1,this.team_decided=!1},on_player_key_down:t=>{this.player_id!=t.player&&this.gpl.handling_com!==this||("j"===t.game_key&&this.lf2.sounds.play_preset("cancel"),"a"===t.game_key&&this.lf2.sounds.play_preset("join"),"a"===t.game_key?(this.character_decided=!0,"stage_mode"===this.gpl.game_mode?(this.team=X.T.TeamEnum.Team_1,this.fsm.use(pi.Ready)):this.fsm.use(pi.Team),t.stop_immediate_propagation()):"j"===t.game_key?(this.fsm.use(pi.Empty),this.gpl.handling_com===this&&this.gpl.handle_prev_com(),t.stop_immediate_propagation()):this.swtich_fighter(t))}},{key:pi.Team,enter:()=>{this.joined=!0,this.character_decided=!0,this.team_decided=!1},on_player_key_down:t=>{this.player_id!=t.player&&this.gpl.handling_com!==this||("j"===t.game_key&&this.lf2.sounds.play_preset("cancel"),"a"===t.game_key&&this.lf2.sounds.play_preset("join"),"a"===t.game_key?(this.fsm.use(pi.Ready),t.stop_immediate_propagation()):"j"===t.game_key?(this.fsm.use(pi.Fighter),t.stop_immediate_propagation()):this.switch_team(t))}},{key:pi.Ready,enter:()=>{this.joined=!0,this.character_decided=!0,this.team_decided=!0,this.gpl.handling_com===this&&this.gpl.handle_next_com()},on_player_key_down:t=>{this.player_id!=t.player&&this.gpl.handling_com!==this||"j"===t.game_key&&(t.stop_immediate_propagation(),this.lf2.sounds.play_preset("cancel"),"stage_mode"===this.gpl.game_mode?this.fsm.use(pi.Fighter):this.fsm.use(pi.Team))}})}get player_id(){return this.args[0]||""}get player(){return this.lf2.players.get(this.player_id)}get character(){return this.player.character}set character(t){this.player.set_character(t,!0),this.debug("setter:character",t)}get character_decided(){return this.player.character_decided}set character_decided(t){this.player.set_character_decided(t,!0),this.debug("setter:character_decided",t)}get team_decided(){return this.player.team_decided}set team_decided(t){this.player.set_team_decided(t,!0),this.debug("setter:team_decided",t)}get team(){return this.player.team}set team(t){this.player.set_team(t,!0),this.debug("setter:is_com",t)}get joined(){return this.player.joined}set joined(t){this.player.set_joined(t,!0),this.debug("setter:joined",t)}get is_com(){return this.player.is_com}set is_com(t){this.player.set_is_com(t,!0),this.debug("setter:is_com",t)}get gpl(){return this.node.root.find_component(bi)}swtich_fighter(t){if("D"===t.game_key||"U"===t.game_key)this.character="",t.stop_immediate_propagation();else if("L"===t.game_key){var e,i;const{characters:g}=this,A=g.findIndex(t=>t.id===this.character),s=A<=-1?g.length-1:A-1;this.character=null!==(e=null===(i=g[s])||void 0===i?void 0:i.id)&&void 0!==e?e:"",t.stop_immediate_propagation()}else if("R"===t.game_key){var g,A;const{characters:e}=this,i=e.findIndex(t=>t.id===this.character),s=i>=e.length-1?-1:i+1;this.character=null!==(g=null===(A=e[s])||void 0===A?void 0:A.id)&&void 0!==g?g:"",t.stop_immediate_propagation()}}switch_team(t){if("L"===t.game_key){const e=(X.T.Teams.findIndex(t=>t===this.team)+X.T.Teams.length-1)%X.T.Teams.length;this.team=X.T.Teams[e],t.stop_immediate_propagation()}else if("R"===t.game_key){const e=(X.T.Teams.findIndex(t=>t===this.team)+1)%X.T.Teams.length;this.team=X.T.Teams[e],t.stop_immediate_propagation()}}on_start(){this.fsm.callbacks.add({on_state_changed:t=>{var e,i;return this.debug("on_state_changed",`${null===(e=t.prev_state)||void 0===e?void 0:e.key} => ${null===(i=t.state)||void 0===i?void 0:i.key}`)}}),this.fsm.use(pi.Empty)}on_resume(){super.on_resume(),this._unmount_jobs.add(this.lf2.callbacks.add({on_cheat_changed:(t,e)=>{t!==x.U1.LF2_NET||e||this.handle_hidden_character()}})),this.lf2.is_cheat_enabled(x.U1.LF2_NET)||this.handle_hidden_character()}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}get characters(){return this.lf2.is_cheat_enabled(x.U1.LF2_NET)?this.lf2.datas.characters:this.lf2.datas.get_characters_not_in_group(x.hG.Hidden)}on_key_down(t){var e,i;(this.gpl.state===vi.Player&&this.player_id==t.player||this.gpl.state===vi.Computer&&this.gpl.handling_com===this)&&(null===(e=this.fsm.state)||void 0===e||null===(i=e.on_player_key_down)||void 0===i||i.call(e,t))}update(t){this.fsm.update(t)}handle_hidden_character(){const{characters:t,character:e}=this;if(!e)return;t.findIndex(t=>t.id===e)<0&&this.player.set_character("",!0)}}mi.TAG="SlotSelLogic";class fi extends D.C{constructor(){super(...arguments),this._stage=X.T.VOID_STAGE}get show_all(){return this.lf2.is_cheat_enabled(x.U1.GIM_INK)}get stages(){var t;const e=(null===(t=this.lf2.stages)||void 0===t?void 0:t.filter(t=>t.id!==X.T.VOID_STAGE.id))||[];return this.show_all?e:e.filter(t=>t.is_starting)}get stage(){return this._stage}get text(){var t;return this.show_all?this._stage.name:null!==(t=this._stage.starting_name)&&void 0!==t?t:this._stage.name}on_resume(){super.on_resume(),this._stage===X.T.VOID_STAGE&&this.on_broadcast(),this.lf2.callbacks.add(this)}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}on_broadcast(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.T.BuiltIn_Broadcast.SwitchStage)!==X.T.BuiltIn_Broadcast.SwitchStage)return;const{stages:t}=this;if(t.length){const e=this.stage.id,i=t.findIndex(t=>t.id===e),g=(i+1)%t.length;this._stage=t[g]}else this._stage=X.T.VOID_STAGE;Ii(this.lf2,{i18n:this.text,style:{fill_style:"#9b9bff",font:"15px Arial"}}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]})}}fi.TAG="StageNameText";let vi=function(t){return t.Player="Player",t.CountingDown="CountingDown",t.ComNumberSel="ComNumberSel",t.Computer="Computer",t.GameSetting="GameSetting",t}({});class bi extends D.C{constructor(){super(...arguments),this._unmount_jobs=new _i,this._count_down=5e3,this.fsm=(new Wt.A).add({key:vi.Player,enter:()=>{this.handling_com=void 0,this._com_num=0;for(const e of this.coms)e.fsm.use(pi.Empty);for(const e of this.joined_players){var t;(null===(t=e.fsm.state)||void 0===t?void 0:t.key)===pi.Ready&&e.fsm.use(pi.Fighter)}},on_player_key_down:t=>{"j"!==t.game_key||this.joined_slots.length||(this.lf2.pop_ui(),t.stop_immediate_propagation())}},{key:vi.CountingDown,enter:()=>{this._count_down=5e3,this.callbacks.emit("on_countdown")((0,M.mk)(this._count_down/1e3))},update:t=>{const e=(0,M.mk)(this._count_down/1e3);this._count_down-=t;const i=(0,M.mk)(this._count_down/1e3);if(i!==e&&this.callbacks.emit("on_countdown")(i),this._count_down<=0)return this.empty_slots.length?vi.ComNumberSel:vi.GameSetting},on_player_key_down:t=>{const e=this.lf2.players.get(t.player);"j"===t.game_key&&(this._count_down=(0,M.T9)(0,this._count_down-500),this.callbacks.emit("on_countdown")((0,M.mk)(this._count_down/1e3)),t.stop_immediate_propagation()),"a"===t.game_key&&(null===e||void 0===e||!e.joined||null!==e&&void 0!==e&&e.is_com)&&(this.fsm.use(vi.Player),t.stop_immediate_propagation())}},{key:vi.ComNumberSel,enter:()=>{var t;for(const g of this.coms)g.fsm.use(pi.Empty);const e=this.joined_slots.length,i=this.empty_slots.length;"stage_mode"!==this.game_mode&&(this._min_com_num=e<=1?1:0),this._max_com_num=i,null===(t=this.node.find_child("how_many_computer"))||void 0===t||t.set_visible(!0)},leave:()=>{var t;null===(t=this.node.find_child("how_many_computer"))||void 0===t||t.set_visible(!1)},on_player_key_down:t=>{"d"===t.game_key&&(this.fsm.use(vi.Player),t.stop_immediate_propagation())}},{key:vi.Computer,enter:()=>{var t;this.handling_com=this.coms[0],null===(t=this.handling_com)||void 0===t||t.fsm.use(pi.Fighter)}},{key:vi.GameSetting,enter:()=>{var t;this.update_random(),null===(t=this.node.find_child("menu"))||void 0===t||t.set_visible(!0)},leave:()=>{var t;for(const{player:e}of this.slots)null===e||void 0===e||e.set_random_character("",!0);null===(t=this.node.find_child("menu"))||void 0===t||t.set_visible(!1)},on_player_key_down:t=>{"d"===t.game_key&&(this.fsm.use(vi.Player),t.stop_immediate_propagation())}}).use(vi.Player),this._min_com_num=0,this._max_com_num=7,this._com_num=0,this.handling_com=void 0}get game_mode(){return this.args[0]||""}get state(){var t;return null===(t=this.fsm.state)||void 0===t?void 0:t.key}on_resume(){super.on_resume();const t=this.node.search_child("background_row"),e=this.node.search_child("stage_row");"stage_mode"===this.game_mode?(e.set_visible(!0).set_disabled(!1),t.set_visible(!1).set_disabled(!0)):(t.set_visible(!0).set_disabled(!1),e.set_visible(!1).set_disabled(!0)),this._unmount_jobs.add(...function(t,e){const i=[];for(const g of t){const t=e(g);null!==t&&void 0!==t&&i.push(t)}return i}(this.lf2.players.values(),t=>t.callbacks.add({on_joined_changed:()=>this.on_someone_changed(),on_team_decided:()=>this.on_someone_changed()})),this.lf2.callbacks.add({on_broadcast:t=>{t===X.T.BuiltIn_Broadcast.ResetGPL&&this.fsm.use(vi.Player),t===X.T.BuiltIn_Broadcast.UpdateRandom&&this.update_random(),t===X.T.BuiltIn_Broadcast.StartGame&&this.start_game()}}))}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}on_key_down(t){var e,i;null===(e=this.fsm.state)||void 0===e||null===(i=e.on_player_key_down)||void 0===i||i.call(e,t)}on_someone_changed(){let t=0,e=0;for(const[,i]of this.lf2.players)(i.joined||i.is_com)&&(t+=1),i.team_decided&&(e+=1);e&&e===t?this.state===vi.Computer?this.fsm.use(vi.GameSetting):this.state===vi.Player&&this.fsm.use(vi.CountingDown):e<t&&this.state===vi.CountingDown&&this.fsm.use(vi.Player)}update(t){this.fsm.update(t)}update_random(){for(const{player:t}of this.slots){if(null===t||void 0===t||!t.joined||!t.is_random)continue;const{characters:e}=this.lf2.datas.find_group(x.hG.Regular),{character:i}=t,g=i?e.filter(t=>t.id!==i):e;if(g.length<0)continue;const A=this.lf2.random_get(g);A&&t.set_random_character(A.id,!0)}}get min_com_num(){return this._min_com_num}get max_com_num(){return this._max_com_num}get com_num(){return this._com_num}get slots(){return this.node.search_components(mi)}get joined_coms(){return this.node.search_components(mi,t=>t.is_com&&t.joined)}get joined_players(){return this.node.search_components(mi,t=>!t.is_com&&t.joined)}get coms(){return this.node.search_components(mi,t=>t.is_com)}get joined_slots(){return this.node.search_components(mi,t=>t.joined)}get empty_slots(){return this.node.search_components(mi,t=>!t.joined)}set_com_num(t){this._com_num=t;const{empty_slots:e}=this;for(const i of e)i.is_com=!1;for(;t&&e.length;)e.shift().is_com=!0,--t;this._com_num>0?this.fsm.use(vi.Computer):this.fsm.use(vi.GameSetting)}handle_next_com(){const{coms:t}=this,e=this.handling_com?t.indexOf(this.handling_com):-1;this.handling_com=t[e+1],this.handling_com?this.handling_com.fsm.use(pi.Fighter):this.fsm.use(vi.GameSetting)}handle_prev_com(){const{coms:t}=this,e=this.handling_com?t.indexOf(this.handling_com):0;this.handling_com=t[e-1],this.handling_com||this.fsm.use(vi.ComNumberSel)}start_game(){const{far:t,near:e,left:i,right:g}=this.lf2.world.bg;for(const{player:n}of this.slots){if(null===n||void 0===n||!n.joined)continue;const A=this.lf2.datas.find_character(n.character);if(!A)continue;const s=new ui.w(this.world,A);s.name=n.is_com?"com":n.name,s.team=n.team||(0,ft.fA)(),s.facing=this.lf2.random_get([x.pg.Left,x.pg.Right]),n.is_com?s.ctrl=qe.$.inst.get_ctrl(A.id,n.id,s):s.ctrl=new Rt(n.id,s,n.keys),s.position.z=this.lf2.random_in(t,e),s.position.x=this.lf2.random_in(i,g),s.blinking=this.world.begin_blink_time,s.attach()}const A=this.node.root.search_component(fi,t=>t.node.visible&&!t.node.disabled),s=this.node.root.search_component(ci,t=>t.node.visible&&!t.node.disabled);A?this.lf2.change_stage(A.stage):s&&this.lf2.change_bg(s.background),A?this.lf2.push_ui("stage_mode_page"):this.lf2.push_ui("vs_mode_page")}}bi.TAG="GamePrepareLogic";class yi extends D.C{get gpl(){return this.node.root.search_component(bi)}on_click(t){var e;null===(e=this.gpl)||void 0===e||e.set_com_num(this.num(0)||0),t.stop_immediate_propagation()}on_key_down(t){var e;"a"===t.game_key&&this.node.focused&&(null===(e=this.gpl)||void 0===e||e.set_com_num(this.num(0)||0),t.stop_immediate_propagation())}on_show(){var t;null===(t=super.on_show)||void 0===t||t.call(this);const{gpl:e}=this,i=this.num(0)||0;if(!e)return;const{min_com_num:g,max_com_num:A}=e;this.node.disabled=i<g||i>A}}yi.TAG="ComNumButton";var wi=i(4981);class ki extends D.C{constructor(){super(...arguments),this.score_board=void 0,this.time=0}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.score_board=this.node.find_child("score_board");const e=this.lf2.random_get(this.lf2.datas.backgrounds);e&&this.lf2.change_bg(e);const i=this.lf2.datas.get_characters_of_group(x.hG.Regular),g=(0,wi.RI)(this.lf2.random_in(2,8)),A=[];for(let I=0;I<g;I++)A.push((0,ft.fA)());switch(g){case 4:this.lf2.random_take([0,1])&&(A.fill(x.Tc.TeamEnum.Team_1,0,2),A.fill(x.Tc.TeamEnum.Team_2,2,4));break;case 6:switch(this.lf2.random_take([0,1,2])){case 1:A.fill(x.Tc.TeamEnum.Team_1,0,3),A.fill(x.Tc.TeamEnum.Team_2,3,6);break;case 2:A.fill(x.Tc.TeamEnum.Team_1,0,2),A.fill(x.Tc.TeamEnum.Team_2,2,4),A.fill(x.Tc.TeamEnum.Team_3,4,6)}break;case 8:switch(this.lf2.random_take([0,1,2])){case 1:A.fill(x.Tc.TeamEnum.Team_1,0,4),A.fill(x.Tc.TeamEnum.Team_2,4,8);break;case 2:A.fill(x.Tc.TeamEnum.Team_1,0,2),A.fill(x.Tc.TeamEnum.Team_2,2,4),A.fill(x.Tc.TeamEnum.Team_3,4,6),A.fill(x.Tc.TeamEnum.Team_4,6,8)}}const s=Array.from(this.lf2.players.values());for(let I=0;I<g;I++){var n;const t=s[I];if(!t)continue;const e=this.lf2.random_take(i);if(!e)continue;const g=qe.$.inst.get_entity_creator(e.type);if(!g)return;const C=g(this.world,e);C.name="com",C.team=null!==(n=A.shift())&&void 0!==n?n:(0,ft.fA)(),C.facing=this.lf2.random_get([1,-1]),C.callbacks.add(this),C.key_role=!0;const{far:a,near:o,left:r,right:l}=this.lf2.world.bg;C.ctrl=qe.$.inst.get_ctrl(e.id,t.id,C),C.position.z=this.lf2.random_in(a,o),C.position.x=this.lf2.random_in(r,l),C.blinking=this.world.begin_blink_time,C.attach()}}on_stop(){var t;null===(t=super.on_stop)||void 0===t||t.call(this);for(const[,e]of this.lf2.player_characters)e.callbacks.del(this)}on_dead(){const t={};for(const[,i]of this.world.slot_fighters)t[i.team]=0;for(const i of this.world.entities)(0,Bt.vP)(i)&&i.hp>0&&void 0!==t[i.team]&&++t[i.team];let e=0;(0,he.R)(t,(t,i)=>{i&&++e}),e>1||(this.lf2.sounds.play_preset("end"),this.score_board.visible=!0)}on_show(){}}ki.TAG="DemoModeLogic";class xi extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style({fill_style:"#9b9bff",font:"15px Arial"}).ignore_out_of_date()}get text(){return this.lf2.string(X.T.DifficultyLabels[this.lf2.difficulty])}on_resume(){super.on_resume(),this.lf2.callbacks.add(this),this.on_difficulty_changed()}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}on_difficulty_changed(){this._text_loader.set_text([this.text])}}xi.TAG="difficulty_text";var ji=i(9785);class Gi{constructor(){this._times=1,this._count=0}get count(){return this._count}set count(t){this.set_count(t)}set_count(t){return this._count=(0,M.qE)((0,M.RI)(t),0,this.times),this}get times(){return this._times}set times(t){this.set_times(t)}set_times(t){return this._times=(0,M.qE)((0,M.RI)(t),0,Number.MAX_SAFE_INTEGER),this}set(t,e){return this.times=e,this.count=t,this}reset(){return this.count=0,this}continue(){return this.times<=0||!(this.count>=this.times)&&(++this.count,!0)}done(){return this.times>0&&this.count>=this.times}}const{max:Ti,floor:Di}=Math;class Ei{constructor(){this.__debugging=void 0,this.debug=void 0,this.warn=void 0,this.log=void 0,this._value=0,this._time=0,this._duration=0,this._direction=1,this._fill_mode=1,this.loop=new Gi,(0,Nt.Q)(this)}get fill_mode(){return this._fill_mode}set fill_mode(t){this.set_fill_mode(t)}set_fill_mode(t){return this._fill_mode=1==t||0==t?t:this._fill_mode,this}get count(){return this.loop.count}set count(t){this.loop.count=t}set_count(t){return this.loop.set_count(t),this}get times(){return this.loop.times}set times(t){this.loop.times=t}set_times(t){return this.loop.set_times(t),this}get direction(){return this._direction}set direction(t){this.set_direction(t)}set_direction(t){return this._direction=-1===t||1===t?t:this._direction,this}get reverse(){return-1===this.direction}set reverse(t){this.set_reverse(t)}set_reverse(t){return this.direction=t?-1:1,this}get duration(){return this._duration}set duration(t){this.set_duration(t)}set_duration(t){return this._duration=Ti(0,t),this._time=(0,ji.q)(this._time,0,this._duration),this}get value(){return this._value}set value(t){this.set_value(t)}set_value(t){return this._value=t,this}get time(){return this._time}set time(t){this.set_time(t)}set_time(t){return this._time=(0,ji.q)(t,0,this.duration),this}get done(){const{duration:t}=this;return t<=0||this.loop.done()}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.reverse;return this.loop.reset(),this.reverse=t,this.time=t?this.duration:0,this}end(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.reverse;return this.count=Ti(0,this.times),this.reverse=t,this.time=t?0:this.duration,this}calc(){return this.value=0===this.duration?this.value:this.time/this.duration,this}update(t){if(this.done)return this;const{duration:e,direction:i}=this;let g=this.time+i*t;if(g<=0){do{this.loop.continue(),g+=e}while(g<=0);this.done&&this._fill_mode&&(g=0)}else if(g>=e){do{this.loop.continue(),g-=e}while(g>=e);this.done&&this._fill_mode&&(g=e)}return this.time=(0,ji.q)(g,0,e),this.debug("update",`time = ${this.time}, dt = ${t}`),this.calc(),this}}Ei.TAG="Animation";class Ri extends Ei{constructor(t){super(),this.value=t}calc(){return this}}class Mi extends Ei{get val_1(){return this._val_1}set val_1(t){this._val_1=t}set_val_1(t){return this._val_1=t,this}get val_2(){return this._val_2}set val_2(t){this._val_2=t}set_val_2(t){return this._val_2=t,this}get ease_method(){return this._ease_method}set ease_method(t){this._ease_method=t}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._val_1=0,this._val_2=1,this._ease_method=M.ue,this.val_1=t,this.val_2=e}set(t,e){return this._val_1=(0,M.AK)(t)?t:this._val_1,this._val_2=(0,M.AK)(e)?e:this._val_2,this}set_ease_method(t){return this._ease_method=t,this}calc(){const{done:t,time:e,duration:i,val_1:g,val_2:A,reverse:s}=this;if(g===A)return this.value=g,this;if(t)return this.value=s?g:A,this;const n=(0,M.qE)(e/i,0,1);return this.value=this._ease_method(n,g,A),this}}const Ni=Mi;class Bi extends Ei{get curr_anim(){return this._curr_anim}constructor(){super(),this._curr_anim=null,this.anims=[];for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.anims=e,this.duration=e.reduce((t,e)=>t+e.duration,0),this.start()}start(t){return super.start(t),this._curr_anim=this.anims[t?this.anims.length-1:0]||null,this}end(t){return super.end(t),this._curr_anim=this.anims[t?0:this.anims.length-1]||null,this}calc(){let{time:t,reverse:e,duration:i,anims:g}=this;if(!this.anims.length)return this;if(t>=i){const t=this.anims[this.anims.length-1];return this._curr_anim=t,t.time=t.duration,this.value=t.calc().value,this}if(t<=0){const t=this.anims[0];return this._curr_anim=t,t.time=0,this.value=t.calc().value,this}const A=g.length;if(e){let e=A-1;for(;e>=0;--e){this.debug("calc",`anim idx=${e}`);const A=g[e];if(i-=A.duration,t>i){A.time=t-i,this.value=A.calc().value,this._curr_anim=A;break}}this.debug("calc",`anim idx=${e}, value=${g[e].value}`)}else{let e=0;for(;e<A;++e){this.debug("calc",`anim idx=${e}`);const i=g[e];if(i.duration>t){i.time=t,this.value=i.calc().value,this._curr_anim=i;break}t-=i.duration}this.debug("calc",`anim idx=${e}, value=${g[e].value}`)}return this}}Bi.TAG="Sequence";class Li extends Ei{set_offset(t){return this.offset=t,this}set_scale(t){return this.scale=t,this}get bottom(){return this._b}set bottom(t){(0,M.AK)(t)&&(this._b=t)}get height(){return this._h}set height(t){(0,M.AK)(t)&&(this._h=t)}get scale(){return this._s}set scale(t){(0,M.AK)(t)&&(this._s=t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(),this.offset=0,this._b=0,this._h=1,this._s=1,this.duration=Number.MAX_SAFE_INTEGER,(0,M.AK)(t)&&(this._b=t),(0,M.AK)(e)&&(this._h=e),(0,M.AK)(i)&&(this._s=i)}set(t,e,i){return(0,M.AK)(t)&&(this._b=t),(0,M.AK)(e)&&(this._h=e),(0,M.AK)(i)&&(this._s=i),this.calc(),this}calc(){return this.value=this.method(this.offset+this.time*this._s),this}}class Si extends Li{constructor(){super(...arguments),this.method=t=>this.height*((0,wi.F8)(2*t*wi.PI/1e3)+1)/2+this.bottom}}class Zi extends D.C{get align(){return null}}Zi.TAG="FlexItem";class Yi extends D.C{get direction(){var t;return null!==(t=this.props.str("direction",["row","column"]))&&void 0!==t?t:"row"}get gap(){var t;return null!==(t=this.props.num("gap"))&&void 0!==t?t:0}get row_gap(){var t;return null!==(t=this.props.num("row_gap"))&&void 0!==t?t:this.gap}get col_gap(){var t;return null!==(t=this.props.num("col_gap"))&&void 0!==t?t:this.gap}get align(){var t;return null!==(t=this.props.str("align",["start","center","end","stretch"]))&&void 0!==t?t:"start"}get fit(){return!!this.props.bool("fit")}get fit_w(){var t;return null!==(t=this.props.bool("fit_w"))&&void 0!==t?t:this.fit}get fit_h(){var t;return null!==(t=this.props.bool("fit_h"))&&void 0!==t?t:this.fit}get padding(){return this.props.nums("padding",4)}update(t){const{direction:e,col_gap:i,row_gap:g,align:A,fit_h:s,fit_w:n,padding:[I,C,a,o]}=this;let r=0,l=0;const d=this.node.cross,{children:h}=this.node;if(n||s){let t=0,A=0;const r=h.length;for(let I=0;I<r;++I){const C=h[I];if(!C.self_visible)continue;const[a,o]=C.size.value;n&&"row"===e?t+=a+(I<r-1?g:0):n&&"column"===e&&(t=(0,M.T9)(a,t)),s&&"column"===e?A+=o+(I<r-1?i:0):s&&"row"===e&&(A=(0,M.T9)(o,A))}n&&(t+=o+C,this.node.size.value=[t,this.node.size.value[1]]),s&&(A+=I+a,this.node.size.value=[this.node.size.value[0],A])}const[c,_]=this.node.size.value;for(const u of this.node.children){if(!u.self_visible)continue;const[t,s]=u.size.value,{cross:n}=u,[h,p,m]=u.pos.value,f=u.find_component(Zi,t=>t.enabled),v=(null===f||void 0===f?void 0:f.align)||A;if("row"===e){const e=o+d.left+(r-n.left);switch(v){case"start":u.pos.value=[e,I+d.top-n.top,m];break;case"center":u.pos.value=[e,d.mid_y-n.mid_y,m];break;case"end":u.pos.value=[e,d.bottom-n.bottom-a,m];break;case"stretch":u.pos.value=[e,d.top-n.top,m],u.size.value=[t,_]}r+=t+g}else if("column"===e){const t=I+d.top+(l-n.top);switch(v){case"start":u.pos.value=[o+d.left-n.left,t,m];break;case"center":u.pos.value=[d.mid_x-n.mid_x,t,m];break;case"end":u.pos.value=[d.right-n.right-C,t,m];break;case"stretch":u.pos.value=[o+d.left-n.left,t,m],u.size.value=[c,s]}l+=s+i}}}}Yi.TAG="Flex";class Fi extends Yi{constructor(){super(...arguments),this._anim=new Bi(new Mi(0,0).set_duration(250),new Si(-1,2,.5).set_duration(250),new Mi(1,1).set_duration(250))}get anim(){return this._anim}get click_test(){return!0===this.props.bool("click_test")}on_start(){var t,e,i;null===(t=super.on_start)||void 0===t||t.call(this);const g=null!==(e=this.props.bool("open"))&&void 0!==e?e:this.bool(1);(null!==(i=this.props.bool("end"))&&void 0!==i?i:this.bool(2))?this._anim.end(g):this._anim.start(g)}get open(){return this._anim.reverse}set open(t){this._anim.start(t)}get w(){return this.node.root.size.value[0]}get h(){return this.node.root.size.value[1]}on_click(t){var e;null===(e=super.on_click)||void 0===e||e.call(this,t),this.click_test&&(this.open=!this.open,Mt.X.debug(`[${Fi.TAG}]open=${this.open}`))}on_stop(){var t;null===(t=super.on_stop)||void 0===t||t.call(this),this.callbacks.clear()}update(t){super.update(t),this._anim.done||(this._anim.update(t),this.update_children(),this._anim.done&&this.callbacks.emit("on_anim_end")(this))}on_show(){var t;null===(t=super.on_show)||void 0===t||t.call(this),this._anim.calc(),this.update_children()}update_children(){const{value:t}=this._anim,{children:e}=this.node,i=e.length;for(let g=0;g<i;g++){const i=e[g];i&&("column"===this.direction?i.scale.value=[1,t,1]:i.scale.value=[t,1,1])}}}Fi.TAG="Jalousie";class Wi extends D.C{constructor(){super(...arguments),this.jalousie=void 0,this.txt_node=void 0,this.jalousie_cbs={on_anim_end:t=>this.on_jalousie_anim_end(t)}}on_start(){var t,e;null===(t=super.on_start)||void 0===t||t.call(this),this.jalousie=this.node.search_component(Fi),null===(e=this.jalousie)||void 0===e||e.callbacks.add(this.jalousie_cbs),this.txt_node=this.node.search_child("txt_b")}on_resume(){var t;super.on_resume(),this.lf2.sounds.stop_bgm(),null!==(t=this.jalousie)&&void 0!==t&&t.anim.done&&(this.jalousie.open=!this.jalousie.open)}on_stop(){var t,e;null===(t=super.on_stop)||void 0===t||t.call(this),null===(e=this.jalousie)||void 0===e||e.callbacks.del(this.jalousie_cbs)}on_click(t){var e;null!==(e=this.jalousie)&&void 0!==e&&e.anim.done&&(this.jalousie.open=!this.jalousie.open)}on_key_down(t){var e;null!==(e=this.jalousie)&&void 0!==e&&e.anim.done&&(this.jalousie.open=!this.jalousie.open)}on_jalousie_anim_end(t){if(!t.open){if(this.txt_node){const t=this.txt_node.txt_idx.value++;t<this.txt_node.txts.value.length-1?0===t&&this.lf2.difficulty>=x.sL.Difficult?this.txt_node.txt_idx.value=t+2:this.txt_node.txt_idx.value=t+1:this.lf2.ui_stacks.length>1?this.lf2.pop_ui(!0,(t,e)=>0===e):(this.lf2.set_ui("main_page"),this.lf2.sounds.play_bgm("bgm/main.wma.mp3"))}t.open=!0}}}Wi.TAG="EndingPageLogic";class Oi extends D.C{constructor(){super(...arguments),this.anim=new Mi(0,1).set_duration(1e3)}on_start(){var t,e;null===(t=super.on_start)||void 0===t||t.call(this),this.anim.set_duration(null!==(e=this.num(0))&&void 0!==e?e:0).set_val_1(this.node.opacity)}update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t),this.anim.update(t),this.node.opacity=this.anim.value}}Oi.TAG="FadeInOpacity";class Ui{constructor(t){this.parts=["","","",""],this.parts[2]=t.TAG;for(var e=arguments.length,i=new Array(e>1?e-1:0),g=1;g<e;g++)i[g-1]=arguments[g];this.parts[3]=`(${i})`}set_enabled(t){return this.parts[1]=t?"":"!",this}set_id(t){return this.parts[0]=t.trim()?`<${t.trim()}>`:"",this}toString(){return this.done()}done(){return this.parts.join("")}}class zi extends D.C{constructor(){super(...arguments),this.anim=new Bi}static expression(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Ui(this,null!==t&&void 0!==t?t:"",null!==e&&void 0!==e?e:"")}start(t){this.enabled=!0,this.anim.start(t)}on_start(){var t,e,i;null===(t=super.on_start)||void 0===t||t.call(this),this.anim=new Bi(new Ri(this.node.opacity).set_duration(null!==(e=this.num(1))&&void 0!==e?e:0),new Mi(this.node.opacity,0).set_duration(null!==(i=this.num(0))&&void 0!==i?i:1e3).set_val_1(this.node.opacity).set_val_2(0))}update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t),this.anim.update(t),this.node.opacity=this.anim.value,this.debug("update",`opacity = ${this.anim.value}`),this.anim.done&&(this.enabled=!1)}}zi.TAG="FadeOutOpacity";class Vi extends D.C{get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get player(){return this.lf2.players.get(this.player_id)}get head(){var t,e;const i=null===(t=this.player)||void 0===t?void 0:t.character;if(!i)return X.T.BuiltIn_Imgs.RFACE;const g=null===(e=this.lf2.datas.find_character(i))||void 0===e?void 0:e.base.head;return null!==g&&void 0!==g?g:X.T.BuiltIn_Imgs.RFACE}get countdown_node(){return this.node.find_child("countdown_text")}get hints_node(){return this.node.find_child("hints")}get gpl(){return this.node.root.find_component(bi)}constructor(){super(...arguments),this._opacity=new Si(.65,1,6),this._mesh_head=void 0,this._unmount_jobs=new _i,this._player_callbacks={on_joined_changed:()=>this.handle_changed(),on_character_changed:()=>this.handle_changed(),on_random_character_changed:()=>this.handle_changed()},this._mesh_head=new Mt.X.SpriteNode(this.lf2).set_center(.5,.5).set_position(this.node.w/2,-this.node.h/2,.1).set_name("head").apply()}on_resume(){var t,e,i;super.on_resume(),this.node.renderer.sprite.add(this._mesh_head),null===(t=this.player)||void 0===t||t.callbacks.add(this._player_callbacks),this._unmount_jobs.add(()=>this.node.renderer.sprite.del(this._mesh_head),null===(e=this.gpl)||void 0===e?void 0:e.callbacks.add({on_countdown:t=>{(0,M.Tq)(t,1,5)&&(this.countdown_node.txt_idx.value=t-1)}}),null===(i=this.gpl)||void 0===i?void 0:i.fsm.callbacks.add({on_state_changed:()=>this.handle_changed()}))}on_pause(){var t;super.on_pause(),null===(t=this.player)||void 0===t||t.callbacks.del(this._player_callbacks),this._unmount_jobs.invoke_and_clear()}handle_changed(){this.lf2.images.p_create_pic_by_img_key(this.head).then(t=>{this.node.txts.value,this._mesh_head.set_info(t).apply()})}update(t){var e;switch(this._opacity.update(t),this.hints_node&&(this.hints_node.opacity=this._opacity.value),null===(e=this.gpl)||void 0===e?void 0:e.state){case vi.Player:this.hints_node.visible=!this.player.joined,this._mesh_head.visible=this.player.joined,this.countdown_node.visible=!1;break;case vi.CountingDown:this.hints_node.visible=!1,this._mesh_head.visible=this.player.joined,this.countdown_node.visible=!this.player.joined;break;case vi.ComNumberSel:this._mesh_head.visible=this.player.joined,this.hints_node.visible=!1,this.countdown_node.visible=!1;break;case vi.Computer:this.hints_node.visible=!this.player.joined&&this.player.is_com,this._mesh_head.visible=this.player.joined,this.countdown_node.visible=!1;break;case vi.GameSetting:this._mesh_head.visible=this.player.joined,this.hints_node.visible=!1,this.countdown_node.visible=!1}}}Vi.TAG="FighterHead";class Hi extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style(()=>({fill_style:this.is_com?"pink":"white",font:"14px Arial"})).ignore_out_of_date(),this._opacity=new Si(.65,1,6),this._unmount_jobs=new _i}get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get player(){return this.lf2.players.get(this.player_id)}get decided(){return!!this.player.character_decided}get text(){var t;const e=this.player.character,i=e?this.lf2.datas.find_character(e):void 0;return null!==(t=null===i||void 0===i?void 0:i.base.name)&&void 0!==t?t:this.lf2.string("Random")}get joined(){return!0===this.player.joined}get is_com(){return!0===this.player.is_com}on_resume(){super.on_resume(),this._unmount_jobs.add(this.player.callbacks.add({on_is_com_changed:()=>this.handle_changed(),on_joined_changed:()=>this.handle_changed(),on_character_changed:()=>this.handle_changed(),on_random_character_changed:()=>this.handle_changed()})),this.handle_changed()}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}handle_changed(){this._text_loader.set_text([this.text]),this.node.set_visible(this.joined)}update(t){this._opacity.update(t),this.node.opacity=this.decided?1:this._opacity.value}}Hi.TAG="FighterName";class Ki extends D.C{on_resume(){}update(t){const{children:e}=this.node;let i=0,g=0,A=0,s=0;for(const a of e){if(!a.visible)continue;const{left:t,right:e,top:n,bottom:I}=a.rect;i=(0,M.jk)(t,i),A=(0,M.T9)(e,A),g=(0,M.jk)(n,g),s=(0,M.T9)(I,s)}const n=A-i,I=s-g,[,,C]=this.node.center.value;this.node.size.value=[n,I],this.node.center.value=[n?-i/n:0,I?-g/I:0,C]}}Ki.TAG="FitChildren";class Xi extends D.C{update(t){let e=0,i=0;for(const A of this.node.children){if(!A.visible)continue;const[,t,g]=A.pos.value;A.pos.value=[e,t,g],e+=A.w,i=(0,M.T9)(i,A.h)}this.node.size.value=[e,i];const g=this.node.parent;g&&(this.node.pos.value=[(g.w-e)/2,(g.h-i)/2,this.node.pos.value[2]])}}Xi.TAG="HorizontalLayout";var Qi=i(194);class Pi extends D.C{constructor(){super(...arguments),this.anim=new Mi(0,1).set_duration(1e3).set_ease_method(Qi.A).set_times(0).set_fill_mode(1)}on_start(){const t=this.num(0)||0,e=this.num(1)||this.node.data.img.length,i=this.num(2)||this.anim.duration;this.anim.set(t,e).set_duration(i)}stop(){this.anim.set_times(1).set_count(0)}start(){this.enabled||(this.enabled=!0),this.anim.set_times(0).set_count(0)}update(t){if(!this.node.data.img.length)return void(this.enabled=!1);this.anim.update(t);const e=(0,wi.RI)(this.anim.value);this.node.img_idx.value=e,this.anim.done&&(this.enabled=!1)}}Pi.TAG="ImgLoop";class Ji extends D.C{constructor(){super(...arguments),this._anim=new Bi}get loop(){return this._anim.loop}get done(){return this._anim.done}get anim(){return this._anim}start(t){this.anim.start(t),this.node.opacity=this._anim.value,this.enabled=!0}stop(t){this.anim.end(t),this.node.opacity=this._anim.value,this.enabled=!1}on_start(){var t,e,i;null===(t=super.on_start)||void 0===t||t.call(this);const g=this.args.length,A=[];for(let C=0;C<g-2;C+=2){var s;const t=this.num(2+C)||0,e=this.num(2+C+1)||0,i=null!==(s=this.num(2+C-2))&&void 0!==s?s:t;A.push(i===t?new Ri(t).set_duration(e):new Mi(i,t).set_duration(e).set_ease_method(Qi.A))}this._anim=new Bi(...A).set_fill_mode(1);const n=null===(e=this.bool(0))||void 0===e||e,I=null!==(i=this.bool(1))&&void 0!==i&&i;n?this._anim.start(I):this._anim.end(I)}update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t),this._anim.done||(this.node.opacity=this._anim.update(t).value),this._anim.done&&this.set_enabled(!1),this._anim.done}}Ji.TAG="OpacityAnimation";class qi extends D.C{constructor(){super(...arguments),this.seq_anim=new Bi,this.values=new Map}start(t){this.enabled=!0,this.seq_anim.start(t)}get is_end(){return this.seq_anim.done}on_start(){var t,e,i;null===(t=super.on_start)||void 0===t||t.call(this);const g=this.args.length,A=[];for(let I=0;I<g-2;I+=2){const t=this.nums(I+2,3)||this.node.pos.value,e=this.num(I+3)||0,i=0==I?t:this.nums(I,3)||t,g=t.join()===i.join()?new Ri(0).set_duration(e):new Mi(0,1).set_duration(e).set_ease_method(Qi.A);this.values.set(g,[i,[t[0]-i[0],t[1]-i[1],t[2]-i[2]]]),A.push(g)}this.seq_anim=new Bi(...A).set_fill_mode(1);const s=null===(e=this.bool(0))||void 0===e||e,n=null!==(i=this.bool(1))&&void 0!==i&&i;s?this.seq_anim.start(n):this.seq_anim.end(n)}update(t){var e;if(null===(e=super.update)||void 0===e||e.call(this,t),this.seq_anim.done)this.set_enabled(!1);else{this.seq_anim.update(t);const e=this.values.get(this.seq_anim.curr_anim);if(!e)return;const{value:i}=this.seq_anim;this.node.pos.value=[e[0][0]+e[1][0]*i,e[0][1]+e[1][1]*i,e[0][2]+e[1][2]*i]}}}qi.TAG="PositionAnimation";class $i extends D.C{constructor(){super(...arguments),this.seq_anim=new Bi,this.values=new Map}start(t){this.seq_anim.start(t),this.enabled=!0}get is_end(){return this.seq_anim.done}on_start(){var t,e,i;null===(t=super.on_start)||void 0===t||t.call(this);const g=this.args.length,A=[];for(let I=0;I<g-2;I+=2){const t=this.nums(I+2,3)||this.node.scale.value,e=this.num(I+3)||0,i=0==I?t:this.nums(I,3)||t,g=t.join()===i.join()?new Ri(0).set_duration(e):new Mi(0,1).set_duration(e).set_ease_method(Qi.A);this.values.set(g,[i,[t[0]-i[0],t[1]-i[1],t[2]-i[2]]]),A.push(g)}this.seq_anim=new Bi(...A).set_fill_mode(1);const s=null===(e=this.bool(0))||void 0===e||e,n=null!==(i=this.bool(1))&&void 0!==i&&i;s?this.seq_anim.start(n):this.seq_anim.end(n)}update(t){var e;if(null===(e=super.update)||void 0===e||e.call(this,t),this.seq_anim.done)this.set_enabled(!1);else{this.seq_anim.update(t);const e=this.values.get(this.seq_anim.curr_anim);if(!e)return;const{value:i}=this.seq_anim;this.node.set_scale(e[0][0]+e[1][0]*i,e[0][1]+e[1][1]*i,e[0][2]+e[1][2]*i)}}}$i.TAG="ScaleAnimation";class tg extends D.C{constructor(){super(...arguments),this.anim=new Si(0,1,1)}on_start(){var t,e,i,g,A,s;null===(t=super.on_start)||void 0===t||t.call(this),this.anim.set(null!==(e=this.num(0))&&void 0!==e?e:0,null!==(i=this.num(1))&&void 0!==i?i:1,null!==(g=this.num(2))&&void 0!==g?g:1).set_offset(null!==(A=this.num(4))&&void 0!==A?A:0).set_duration(null!==(s=this.num(3))&&void 0!==s?s:Number.MAX_SAFE_INTEGER)}update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t),this.anim.update(t),this.node.opacity=this.anim.value,this.anim.done&&this.set_enabled(!1)}}tg.TAG="SineOpacity";var eg=function(t){return t.TapHints="TapHints",t.Introduction="Introduction",t.GoToEntry="GoToEntry",t.End="End",t}(eg||{});class ig extends D.C{get entry_name(){return this.args[0]||""}constructor(){super(...arguments),this.fsm=void 0,this.tap_to_launch=void 0,this.sound_warning=void 0,this.yeonface=void 0,this.bearface=void 0,this.long_text=void 0,this._prel_loaded=!1,this.lf2_cb={on_prel_loaded:()=>{this.lf2.sounds.load("bgm/main.wma.mp3","bgm/main.wma.mp3").catch(t=>{Mt.X.warn(t)}).then(()=>{this.on_prel_loaded()})}},this.fsm=(new Wt.A).add({key:eg.TapHints,enter:()=>{this.node.search_component(Pi,"loading",t=>{t.anim.set_times(this._prel_loaded?1:0).set_count(0)}),this.tap_to_launch.find_component(tg).enabled=!0,this.sound_warning.find_component(tg).enabled=!0,this.tap_to_launch.find_component(zi).enabled=!1,this.sound_warning.find_component(zi).enabled=!1},leave:()=>{this.tap_to_launch.find_component(tg).enabled=!1,this.sound_warning.find_component(tg).enabled=!1,this.tap_to_launch.find_component(zi).enabled=!0,this.sound_warning.find_component(zi).enabled=!0}},{key:eg.Introduction,enter:()=>{Mt.X.Timeout.add(()=>this.lf2.sounds.play("builtin_data/launch/093.wav.mp3"),1e3),this.yeonface.find_component($i,"scale_in",t=>{t.start(!1)}),this.yeonface.find_component(qi,"move_in",t=>{t.start(!1)}),this.yeonface.find_component(Ji,void 0,t=>{t.start(!1)}),this.bearface.find_component($i,"scale_in",t=>{t.start(!1)}),this.bearface.find_component(qi,"move_in",t=>{t.start(!1)}),this.bearface.find_component(Ji,void 0,t=>{t.start(!1)}),this.long_text.find_component(qi,"move_in",t=>{t.start(!1)}),this.long_text.find_component(Ji,"opacity",t=>{t.start(!1)})},leave:()=>{this.yeonface.find_component(Ji,void 0,t=>{t.start(!0),t.update(t.anim.anims[t.anim.anims.length-1].duration)}),this.bearface.find_component(Ji,void 0,t=>{t.start(!0),t.update(t.anim.anims[t.anim.anims.length-1].duration)}),this.yeonface.find_component($i,"scale_out",t=>{t.start(!1)}),this.bearface.find_component($i,"scale_out",t=>{t.start(!1)}),this.long_text.find_component(Ji,void 0,t=>{t.start(!0),t.update(t.anim.anims[t.anim.anims.length-1].duration)})},update:t=>{if(this._prel_loaded&&this.long_text.find_component(Ji).done)return eg.GoToEntry}},{key:eg.GoToEntry,enter:()=>{this.lf2.sounds.play_bgm("bgm/main.wma.mp3")},update:t=>{if(this.long_text.find_component(Ji).done)return this.lf2.set_ui(this.entry_name),eg.End}},{key:eg.End,update:t=>{}})}on_prel_loaded(){this._prel_loaded=!0,this.node.search_component(Pi,"loading",t=>{t.anim.set_times(4).set_count(0)})}on_start(){this._prel_loaded=this.lf2.uiinfos_loaded,this.lf2.sounds.load("builtin_data/launch/093.wav.mp3","builtin_data/launch/093.wav.mp3"),this.lf2.callbacks.add(this.lf2_cb)}on_stop(){var t;null===(t=super.on_stop)||void 0===t||t.call(this),this.lf2.callbacks.del(this.lf2_cb)}on_resume(){super.on_resume(),this.bearface=this.node.find_child("bearface"),this.yeonface=this.node.find_child("yeonface"),this.tap_to_launch=this.node.find_child("tap_to_launch"),this.sound_warning=this.node.find_child("sound_warning"),this.long_text=this.node.find_child("long_text"),this.fsm.use(eg.TapHints)}on_key_down(t){this.debug("on_key_down",t),this.on_tap(),t.stop_immediate_propagation()}on_click(t){this.debug("on_click"),this.on_tap(),t.stop_immediate_propagation()}on_tap(){var t;if((null===(t=this.fsm.state)||void 0===t?void 0:t.key)!==eg.TapHints)return!0;this.fsm.use(eg.Introduction)}update(t){this.fsm.update(t)}}ig.TAG="LaunchPage";class gg extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style(()=>this.node.style).ignore_out_of_date(),this.fadeout=void 0}get fade_out_duration(){var t;return null!==(t=this.num(1))&&void 0!==t?t:0}get fade_out_delay(){var t;return null!==(t=this.num(2))&&void 0!==t?t:0}init(){if(super.init(...arguments),this.fade_out_duration){const t=zi.expression(this.fade_out_duration,this.fade_out_delay).done();this.fadeout=Eg.create(this.node,t)[0],this.node.add_components(this.fadeout)}return this}on_resume(){super.on_resume(),this.lf2.callbacks.add(this)}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}on_loading_end(){const t=this.str(0);t&&this.lf2.set_ui(t)}on_loading_content(t,e){var i;null===(i=this.fadeout)||void 0===i||i.start();const g=e?`loading: ${t}(${e}%)`:` loading: ${t}`;this._text_loader.set_text([g])}}gg.TAG="LoadingContentText";class Ag extends D.C{constructor(){super(...arguments),this.anim=new Ni(0,1).set_duration(150),this._p=null}on_start(){var t,e,i,g;null===(t=super.on_start)||void 0===t||t.call(this),this.anim.set(null!==(e=this.num(0))&&void 0!==e?e:0,null!==(i=this.num(1))&&void 0!==i?i:1).set_duration(null!==(g=this.num(2))&&void 0!==g?g:255).set_reverse(!1),this._p=this.num(3)}update(t){const e=this._p?this.node.parent:this.node,i=1!==e.pointer_on_me&&!e.focused;this.anim.reverse!==i&&(this.anim.done?this.anim.start(i):this.anim.reverse=i),this.node.opacity=this.anim.update(t).value}}Ag.TAG="OpacityHover";class sg extends D.C{get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get player_info(){return this.lf2.players.get(this.player_id)}on_resume(){super.on_resume(),this.player_info.callbacks.add(this),this.on_ctrl_changed()}on_click(t){this.node.focused=!0,t.stop_immediate_propagation(),this.node.to_next_img();const e=this.node.img_idx.value%5;this.player_info.set_ctrl(e,!0).save()}on_ctrl_changed(){this.node.img_idx.value=this.player_info.ctrl%this.node.imgs.value.length}}sg.TAG="PlayerCtrlType";class ng extends D.C{constructor(){super(...arguments),this._hp_lost=0,this._mp_usage=0,this._lose=!1,this._unmount_job=new _i}get hp_lost(){return this._hp_lost}get mp_usage(){return this._mp_usage}get lose(){return this._lose}get player_id(){return this.args[0]||""}get character(){return this.lf2.player_characters.get(this.player_id)}on_resume(){var t;super.on_resume(),this.node.visible=!this.world.slot_fighters.size||!!this.character,null===(t=this.character)||void 0===t||t.callbacks.add({on_hp_changed:(t,e,i)=>{e<i&&(this._hp_lost+=i-e)},on_mp_changed:(t,e,i)=>{e<i&&(this._mp_usage+=i-e)},on_dead:t=>{if(t.team){for(const[,e]of this.world.slot_fighters)if(e.team===t.team&&e.hp>0)return void(this._lose=!1);this._lose=!0}else this._lose=!0}})}on_show(){var t;null===(t=super.on_show)||void 0===t||t.call(this)}on_pause(){super.on_resume(),this._unmount_job.invoke_and_clear()}}ng.TAG="PlayerScore";class Ig extends D.C{get player_id(){return this.args[0]||this._player_id||""}get character(){return this.lf2.player_characters.get(this.player_id)}get thumb_url(){var t,e;return null!==(t=null===(e=this.character)||void 0===e?void 0:e.data.base.small)&&void 0!==t?t:X.T.BuiltIn_Imgs.CHARACTER_THUMB}get gpl(){return this.node.root.find_component(bi)}constructor(){super(...arguments),this._player_id=void 0,this._opacity=new Si(.65,1,3),this._mesh_thumb=void 0,this._unmount_jobs=new _i,this._mesh_thumb=new Mt.X.SpriteNode(this.lf2).set_center(.5,.5).set_position(this.node.w/2,-this.node.h/2,.1).set_name("thumb").apply()}on_resume(){var t;super.on_resume(),this._player_id=null===(t=this.node.lookup_component(ng))||void 0===t?void 0:t.player_id,this.node.renderer.sprite.add(this._mesh_thumb),this._unmount_jobs.add(()=>this.node.renderer.sprite.del(this._mesh_thumb))}on_show(){this.handle_changed()}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}handle_changed(){const{thumb_url:t}=this,e=this.lf2.images.find(t);if(e){const t=this.lf2.images.create_pic_by_img_info(e);this._mesh_thumb.set_info(t).apply()}else this.lf2.images.create_pic(t,t).then(t=>{this._mesh_thumb.set_info(t).apply()})}}Ig.TAG="PlayerFighterThumb";class Cg extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style({fill_style:"#9b9bff",font:"14px Arial"}).ignore_out_of_date()}get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get key_name(){return this.args[1]||""}get player(){return this.lf2.players.get(this.player_id)}get key_code(){var t;const{player:e}=this;if(!e)return"NOT SET";const i=null===(t=e.keys[this.key_name])||void 0===t?void 0:t.toUpperCase();return x.Tc.SHORT_KEY_CODES[i]||i||"NOT SET"}on_resume(){var t;super.on_resume(),null===(t=this.player)||void 0===t||t.callbacks.add(this),this.on_key_changed()}on_pause(){var t;super.on_pause(),null===(t=this.player)||void 0===t||t.callbacks.del(this)}on_key_changed(){this._text_loader.set_text([this.key_code])}}Cg.TAG="PlayerKeyText";class ag extends Cg{constructor(){super(...arguments),this.l={on_key_down:t=>{if(this.node.focused){if("escape"!==t.key.toLowerCase()){var e;null===(e=this.player)||void 0===e||e.set_key(this.key_name,t.key,!0).save();const i=this.node.root.search_components(ag,t=>t.player===this.player),g=i.indexOf(this),A=i[g+1];A&&(A.node.focused=!0)}this.node.focused=!1}}},this.r={on_pointer_down:()=>this.node.focused=!1}}on_click(t){this.node.focused=!this.node.focused,t.stop_immediate_propagation()}on_foucs(){var t;null===(t=super.on_foucs)||void 0===t||t.call(this),this.on_key_changed(),this.lf2.pointings.callback.add(this.r),this.lf2.keyboard.callback.add(this.l)}on_blur(){var t;null===(t=super.on_blur)||void 0===t||t.call(this),this.on_key_changed(),this.lf2.pointings.callback.del(this.r),this.lf2.keyboard.callback.del(this.l)}on_key_changed(){Ii(this.lf2,{i18n:this.key_code,style:{fill_style:this.node.focused?"blue":"white",font:"14px Arial",padding_l:20,padding_r:20,padding_t:3,padding_b:3}}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]})}}ag.TAG="PlayerKeyEdit";class og extends D.C{constructor(){super(...arguments),this._opacity=new Si(.65,.35,3),this._unmount_jobs=new _i}get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get player(){return this.lf2.players.get(this.player_id)}get player_name(){var t,e;return null!==(t=null===(e=this.player)||void 0===e?void 0:e.name)&&void 0!==t?t:this.player_id}get joined(){var t;return!0===(null===(t=this.player)||void 0===t?void 0:t.joined)}get is_com(){var t;return!0===(null===(t=this.player)||void 0===t?void 0:t.is_com)}get gpl(){return this.node.root.find_component(bi)}get can_join(){var t;return(null===(t=this.gpl)||void 0===t?void 0:t.state)===vi.Player}get text(){return this.is_com?this.lf2.string("char_menu.computer"):this.joined?this.player_name:this.can_join?this.lf2.string("char_menu.join_q"):""}on_resume(){var t,e;super.on_resume(),this._unmount_jobs.add(null===(t=this.player)||void 0===t?void 0:t.callbacks.add({on_is_com_changed:()=>this.handle_changed(),on_joined_changed:()=>this.handle_changed(),on_name_changed:()=>this.handle_changed()}),null===(e=this.gpl)||void 0===e?void 0:e.fsm.callbacks.add({on_state_changed:()=>this.handle_changed()})),this.handle_changed()}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}handle_changed(){Ii(this.lf2,{i18n:this.text,style:{fill_style:this.is_com?"pink":"white",font:"14px Arial"}}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]})}update(t){this._opacity.update(t),this.node.opacity=this.joined?1:this._opacity.value}}og.TAG="PlayerName";var rg=i(725);class lg extends rg.k{constructor(){super(...arguments),this.player=void 0}get player_id(){return this.node.get_value("player_id",!0)}get maxLength(){var t;return null!==(t=this.props.num("maxLength"))&&void 0!==t?t:10}get defaultValue(){return this.props.str("defaultValue")}get text(){var t,e;return null!==(t=null===(e=this.player)||void 0===e?void 0:e.name)&&void 0!==t?t:""}set text(t){var e;null===(e=this.player)||void 0===e||e.set_name(t,!0).save()}on_start(){var t;this.player=this.lf2.players.get(this.player_id),null===(t=this.player)||void 0===t||t.callbacks.add(this)}on_stop(){var t;null===(t=this.player)||void 0===t||t.callbacks.del(this)}on_name_changed(t){this._text=t}}lg.TAG="PlayerNameInput";class dg extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style(()=>this.get_style()).ignore_out_of_date()}get kind(){return this.args[0]}get player_score(){return this.node.lookup_component(ng)}on_show(){var t;null===(t=super.on_show)||void 0===t||t.call(this),this._text_loader.set_text([this.get_txt()])}get_style(){var t;const e=this.player_score,i=null===(t=this.player_score)||void 0===t?void 0:t.character;if(!e||!i)return this.node.style;if("status"===this.kind){let t=this.node.style.fill_style;return t=i.hp>0?this.node.get_value("win_alive_color"):e.lose?this.node.get_value("lose_color"):this.node.get_value("win_dead_color"),{...this.node.style,fill_style:t}}return this.node.style}get_txt(){var t;const e=this.player_score,i=null===(t=this.player_score)||void 0===t?void 0:t.character;if(!e||!i)return"-";switch(this.kind){case"kill":return""+i.kill_sum;case"attack":return""+i.damage_sum;case"hp_lost":return""+e.hp_lost;case"mp_usage":return""+e.mp_usage;case"picking":return""+i.picking_sum;case"status":return i.hp>0?this.node.get_value("win_alive_txt"):e.lose?this.node.get_value("lose_txt"):this.node.get_value("win_dead_txt")}return"-"}}dg.TAG="PlayerScoreCell";class hg extends D.C{constructor(){super(...arguments),this._opacity=new Si(.65,1,3),this._unmount_jobs=new _i}get player_id(){var t,e;return this.args[0]||(null===(t=this.node.find_parent(t=>{var e;return null===(e=t.data.values)||void 0===e?void 0:e.player_id}))||void 0===t||null===(e=t.data.values)||void 0===e?void 0:e.player_id)||""}get player(){return this.lf2.players.get(this.player_id)}get decided(){var t;return!(null===(t=this.player)||void 0===t||!t.team_decided)}get text(){var t;const e=null===(t=this.player)||void 0===t?void 0:t.team;if(void 0===e)return"";const i=X.T.TeamInfoMap[e];return void 0===i?"":this.lf2.string(i.i18n)}get is_com(){var t;return!0===(null===(t=this.player)||void 0===t?void 0:t.is_com)}on_resume(){var t;super.on_resume(),this._unmount_jobs.add(null===(t=this.player)||void 0===t?void 0:t.callbacks.add({on_is_com_changed:()=>this.handle_changed(),on_character_decided:()=>this.handle_changed(),on_team_changed:()=>this.handle_changed()})),this.handle_changed()}on_pause(){super.on_pause(),this._unmount_jobs.invoke_and_clear()}handle_changed(){var t;Ii(this.lf2,{i18n:this.text,style:{fill_style:this.is_com?"pink":"white",font:"14px Arial"}}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]}),this.node.set_visible(!(null===(t=this.player)||void 0===t||!t.character_decided))}update(t){this._opacity.update(t),this.node.opacity=this.decided?1:this._opacity.value}}hg.TAG="PlayerTeamName";class cg extends D.C{on_show(){Ii(this.lf2,{i18n:this.get_txt(),style:this.node.style}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]})}get_txt(){const t=1e3*this.world.stage.time/60,e=(0,M.RI)(t/1e3)%60,i=(0,M.RI)(t/6e4)%60,g=(0,M.RI)(t/36e5)%60;let A="";return g&&(A+=g+":"),A+=i>9||!g?i+":":"0"+i+":",A+=e>9?e:"0"+e,A}}cg.TAG="PlayingTimeText";class _g extends D.C{constructor(){super(...arguments),this._prefix=""}on_start(){var t,e;null===(t=super.on_start)||void 0===t||t.call(this),this._prefix=null!==(e=this.str(0))&&void 0!==e?e:""}on_resume(){super.on_resume(),this.lf2.callbacks.add(this),this.on_difficulty_changed()}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}on_difficulty_changed(){const t=`${this._prefix} (${x.wN[this.lf2.difficulty]})`;Ii(this.lf2,{i18n:t,style:{fill_style:"white",font:"12px Arial",line_width:1,disposable:!0}}).then(t=>{this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]})}}_g.TAG="PrefixAndDifficultyText";const ug=new Map;class pg extends D.C{constructor(){super(...arguments),this._img_idx_list=[]}get group(){return this.str(0)}get img_idx_list(){return this.group?ug.get(this.group)||[]:this._img_idx_list}set img_idx_list(t){this.group?ug.set(this.group,t):this._img_idx_list=t}on_resume(){var t;null===(t=super.on_resume)||void 0===t||t.call(this);const e=this.img_idx_list;e.length||this.node.data.img.forEach((t,i)=>e.push(i)),e.length&&(this.node.img_idx.value=this.lf2.random_in(0,e.length))}}pg.TAG="RandomImgOnLayoutResume";class mg extends D.C{get name(){return this.args[0]||""}get direction(){return this.args[1]||""}get binded_layout(){const t=this.args[2];return t&&this.node.root.find_child(t)||this.node}on_key_down(t){const{game_key:e}=t;if(!this.binded_layout.visible)return;if(this.binded_layout.disabled)return;switch(this.direction){case"lr":if("L"===e||"R"===e)break;return;case"ud":if("U"===e||"D"===e)break;return;default:return}const i=this.node.root.search_components(fg,t=>t.group_name===this.name&&t.node.visible&&!t.node.disabled);if(i.length<=0)return;"lr"===this.direction?i.sort((t,e)=>t.node.global_pos[0]-e.node.global_pos[0]):"ud"===this.direction&&i.sort((t,e)=>t.node.global_pos[1]-e.node.global_pos[1]);const g=this.node.focused_node;if("L"===e||"U"===e){const t=i.findIndex(t=>t.node===g);i[((0,wi.T9)(t,0)+i.length-1)%i.length].node.focused=!0}else if("R"===e||"D"===e){const t=i.findIndex(t=>t.node===g);i[(t+1)%i.length].node.focused=!0}}}mg.TAG="ReachableGroup";class fg extends D.C{get group_name(){return this.args[0]||""}get group(){return this.node.root.lookup_component(mg,t=>t.name===this.group_name)}}fg.TAG="Reachable";class vg extends D.C{constructor(){super(...arguments),this.seq=[],this.idx=0,this.time=0,this.loop=new Gi}start(){return this.idx=0,this.time=0,this.loop.reset(),this.enabled=!0,this}stop(){return this.idx=this.seq.length,this.time=0,this.loop.reset(),this.enabled=!1,this}on_start(){const t=this.args.length;let e=0,i="";for(let s=0;s<t;s+=2){var g,A;e+=null!==(g=this.num(s+0))&&void 0!==g?g:0,i=null!==(A=this.str(s+1))&&void 0!==A?A:"",this.seq.push([e,i,i in x.Tc.BuiltIn_Sounds])}}on_resume(){this.time=0,this.idx=0}update(t){var e;null===(e=super.update)||void 0===e||e.call(this,t);const i=this.seq.length;if(i&&!(this.idx>=i)&&!this.loop.done()){for(this.time+=t;this.idx<i;++this.idx){const[t,e,i]=this.seq[this.idx];if(t>this.time)break;i?this.lf2.sounds.play_with_load(e):this.lf2.sounds.play_preset(e)}this.idx>=i&&(this.loop.continue()?(this.time=0,this.idx=0):this.set_enabled(!1))}}}vg.TAG="Sounds";class bg extends D.C{constructor(){super(...arguments),this.jalousie=void 0,this.go_sounds=void 0,this.go_flashing=void 0,this.score_board=void 0,this.time=0,this.game_over_time=-1}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.world.paused&&(this.world.paused=!1),this.world.playrate=1,this.score_board=this.node.find_child("score_board"),this.jalousie=this.node.search_component(Fi),this.go_sounds=this.node.search_component(vg,"go_sounds"),this.go_flashing=this.node.search_component(Ji,"go_flashing");for(const[,e]of this.world.slot_fighters)this.on_fighter_add(e)}on_stop(){this.world.entities.forEach(t=>t.enter_frame(x.ZY))}on_resume(){this.lf2.world.stage.callbacks.add(this),this.lf2.world.callbacks.add(this)}on_pause(){this.lf2.world.stage.callbacks.del(this),this.lf2.world.callbacks.del(this)}update(t){this.time+=t,this.jalousie&&!this.jalousie.open&&this.jalousie.anim.done&&(this.lf2.goto_next_stage(),this.jalousie.open=!0),this.game_over_time>0&&this.time-this.game_over_time>3e3&&(this.lf2.sounds.play_preset("end"),this.score_board.visible=!0,this.game_over_time=-1)}on_fighter_add(t){t.callbacks.add(this)}on_fighter_del(t){t.callbacks.del(this)}on_key_down(t){"a"!==t.game_key&&"j"!==t.game_key||!this.world.stage.is_chapter_finish||(t.stop_immediate_propagation(),this.lf2.goto_next_stage())}on_stage_change(){this.lf2.world.stage.callbacks.add(this),this.go_sounds.stop(),this.go_flashing.stop(),this.jalousie&&(this.jalousie.open=!0)}on_phase_changed(t,e,i){this.debug("on_phase_changed",t,e,i),t.is_chapter_finish||(this.score_board.visible=!1,i?(e?this.go_flashing.loop.set(0,1):this.go_flashing.loop.set(0,Number.MAX_SAFE_INTEGER),this.go_sounds.start(),this.go_flashing.start()):(this.go_sounds.stop(),this.go_flashing.stop()))}on_chapter_finish(t){this.debug("on_chapter_finish",t),this.lf2.sounds.play_preset("pass"),this.score_board.visible=!0}on_requrie_goto_next_stage(t){this.debug("on_requrie_goto_next_stage",t),this.jalousie&&(this.jalousie.open=!1)}on_dead(t){if(this.world.stage.data.id===x.Tc.VOID_STAGE.id){const t={};for(const[,i]of this.world.slot_fighters)t[i.team]=0;for(const i of this.world.entities)(0,Bt.vP)(i)&&i.hp>0&&void 0!==t[i.team]&&++t[i.team];let e=0;if((0,he.R)(t,(t,i)=>{i&&++e}),e>1)return;this.game_over_time=this.time}else{const t={};for(const[,i]of this.world.slot_fighters)t[i.team]=0;for(const i of this.world.entities)(0,Bt.vP)(i)&&i.hp>0&&void 0!==t[i.team]&&++t[i.team];let e=0;if((0,he.R)(t,(t,i)=>{i&&++e}),e>0)return;this.game_over_time=this.time}}}bg.TAG="StageModeLogic";class yg extends D.C{constructor(){super(...arguments),this._opactiy=new Bi(new Ni(0,1).set_duration(500),new Ri(1).set_duration(3e3),new Ni(1,0).set_duration(500))}on_chapter_finish(){this.node.visible=!1,Ii(this.lf2,{i18n:"STAGE CLEAR!",style:{fill_style:"white",font:'46px "Arial Black", Arial',back_style:{font:'46px "Arial Black", Arial',stroke_style:"#005A8E",line_width:5}}}).then(t=>{this.node.visible=!0,this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]}),this._opactiy.start(!1)}on_stage_change(t,e){var i,g;null===e||void 0===e||e.callbacks.del(this),t.callbacks.add(this);const A=null!==(i=null!==(g=t.data.title)&&void 0!==g?g:t.bg.name)&&void 0!==i?i:"";this.node.visible=!1,Ii(this.lf2,{i18n:A,style:{fill_style:"white",font:'46px "Arial Black", Arial',back_style:{font:'46px "Arial Black", Arial',stroke_style:"#005A8E",line_width:5}}}).then(t=>{this.node.visible=!0,this.node.txts.value=t,this.node.txt_idx.value=0;const{w:e,h:i,scale:g}=t[0];this.node.size.value=[e/g,i/g]}),this._opactiy.start(!1)}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.on_stage_change(this.world.stage)}on_resume(){super.on_resume(),this.world.callbacks.add(this)}on_pause(){super.on_pause(),this.world.callbacks.del(this)}update(t){this._opactiy.update(t),this.node.opacity=this._opactiy.value}}yg.TAG="StageTitleShow";class wg extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style({fill_style:"white",font:"12px Arial",line_width:1,padding_t:2}).ignore_out_of_date()}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.on_stage_change(this.world.stage)}on_resume(){super.on_resume(),this.world.callbacks.add(this)}on_pause(){super.on_pause(),this.world.callbacks.del(this)}on_stage_change(t){var e,i;const g=null!==(e=null!==(i=t.data.title)&&void 0!==i?i:t.bg.name)&&void 0!==e?e:"";this._text_loader.set_text([g])}}wg.TAG="StageTitleText";class kg extends D.C{on_resume(){super.on_resume(),this.lf2.callbacks.add(this)}on_pause(){super.on_pause(),this.lf2.callbacks.del(this)}on_enter_next_stage(){alert("!")}}kg.TAG="StageTransitions";class xg extends D.C{constructor(){super(...arguments),this._text_loader=new hi(()=>this.node).set_style(()=>this._style).ignore_out_of_date(),this._team=null,this._style={fill_style:"white",font:"12px Arial",line_width:1,disposable:!0},this._sum=void 0,this._text=" "}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this._team=this.str(0),this._team?this.set_team(this._team):(this.world.callbacks.add(this),this.on_stage_change(this.world.stage))}on_stop(){this._team||this.world.callbacks.del(this)}set_team(t){var e;this._style={fill_style:(0,k.H)(t,(0,k.H)(j.H.Team_2)),font:"12px Arial",line_width:1,disposable:!0},this._sum=null===(e=this.node.root.search_component(L))||void 0===e?void 0:e.team_sum(t),this.rr()}on_stage_change(t){this.set_team(t.team)}on_resume(){super.on_resume(),this.rr()}update(t){this.world.time%30===0&&this.rr()}rr(){if(!this._sum)return;let t=`Man: ${this._sum.lives}\u3000HP: ${(0,M.T9)(0,(0,M.RI)(this._sum.hp))}`;this._sum.reserve&&(t+=`\u3000Reserve: ${this._sum.reserve}`),this._text!=t&&this._text_loader.set_text([t])}}xg.TAG="TeamSituationText";class jg extends D.C{get gap(){return this.num(0)||0}update(t){let e=0,i=0;const[g,A]=this.node.center.value,s=[];for(const n of this.node.children){if(!n.visible)continue;const[t,g]=n.size.value,[A,I]=n.center.value,[,,C]=n.pos.value;s.unshift([(1-A)*t,i+(1-I)*g,C]),i+=n.h+this.gap,e=(0,wi.T9)(e,n.w)}for(const n of this.node.children){if(!n.visible)continue;const[,t]=n.size.value,[I,C,a]=s.pop(),o=C-A*i-t,r=g*e-I;n.pos.value=[r,o,a]}this.node.size.value=[e,i]}}jg.TAG="VerticalLayout";class Gg extends D.C{constructor(){super(...arguments),this.score_board=void 0,this.time=0,this.is_game_over=!1,this.game_over_time=Number.MAX_SAFE_INTEGER,this.cancellers=[],this.fighter_callbacks={on_dead:t=>{const e={};for(const[,g]of this.world.slot_fighters)e[g.team]=0;for(const g of this.world.entities)(0,Bt.vP)(g)&&g.hp>0&&void 0!==e[g.team]&&++e[g.team];let i=0;(0,he.R)(e,(t,e)=>{e&&++i}),i>1||(this.game_over_time=this.time)}}}reset(){this.game_over_time=Number.MAX_SAFE_INTEGER,this.is_game_over=!1,this.world.paused=!1,this.world.playrate=1}on_start(){var t;null===(t=super.on_start)||void 0===t||t.call(this),this.score_board=this.node.find_child("score_board");for(const[,e]of this.world.slot_fighters)this.cancellers.push(e.callbacks.add(this.fighter_callbacks));this.reset()}on_stop(){this.world.entities.forEach(t=>{t.enter_frame(x.ZY),t.next_frame=x.ZY});for(const t of this.cancellers)t();this.cancellers.length=0}update(t){this.time+=t,!this.is_game_over&&this.time-this.game_over_time>3e3&&(this.lf2.sounds.play_preset("end"),this.score_board&&(this.score_board.visible=!0),this.game_over_time=Number.MAX_SAFE_INTEGER,this.is_game_over=!0)}on_key_down(t){switch(t.game_key){case x.kG.a:case x.kG.j:this.is_game_over&&(t.stop_immediate_propagation(),this.lf2.pop_ui())}}}Gg.TAG="VsModeLogic";const Tg=[ig,gg,ag,Cg,kg,mi,Vi,Ig,Hi,og,hg,bi,yi,yg,mg,fg,xi,fi,wg,ci,Ag,jg,Xi,ng,dg,Gg,bg,ki,cg,pg,Fi,tg,Oi,zi,Ji,$i,qi,vg,Pi,sg,di,Yi,Zi,Ki,S,E,L,Wi,_g,xg,rg.k,lg].map(t=>[t.TAG,t]);class Dg{constructor(){this._component_map=new Map(Tg)}register(t,e){this._component_map.has(t)&&Mt.X.warn(`[${Dg.TAG}::register] key already exists, ${t}`),this._component_map.set(t,e)}create(t,e){if(!e)return[];if(Array.isArray(e)||(e=[e]),!e.length)return[];const i=[];for(let g=0;g<e.length;g++){const A=e[g],s=(0,ee.Hl)(A)?oi(A):A;if(!s){Mt.X.warn(`[${Dg.TAG}::create] expression not correct! expression: ${A}`);continue}const n=this._component_map.get(s.name);if(!n){Mt.X.warn(`[${Dg.TAG}::create] Component not found! expression: ${A}`);continue}const{name:I,args:C=[],enabled:a=!0,id:o="",properties:r={}}=s,l=new n(t,I,{name:I,args:C,enabled:a,id:o,properties:r});l.init(...C),l.set_enabled(a),l.id=o||`${I}_${g}`,i.push(l)}return i}}Dg.TAG="ComponentFactory";const Eg=new Dg;class Rg{get callbacks(){return this._callbacks}set_scale(t,e,i){const[g,A,s]=this.scale.value;return this.scale.value=[null!==t&&void 0!==t?t:g,null!==e&&void 0!==e?e:A,null!==i&&void 0!==i?i:s],this}get cross(){const[t,e]=this.pos.value,[i,g]=this.size.value,[A,s]=this.center.value,n=-A*i,I=-s*g,C=(1-A)*i,a=(1-s)*g;return{left:n,top:I,right:C,bottom:a,mid_x:(n+C)/2,mid_y:(I+a)/2}}get rect(){const t=this.cross,[e,i]=this.pos.value;return{left:e+t.left,top:i+t.top,right:e+t.right,bottom:i+t.bottom}}get focused(){return this._root._focused_node===this}set focused(t){t?this.focused_node=this:this.focused_node===this&&(this.focused_node=void 0)}get focused_node(){return this._root._focused_node}set focused_node(t){var e,i;const g=this._root._focused_node;g!==t&&((null!==(e=t)&&void 0!==e&&e.disabled||null===(i=t)||void 0===i||!i.visible)&&(t=void 0),this._root._focused_node=t,g&&(g.on_blur(),g._callbacks.emit("on_foucs_changed")(g)),t&&(t.on_foucs(),t._callbacks.emit("on_foucs_changed")(t)),this._root._callbacks.emit("on_foucs_item_changed")(t,g))}get id(){return this.data.id}get name(){return this.data.name}get root(){return this._root}get depth(){let t=0,e=this;for(;null!==(i=e)&&void 0!==i&&i._parent;e=e.parent){var i;++t}return t}get state(){return this._state}get self_visible(){return this._visible.value}get visible(){return this.parent?this.parent.visible&&this.self_visible:this.self_visible}set visible(t){this.set_visible(t)}set_visible(t){var e;const i=this.visible;return this._visible.value=t,i!==this.visible&&this.invoke_all_visible(),t||null!==(e=this.focused_node)&&void 0!==e&&e.visible||(this.focused_node=void 0),this}get disabled(){return this.parent&&this.parent.disabled||this._disabled.value}set disabled(t){this.set_disabled(t)}set_disabled(t){var e;return this._disabled.value=t,t&&null!==(e=this.focused_node)&&void 0!==e&&e.disabled&&(this.focused_node=void 0),this}set_center(t){return this.center.set(0,t),this}get global_opacity(){return this.parent?this._opacity.value*this.parent._opacity.value:this._opacity.value}get opacity(){return this._opacity.value}set opacity(t){this.set_opacity(t)}set_opacity(t){return this._opacity.set(0,t),this}get parent(){return this._parent}get children(){return this._children}set_size(t){return this.size.set(0,t),this}get w(){return this.size.value[0]}set w(t){this.set_w(t)}get h(){return this.size.value[1]}set h(t){this.set_h(t)}set_w(t){return this.set_size([t,this.h])}set_h(t){return this.set_size([this.w,t])}get components(){return this._components}get style(){return this.txts.value[0].style||{}}get pointer_on_me(){return this._pointer_on_me}get pointer_down(){return this._pointer_down}get click_flag(){return this._click_flag}get update_times(){return this._update_times}constructor(t,e,i){var g;this.debug=void 0,this.warn=void 0,this.log=void 0,this.lf2=void 0,this.id_ui_map=void 0,this.name_ui_map=void 0,this.data=void 0,this._callbacks=new Xe.A,this._pointer_on_me=0,this._pointer_down=0,this._click_flag=0,this._update_times=0,this._root=void 0,this._focused_node=void 0,this._components=new Set,this._state={},this._visible=new Ci(!0),this._disabled=new Ci(!1),this._opacity=new Ci(1),this.pos=new Ci(()=>this.data.pos),this.scale=new Ci(()=>this.data.scale),this.txts=new Ci(()=>this.data.txt_infos),this.imgs=new Ci(()=>this.data.img_infos),this.size=new Ci(()=>this.data.size),this.center=new Ci(()=>this.data.center),this.img_idx=new Ci(0),this.txt_idx=new Ci(0),this.flip_x=new Ci(()=>!0===this.data.flip_x),this.flip_y=new Ci(()=>!0===this.data.flip_y),this.color=new Ci(()=>{var t;return null!==(t=si(this.data,"string",this.data.color))&&void 0!==t?t:""}),this.enabled=new Ci(()=>!0===this.data.enabled),this._parent=void 0,this._children=[],this.renderer=void 0,this.cook=Rg.create.bind(Rg),this.lf2=t,this.data=Object.freeze(e),this._parent=i,this._root=null!==(g=null===i||void 0===i?void 0:i.root)&&void 0!==g?g:this,this.id_ui_map=new Map,this.name_ui_map=new Map,this.renderer=new Mt.X.UINodeRenderer(this),(0,Nt.Q)(this)}get global_pos(){let t=0,e=0,i=0,g=this;do{const[A,s,n]=g.pos.value;t+=A,e+=s,i+=n,g=g.parent}while(g);return[t,e,i]}hit(t,e){const[i,g]=this.center.value,[A,s]=this.pos.value,[n,I]=this.size.value,C=A-(0,M.RI)(i*n),a=s-(0,M.RI)(g*I),[o,r]=this.data.size;return C<=t&&a<=e&&C+o>=t&&a+r>=e}on_pointer_down(t){this._pointer_down=1,this._click_flag=1}on_pointer_up(t){this._pointer_down=0}on_pointer_cancel(t){this._pointer_down=0}on_pointer_leave(){this._pointer_on_me=0,this._click_flag=0}on_pointer_enter(){this._pointer_on_me=1}on_start(){var t,e;this._state={};for(const A of this._components){var i;null===(i=A.on_start)||void 0===i||i.call(A)}for(const A of this.children)A.on_start();const{start:g}=this.data.actions||{};g&&li.act(this,g),null===(t=(e=this.renderer).on_start)||void 0===t||t.call(e)}on_stop(){var t,e;for(const A of this.components){var i;null===(i=A.on_stop)||void 0===i||i.call(A)}for(const A of this.children)A.on_stop();const{stop:g}=this.data.actions||{};g&&li.act(this,g),null===(t=(e=this.renderer).on_stop)||void 0===t||t.call(e)}on_resume(){var t,e;this.parent||(this.focused_node=this._state.focused_node,this._visible&&this.invoke_all_visible());for(const A of this._components){var i;null===(i=A.on_resume)||void 0===i||i.call(A)}for(const A of this.children)A.on_resume();const{resume:g}=this.data.actions||{};g&&li.act(this,g),null===(t=(e=this.renderer).on_resume)||void 0===t||t.call(e)}on_pause(){var t,e;this.parent||(this._state.focused_node=this.focused_node,this.focused_node=void 0,this.invoke_all_on_hide()),this.root===this&&this.renderer.del_self();const{pause:i}=this.data.actions||{};i&&li.act(this,i);for(const A of this._components){var g;null===(g=A.on_pause)||void 0===g||g.call(A)}for(const A of this.children)A.on_pause();null===(t=(e=this.renderer).on_pause)||void 0===t||t.call(e)}on_show(){var t,e;for(const g of this.components){var i;null===(i=g.on_show)||void 0===i||i.call(g)}this._callbacks.emit("on_show")(this),!this.data.auto_focus||this.disabled||this.focused_node||(this.focused_node=this),null===(t=(e=this.renderer).on_show)||void 0===t||t.call(e)}on_hide(){var t,e;this.focused_node===this&&(this.focused_node=void 0);for(const g of this.components){var i;null===(i=g.on_hide)||void 0===i||i.call(g)}this._callbacks.emit("on_hide")(this),null===(t=(e=this.renderer).on_hide)||void 0===t||t.call(e)}to_next_img(){const t=this.img_idx.value;this.img_idx.value=()=>(t+1)%this.data.img.length}static create(t,e,i){const g=new Rg(t,e,i),A=t.ui_val_getter;g._cook_data(A),g._cook_img_idx(A);const{component:s}=g.data;if(s)for(const I of Eg.create(g,s))g._components.add(I);if(e.items)for(const I of e.items){let e=(0,Q.AK)(I.count)&&I.count>0?I.count:1;for(;e;){const i=Rg.create(t,I,g);g.add_child(i),--e}}for(const I of g._components){var n;null===(n=I.on_add)||void 0===n||n.call(I)}return g}add_child(t){if(this._children.push(t),t.id){const e=this.id_ui_map.get(t.id)||[];e.push(t),this.id_ui_map.set(t.id,e)}if(t.name){const e=this.name_ui_map.get(t.name)||[];e.push(t),this.name_ui_map.set(t.name,e)}return this}add_children(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(t=>this.add_child(t)),this}add_components(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const A of e){var g;this._components.has(A)||(this._components.add(A),null===(g=A.on_add)||void 0===g||g.call(A),this._callbacks.emit("on_component_add")(A,this))}}del_components(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const A of e){var g;this._components.has(A)&&(this._components.delete(A),null===(g=A.on_del)||void 0===g||g.call(A),this._callbacks.emit("on_component_del")(A,this))}}_cook_data(t){const{visible:e,opacity:i,disabled:g}=this.data;if((0,ai.qb)(g))this._disabled.default_value=g;else if((0,ee.Hl)(g)){const e=new de(g,()=>t).run;this._disabled.default_value=()=>e(this)}if((0,ai.qb)(e))this._visible.default_value=e;else if((0,ee.Hl)(e)){const i=new de(e,()=>t).run;this._visible.default_value=()=>i(this)}(0,Q.AK)(i)?this._opacity.default_value=i:(0,ee.Hl)(i)&&(this._opacity.default_value=()=>Number(t(this,i,"=="))||0),this.pos.default_value=()=>{if(this.parent)return this.data.pos;const[t,e,i]=this.data.pos;return[t,e-this.lf2.world.screen_h,i]}}_cook_img_idx(t){const e=this.imgs.value;if(null===e||void 0===e||!e.length)return;const{which:i}=this.data;(0,ee.Hl)(i)?this.img_idx.default_value=()=>t(this,i,"==")%e.length||0:(0,Q.AK)(i)&&(this.img_idx.default_value=()=>i%e.length||0)}on_click(t){var e;const{click:i}=null!==(e=this.data.actions)&&void 0!==e?e:{};i&&(li.act(this,i),t.stop_propagation());for(const A of this._components){var g;if(null===(g=A.on_click)||void 0===g||g.call(A,t),2===t.stopped)break}}invoke_all_on_show(){this.on_show();for(const t of this.children)t._visible.value&&t.invoke_all_on_show()}invoke_all_on_hide(){this.on_hide();for(const t of this.children)t._visible.value&&t.invoke_all_on_hide()}invoke_all_visible(){this._visible.value?this.invoke_all_on_show():this.invoke_all_on_hide()}update(t){this._update_times===Number.MAX_SAFE_INTEGER?this._update_times=0:this._update_times++;for(const i of this.children)i.enabled&&i.update(t);for(const i of this._components){var e;i.enabled&&(null===(e=i.update)||void 0===e||e.call(i,t))}}on_key_down(t){if(!t.stopped){for(const i of this._components){var e;if(null===(e=i.on_key_down)||void 0===e||e.call(i,t),2===t.stopped)return}for(const e of this.children)if(e.on_key_down(t),2===t.stopped)return;if(this.focused&&"a"===t.game_key){var i;const{click:e}=null!==(i=this.data.actions)&&void 0!==i?i:{};e&&(li.act(this,e),t.stop_immediate_propagation())}}}on_key_up(t){if(!t.stopped){for(const e of this.children)if(e.on_key_up(t),2===t.stopped)return;for(const i of this._components){var e;if(null===(e=i.on_key_up)||void 0===e||e.call(i,t),2===t.stopped)return}}}find_child(t){var e;return null===(e=this.id_ui_map.get(t))||void 0===e?void 0:e[0]}search_child(t){let e=this.find_child(t);if(e)return e;for(const i of this.children)if(e=i.search_child(t),e)return e}find_child_by_name(t){var e;return null===(e=this.name_ui_map.get(t))||void 0===e?void 0:e[0]}find_parent(t,e){let{parent:i}=this;const g=[];for(;i;){if(g.push(i),"string"===typeof t&&i.id===t||"function"===typeof t&&t(i))return e&&e(i,g),i;i=i.parent}}get_value(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{values:i}=this.data;return i&&t in i?i[t]:e&&this.parent?this.parent.get_value(t,e):void 0}find_component(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1,i=arguments.length>2?arguments[2]:void 0;const g=(0,pe.I6)(this.components,i=>i instanceof t?(0,ee.Hl)(e)?e===i.id:e(i):0);return g&&(null===i||void 0===i||i(g)),g}find_components(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1,i=arguments.length>2?arguments[2]:void 0;const g=function(t,e){const i=[];for(const g of t)e(g)&&i.push(g);return i}(this.components,i=>i instanceof t?(0,ee.Hl)(e)?e===i.id:e(i):0);return g.length&&(null===i||void 0===i||i(g)),g}search_component(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1,i=arguments.length>2?arguments[2]:void 0;const g=this.find_component(t,e,i);if(g)return g;for(const A of this._children){const g=A.search_component(t,e,i);if(g)return g}}search_components(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1,i=arguments.length>2?arguments[2]:void 0;const g=this.find_components(t,e);for(const A of this._children)g.push(...A.search_components(t,e));return g.length&&(null===i||void 0===i||i(g)),g}lookup_component(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1,g=arguments.length>2?arguments[2]:void 0;const A=this.find_component(t,i,g);return A||(null===(e=this.parent)||void 0===e?void 0:e.lookup_component(t,i,g))}on_foucs(){var t,e;for(const g of this._components){var i;null===(i=g.on_foucs)||void 0===i||i.call(g)}null===(t=(e=this.renderer).on_foucs)||void 0===t||t.call(e)}on_blur(){var t,e;for(const g of this._components){var i;null===(i=g.on_blur)||void 0===i||i.call(g)}null===(t=(e=this.renderer).on_blur)||void 0===t||t.call(e)}}function Mg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i="validate_ui_img_info";if("object"!==typeof t)return e.push(`${i}] must be an object, but got ${t}`),!1;let g=!0;const A=t;return(0,M.gp)(A.path)||(g=!1,e.push(`[${i}]path must be a non-blank string, but got ${A.path}`)),"x"in A&&!(0,M.zO)(A.x)&&(g=!1,e.push(`[${i}]x must be a non-negative integer or undefiend, but got ${A.x}`)),"y"in A&&!(0,M.zO)(A.y)&&(g=!1,e.push(`[${i}]y must be a non-negative integer or undefiend, but got ${A.y}`)),"w"in A&&!(0,M.ve)(A.w)&&(g=!1,e.push(`[${i}]w must be a positive integer or undefiend, but got ${A.w}`)),"h"in A&&!(0,M.ve)(A.h)&&(g=!1,e.push(`[${i}]h must be a positive integer or undefiend, but got ${A.h}`)),"dw"in A&&!(0,M.ve)(A.dw)&&(g=!1,e.push(`[${i}]dw must be a positive integer or undefiend, but got ${A.dw}`)),"dh"in A&&!(0,M.ve)(A.dh)&&(g=!1,e.push(`[${i}]dh must be a positive integer or undefiend, but got ${A.dh}`)),"col"in A&&!(0,M.ve)(A.col)&&(g=!1,e.push(`[${i}]col must be a positive integer or undefiend, but got ${A.col}`)),"row"in A&&!(0,M.ve)(A.row)&&(g=!1,e.push(`[${i}]row must be a positive integer or undefiend, but got ${A.row}`)),"col"in A!=="row"in A&&(g=!1,e.push(`[${i}]col, row should both be set!`)),(!("col"in A)&&!("row"in A)||"w"in A)&&"h"in A||(g=!1,e.push(`[${i}]w and h are required when col and row are set!`)),"count"in A&&!(0,M.ve)(A.count)&&(g=!1,e.push(`[${i}]count must be a positive integer or undefiend, but got ${A.count}`)),g}async function Ng(t,e,i){let g,A=e;for(;A&&!g;){var s;g=null===(s=A.templates)||void 0===s?void 0:s[i],A=A.parent}if(g)return g;try{g=await t.import_json(i).then(t=>t[0])}catch(n){Mt.X.warn(`[${Ng.TAG}] ui template not found! template_name: ${i}`)}return g||{}}async function Bg(t,e,i){const{template:g,...A}=e;if(!g)return e;const s=await Ng(t,i,g);A.component;const n=[];return Array.isArray(s.component)?n.push(...s.component):s.component&&n.push(s.component),Array.isArray(A.component)?n.push(...A.component):A.component&&n.push(A.component),{...s,...A,component:n,values:{...s.values,...A.values}}}async function Lg(t,e,i){var g;let A=(0,M.Hl)(e)?await Ng(t,i,e):e;A.template&&(A=await Bg(t,A,i));const s=A.id||"no_id_"+Date.now(),n=A.name||"no_name_"+Date.now(),I={...A,values:A.values?A.values:{},enabled:!1,id:s,name:n,pos:(0,xe.A)(A.pos,3,[0,0,0]),scale:(0,xe.A)(A.scale,3,[1,1,1]),center:(0,xe.A)(A.center,3,[0,0,0]),size:[0,0],parent:i,img_infos:[],txt_infos:[],items:void 0,img:[],txt:[]};I.enabled=null===(g=si(I,"boolean",A.enabled))||void 0===g||g;const{img:C}=A;C&&I.img_infos.push(...await ni(t,C,I.img)),function(t,e,i){let g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!i)return[];const A=Array.isArray(i)?i:[i];for(const C of A)if(C)if("string"===typeof C){var s;const i=null!==(s=si(e,"string",C))&&void 0!==s?s:C;g.push({i18n:t.string(i),style:{}})}else{var n,I;const i=null!==(n=si(e,"string",C.i18n))&&void 0!==n?n:"";g.push({i18n:t.string(i),style:null!==(I=si(e,ii,C.style))&&void 0!==I?I:{}})}}(t,I,A.txt,I.txt),await Ii(t,I.txt,I.txt_infos);const{w:a=0,h:o=0,scale:r=1}=I.img_infos[0]||I.txt_infos[0]||{},l=a/r,d=o/r,[h,c]=(0,xe.A)(A.size,2,[i?l:t.world.screen_w,i?d:t.world.screen_h]),_=(0,M.RI)(h||(d?c*l/d:0)),u=(0,M.RI)(c||(l?h*d/l:0));I.size=[_,u];const{items:p}=A;if(p&&!Array.isArray(p)&&Mt.X.warn(`[${Rg.TAG}::cook_ui_info] items must be array, but got`,p),Array.isArray(p)&&p.length){I.items=[];for(const e of p)I.items.push(await Lg(t,e,I))}else delete I.items;return I}Rg.TAG="UINode",Mg.TAG="validate_ui_img_info",Ng.TAG="find_ui_template",Bg.TAG="read_ui_template";class Sg extends dt{constructor(t){super(),this.point=void 0,this.point=t}}class Zg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.n=624,this.m=397,this.matrixA=2567483615,this.upperMask=2147483648,this.lowerMask=2147483647,this.mt=new Array(this.n),this.index=this.n+1,this.reset(t)}reset(t){this.n=624,this.m=397,this.matrixA=2567483615,this.upperMask=2147483648,this.lowerMask=2147483647,this.mt=new Array(this.n),this.index=this.n+1,this.mt[0]=t>>>0;for(let e=1;e<this.n;e++){const t=this.mt[e-1]^this.mt[e-1]>>>30;this.mt[e]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+e,this.mt[e]>>>=0}}twist(){for(let t=0;t<this.n;t++){let e=this.mt[t]&this.upperMask|this.mt[(t+1)%this.n]&this.lowerMask,i=e>>>1;e%2!==0&&(i^=this.matrixA),this.mt[t]=this.mt[(t+this.m)%this.n]^i}this.index=0}int(){this.index>=this.n&&this.twist();let t=this.mt[this.index++];return t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0}float(){return this.int()/4294967296}in_range(t,e){return(0,wi.RI)(this.float()*(e-t))+t}}var Yg=i(9e3);function Fg(t,e){const i=t.spawn_entity({oid:x.PC.FreezeBall,kind:0,x:0,y:0,action:{id:x.Vp.Auto}},void 0,(0,R.Y)(e.facing));if(i){const g=t.position,A=e.position;i.position.set((0,M.RI)(.5*(g.x+A.x)),(0,M.RI)(A.y),(0,M.RI)(.5*(g.z+A.z))),e.enter_frame({id:"20"})}}function Wg(t){const{attacker:e,victim:i,v_rest:g,itr:A}=t;if(void 0!==g)i.v_rests.set(t.attacker.id,t),e.victims.set(t.victim.id,t);else{var s;const t=null!==(s=A.arest)&&void 0!==s?s:x.Tc.DEFAULT_ITR_A_REST;e.a_rest=t+e.world.arest_offset}}function Og(t){var e,i;const{itr:g,attacker:A,victim:s}=t;A.motionless=null!==(e=g.motionless)&&void 0!==e?e:t.victim.world.itr_motionless,s.shaking=null!==(i=g.shaking)&&void 0!==i?i:t.attacker.world.itr_shaking}function Ug(t){const{victim:e,attacker:i,itr:g,a_cube:A,b_cube:s,aframe:n}=t;switch(Wg(t),Og(t),g.bdefend&&g.bdefend>=x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE&&(e.hp=e.hp_r=0),e.velocities.length=1,e.velocity_0.x=0,e.velocity_0.z=0,e.velocity_0.y=0,e.frame.state){case x.Fb.Ball_Flying:case x.Fb.Ball_Rebounding:e.team=i.team}e.world.spark(...e.spark_point(A,s),g.fall&&g.fall>x.Tc.DEFAULT_FALL_VALUE_CRITICAL?x.lj.CriticalHit:x.lj.Hit),e.play_sound(e.data.base.hit_sounds)}function zg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{itr:i,victim:g,attacker:A}=t;if(!i.injury)return;const s=(0,M.LI)(i.injury*e);if(!s)return;const n=g.hp;for(g.hp-=s,g.hp_r-=(0,M.LI)(s*(1-g.world.hp_recoverability));A.emitter;)A=A.emitter;A.add_damage_sum(s),!g.emitter&&g.hp<=0&&n>0&&A.add_kill_sum(1)}function Vg(t){var e,i,g;const{itr:A,victim:s,attacker:n}=t;s.play_sound(["data/065.wav.mp3"]),s.fall_value-=A.fall?A.fall:x.Tc.DEFAULT_ITR_FALL;(s.fall_value<=0||s.fall_value<=x.Tc.DEFAULT_FALL_VALUE_DIZZY&&(x.Fb.Caught===s.frame.state||s.velocity_0.y>0||s.position.y>0))&&A.dvy&&(s.velocity_0.y=(null!==(e=A.dvy)&&void 0!==e?e:n.world.ivy_d)*n.world.ivy_f),A.dvz&&(s.velocity_0.z=A.dvz*n.world.ivz_f),s.velocity_0.x=(null!==(i=A.dvx)&&void 0!==i?i:n.world.ivx_d)*n.facing*n.world.ivx_f,s.next_frame={id:null===(g=s.data.indexes)||void 0===g?void 0:g.ice},zg(t),Wg(t),Og(t)}function Hg(t){var e;const{itr:i,attacker:g,victim:A,a_cube:s,b_cube:n}=t,I=[x.pd.FireExplosion,x.pd.Explosion].some(t=>t===i.effect),C=A.position.x-g.position.x;let a=-1;a=I?C>0?-1:1:g.facing,A.toughness=0,A.fall_value=0,A.defend_value=0,A.resting=0,A.velocities.length=1,A.velocity_0.y=(null!==(e=i.dvy)&&void 0!==e?e:g.world.ivy_d)*g.world.ivy_f,A.velocity_0.z=0,A.velocity_0.x=(i.dvx||0)*a;const o=!!(i.fall&&i.fall>x.Tc.DEFAULT_FALL_VALUE_CRITICAL),r=A.spark_point(s,n);let l=x.lj.Hit;l=i.effect===x.pd.Sharp&&(0,Bt.vP)(A)?o?x.lj.CriticalBleed:x.lj.BleedFall:o?x.lj.CriticalHit:x.lj.HitFall,A.world.spark(...r,l);const{fire:d,critical_hit:h}=A.data.indexes||{},c=()=>{if(!h)return;const t=A.velocity_0.x/A.facing>=0?1:-1;A.enter_frame({id:h[t][0]})};switch(i.effect){case x.pd.Fire:case x.pd.MFire2:d?A.enter_frame({id:d[0],facing:(0,R.Y)(a)}):c();break;case x.pd.MFire1:case x.pd.FireExplosion:d?A.enter_frame({id:d[0],facing:a}):c();break;default:c()}}function Kg(t){const{itr:e,attacker:i,victim:g,a_cube:A,b_cube:s}=t;if(e.effect!=x.pd.Ignore&&!function(t){const{victim:e,attacker:i}=t,{armor:g}=e;if(!g||!Ge(t))return!1;const{itr:A,a_cube:s,b_cube:n}=t,{bdefend:I=0}=A,{type:C,hit_sounds:a,injury_ratio:o=x.Tc.DEFAULT_ARMOR_INJURY_RATIO,motionless_ratio:r=x.Tc.DEFAULT_ARMOR_MOTIONLESS_RATIO,shaking_ratio:l=x.Tc.DEFAULT_ARMOR_SHAKING_RATIO,dead_sounds:d=a}=g,{fall:h=x.Tc.DEFAULT_ITR_FALL,injury:c=0}=A;let _=0;switch(C){case x.T5.Fall:_=h;break;case x.T5.Defend:_=I;break;case x.T5.Times:_=1;break;case x.T5.Injury:_=c}e.toughness-=_;const[u,p,m]=e.spark_point(s,n),f=h>=x.Tc.DEFAULT_FALL_VALUE_CRITICAL?x.lj.SlientCriticalHit:x.lj.SlientHit;e.world.spark(u,p,m,f);const v=e.toughness>0?a:d;if(v)for(const w of v)e.lf2.sounds.play(w,u,p,m);const{shaking:b=e.world.itr_shaking,motionless:y=e.world.itr_motionless}=A;return i.motionless=(0,M.RI)(r*y),e.shaking=(0,M.RI)(l*b),e.velocities.length=1,e.velocity_0.x=0,e.velocity_0.y=0,e.velocity_0.z=0,Wg(t),zg(t,o),!0}(t))switch(e.effect){case x.pd.Fire:case x.pd.MFire1:case x.pd.MFire2:case x.pd.FireExplosion:zg(t),Wg(t),Og(t),Hg(t);break;case x.pd.Ice2:Vg(t);break;case x.pd.Ice:g.frame.state===x.Fb.Frozen?(zg(t),Og(t),Wg(t),Hg(t)):Vg(t);break;case x.pd.Explosion:case x.pd.Normal:case x.pd.Sharp:case void 0:{zg(t),Wg(t),Og(t);const{fall:C=x.Tc.DEFAULT_ITR_FALL}=e;g.fall_value-=C,g.defend_value=0;if(g.fall_value<=0||g.hp<=0||g.frame.state===x.Fb.Frozen||g.fall_value<=x.Tc.DEFAULT_FALL_VALUE_DIZZY&&(x.Fb.Caught===g.frame.state||g.velocity_0.y>0||g.position.y>0))Hg(t);else{e.dvx&&(g.velocity_0.x=e.dvx*i.facing),g.position.y>0&&g.velocity_0.y>2&&(g.velocity_0.y=2),g.velocity_0.z=0;const[t,C,a]=g.spark_point(A,s);var n,I;if(e.effect===x.pd.Sharp&&(0,R.vP)(g)?g.world.spark(t,C,a,x.lj.Bleed):g.world.spark(t,C,a,x.lj.Hit),x.Fb.Caught===g.frame.state){if(g.frame.cpoint){const{backhurtact:t,fronthurtact:e}=g.frame.cpoint;i.facing===g.facing&&t?g.next_frame={id:t}:i.facing!==g.facing&&e&&(g.next_frame={id:e})}}else if(g.fall_value<=x.Tc.DEFAULT_FALL_VALUE_DIZZY)g.next_frame={id:null===(I=g.data.indexes)||void 0===I?void 0:I.dizzy};else null!==(n=g.data.indexes)&&void 0!==n&&n.grand_injured&&(g.next_frame={id:g.data.indexes.grand_injured[(0,R.lY)(g,i)][0]})}break}}}const Xg=window.collisions_keeper=new class{constructor(){this.pair_map=new Map}add(t,e,i,g,A){for(const s of e)for(const e of t)for(const t of g)for(const g of i){const i=[e,s,g,t].join("_"),n=this.pair_map.get(i)||[];n.push(A),this.pair_map.set(i,n)}}adds(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)this.add(g.a_type,g.itr,g.v_type,g.bdy,g.run.bind(g))}get(t,e,i,g){return void 0===e&&console.warn("[CollisionHandler] itr.kind got",e),void 0===g&&console.warn("[CollisionHandler] bdy.kind got",g),this.pair_map.get(`${t}_${e}_${i}_${g}`)}handler(t){return this.get(t.attacker.data.type,t.itr.kind,t.victim.data.type,t.bdy.kind)}handle(t){var e,i,g,A;const{handlers:s}=t;if(Mt.X.DEV&&s){var n;const e=`[${t.attacker.data.type}]#${x.w7[t.itr.kind]} => [${t.victim.data.type}]#${x.aW[t.bdy.kind]}`;Mt.X.debug(` collision: ${e} \nhandlers: ${null!==(n=null===s||void 0===s?void 0:s.map(t=>t.name))&&void 0!==n?n:"none"}`)}let I=!1;const{itr:C,bdy:a,victim:o,attacker:r}=t,l=null===(e=C.actions)||void 0===e?void 0:e.map(e=>{var i;return e.pretest&&!1!==(null===(i=e.tester)||void 0===i?void 0:i.run(t))}),d=null===(i=a.actions)||void 0===i?void 0:i.map(e=>{var i;return e.pretest&&!1!==(null===(i=e.tester)||void 0===i?void 0:i.run(t))});if(null===s||void 0===s||s.forEach(e=>(I=I||e===Ug,e(t))),null!==(g=r.group)&&void 0!==g&&g.some(t=>t===x.hG.FreezableBall)&&r.data.id===x.PC.FreezeBall)Fg(o,r);else if((r.data.id===x.PC.Freeze||r.data.id===x.PC.FreezeBall||r.data.id===x.PC.Weapon_IceSword&&r.holder)&&null!==(A=o.group)&&void 0!==A&&A.some(t=>t===x.hG.FreezableBall))Fg(r,o);else{var h,c;null===(h=C.actions)||void 0===h||h.forEach((e,i)=>{var g;!1!==(e.pretest?null===l||void 0===l?void 0:l[i]:null===(g=e.tester)||void 0===g?void 0:g.run(t))&&Yg.k[e.type](e,t)}),null===(c=a.actions)||void 0===c||c.forEach((e,i)=>{var g;!1!==(e.pretest?null===d||void 0===d?void 0:d[i]:null===(g=e.tester)||void 0===g?void 0:g.run(t))&&Yg.k[e.type](e,t)})}if(o.collided_list.push(o.lastest_collided=t),r.collision_list.push(r.lastest_collision=t),C.kind!==x.w7.Block&&C.kind!==x.w7.Whirlwind&&C.kind!==x.w7.MagicFlute&&C.kind!==x.w7.MagicFlute2&&C.kind!==x.w7.Pick&&C.kind!==x.w7.PickSecretly){const t=o.data.base.hit_sounds;o.play_sound(t)}}};Xg.add(x.IM,[x.w7.Catch],[x.D2.Fighter],[x.aW.Normal,x.aW.Defend],function(t){t.attacker.catching||t.attacker.dizzy_catch_test(t.victim)&&(t.attacker.start_catch(t.victim,t.itr),t.victim.start_caught(t.attacker,t.itr))}),Xg.add(x.IM,[x.w7.ForceCatch],[x.D2.Fighter],[x.aW.Normal,x.aW.Defend],function(t){t.attacker.start_catch(t.victim,t.itr),t.victim.start_caught(t.attacker,t.itr)}),Xg.add(x.IM,[x.w7.Whirlwind],[x.D2.Fighter,x.D2.Weapon],[x.aW.Normal,x.aW.Defend],function(t){var e,i;const{attacker:g,victim:A}=t;A.merge_velocities();let{x:s,y:n,z:I}=A.velocity_0;const C=(0,wi.LI)(A.position.z-g.position.z);if(n+=n<4?1:-1,s+=.5*((0,wi.LI)(A.position.x-g.position.x)>0?-1:1),I+=.5*(C>0?-1:C<0?1:0),A.velocity_0.set(s,n,I),A.type===x.D2.Weapon)switch(A.frame.state){case x.Fb.Weapon_InTheSky:case x.Fb.HeavyWeapon_InTheSky:break;default:A.next_frame={id:null===(e=A.data.indexes)||void 0===e||null===(i=e.in_the_skys)||void 0===i?void 0:i[0]}}}),Xg.add(x.IM,[x.w7.Freeze],[x.D2.Fighter],[x.aW.Normal,x.aW.Defend],Vg),Xg.add(x.IM,[x.w7.JohnShield,x.w7.Normal,x.w7.WeaponSwing,x.w7.CharacterThrew],[x.D2.Fighter],[x.aW.Normal],Kg),Xg.add(x.IM,[x.w7.JohnShield,x.w7.Normal,x.w7.WeaponSwing,x.w7.CharacterThrew],[x.D2.Fighter],[x.aW.Defend],function(t){const{itr:e,attacker:i,victim:g,a_cube:A,b_cube:s,bdy:n}=t,{bdefend:I=x.Tc.DEFAULT_BREAK_DEFEND_VALUE}=e;if(x.pd.FireExplosion!==e.effect&&x.pd.Explosion!==e.effect&&i.facing===g.facing||I>=x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE)return void Kg(t);g.defend_value-=I,zg(t,g.defend_ratio),Wg(t),Og(t);const[C,a,o]=g.spark_point(A,s);var r,l,d,h;e.dvx&&(g.velocity_0.x=e.dvx*i.facing/2),g.defend_value<=0?(g.defend_value=0,g.world.spark(C,a,o,x.lj.BrokenDefend),null===(r=e.actions)||void 0===r||r.forEach(e=>{e.type===Re.X.A_Defend&&Yg.k.a_next_frame(e,t),e.type===Re.X.V_Defend&&Yg.k.v_next_frame(e,t)}),null===(l=n.actions)||void 0===l||l.forEach(e=>{e.type===Re.X.A_BrokenDefend&&Yg.k.a_next_frame(e,t),e.type===Re.X.V_BrokenDefend&&Yg.k.v_next_frame(e,t)})):(g.world.spark(C,a,o,x.lj.DefendHit),null===(d=e.actions)||void 0===d||d.forEach(e=>{e.type===Re.X.A_Defend&&Yg.k.a_next_frame(e,t),e.type===Re.X.V_Defend&&Yg.k.v_next_frame(e,t)}),null===(h=n.actions)||void 0===h||h.forEach(e=>{e.type===Re.X.A_Defend&&Yg.k.a_next_frame(e,t),e.type===Re.X.V_Defend&&Yg.k.v_next_frame(e,t)}))}),Xg.add(x.IM,[x.w7.MagicFlute,x.w7.MagicFlute2],[x.D2.Fighter,x.D2.Weapon],[x.aW.Normal,x.aW.Defend],function(t){var e,i;Wg(t);const{victim:g,attacker:A}=t;switch(g.merge_velocities(),g.velocity_0.y<3&&(g.velocity_0.y+=3),g.data.type){case te.D2.Fighter:var s,n;if(zg(t),g.frame.state!==x.Fb.Falling)g.next_frame={id:null===(s=g.data.indexes)||void 0===s||null===(n=s.falling)||void 0===n?void 0:n[-1][0]};break;case te.D2.Weapon:switch(g.frame.state){case x.Fb.Weapon_InTheSky:case x.Fb.HeavyWeapon_InTheSky:break;default:g.team=A.team,g.next_frame={id:null===(e=g.data.indexes)||void 0===e||null===(i=e.in_the_skys)||void 0===i?void 0:i[0]}}}g.handle_velocity_decay(.25)}),Xg.add([x.D2.Fighter],[x.w7.Pick],[x.D2.Weapon],[x.aW.Normal],function(t){const{victim:e,attacker:i}=t;var g,A;i.holding||(e.holder=i,i.holding=e,e.team=i.team,e.data.base.type===x.$5.Heavy?i.next_frame={id:null===(g=i.data.indexes)||void 0===g?void 0:g.picking_heavy}:i.next_frame={id:null===(A=i.data.indexes)||void 0===A?void 0:A.picking_light})}),Xg.add([x.D2.Fighter],[x.w7.PickSecretly],[x.D2.Weapon],[x.aW.Normal],function(t){const{victim:e,attacker:i}=t;i.holding||e.data.base.type===x.$5.Heavy||(e.holder=i,i.holding=e,e.team=i.team)}),Xg.add(x.IM,[x.w7.JohnShield,x.w7.Normal,x.w7.WeaponSwing,x.w7.CharacterThrew],[x.D2.Weapon],[x.aW.Normal],function(t){Wg(t),Og(t),zg(t);const{itr:e,attacker:i,victim:g,a_cube:A,b_cube:s}=t;e.bdefend&&e.bdefend>=x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE&&(g.hp=g.hp_r=0);const n=e.fall&&e.fall>=x.Tc.DEFAULT_FALL_VALUE_CRITICAL,I=n?"slient_critical_hit":"slient_hit";g.world.spark(...t.victim.spark_point(A,s),I);let C=g.data.base.weight||1,a=g.data.base.weight||1,o=(0,M.RI)((e.dvx?e.dvx*i.facing:0)/C),r=(0,M.RI)((e.dvy?e.dvy:x.Tc.DEFAULT_IVY_D)/a);var l;if((g.data.base.type!==x.rX.Heavy||n)&&(g.velocity_0.x=o,g.velocity_0.y=r,g.team=i.team,g.next_frame={id:g.lf2.random_get(null===(l=g.data.indexes)||void 0===l?void 0:l.in_the_skys)}),i.data.id===x.PC.Weapon_Stick&&(g.data.id===x.PC.Weapon_baseball||g.data.id===x.PC.Weapon_milk||g.data.id===x.PC.Weapon_Beer)){var d;const t=i.data.base.strength||1;o=i.facing*t*20,g.next_frame={id:g.lf2.random_get(null===(d=g.data.indexes)||void 0===d?void 0:d.throwings)}}}),Xg.add(x.IM,[x.w7.Block],[x.D2.Fighter],[x.aW.Normal],Wg),Xg.add([x.D2.Ball],[x.w7.Normal],x.IM,[x.aW.Normal,x.aW.Defend],function(t){Wg(t),Og(t);const{attacker:e,aframe:i,victim:g,bdy:A,itr:s}=t;switch(i.behavior){case x.q.JohnChase:{if(!(0,R.vP)(g))break;const{bdefend:t}=s;(A.kind===x.aW.Normal||A.kind===x.aW.Defend&&(t&&t>=x.Tc.DEFAULT_FORCE_BREAK_DEFEND_VALUE||g.facing===e.facing))&&(e.hp=e.hp_r=0);break}case x.q.DennisChase:case x.q._03:case x.q.AngelBlessing:case x.q.AngelBlessingStart:case x.q.DevilJudgementStart:case x.q.ChasingSameEnemy:case x.q.BatStart:case x.q.FirzenDisasterStart:case x.q.JohnBiscuitLeaving:case x.q.FirzenVolcanoStart:case x.q.Bat:case x.q.JulianBallStart:case x.q.JulianBall:}e.play_sound(e.data.base.hit_sounds)}),Xg.add(x.IM,[x.w7.Normal,x.w7.WeaponSwing,x.w7.CharacterThrew],[x.D2.Ball],[x.aW.Normal],Ug),Xg.add(x.IM,[x.w7.JohnShield],[x.D2.Ball],[x.aW.Normal],function(t){Wg(t),zg(t),Og(t);const{attacker:e}=t;e.shaking=e.motionless,e.play_sound(e.data.base.hit_sounds)}),Xg.add([x.D2.Weapon],[x.w7.Normal],x.IM,[x.aW.Normal,x.aW.Defend],function(t){var e,i;const{attacker:g}=t;if(g.frame.state===x.Fb.Weapon_OnHand)return;g.frame.state===x.Fb.Weapon_Throwing&&(g.velocity_0.x=-.3*g.velocity_0.x,g.velocity_0.y=(0,M.LI)(.3*g.velocity_0.y),g.velocity_0.z=0);const A=g.find_align_frame(g.frame.id,null===(e=g.data.indexes)||void 0===e?void 0:e.throwings,null===(i=g.data.indexes)||void 0===i?void 0:i.in_the_skys);g.next_frame=A}),Xg.add([x.D2.Weapon,x.D2.Fighter],[x.w7.WeaponSwing,x.w7.Normal],x.IM,[x.aW.Criminal],function(t){Og(t)}),Xg.add(x.IM,[x.w7.Heal],[x.D2.Fighter],[x.aW.Normal],function(t){const{itr:e,victim:i}=t;e.injury&&(i.healing=e.injury)}),Xg.add(x.IM,[x.w7.SuperPunchMe],[x.D2.Fighter],[x.aW.Normal],function(t){const{victim:e,attacker:i}=t;e.v_rests.set(i.id,t)});class Qg{constructor(){var t=this;this.itr_shaking=x.Tc.DEFAULT_ITR_SHAKING,this.itr_motionless=x.Tc.DEFAULT_ITR_MOTIONLESS,this.fvx_f=x.Tc.DEFAULT_FVX_F,this.fvy_f=x.Tc.DEFAULT_FVY_F,this.fvz_f=x.Tc.DEFAULT_FVZ_F,this.ivy_f=1,this.ivz_f=1,this.ivx_f=1,this.ivy_d=x.Tc.DEFAULT_IVY_D,this.ivx_d=4,this.cvy_d=3,this.cvx_d=2,this.tvx_f=x.Tc.DEFAULT_TVX_F,this.tvy_f=x.Tc.DEFAULT_TVY_F,this.tvz_f=x.Tc.DEFAULT_TVZ_F,this.begin_blink_time=x.Tc.DEFAULT_BEGIN_BLINK_TIME,this.lying_blink_time=x.Tc.DEFAULT_LYING_BLINK_TIME,this.gone_blink_time=x.Tc.DEFAULT_GONE_BLINK_TIME,this.vrest_offset=0,this.arest_offset=0,this.arest_offset_2=0,this.frame_wait_offset=0,this.cha_bc_spd=x.Tc.CHARACTER_BOUNCING_SPD,this.cha_bc_tst_spd_x=x.Tc.CHARACTER_BOUNCING_TEST_SPD_X,this.cha_bc_tst_spd_y=x.Tc.CHARACTER_BOUNCING_TEST_SPD_Y,this.hp_recoverability=x.Tc.HP_RECOVERABILITY,this.hp_r_ticks=x.Tc.HP_R_TICKS,this.hp_r_value=x.Tc.HP_R_VALUE,this.hp_healing_ticks=x.Tc.HP_HEALING_TICKS,this.hp_healing_value=x.Tc.HP_HEALING_VALUE,this.mp_r_ticks=x.Tc.MP_R_TICKS,this.mp_r_ratio=x.Tc.MP_R_RATIO,this.double_click_interval=x.Tc.DOUBLE_CLICK_INTERVAL,this.key_hit_duration=x.Tc.KEY_HIT_DURATION,this.friction_factor=x.Tc.FRICTION_FACTOR,this.friction_x=x.Tc.FRICTION_X,this.friction_z=x.Tc.FRICTION_Z,this.land_friction_x=x.Tc.LAND_FRICTION_X,this.land_friction_z=x.Tc.LAND_FRICTION_Z,this.screen_w=x.Tc.MODERN_SCREEN_WIDTH,this.screen_h=x.Tc.MODERN_SCREEN_HEIGHT,this.gravity=x.Tc.GRAVITY,this.sync_render=0,this.on_dataset_change=void 0,function(t,e,i){const g=Object.keys(e);for(const A of g){if(A.startsWith("on_")||A.startsWith("_"))continue;const t="_"+A;if("function"===typeof e[A])continue;e[t]=e[A],delete e[A];const g=`on_${A}_change`;Object.defineProperty(e,A,{get:()=>e[t],set(s){var n;if(s===e[t])return;const I=e[t];e[t]=s,null===(n=e[g])||void 0===n||n.call(e,s,I),null===i||void 0===i||i(A,s,I)}})}}(Qg.TAG,this,function(){for(var e,i=arguments.length,g=new Array(i),A=0;A<i;A++)g[A]=arguments[A];return null===(e=t.on_dataset_change)||void 0===e?void 0:e.call(t,...g)})}}Qg.TAG="WorldDataset";class Pg extends Qg{get stage(){return this._stage}set stage(t){if(t===this._stage)return;const e=this._stage;this._stage=t,this.callbacks.emit("on_stage_change")(t,e),e.dispose(),t.enter_phase(0)}on_sync_render_change(t,e){this.callbacks.emit("on_sync_render_changed")(t,e),this.start_render(),this.start_update()}get bg(){return this._stage.bg}get left(){return this.bg.left||0}get right(){return this.bg.right||0}get near(){return this.bg.near||0}get far(){return this.bg.far||0}get width(){return this.bg.width||0}get depth(){return this.bg.depth||0}get middle(){return this.bg.middle||{x:0,z:0}}team_come(t,e,i,g){for(const A of this.entities){const{ctrl:s,team:n}=A;t===n&&(0,R.nn)(s)&&s.goto(e,i,g)}}team_move(t){for(const e of this.entities){const{ctrl:i,team:g}=e;t===g&&(0,R.nn)(i)&&i.move()}}team_stay(t){for(const e of this.entities){const{ctrl:i,team:g}=e;t===g&&(0,R.nn)(i)&&i.stay()}}constructor(t){super(),this.lf2=void 0,this.callbacks=new ft.nq,this._spark_data=void 0,this._spark_creator=void 0,this._stage=void 0,this._need_FPS=!0,this._need_UPS=!0,this._FPS=new ft.uE(.9),this._UPS=new ft.uE(.9),this._render_worker_id=void 0,this._update_worker_id=void 0,this.entities=new Set,this.incorporeities=new Set,this.slot_fighters=new Map,this.collisions=[],this.on_dataset_change=(t,e,i)=>{this.callbacks.emit("on_dataset_change")(t,e,i,this)},this.cam_speed=0,this.lock_cam_x=void 0,this.renderer=void 0,this.gone_entities=[],this._enemy_chasers=new Set,this._ally_chasers=new Set,this._time=0,this._updating=0,this._temp_entitis_set=new Set,this._used_itrs=new Set,this._ideally_dt=(0,M.RI)(1e3/60),this._playrate=1,this._paused=!1,this.indicator_flags=0,this.lf2=t,this._stage=new ei(this,x.Tc.VOID_BG),this.renderer=new Mt.X.WorldRender(this)}add_incorporeities(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)this.incorporeities.add(g),this.renderer.add_entity(g)}add_entities(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const g of e)(0,R.vP)(g)&&(this.callbacks.emit("on_fighter_add")(g),this.lf2.players.has(g.ctrl.player_id)&&(this.slot_fighters.set(g.ctrl.player_id,g),this.callbacks.emit("on_player_character_add")(g.ctrl.player_id))),this.entities.add(g),this.renderer.add_entity(g)}list_enemy_fighters(t,e){const i=[];for(const s of this.entities)!t.is_ally(s)&&(0,R.vP)(s)&&e(s)&&i.push(s);const{x:g,z:A}=t.position;return i.sort((t,e)=>{let{position:i}=t,{position:s}=e;return(0,M.tn)(i.x-g)+(0,M.tn)(i.z-A)/2-(0,M.tn)(s.x-g)-(0,M.tn)(s.z-A)/2}),i}list_ally_fighters(t,e){const i=[];for(const s of this.entities)t.is_ally(s)&&(0,R.vP)(s)&&e(s)&&i.push(s);const{x:g,z:A}=t.position;return i.sort((t,e)=>{let{position:i}=t,{position:s}=e;return(0,M.tn)(i.x-g)+(0,M.tn)(i.z-A)/2-(0,M.tn)(s.x-g)-(0,M.tn)(s.z-A)/2}),i}del_entity(t){var e;if(!this.entities.delete(t)&&!this.incorporeities.delete(t))return!1;if((0,R.vP)(t)&&this.callbacks.emit("on_fighter_del")(t),null!==(e=t.ctrl)&&void 0!==e&&e.player_id){this.slot_fighters.delete(t.ctrl.player_id)&&this.callbacks.emit("on_player_character_del")(t.ctrl.player_id)}return this.renderer.del_entity(t),t.dispose(),!0}del_entities(t){for(const e of t)this.del_entity(e)}stop_render(){this._render_worker_id&&Mt.X.Render.del(this._render_worker_id),this._render_worker_id=0}start_render(){if(this._render_worker_id&&Mt.X.Render.del(this._render_worker_id),this.sync_render)return;let t=0;this._render_worker_id&&Mt.X.Render.del(this._render_worker_id),this._render_worker_id=Mt.X.Render.add(e=>{const i=e-t;0!==t&&this.render_once(i),0!==t&&this._need_FPS&&(this._FPS.update(i),this.callbacks.emit("on_fps_update")(this._FPS.value)),t=e})}stop_update(){this._update_worker_id&&Mt.X.Interval.del(this._update_worker_id),this._update_worker_id=void 0}start_update(){this._update_worker_id&&Mt.X.Interval.del(this._update_worker_id);let t=Date.now(),e=0,i=1;this._update_worker_id=Mt.X.Interval.add(()=>{var g,A;const s=Date.now(),n=s-t;if(!(n<this._ideally_dt*i)){(null===(g=this.lf2.ui)||void 0===g?void 0:g.enabled)&&(null===(A=this.lf2.ui)||void 0===A||A.update(n)),e++;for(const t of this.lf2.cmds)switch(t){case"f1":this.set_paused(!this.paused);break;case"f2":this.set_paused(!0),this.update_once();break;case"f4":this.lf2.ui_stacks.length>=2&&this.lf2.pop_ui();break;case"f5":this.playrate=1===this.playrate?100:1;break;case"f6":this.lf2.infinity_mp=!this.lf2.infinity_mp;break;case"f7":for(const t of this.entities)t.hp=t.hp_max,t.mp=t.mp_max;break;case"f8":this.lf2.weapons.add_random(1,!0,x.hG.VsWeapon);break;case"f9":for(const t of this.entities)(0,R.EQ)(t)&&(t.hp=0)}this.lf2.cmds.clear(),this._paused||this.update_once(),this.update_camera(),this.bg.update(),0===e%this.sync_render&&(this.render_once(n),this.callbacks.emit("on_fps_update")(this._UPS.value/this.sync_render)),this._UPS.update(n),i=this._UPS.value/60,this._need_UPS&&this.callbacks.emit("on_ups_update")(this._UPS.value,0),t=s}},0)}restrict_fighter(t){const{near:e,far:i,player_l:g,player_r:A,enemy_l:s,enemy_r:n,team:I}=this.stage,C=t.team!==I,a=C?g:s,o=C?A:n,{x:r,z:l}=t.position;r<a?t.position.x=a:r>o&&(t.position.x=o),l<i?t.position.z=i:l>e&&(t.position.z=e)}restrict_ball(t){const{left:e,right:i,near:g,far:A}=this.stage,{x:s,z:n}=t.position;(s<e-800||s>i+800)&&t.enter_frame(x.Tc.NEXT_FRAME_GONE),n<A?t.position.z=A:n>g&&(t.position.z=g)}restrict_weapon(t){const{left:e,right:i,near:g,far:A,drink_l:s,drink_r:n}=this.stage;let{x:I,z:C}=t.position;if(t.data.base.type===x.$5.Drink){const e=s,i=n;I<e?I=t.position.x=e:I>i&&(I=t.position.x=i)}(I<e-100||I>i+100)&&t.enter_frame(x.Tc.NEXT_FRAME_GONE),C<A?t.position.z=A:C>g&&(t.position.z=g)}restrict(t){(0,R.vP)(t)?this.restrict_fighter(t):(0,R.HY)(t)?this.restrict_ball(t):(0,R.EQ)(t)&&this.restrict_weapon(t)}manhattan(t,e){const i=t.position,g=e.position;return(0,M.tn)(i.x-g.x)+(0,M.tn)(i.z-g.z)}add_enemy_chaser(t){this._enemy_chasers.add(t)}del_enemy_chaser(t){this._enemy_chasers.delete(t),t.chasing=void 0}add_ally_chaser(t){this._ally_chasers.add(t)}del_ally_chaser(t){this._ally_chasers.delete(t),t.chasing=void 0}get time(){return this._time}update_once(){this._updating=1,this._time===Number.MAX_SAFE_INTEGER?this._time=0:++this._time;for(const t of this.entities){t.self_update(),t.chasing&&!t.chasing.ctrl&&(t.chasing=void 0);for(const e of this._enemy_chasers){if(!(0,R.vP)(t)||e.is_ally(t)||t.hp<=0)continue;const i=e.chasing;i&&(null===i||void 0===i?void 0:i.team)!==e.team?(!i||this.manhattan(i,e)>this.manhattan(t,e))&&(e.chasing=t):e.chasing=t}for(const e of this._ally_chasers){if(!(0,R.vP)(t)||!e.is_ally(t)||t.hp<=0)continue;const i=e.chasing;i&&(null===i||void 0===i?void 0:i.team)===e.team?this.manhattan(i,e)>this.manhattan(t,e)&&(e.chasing=t):e.chasing=t}}this.gone_entities.length=0;for(const t of this.entities)t.update(),t.frame.id!==x.Vp.Gone&&t.frame.state!==x.Fb.Gone||this.gone_entities.push(t);for(const t of this.incorporeities)t.self_update(),t.update(),t.frame.id!==x.Vp.Gone&&t.frame.state!==x.Fb.Gone||this.gone_entities.push(t);this.del_entities(this.gone_entities),this.collision_detections(),this.stage.update(),this._updating=0}render_once(t){this.renderer.render(t)}update_camera(){const t=(0,M.RI)(this.renderer.cam_x);if(this.bg.id===x.Tc.VOID_BG.id)return this.renderer.cam_x=0,void(0!==t&&this.callbacks.emit("on_cam_move")(0));const{cam_l:e,left:i,cam_r:g,right:A}=this.stage,s=(0,M.AK)(this.lock_cam_x)?i:e,n=(0,M.AK)(this.lock_cam_x)?A:g;let I=this.renderer.cam_x;if((0,M.AK)(this.lock_cam_x))I=this.lock_cam_x;else if(this.slot_fighters.size){let t=0;I=0;if((0,M.I6)(this.slot_fighters,t=>{let[e,i]=t;return(0,R.vW)(i.ctrl)&&i.hp>0}))for(const[,e]of this.slot_fighters){const i=e.ctrl;(0,R.vW)(i)&&(I+=e.position.x-this.screen_w/2+e.facing*this.screen_w/6,++t)}else for(const[,e]of this.slot_fighters)I+=e.position.x-this.screen_w/2,++t;I=(0,M.RI)(I/t)}I<s&&(I=s),I>n-this.screen_w&&(I=n-this.screen_w);let C=this.renderer.cam_x;const a=(0,M.jk)(1,1*(0,M.tn)(C-I)*.5/this.screen_w),o=50*a;C>I?(this.cam_speed>0?this.cam_speed=0:this.cam_speed>-o?this.cam_speed-=a:this.cam_speed=-o,this.renderer.cam_x+=this.cam_speed,this.renderer.cam_x<I&&(this.renderer.cam_x=I)):C<I&&(this.cam_speed<0?this.cam_speed=0:this.cam_speed<o?this.cam_speed+=a:this.cam_speed=o,this.renderer.cam_x+=this.cam_speed,this.renderer.cam_x>I&&(this.renderer.cam_x=I));const r=(0,M.RI)(this.renderer.cam_x);t!==r&&this.callbacks.emit("on_cam_move")(r)}collision_detections(){this.collisions.length=0,this._used_itrs.clear(),this._temp_entitis_set.clear();for(const t of this.entities){const e=t.ctrl;for(const i of this._temp_entitis_set){const g=i.ctrl;(0,R.nn)(g)&&g.look_other(t),(0,R.nn)(e)&&e.look_other(i);const A=this.collision_detection(t,i),s=this.collision_detection(i,t);if(null!==A&&void 0!==A&&A.handlers&&null!==s&&void 0!==s&&s.handlers){const t=x.IM.indexOf(A.attacker.type),e=x.IM.indexOf(s.attacker.type);t<e?this.collisions.push(A):t>e?this.collisions.push(s):this.collisions.push(A,s)}else null!==A&&void 0!==A&&A.handlers?this.collisions.push(A):null!==s&&void 0!==s&&s.handlers&&this.collisions.push(s)}this._temp_entitis_set.add(t)}for(const t of this.collisions)Xg.handle(t)}collision_detection(t,e){var i,g;const A=t.frame,s=e.frame;if(null===(i=A.itr)||void 0===i||!i.length||null===(g=s.bdy)||void 0===g||!g.length)return;const n=A.itr.length,I=s.bdy.length;for(let C=0;C<n;++C)for(let i=0;i<I;++i){const g=A.itr[C],n=s.bdy[i];if(!g.vrest&&this._used_itrs.has(g))return;const I=this.collision_test(t,A,g,e,s,n);if(I)return g.vrest||this._used_itrs.add(g),I.handlers=Xg.handler(I),I}}collision_test(t,e,i,g,A,s){var n,I;if(!i.vrest&&t.a_rest)return;if(i.kind!==x.w7.Heal){var C;const t=g.catcher;if(g.blinking||g.invisible||g.invulnerable)return;if(t&&1!==(null===(C=t.frame.cpoint)||void 0===C?void 0:C.hurtable))return}switch(e.state){case x.Fb.Weapon_OnHand:{var a,o,r;const e=null===(a=t.holder)||void 0===a||null===(o=a.frame.wpoint)||void 0===o?void 0:o.attacking;if(!e)return;const g=null===(r=t.data.itr_prefabs)||void 0===r?void 0:r[e];if(!g)return;i={...i,...g};break}}const l=this.get_bounding(t,e,i),d=this.get_bounding(g,A,s);if(!(l.left<=d.right&&l.right>=d.left&&l.bottom<=d.top&&l.top>=d.bottom&&l.far<=d.near&&l.near>=d.far))return;const h=t.is_ally(g)?x._0.Ally:x._0.Enemy;if(!(i.hit_flag&g.data.type)||!(s.hit_flag&t.data.type)||!(i.hit_flag&h)&&!(s.hit_flag&h))return;if(!i.vrest&&t.a_rest)return;if(i.vrest&&g.get_v_rest(t.id)>0)return;const c={v_rest:!i.arest&&i.vrest?i.vrest+this.vrest_offset:void 0,victim:g,attacker:t,itr:i,bdy:s,aframe:e,bframe:A,a_cube:l,b_cube:d};return!1!==(null===(n=s.tester)||void 0===n?void 0:n.run(c))&&!1!==(null===(I=i.tester)||void 0===I?void 0:I.run(c))?c:void 0}init_spark_data(){this._spark_data=this.lf2.datas.find(x.Tc.BuiltIn_Dats.Spark),this._spark_creator=this._spark_data?R.$7.inst.get_entity_creator(this._spark_data.type):void 0}spark(t,e,i,g){if(this._spark_data||this.init_spark_data(),!this._spark_data)return void Mt.X.warn(Pg.TAG+"::spark",`data of "${x.Tc.BuiltIn_Dats.Spark}" not found!`);if(!this._spark_creator)return void Mt.X.warn(Pg.TAG+"::spark",`creator of "${this._spark_data.type}" not found!`);const A=this._spark_creator(this,this._spark_data);A.position.set((0,M.LI)(t),(0,M.LI)(e),(0,M.LI)(i)),A.enter_frame({id:g}),A.attach(!1)}etc(t,e,i,g){const A=this.lf2.datas.find(998);if(!A)return void Mt.X.warn(Pg.TAG+"::etc",'data of "998" not found!');const s=R.$7.inst.get_entity_creator(A.type);if(!s)return void Mt.X.warn(Pg.TAG+"::etc",'creator of "998" not found!');const n=s(this,A);n.position.set((0,M.LI)(t),(0,M.LI)(e),(0,M.LI)(i)),n.enter_frame({id:g}),n.attach(!1)}get_bounding(t,e,i){const g=t.facing>0?t.position.x-e.centerx+i.x:t.position.x+e.centerx-i.x-i.w,A=t.position.y+e.centery-i.y,s=t.position.z+i.z;return{left:g,right:g+i.w,top:A,bottom:A-i.h,far:s,near:s+i.l}}get playrate(){return this._playrate}set playrate(t){if(t<=0)throw new Error("playrate must be larger than 0");t!==this._playrate&&(this._playrate=t,this._ideally_dt=(0,M.RI)(1e3/60)/this._playrate,this.start_update())}get paused(){return this._paused}set paused(t){this.set_paused(t)}set_paused(t){this._paused!==t&&(this._paused=t,this.callbacks.emit("on_pause_change")(t))}dispose(){this.callbacks.emit("on_disposed")(),this.stop_update(),this.stop_render(),this.del_entities(Array.from(this.entities)),this.renderer.dispose(),this.callbacks.clear()}}var Jg,qg;Pg.TAG="World";const $g=t=>[""+t,{keys:x.Tc.CheatKeys[t],sound:x.Tc.CheatTypeSounds[t]}];let tA=(qg=class t{static get instance(){return t.instances[0]}static get ui(){return t.instances[0].ui}static get ditto(){return Mt.X}get loading(){return this._loading}get playable(){return this._playable}get need_load(){return!this._playable&&!this._loading}get ui_stacks(){return this._ui_stacks}get ui(){return this._ui_stacks[this._ui_stacks.length-1]}get difficulty(){return this._difficulty}set difficulty(t){if(this._difficulty===t)return;const e=this._difficulty;this._difficulty=t,this.callbacks.emit("on_difficulty_changed")(t,e)}get infinity_mp(){return this._infinity_mp}set infinity_mp(t){if(this._infinity_mp!==t&&(this._infinity_mp=t,this.callbacks.emit("on_infinity_mp")(t),t))for(const e of this.world.entities)e.mp=e.mp_max}get player_characters(){return this.world.slot_fighters}ensure_player(t){let e=this.players.get(t);return e||this.players.set(t,e=new Ke(t)),e}get stages(){return this.datas.stages}find_stage(t){return this.stages.find(e=>e.id===t)}get_player_character(t){return this.player_characters.get(t)}find_in_zip(t){const e=t.length;for(let i=0;i<e;i++){const e=t[i],g=(0,M.rI)(this.zips,t=>t.file(e));if(g)return g}}async import_json(t){const e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[t]:Ue(t)[0],i=this.find_in_zip(e);if(i)return[await i.json(),i.name];return await Mt.X.Importer.import_as_json(e)}async import_resource(t,e){const i=e?[t]:Ue(t)[0],g=this.find_in_zip(i);return g?[await g.blob_url(),g.name]:Mt.X.Importer.import_as_blob_url(i)}async import_array_buffer(t,e){const i=e?[t]:Ue(t)[0],g=this.find_in_zip(i);return g?[await g.array_buffer(),g.name]:Mt.X.Importer.import_as_array_buffer(i)}constructor(){this.debug=void 0,this.warn=void 0,this.log=void 0,this.lang="",this._disposed=!1,this.callbacks=new ft.nq,this._ui_stacks=[],this._loading=!1,this._playable=!1,this._difficulty=x.sL.Difficult,this._infinity_mp=!1,this._pointer_on_uis=new Set,this._pointer_raycaster=new Mt.X.Raycaster,this._pointer_vec_2=new Mt.X.Vector2,this._mt=new Zg(Date.now()),this.bat_spreading_x=new Zt.K(x.Tc.BAT_CHASE_SPREADING_VX,this),this.bat_spreading_z=new Zt.K(x.Tc.BAT_CHASE_SPREADING_VZ,this),this.disater_spreading_x=new Zt.K(x.Tc.DISATER_SPREADING_VX,this),this.disater_spreading_y=new Zt.K(x.Tc.DISATER_SPREADING_VY,this),this.jan_devil_judgement_spreading_x=new Zt.K(x.Tc.DEVIL_JUDGEMENT_SPREADING_VX,this),this.jan_devil_judgement_spreading_y=new Zt.K(x.Tc.DEVIL_JUDGEMENT_SPREADING_VY,this),this.world=void 0,this.zips=[],this.players=new Map([["1",new Ke("1")],["2",new Ke("2")],["3",new Ke("3")],["4",new Ke("4")],["5",new Ke("5")],["6",new Ke("6")],["7",new Ke("7")],["8",new Ke("8")]]),this.characters=new St(this),this.weapons=new Ft(this),this.entities=new Yt(this),this.balls=new Lt(this),this.datas=void 0,this.sounds=void 0,this.images=void 0,this.keyboard=void 0,this.pointings=void 0,this.bgms=[],this.on_click_character=void 0,this._pointer_down_uis=new Set,this._curr_key_list="",this._CheatType_map=new Map([$g(x.U1.LF2_NET),$g(x.U1.HERO_FT),$g(x.U1.GIM_INK)]),this._CheatType_enable_map=new Map,this._cheat_sound_id_map=new Map,this.cmds=new Set,this._dispose_check=e=>{if(!this._disposed)return;throw Object.assign(new Error(`[${t.TAG}::${e}] instance disposed.`),{is_disposed_error:!0})},this.remove_bg=()=>this.remove_stage(),this._uiinfos_loaded=!1,this._uiinfos=[],this._uiinfo_map=new Map,this._strings=new Map,this.ui_val_getter=(t,e)=>"mouse_on_me"===e||"pointer_on_me"===e?""+t.pointer_on_me:"paused"===e?this.world.paused?1:0:e,(0,Nt.Q)(this),this.world=new Pg(this),this.datas=new We(this),this.sounds=new Mt.X.Sounds(this),this.images=new ze.a_(this),this.keyboard=new Mt.X.Keyboard(this),this.keyboard.callback.add(this),this.pointings=new Mt.X.Pointings,this.pointings.callback.add(this),this.world.start_update(),this.world.start_render(),t.instances.push(this),this.debug("constructor"),Mt.X.Cache.forget(t.DATA_TYPE,t.DATA_VERSION).catch(t=>{}),Mt.X.Cache.forget(Ke.DATA_TYPE,Ke.DATA_VERSION).catch(t=>{})}random_entity_info(t){const{left:e,right:i,near:g,far:A}=this.world;return t.id=(0,ft.$W)(),t.facing=this.random_in(0,100)%2?-1:1,t.position.x=this.random_in(e,i),t.position.z=this.random_in(A,g),t.position.y=550,t}get_pointer_intersections(t){if(!this.ui)return[];this._pointer_vec_2.x=t.scene_x,this._pointer_vec_2.y=t.scene_y,this.world.renderer.camera.raycaster(this._pointer_raycaster,this._pointer_vec_2);const e=this.ui.renderer.sprite.intersect_from_raycaster(this._pointer_raycaster,!0),i=[];for(const g of e){const t=g.object.get_user_data("owner");t instanceof Rg&&(t.visible&&!t.disabled&&(g.extra=t,i.push(g)))}return i}on_pointer_move(t){const e=this.get_pointer_intersections(t),i=this._pointer_on_uis,g=new Set,A=new Set;for(const{extra:s}of e)i.has(s)?(i.delete(s),g.add(s)):A.add(s);for(const s of i)s.on_pointer_leave();this._pointer_on_uis.clear();for(const s of A)s.on_pointer_enter(),this._pointer_on_uis.add(s);for(const s of g)this._pointer_on_uis.add(s)}on_pointer_down(t){const e=this.get_pointer_intersections(t);for(const i of e){this._pointer_down_uis.add(i.extra);const t=new Sg(i.point);if(i.extra.on_pointer_down(t),t.stopped)break}}on_pointer_up(t){const e=this.get_pointer_intersections(t);for(const i of e)if(i.extra.pointer_down){this._pointer_down_uis.delete(i.extra);const t=new Sg(i.point);if(i.extra.on_pointer_up(t),t.stopped)break}for(const i of e)if(i.extra.click_flag){const t=new Sg(i.point);if(i.extra.on_click(t),t.stopped)break}for(const i of this._pointer_down_uis){const t=new Sg(new Mt.X.Vector3(NaN,NaN,NaN));i.on_pointer_cancel(t)}this._pointer_down_uis.clear()}on_pointer_cancel(t){for(const e of this._pointer_down_uis){const t=new Sg(new Mt.X.Vector3(NaN,NaN,NaN));e.on_pointer_cancel(t)}this._pointer_down_uis.clear()}is_cheat_enabled(t){return!!this._CheatType_enable_map.get(""+t)}toggle_cheat_enabled(t){const e=this._CheatType_map.get(t);if(!e)return;const{sound:i}=e,g=this._cheat_sound_id_map.get(t);g&&this.sounds.stop(g),this.sounds.play_with_load(i).then(e=>this._cheat_sound_id_map.set(t,e));const A=!this._CheatType_enable_map.get(t);this._CheatType_enable_map.set(t,A),this.callbacks.emit("on_cheat_changed")(t,A),this._curr_key_list=""}on_key_down(t){this.debug("on_key_down",t);const e=t.key;if(this.keyboard.is_key_down("control"));else switch(t.key){case"f1":case"f2":case"f3":case"f4":case"f5":case"f6":case"f7":case"f8":case"f9":case"f10":t.interrupt(),this.cmds.add(t.key)}this._curr_key_list+=e;let i=!1;for(const[g,{keys:A}]of this._CheatType_map)A.startsWith(this._curr_key_list)&&(i=!0),A===this._curr_key_list&&this.toggle_cheat_enabled(g);if(i||(this._curr_key_list=""),0===t.times){const{ui:t}=this;if(t)for(const i of vt.Di)for(const[g,A]of this.players)if(A.keys[i]===e){const A=new ht(g,i,e);t.on_key_down(A)}}}on_key_up(t){var e,i;const g=null!==(e=null===(i=t.key)||void 0===i?void 0:i.toLowerCase())&&void 0!==e?e:"",{ui:A}=this;if(A)for(const s of vt.Di)for(const[t,e]of this.players)if(e.keys[s]===g){const e=new ht(t,s);A.on_key_up(e)}}on_loading_file(t,e,i){const g=`${t}(${(0,ft.qI)(i)})`;this.on_loading_content(g,e)}async load_zip_from_info_url(e){this._dispose_check("load_zip_from_info_url"),this.on_loading_content(`${e}`,0);const[{url:i,md5:g}]=await Mt.X.Importer.import_as_json([e]);this._dispose_check("load_zip_from_info_url");const A=await Mt.X.Cache.get(g);this._dispose_check("load_zip_from_info_url");let s=null;return A?(s=await Mt.X.Zip.read_buf(A.name,A.data),this._dispose_check("load_zip_from_info_url")):(s=await Mt.X.Zip.download(i,(t,e)=>this.on_loading_file(i,t,e)),this._dispose_check("load_zip_from_info_url"),await Mt.X.Cache.del(e,""),this._dispose_check("load_zip_from_info_url"),await Mt.X.Cache.put({name:g,version:t.DATA_VERSION,type:t.DATA_TYPE,data:s.buf})),this.on_loading_content(`${i}`,100),s}async load(t){const e=0===this.zips.length;this._dispose_check("load"),this._loading=!0,this.callbacks.emit("on_loading_start")(),this.set_ui("loading"),e&&await this.import_json("builtin_data/launch/strings.json").then(t=>this.load_strings(t[0])).catch(t=>{});try{const i=(0,M.Hl)(t)?await this.load_zip_from_info_url(t):t;await this.load_data(i),await this.load_ui(i),e&&(this.set_ui(this.uiinfos[0]),this.callbacks.emit("on_prel_loaded")()),this._playable=!0,this.callbacks.emit("on_loading_end")()}catch(i){return this.callbacks.emit("on_loading_failed")(i),await Promise.reject(i)}finally{this._loading=!1}}async load_data(t){var e,i,g=this;(this._dispose_check("load_data"),t)&&(await(null===(e=t.file("strings.json"))||void 0===e?void 0:e.json().then(t=>this.load_strings(t))),this._dispose_check("load_data"),await(null===(i=t.file("strings.json5"))||void 0===i?void 0:i.json().then(t=>this.load_strings(t))),this._dispose_check("load_data"),this.zips.unshift(t),this.callbacks.emit("on_zips_changed")(this.zips));await this.datas.load(),this._dispose_check("load_data");for(const l of this.datas.characters){var A,s;const t=null!==(A=null===(s=l.base.name)||void 0===s?void 0:s.toLowerCase())&&void 0!==A?A:l.type+"_id_"+l.id;this.characters[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.characters.add(l,t,e)},this.entities[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.characters.add(l,t,e)}}for(const l of this.datas.weapons){var n,I;const t=null!==(n=null===(I=l.base.name)||void 0===I?void 0:I.toLowerCase())&&void 0!==n?n:l.type+"_id_"+l.id;this.weapons[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.weapons.add(l,t,e)},this.entities[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.weapons.add(l,t,e)}}for(const l of this.datas.balls){var C,a;const t=null!==(C=null===(a=l.base.name)||void 0===a?void 0:a.toLowerCase())&&void 0!==C?C:l.type+"_id_"+l.id;this.entities[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.entities.add(l,t,e)}}for(const l of this.datas.entity){var o,r;const t=null!==(o=null===(r=l.base.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==o?o:l.type+"_id_"+l.id;this.entities[`add_${t}`]=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return g.entities.add(l,t,e)}}if(t){const e=t.file(/bgm\/.*?/);for(const t of e)this.bgms.some(e=>e===t.name)||this.bgms.push(t.name)}}dispose(){this.debug("dispose"),this._disposed=!0,this.callbacks.emit("on_dispose")(),this.callbacks.clear(),this.world.dispose(),this.datas.dispose(),this.sounds.dispose(),this.images.dispose(),this.keyboard.dispose(),this.pointings.dispose();for(const t of this._ui_stacks)null===t||void 0===t||t.on_pause(),null===t||void 0===t||t.on_stop();this._ui_stacks.length=0;const e=t.instances.indexOf(this);e>=0&&t.instances.splice(e,1)}add_player_character(t,e){var i,g;const A=this.players.get(t);if(!A)return;const s=this.datas.characters.find(t=>t.id===e);if(!s)return;let n=0,I=0,C=0,a=0,o=0,r=0,l=1,d=x.Vp.Auto;const h=this.player_characters.get(t);h&&(n=h.position.x,I=h.position.y,C=h.position.z,a=h.velocity_0.x,o=h.velocity_0.y,r=h.velocity_0.z,l=h.facing,d=h.frame.id,this.world.del_entity(h));const c=new R.wC(this.world,s);return c.id=null!==(i=null===h||void 0===h?void 0:h.id)&&void 0!==i?i:(0,ft.$W)(),c.position.x=n,c.position.y=I,c.position.z=C,c.velocity_0.x=a,c.velocity_0.y=o,c.velocity_0.z=r,c.facing=l,c.name=A.name,c.team=null!==(g=A.team)&&void 0!==g?g:(0,ft.fA)(),c.enter_frame({id:d}),h||this.random_entity_info(c),c.ctrl=new Et(t,c,null===A||void 0===A?void 0:A.keys),c.attach(),c}del_player_character(t){const e=this.player_characters.get(t);e&&this.world.del_entity(e)}change_bg(t){t&&(t!==x.Tc.RANDOM_BG&&t!==x.Tc.RANDOM_BG.id&&"?"!==t||(t=this.random_get(this.datas.backgrounds.filter(t=>t.base.group.some(t=>t===x.yM.Regular)))),(0,M.Hl)(t)&&(t=this.datas.find_background(t)),t&&this.world.stage.change_bg(t))}change_stage(t){var e;t!==this.world.stage.data&&((0,M.Hl)(t)&&(t=null===(e=this.stages)||void 0===e?void 0:e.find(e=>e.id===t)),t&&(this.world.stage=new ei(this.world,t)))}remove_stage(){this.world.stage=new ei(this.world,x.Tc.VOID_STAGE)}goto_next_stage(){var t;const e=this.world.stage.data.next,i=null===(t=this.stages)||void 0===t?void 0:t.find(t=>t.id===e);i||(this.world.stage.stop_bgm(),this.sounds.play_with_load(x.Tc.Sounds.StagePass),this.callbacks.emit("on_stage_pass")()),this.change_stage(i||x.Tc.VOID_STAGE),this.callbacks.emit("on_enter_next_stage")()}get uiinfos(){return this._uiinfos}get uiinfos_loaded(){return this._uiinfos_loaded}string(t){var e,i,g,A;return null!==(e=null!==(i=null===(g=this._strings.get(this.lang))||void 0===g?void 0:g[t])&&void 0!==i?i:null===(A=this._strings.get(""))||void 0===A?void 0:A[t])&&void 0!==e?e:t}load_strings(t){const e=[];for(const i in t){const g=t[i];if("string"===typeof g&&g!==i)e.push([i,g]);else if("object"===typeof g){for(const e in g){const t=g[e];Array.isArray(t)&&(g[e]=t.join("\n"))}const t=this._strings.get(i);t?this._strings.set(i,{...g,...t}):this._strings.set(i,g)}}for(let i=0;i<e.length;i++){const[t,g]=e[i],A=this._strings.get(g);A&&(this._strings.set(t,{...A}),e.splice(i,1),--i)}}async load_builtin_ui(){this._dispose_check("load_builtin_ui");const t=[],e=["builtin_data/launch/bg.json5","builtin_data/launch/loading_anim.json","builtin_data/launch/main_text_button.json","builtin_data/launch/menu_text_button.json","builtin_data/launch/init.json5"];for(const i of e){const e=await Lg(this,i);this._dispose_check("load_builtin_ui"),t.unshift(e)}return t}async load_ui(t){if(this._dispose_check("load_ui"),this._uiinfos.length)return this._uiinfos;this._uiinfos_loaded=!1;const e=t.file(/^layouts\/.*?\.json5?$/),i=[];this._uiinfos.length||(i.unshift(...await this.load_builtin_ui()),this._dispose_check("load_ui"));for(const g of e){const t=await g.json().catch(()=>null);if(this._dispose_check("load_ui"),!t||Array.isArray(t))continue;const e=await Lg(this,t);i.push(e)}return this._disposed?(this._uiinfos.length=0,this._uiinfos=[]):(this._uiinfos_loaded=!0,this._uiinfos.push(...i),this.callbacks.emit("on_ui_loaded")(i),i)}set_ui(t){var e,i,g;if((0,M.Hl)(t)&&(null===(e=this.ui)||void 0===e?void 0:e.id)===t)return;if(!(0,M.Hl)(t)&&(null===(i=this.ui)||void 0===i?void 0:i.id)===(null===t||void 0===t?void 0:t.id))return;const A=this._ui_stacks.pop();null===A||void 0===A||A.on_pause(),null===A||void 0===A||A.on_stop();const s=(0,M.Hl)(t)?null===(g=this._uiinfos)||void 0===g?void 0:g.find(e=>e.id===t):t,n=s&&Rg.create(this,s);n&&this._ui_stacks.push(n),null===n||void 0===n||n.on_start(),null===n||void 0===n||n.on_resume(),this.callbacks.emit("on_layout_changed")(n,A)}pop_ui(t,e){var i;const g=[],A=this._ui_stacks.length;for(let s=A-1;s>=0;--s){const i=this._ui_stacks[s];if(!e){g.unshift(i);break}if(e(i,s,this._ui_stacks)){t&&g.unshift(i);break}g.unshift(i)}for(let s=0;s<g.length;s++){const t=g[s];0===s&&(null===t||void 0===t||t.on_pause()),null===t||void 0===t||t.on_stop()}this._ui_stacks.splice(A-g.length,g.length),null===(i=this.ui)||void 0===i||i.on_resume(),this.callbacks.emit("on_layout_changed")(this.ui,g[0])}push_ui(t){var e;const i=this.ui;null===i||void 0===i||i.on_pause();const g=(0,M.Hl)(t)?null===(e=this._uiinfos)||void 0===e?void 0:e.find(e=>e.id===t):t,A=g&&Rg.create(this,g);A&&this._ui_stacks.push(A),null===A||void 0===A||A.on_start(),null===A||void 0===A||A.on_resume(),this.callbacks.emit("on_layout_changed")(A,i)}on_loading_content(t,e){this.callbacks.emit("on_loading_content")(t,e)}broadcast(t){this.callbacks.emit("on_broadcast")(t)}on_component_broadcast(t,e){this.callbacks.emit("on_component_broadcast")(t,e)}switch_difficulty(){const{difficulty:t}=this,e=t%(this.is_cheat_enabled(x.U1.LF2_NET)?4:3)+1;this.difficulty=e}random_get(t){return t&&Array.isArray(t)?t[this.random_in(0,t.length)]:t}random_take(t){return t&&Array.isArray(t)?t.splice(this.random_in(0,t.length),1)[0]:t}random_in(t,e){return this._mt.in_range(t,e)}random_int(){return this._mt.int()}},qg.TAG="LF2",qg.instances=[],qg.DATA_VERSION=x.Tc.DATA_VERSION,qg.DATA_TYPE="DataZip",qg.IgnoreDisposed=t=>{if(console.warn(t),!0!==t.is_disposed_error)throw t},Jg=qg,(0,mt.A)(Jg.prototype,"import_json",[ft.N1],Object.getOwnPropertyDescriptor(Jg.prototype,"import_json"),Jg.prototype),(0,mt.A)(Jg.prototype,"import_resource",[ft.N1],Object.getOwnPropertyDescriptor(Jg.prototype,"import_resource"),Jg.prototype),(0,mt.A)(Jg.prototype,"import_array_buffer",[ft.N1],Object.getOwnPropertyDescriptor(Jg.prototype,"import_array_buffer"),Jg.prototype),Jg);window.LF2=tA;var eA=i(9251),iA=i(6744);class gA{set visible(t){this._visible=t,this.img&&(this.img.style.opacity=t?"1":"0")}get visible(){return this._visible}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:132,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:84;this.tid=0,this.img=null,this._visible=!0,this._idx=0,this.w=void 0,this.h=void 0,this.w=t,this.h=e}set_element(t){this.img!==t&&(this.img=t,t&&(t.style.objectPosition="0px 0px",t.draggable=!1,t.style.left=t.style.right=t.style.top=t.style.bottom="0",t.style.opacity=this._visible?"1":"0",this.update_img()))}update_img(){const{img:t}=this;if(!t)return;const e=-this.w*(this._idx%15),i=-this.h*Math.floor(this._idx/15);t.style.objectPosition=`${e}px ${i}px`}start(){const t=()=>{window.clearTimeout(this.tid),this._idx=(this._idx+1)%44,this.update_img();const e=21===this._idx?1e3:30;(this.visible||43!==this._idx)&&(this.tid=window.setTimeout(t,e))};t()}hide(){this.visible=!1}show(){this.visible=!0,this.start()}}function AA(t){const{loading:e,big:i=!1,className:g,...n}=t,I=(0,s.useMemo)(()=>new gA(33*(i?4:1),21*(i?4:1)),[i]);(0,s.useEffect)(()=>{e?I.show():I.hide()},[e]);const C=A()(g,i?a.loading_img_l:a.loading_img_s);return(0,u.jsx)("img",{src:i?"builtin_data/launch/SMALL_LOADING@4x.png":"builtin_data/launch/SMALL_LOADING.png",alt:"loading...",className:C,ref:t=>I.set_element(t),...n})}var sA=i(6536);function nA(t){const{lf2:e,disabled:i,show_all:g=!1,placeholder:A,...n}=t,[I,C]=(0,s.useState)(e.datas.characters);(0,s.useEffect)(()=>(C(e.datas.characters),e.callbacks.add({on_loading_end:()=>C(e.datas.characters)})),[e]);const a=(0,s.useMemo)(()=>g?I:I.filter(t=>{var e;const i=null===(e=t.base.group)||void 0===e?void 0:e.indexOf(x.hG.Hidden);return void 0===i||-1===i}),[I,g]);return(0,u.jsx)(b.A,{items:["",...a],disabled:!(null!==I&&void 0!==I&&I.length)||i,parse:t=>(0,ee.Hl)(t)?["","Random"]:[t.id,t.base.name],placeholder:a.length?A:"\u672a\u52a0\u8f7d",...n})}function IA(t){return(0,u.jsx)(b.A,{...t,items:X.T.Teams,parse:t=>[t,X.T.TeamInfoMap[t].i18n]})}var CA=i(9536);const aA={U:"\u4e0a",D:"\u4e0b",L:"\u5de6",R:"\u53f3",a:"\u653b",j:"\u8df3",d:"\u9632"},oA=Object.keys(aA);function rA(t){const{lf2:e,info:i,visible:g=!0,touch_pad_on:A,on_click_toggle_touch_pad:n}=t,[I,C]=(0,s.useState)(i.keys),[r,d]=(0,s.useState)(i.name),[h,c]=(0,s.useState)(),[_,p]=(0,s.useState)(i.team),[m,k]=(0,s.useState)(!1),[j,G]=(0,s.useState)(i.character),[T,D]=(0,s.useState)(!!e.get_player_character(i.id)),[E,R]=(0,s.useState)(!1),[M,N]=(0,s.useState)("");if((0,s.useEffect)(()=>{var t;const g=null===(t=e.player_characters.get(i.id))||void 0===t?void 0:t.ctrl;(0,Bt.nn)(g)&&(g.dummy=M||void 0)},[M,i.id,e.player_characters]),(0,s.useEffect)(()=>(k(e.is_cheat_enabled(""+x.U1.LF2_NET)),e.callbacks.add({on_cheat_changed:(t,e)=>{t===""+x.U1.LF2_NET&&k(e)}})),[e]),(0,s.useEffect)(()=>(C(i.keys),d(i.name),i.callbacks.add({on_key_changed:(t,g)=>{C(A=>{const s={...A,[t]:g},n=e.get_player_character(i.id);return n&&(0,Bt.vW)(n.ctrl)&&n.ctrl.set_key_code_map(s),s})},on_name_changed:t=>{d(t);const g=e.get_player_character(i.id);g&&(g.name=t)},on_team_changed:t=>{p(t);const g=e.get_player_character(i.id);g&&(g.team=t)},on_character_changed:G})),[i,e]),(0,s.useEffect)(()=>{if(!h)return;const t=t=>{var e;t.stopImmediatePropagation(),t.preventDefault(),t.stopPropagation();const g=null===(e=t.key)||void 0===e?void 0:e.toLocaleLowerCase();g&&"escape"!==g&&i.set_key(h,t.key.toLowerCase(),!0).save(),c(void 0)};return window.addEventListener("keydown",t,!0),()=>window.removeEventListener("keydown",t,!0)},[h,i]),!e||!1===g)return null;const B=T?()=>{e.del_player_character(i.id)}:()=>{var t;const g=j||(null===(t=(0,CA.P)(e.datas.characters))||void 0===t?void 0:t.id);if(!g)return;const A=e.add_player_character(i.id,g);A&&(D(!0),A.callbacks.add({on_disposed:()=>D(!1),on_team_changed:(t,e)=>p(""+e)}))};return(0,u.jsxs)("div",{className:a.settings_row,children:[(0,u.jsx)(w.A,{float_label:"\u73a9\u5bb6"+i.id,children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(v.p,{prefix:"\u540d\u79f0",clearable:!0,maxLength:50,title:"enter player name",value:r,onChange:t=>i.set_name(t,!0),onBlur:t=>i.set_name(t.target.value.trim()||i.id,!0).save()}),(0,u.jsx)(nA,{lf2:e,value:j,placeholder:"\u89d2\u8272",onChange:t=>i.set_character(t,!0).save(),show_all:m}),(0,u.jsx)(IA,{placeholder:"\u961f\u4f0d",value:_,onChange:t=>i.set_team(t,!0).save()}),(0,u.jsx)(o.$,{onClick:B,children:T?"\u79fb\u9664":"\u52a0\u5165"}),(0,u.jsxs)(l.f,{value:A,onClick:n,children:[(0,u.jsx)(u.Fragment,{children:"\u89e6\u6478\u677f"}),(0,u.jsx)(u.Fragment,{children:"\u89e6\u6478\u677f\u2713"})]})]})}),(0,u.jsxs)(f.A,{children:[(0,u.jsx)(o.$,{onClick:()=>R(t=>!t),children:"\u952e\u4f4d"}),E?oA.map(t=>{const e=aA[t],i=h===t?"\u7f16\u8f91\u4e2d...":I[t];return(0,u.jsxs)(o.$,{onClick:()=>c(e=>e===t?void 0:t),children:[e,":"," ",{ARROWUP:"\u2191",ARROWDOWN:"\u2193",ARROWLEFT:"\u2190",ARROWRIGHT:"\u2192",DELETE:"DEL",PAGEDOWN:"P\u2193",PAGEUP:"P\u2191"}[i.toUpperCase()]||i.toUpperCase()]},t)}):null]}),(0,u.jsx)(y.A,{show:T,children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(o.$,{onClick:()=>{const t=e.player_characters.get(i.id);if(!t)return;const g=t.ctrl;(0,Bt.nn)(g)?t.ctrl=new Rt(i.id,t,i.keys):t.ctrl=qe.$.inst.get_ctrl(t.data.id,i.id,t),null===g||void 0===g||g.dispose()},children:(0,u.jsx)(u.Fragment,{children:"Bot"})}),(0,u.jsx)(b.A,{items:["",...Object.keys(Ut)],parse:t=>t?[Ut[t],t]:["","not dummy"],value:M,onChange:N})]})})]})}var lA=i(9137);function dA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=Object.getOwnPropertyDescriptors(t);for(const g in i){if(g.startsWith("_"))continue;const A=i[g],{value:s,writable:n,enumerable:I,set:C,get:a}=A;let o;C&&a?o=a.call(t):n&&I&&(o=s),"number"===typeof o&&e.push({name:g,type:"number",default_value:o,...A}),"string"===typeof o&&e.push({name:g,type:"string",default_value:o,...A}),"boolean"===typeof o&&e.push({name:g,type:"boolean",default_value:o,...A})}return"Object"!==(t=Object.getPrototypeOf(t)).constructor.name&&dA(t,e),e}var hA=i(5821);const cA="1001";function _A(t,e){const[i,g]=(0,s.useState)(()=>{let i=localStorage.getItem(t);if((0,ee.Hl)(i))return i;const g=(0,ee.Hl)(e)?e:(0,hA.B)(e)?e():void 0;return(0,ee.Hl)(g)&&localStorage.setItem(t,g),g});return(0,s.useEffect)(()=>{(0,ee.Hl)(i)?localStorage.setItem(t,i):localStorage.removeItem(t)},[t,i]),[i,g]}function uA(t,e){const[i,g]=(0,s.useState)(()=>{let i=localStorage.getItem(t);if((0,ee.rE)(i)){const t=Number(i);if((0,Q.AK)(t))return t}const g=(0,Q.AK)(e)?e:(0,hA.B)(e)?e():void 0;return(0,Q.AK)(g)&&localStorage.setItem(t,""+g),g});return(0,s.useEffect)(()=>{(0,Q.AK)(i)?localStorage.setItem(t,""+i):localStorage.removeItem(t)},[t,i]),[i,g]}function pA(t,e){const[i,g]=(0,s.useState)(()=>{let i=localStorage.getItem(t);if((0,ee.Hl)(i))return"true"===i;const g=(0,ai.qb)(e)?e:(0,hA.B)(e)?e():void 0;return(0,ai.qb)(g)&&localStorage.setItem(t,""+g),g});return(0,s.useEffect)(()=>{(0,ai.qb)(i)?localStorage.setItem(t,""+i):localStorage.removeItem(t)},[t,i]),[i,g]}localStorage.getItem("__clear_flag")!==cA&&(localStorage.clear(),localStorage.setItem("__clear_flag",cA));const mA={OFF:t=>new Dt.K("",t),"enemy chaser":t=>new $t("",t)};function fA(t){var e,i,g,A,n;const{lf2:I,visible:C=!0}=t,r=null===I||void 0===I?void 0:I.world.stage,l=null===r||void 0===r?void 0:r.data,[d,h]=(0,s.useState)(),[c,_]=(0,s.useState)(x.Tc.VOID_BG.id),[p,m]=(0,s.useState)(x.Tc.VOID_STAGE.id),[k,j]=(0,s.useState)(null!==(e=null===I||void 0===I?void 0:I.sounds.bgm())&&void 0!==e?e:""),[G,T]=(0,s.useState)(null!==(i=null===l||void 0===l?void 0:l.phases)&&void 0!==i?i:[]),[D,E]=(0,s.useState)(null!==(g=null===r||void 0===r?void 0:r.phase_idx)&&void 0!==g?g:-1),[R,M]=(0,s.useState)(null!==(A=null===I||void 0===I?void 0:I.difficulty)&&void 0!==A?A:x.sL.Difficult),[N,B]=(0,s.useState)();(0,s.useEffect)(()=>{var t,e;j(null!==(t=null===I||void 0===I?void 0:I.sounds.bgm())&&void 0!==t?t:""),M(null!==(e=null===I||void 0===I?void 0:I.difficulty)&&void 0!==e?e:x.sL.Difficult),h(null===I||void 0===I?void 0:I.stages);const i=t=>{var e,i,g,A;m(null!==(e=null===t||void 0===t?void 0:t.data.id)&&void 0!==e?e:x.Tc.VOID_STAGE.id),_(null!==(i=null===t||void 0===t?void 0:t.bg.data.id)&&void 0!==i?i:x.Tc.VOID_BG.id),T(null!==(g=null===t||void 0===t?void 0:t.data.phases)&&void 0!==g?g:[]),E(null!==(A=null===t||void 0===t?void 0:t.phase_idx)&&void 0!==A?A:-1),null===t||void 0===t||t.callbacks.add({on_phase_changed(t,e){E(e?t.data.phases.indexOf(e):-1)}})};if(i(null===I||void 0===I?void 0:I.world.stage),!I)return;const g=[I.callbacks.add({on_difficulty_changed:M,on_loading_end:()=>h(I.stages)}),I.world.callbacks.add({on_stage_change:i})],A=dA(I.world);return B(A),()=>g.forEach(t=>t())},[I]),(0,s.useEffect)(()=>{I&&(k?I.sounds.play_bgm(k):I.sounds.stop_bgm())},[k,I]);const[L,S]=uA("debug_rwn",10),[Z,Y]=uA("debug_rcn",10),[F,W]=(0,s.useState)(""),[O,U]=(0,s.useState)(""),[z,V]=_A("debug_bot_team",""),[H,K]=_A("debug_bot_ctrl","");if(!I||!1===C)return(0,u.jsx)(u.Fragment,{});const X=null===(n=G[D])||void 0===n?void 0:n.desc;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(y.A.Div,{className:a.settings_row,show:!1!==t.show_stage_settings,children:[(0,u.jsx)(w.A,{float_label:"\u5173\u5361",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(b.A,{value:p,onChange:t=>I.change_stage(t),items:d,parse:t=>[t.id,t.name]}),G.length?(0,u.jsx)(b.A,{title:X,onChange:t=>E(t),value:D,items:G,parse:(t,e)=>[e,[`No.${1+e}, bound: ${t.bound}`].filter(Boolean).join(" ")]}):null]})}),(0,u.jsxs)(f.A,{children:[(0,u.jsx)(o.$,{onClick:()=>I.world.stage.kill_all_enemies(),children:"\u6740\u6b7b\u5168\u90e8\u654c\u4eba"}),(0,u.jsx)(o.$,{onClick:()=>I.world.stage.kill_boss(),children:"\u6740\u6b7bBoss"}),(0,u.jsx)(o.$,{onClick:()=>I.world.stage.kill_soliders(),children:"\u6740\u6b7b\u58eb\u5175"}),(0,u.jsx)(o.$,{onClick:()=>I.world.stage.kill_others(),children:"\u6740\u6b7b\u5176\u4ed6"})]})]}),(0,u.jsxs)(y.A.Div,{className:a.settings_row,show:!1!==t.show_bg_settings,children:[(0,u.jsx)(w.A,{float_label:"\u80cc\u666f",children:(0,u.jsx)(b.A,{value:c,onChange:t=>I.change_bg(t),items:I.datas.backgrounds,parse:t=>[t.id,t.base.name]})}),(0,u.jsx)(w.A,{float_label:"\u96be\u5ea6",children:(0,u.jsx)(b.A,{value:R,onChange:t=>M(t),items:[x.sL.Easy,x.sL.Normal,x.sL.Difficult,x.sL.Crazy],parse:t=>[t,x.Tc.DifficultyLabels[t]]})}),(0,u.jsx)(o.$,{onClick:t=>I.entities.del_all(),children:"\u6e05\u573a"})]}),(0,u.jsx)(y.A.Div,{className:a.settings_row,show:!1!==t.show_weapon_settings,children:(0,u.jsx)(w.A,{float_label:"\u6dfb\u52a0\u6b66\u5668",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(v.Y,{placeholder:"\u6570\u91cf",prefix:"\u6570\u91cf",min:1,max:100,step:1,value:L,onChange:t=>S(e=>null!==t&&void 0!==t?t:e),onBlur:()=>S(t=>Math.min(Math.max(Math.floor(t),1),100))}),(0,u.jsx)(b.A,{value:F,onChange:t=>W(t),items:[0,...I.datas.weapons],parse:t=>(0,Q.AK)(t)?["","Random"]:[t.id,t.base.name]}),(0,u.jsx)(o.$,{onClick:()=>{F?I.weapons.add(F,L):I.weapons.add_random(L)},children:"\u6dfb\u52a0"}),(0,u.jsx)(o.$,{onClick:()=>{I.weapons.list().forEach(t=>t.hp=t.hp_r=0)},children:"\u79fb\u9664"})]})})}),(0,u.jsx)(y.A.Div,{className:a.settings_row,show:!1!==t.show_bot_settings,children:(0,u.jsx)(w.A,{float_label:"\u6dfb\u52a0BOT",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(v.Y,{prefix:"\u6570\u91cf",min:1,max:100,step:1,value:Z,onChange:t=>Y(e=>null!==t&&void 0!==t?t:e),onBlur:()=>Y(t=>Math.min(Math.max(Math.floor(t),1),100))}),(0,u.jsx)(nA,{lf2:I,value:O,onChange:t=>U(t)}),(0,u.jsx)(IA,{value:z,onChange:t=>V(t)}),(0,u.jsx)(b.A,{value:H,onChange:t=>K(t),items:Object.keys(mA),parse:t=>[t,t]}),(0,u.jsx)(o.$,{onClick:()=>{(O?I.characters.add(O,Z,z):I.characters.add_random(Z,z)).forEach(t=>{t.name="bot";const e=mA[H];e&&(t.ctrl=e(t))})},children:"\u6dfb\u52a0"})]})})}),(0,u.jsx)(y.A.Div,{className:a.settings_row,show:!1!==t.show_world_tuning,children:null===N||void 0===N?void 0:N.map((t,e)=>{const i=vA[t.name];if(!i)return null;const{title:g,desc:A=g,type:s}=i;if(!s)return null;let n=null;return(0,u.jsx)(w.A,{float_label:g,title:A,children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(v.Y,{precision:"float"===s?2:0,ref:t=>{n=t},placeholder:t.name,step:"float"===s?.01:"int"===s?1:.01,defaultValue:I.world[t.name],onChange:e=>I.world[t.name]=e}),(0,u.jsx)(o.$,{title:"\u91cd\u7f6e",onClick:e=>{I.world[t.name]=Number(t.default_value),n.value=""+t.default_value},children:(0,u.jsx)(lA.F,{})})]})},t.name+"_"+e)})})]})}const vA={gravity:{title:"\u91cd\u529b",desc:"\u91cd\u529b",type:"float"},begin_blink_time:{title:"\u5165\u573a\u95ea\u70c1\u65f6\u957f",desc:"\u5165\u573a\u95ea\u70c1\u65f6\u957f",type:"int"},gone_blink_time:{title:"\u6d88\u5931\u95ea\u70c1\u65f6\u957f",desc:"\u6d88\u5931\u95ea\u70c1\u65f6\u957f",type:"int"},lying_blink_time:{title:"\u8d77\u8eab\u95ea\u70c1\u65f6\u957f",desc:"\u8d77\u8eab\u95ea\u70c1\u65f6\u957f",type:"int"},double_click_interval:{title:"\u53cc\u51fb\u5224\u5b9a\u65f6\u957f",desc:"\u53cc\u51fb\u5224\u5b9a\u65f6\u957f",type:"int"},key_hit_duration:{title:"\u6309\u952e\u5224\u5b9a\u65f6\u957f",desc:"\u6309\u952e\u5224\u5b9a\u65f6\u957f",type:"int"},itr_shaking:{title:"\u53d7\u4f24\u6447\u6643\u65f6\u957f",desc:"\u53d7\u4f24\u6447\u6643\u65f6\u957f",type:"int"},itr_motionless:{title:"\u547d\u4e2d\u505c\u987f\u65f6\u957f",desc:"\u547d\u4e2d\u505c\u987f\u65f6\u957f",type:"int"},hp_healing_ticks:{title:"\u6cbb\u7597\u56de\u8840\u5468\u671f",desc:"\u6cbb\u7597\u6548\u679c\u4e0b\uff0c\u6bcf\u51e0\u5e27\u56de\u8840\u4e00\u6b21",type:"int"},hp_healing_value:{title:"\u6cbb\u7597\u56de\u8840\u91cf",desc:"\u6cbb\u7597\u6548\u679c\u4e0b\uff0c\u6bcf\u6b21\u56de\u8840\u591a\u5c11",type:"int"},fvx_f:{title:"dvx\u7f29\u653e\u7cfb\u6570",desc:"fvx_f",type:"float"},fvy_f:{title:"dvy\u7f29\u653e\u7cfb\u6570",desc:"fvy_f",type:"float"},fvz_f:{title:"dvz\u7f29\u653e\u7cfb\u6570",desc:"fvz_f",type:"float"},ivy_f:{title:"ivy_f",desc:"ivy_f",type:"float"},ivz_f:{title:"ivz_f",desc:"ivz_f",type:"float"},ivx_f:{title:"ivx_f",desc:"ivx_f",type:"float"},ivy_d:{title:"ivy_d",desc:"\u9ed8\u8ba4\u7684\u653b\u51fbY\u8f74\u901f\u5ea6",type:"float"},ivx_d:{title:"ivx_d",desc:"\u9ed8\u8ba4\u7684\u653b\u51fbX\u8f74\u901f\u5ea6",type:"float"},cvy_d:{title:"cvy_d",desc:"cvy_d",type:"float"},cvx_d:{title:"cvx_d",desc:"cvx_d",type:"float"},tvx_f:{title:"X\u8f74\u4e22\u4eba\u521d\u901f\u5ea6\u7cfb\u6570",desc:"tvx_f",type:"float"},tvy_f:{title:"Y\u8f74\u4e22\u4eba\u521d\u901f\u5ea6\u7cfb\u6570",desc:"tvy_f",type:"float"},tvz_f:{title:"Z\u8f74\u4e22\u4eba\u521d\u901f\u5ea6\u7cfb\u6570",desc:"tvz_f",type:"float"},vrest_offset:{title:"vrest_offset",desc:"vrest_offset",type:"int"},arest_offset:{title:"arest_offset",desc:"arest_offset",type:"int"},arest_offset_2:{title:"arest_offset_2",desc:"arest_offset_2",type:"int"},frame_wait_offset:{title:"frame_wait_offset",desc:"frame_wait_offset",type:"int"},cha_bc_spd:{title:"cha_bc_spd",desc:"cha_bc_spd",type:"float"},cha_bc_tst_spd_x:{title:"cha_bc_tst_spd_x",desc:"cha_bc_tst_spd_x",type:"float"},cha_bc_tst_spd_y:{title:"cha_bc_tst_spd_y",desc:"cha_bc_tst_spd_y",type:"float"},hp_recoverability:{title:"\u53ef\u56de\u8840\u6bd4\u4f8b",desc:"\u53ef\u56de\u8840\u6bd4\u4f8b",type:"float"},hp_r_ticks:{title:"\u81ea\u52a8\u56de\u8840\u5468\u671f",desc:"\u6bcf\u51e0\u5e27\u56de\u8840\u4e00\u6b21",type:"int"},hp_r_value:{title:"\u81ea\u52a8\u56de\u8840\u91cf",desc:"\u6bcf\u6b21\u56de\u8840\u591a\u5c11",type:"int"},mp_r_ticks:{title:"\u81ea\u52a8\u56de\u84dd\u5468\u671f",desc:"\u6bcf\u51e0\u5e27\u56de\u84dd\u4e00\u6b21",type:"int"},mp_r_ratio:{title:"mp_r_ratio",desc:"mp_r_ratio",type:"int"},friction_factor:{title:"\u5730\u901f\u8870\u51cf\u7cfb\u6570",desc:"\u5728\u5730\u9762\u7684\u7269\u4f53\uff0c\u901f\u5ea6\u5c06\u6bcf\u5e27\u4e58\u4ee5\u6b64\u503c",type:"float"},friction_x:{title:"\u5730\u9762\u6469\u64e6X",desc:"\u5728\u5730\u9762\u7684\u7269\u4f53\uff0c\u6bcf\u5e27X\u901f\u5ea6\u5c06\xb1=\u6b64\u503c,\u54110\u9760\u8fd1",type:"float"},friction_z:{title:"\u5730\u9762\u6469\u64e6Z",desc:"\u5728\u5730\u9762\u7684\u7269\u4f53\uff0c\u6bcf\u5e27Z\u901f\u5ea6\u5c06\xb1=\u6b64\u503c,\u54110\u9760\u8fd1",type:"float"},screen_w:{title:"screen_w",desc:"screen_w",type:""},screen_h:{title:"screen_h",desc:"screen_h",type:""},sync_render:{title:"sync_render",desc:"sync_render",type:""}};var bA=i(8255);const yA="data:image/png;base64,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dXJjZUV2ZW50IyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6NTE4NWE2OTUtNjg5Zi00NDZmLWI1ODktZTI0Nzk1MTc1OWJlIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBkMTc2ZmJlLWJhZDgtNDcwYi05ZTRkLTZlNzNlOWIxMDU2YiIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjc1ODJlODM2LTMxNjItNDRiMS1iM2U1LWUzOTc2MWJmNzA3MSIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTU1NTMwMTc1IgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI1OjU1KzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNTo1NSswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0OTBkMGU3LTBhZDUtNDZlZC05ODc5LTk0NzFhYjkxZWE0NiIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNTo1NSIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4OJ7SYAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhk3E9QLYAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAADISURBVFjD7VdJEoAwCDOd/v/L8aKOC12AqnXx6FhIEwg4DF9/4DjLFrGsAEhu8wMwxQt3SxAqqaZRInolWKieKJ5fysGEb0rSQKOzudIzIHB28hKI6AgmoW7ahqlWyzInAclJEAwUonAhpBjq0geQstc1jUaXoxDjkDeeWfmpAgXAGcQjrPjdAOK200CPqSjMC2ojUnZC9dnn1MB0o9KMp7adTdPQMoyaTsOWBdrtQtLFSrYfUFCu5azJEZ0yuc91tw9c/mv2PyN8AGsxZBaoQAAAAABJRU5ErkJggg==";i(8763);var wA=i(8405);const kA=function(){const[t]=(0,s.useState)(()=>new Mt.X.FullScreen),e=(0,s.useRef)(void 0),[i,g]=(0,s.useState)(),[d,h]=(0,s.useState)(null),[_,p]=(0,s.useState)(null),[k,j]=(0,s.useState)(null),[[G,,T,D],E]=(0,s.useState)([null,null,null,null]),[R,M]=(0,s.useState)(!1),[N,B]=(0,s.useState)(!1),[L,S]=pA("game_overlay",!1),[Z,Y]=_A("showing_panel",""),[F,W]=pA("control_panel",!1),[O,U]=pA("cheat_1",!1),[Q,P]=pA("cheat_2",!1),[J,q]=pA("cheat_3",!1),[$,et]=(0,s.useState)(!1),[it,gt]=(0,s.useState)(!1),[At,st]=(0,s.useState)(!1),[nt,It]=(0,s.useState)(X.T.VOID_BG.id),[Ct,at]=pA("total_muted",!1),[ot,rt]=pA("bgm_muted",!1),[lt,dt]=pA("sound_muted",!1),[ht,ct]=uA("total_volume",.3),[_t,ut]=uA("bgm_volume",.5),[mt,ft]=uA("sound_volume",1),[vt,bt]=_A("render_size_mode","contain"),[yt,wt]=uA("render_fixed_scale",1),[kt,xt]=uA("custom_render_fixed_scale",1),[jt,Gt]=uA("v_align",document.body.parentElement.className.indexOf("portrait")>=0?.3:.5),[Tt,Dt]=uA("h_align",.5),[Et,Rt]=uA("custom_h_align",.5),[Nt,Lt]=uA("custom_v_align",.5),[St,Zt]=_A("debug_ui_pos","bottom"),[Yt,Ft]=_A("touch_pad_on",""),[Wt,Ot]=(0,s.useState)(!1),[Ut,zt]=uA("sync_render",0),[Vt,Ht]=(0,s.useState)(0);(0,s.useEffect)(()=>{i&&(i.world.indicator_flags=Vt)},[Vt]);const[Kt,Xt]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i&&(i.world.playrate=Kt?100:1)},[Kt]);const Qt=(0,s.useCallback)(()=>{t.is_fullscreen?t.exit():t.enter(document.body.parentElement)},[t]),[Pt,Jt]=(0,s.useState)(void 0),[qt,$t]=(0,s.useState)([{id:"",name:"\u65e0\u9875\u9762"}]);(0,s.useEffect)(()=>{if(!i||!_)return;const t=new tt(i.world,_);return()=>t.release()},[i,_]),(0,s.useEffect)(()=>{const i=e.current=new tA;i.load("prel.zip.json").catch(tA.IgnoreDisposed),i.lang=navigator.language.toLowerCase(),g(i),i.sounds.set_muted(Ct),i.sounds.set_volume(ht),i.sounds.set_bgm_muted(ot),i.sounds.set_bgm_volume(_t),i.sounds.set_sound_muted(lt),i.sounds.set_sound_volume(mt),i.world.sync_render=Ut,U(i.is_cheat_enabled(x.U1.LF2_NET)),P(i.is_cheat_enabled(x.U1.HERO_FT)),q(i.is_cheat_enabled(x.U1.GIM_INK)),It(i.world.stage.bg.id);const A=()=>{Ft((0,eA.r)(i.players.keys()))},s=()=>{Ft("")};window.addEventListener("touchstart",A,{once:!0}),window.addEventListener("keydown",s),Ot(!!t.target),st(i.world.paused);const n=(new _i).add(()=>window.removeEventListener("keydown",s),()=>window.removeEventListener("touchstart",A),t.callbacks.add({onChange:t=>Ot(!!t)}),i.world.callbacks.add({on_stage_change:t=>It(t.bg.id),on_pause_change:t=>st(t),on_sync_render_changed:t=>zt(t)}),i.callbacks.add({on_ui_loaded:t=>{const e=t.map(t=>({id:t.id,name:t.name}));e.unshift({id:"",name:"\u65e0\u9875\u9762"}),$t(e),e.length>1&&Jt(t=>t||e[1].id)},on_layout_changed:t=>{var e;return Jt(null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:"")},on_loading_start:()=>et(!0),on_loading_end:()=>{gt(!0),et(!1)},on_cheat_changed:(t,e)=>{switch(t){case x.U1.LF2_NET:U(e);break;case x.U1.HERO_FT:P(e);break;case x.U1.GIM_INK:q(e),W(e),S(e)}}}),i.sounds.callbacks.add({on_muted_changed:at,on_bgm_muted_changed:rt,on_sound_muted_changed:dt,on_volume_changed:ct,on_bgm_volume_changed:ut,on_sound_volume_changed:ft}),()=>i.dispose());return()=>{n.invoke()}},[tA]),(0,s.useEffect)(()=>{const t=d,e=null===t||void 0===t?void 0:t.parentElement;if(!t||!e)return;const i=yt||kt,g=()=>{const{width:g,height:A}=e.getBoundingClientRect(),s=Math.floor(g),n=Math.floor(A);let I=s,C=n;const a=794/450,o=s/n;switch(vt){case"fill":t.style.width=s+"px",t.style.height=n+"px";break;case"cover":a>o?(t.style.height=n+"px",t.style.width=(I=n*a)+"px"):(t.style.width=s+"px",t.style.height=(C=s/a)+"px");break;case"contain":a>o?(t.style.width=s+"px",t.style.height=(C=s/a)+"px"):(t.style.height=n+"px",t.style.width=(I=n*a)+"px");break;default:t.style.width=(I=794*i)+"px",t.style.height=(C=450*i)+"px"}const r=Tt<-1?Et:Tt,l=jt<-1?Nt:jt;t.style.left=Math.floor((s-I)*r)+"px",t.style.top=Math.floor((n-C)*l)+"px"};window.addEventListener("resize",g),g();const A=new ResizeObserver(g);return T&&A.observe(T),()=>{window.removeEventListener("resize",g),A.disconnect()}},[T,vt,yt,kt,jt,Tt,Et,Nt,d]);const te=null===i||void 0===i?void 0:i.players,ee=(0,s.useMemo)(()=>te?Array.from(te.values()):[],[te]),ie=(0,s.useMemo)(()=>[{value:"",label:"\u89e6\u63a7\u677f: \u5173\u95ed"},...ee.map(t=>({value:t.id,label:"\u89e6\u63a7\u677f: \u73a9\u5bb6"+t.id}))],[ee]);(0,c.w)("F8",0,()=>null===i||void 0===i?void 0:i.weapons.add_random(9)),(0,c.w)("F9",0,()=>null===i||void 0===i?void 0:i.world.stage.kill_all_enemies()),(0,c.w)("F10",0,()=>{if(i)for(const t of i.world.entities)(0,Bt.EQ)(t)&&(t.hp=0)}),(0,c.w)("F11",0,()=>Qt()),(0,c.w)("ctrl+F1",0,()=>(null===i||void 0===i?void 0:i.is_cheat_enabled(x.U1.GIM_INK))&&W(t=>!t)),(0,c.w)("ctrl+F3",0,()=>(null===i||void 0===i?void 0:i.is_cheat_enabled(x.U1.GIM_INK))&&S(t=>!t)),(0,s.useEffect)(()=>{const t=d;t&&(Pt?(t.style.transition="opacity 1000ms",t.style.opacity="1"):t.style.opacity="0")},[Pt,d]),(0,s.useEffect)(()=>{i&&(i.pointings.set_element(d),i.world.renderer.scene.set_canvas(d))},[i,d]),(0,wA.C)({container:k}),(0,s.useEffect)(()=>{if(!k)return;const t=new I.qj(k),e=new C.vm(t),i=e.root;return e.on_leaves_changed=()=>{var g;for(const t of e.leaves){const i=e.adapter.get_cell(t);i&&!i.children.length&&(i.parentElement||e.adapter.container.appendChild(i))}const A=e.find("panel");E([e,t,null!==(g=t.get_cell(i))&&void 0!==g?g:null,A&&t.get_cell(A)||null])},e.confirm(),()=>{e.on_leaves_changed=void 0,e.root.release(),e.release()}},[k]),(0,s.useEffect)(()=>{if(G){if(G.del("panel"),F){switch(St){case"left":case"right":G.add("slot_1",St,{id:"panel"});break;case"top":G.add("slot_1","up",{id:"panel"});break;case"bottom":G.add("slot_1","down",{id:"panel"})}G.root.keep=!0}G.confirm()}},[G,St,F]);const ge=T?(0,n.createPortal)((0,u.jsxs)("div",{className:a.game_contiainer,children:[(0,u.jsx)("canvas",{ref:h,tabIndex:-1,className:a.game_canvas,width:794,height:450,draggable:!1,onContextMenu:t=>{t.preventDefault(),t.stopPropagation()},onContextMenuCapture:t=>{t.preventDefault(),t.stopPropagation()}}),(0,u.jsx)("div",{ref:p,className:A()(a.game_overlay,{[a.gone]:!L})}),(0,u.jsx)(z,{lf2:i}),(0,u.jsx)(pt,{player_id:Yt,lf2:i}),(0,u.jsx)(AA,{loading:!Pt,big:!0,className:a.loading_img}),(0,u.jsxs)("div",{className:a.debug_pannel,children:[(0,u.jsx)(y.A,{show:null===i||void 0===i?void 0:i.is_cheat_enabled(x.U1.GIM_INK),children:(0,u.jsx)(m,{checked:F,onClick:()=>W(t=>!t),src:["data:image/png;base64,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ZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6YWU2ZmVkYjYtOTJmMS00MWYzLThlY2UtZmM5NDkxYjliYWFkIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkxOWVhYzc5LTZmMDktNGYwYi04YzI2LWFkNDFiNzAwZWVlMiIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjc5MjViZDc1LTIxMTAtNGZiNS05MmY4LTFmMmY1NDBjYmFkOCIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTU2ODc4ODY5IgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI1OjU2KzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNTo1NiswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYzMzViZWQ2LTJhNTEtNDBiOC04NzY2LWE1ZDkzOGY2ZmI4MyIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNTo1NiIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz79/1vpAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhk4g2sW8QAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAADmSURBVFjD7VZRCsUwCGuk97+y+9lgDK3G+ngM5t9g1Zgm1jG++HOgcEY7c7IAVHVdHwCVF53FKyBQKX4WsH6iQczgnsF0B8Bjyc+36vbq9PGNLFuZ8xJk2rZZlENsJtECIqOJ6Qs5vM+811e66bJe1ZJgLOjZz6M+I9pZoDdkLZETFgCT7mzXjAsA6AVCdm20e3Y+ld89CxwG4WkAxHhteZSEFFTpJiqPUcsMuNlRPSbkV8UNIJoF0Fo8AiGRiIyHSZnFJZojSC4kmnjZVv9QC0lpLausY6/bikMQbPEqgJUQMb54Wxy51JUnVYx0SwAAAABJRU5ErkJggg==","data:image/png;base64,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L25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmMzMmFhMzAwLTRkYzEtNDdmNC04ZWQ1LTNjZDQzNTFhODQ2ZiIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozZGMxOTVkNy1jNWVlLTQ1YzYtOTMzYi0xODBkOGY5NjE2Y2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplZjVlMTMxOS1iYWQ4LTQ0NTUtYjYyNy02NzcxYmVhN2U0ODMiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTcxNjQzMTE1ODIyNDA1NyIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjMyIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowNToyM1QxMDoyNTo1OCswODowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDU6MjNUMTA6MjU6NTgrMDg6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MGQ4NDNiZS1lODU4LTQwNmUtYjlmOC1jOTJkZjFjMDczNDEiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDUtMjNUMTA6MjU6NTgiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+B3gchAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+gFFwIZOm1ld90AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABE0lEQVRYw+1Xyw7DMAiro/7/L7NLq0YZBpNE6qU5bSsxxjzKjuM7Lx9M3LGdmFUCZhb7B1DCxU7nMyQw4/xy4BmVSZxJnlGJDgBTieNF0d6RDt+hqqXcbwnScptlGM1XEltIKDVx8kJO86n3elQ3u1pvtiWxs/9n5kG5olltsOdVBUwEMUIACvnero0X7ktKBADoVOy7qce8PhttQwCZc7cmRmCPhEe2jcZy7p7nCFRgJHgKEudhRxAVvHTEKUhb598mU4HatN37QKCC/C6YHS6KCjkBEkFpGlYwoEy+/jevkvu7TieFc0Wu9B44G82jbZQ+RCuZw7qyFXtqSiuZ914AI+coAgFj6Y8JW0xWsL7z3vkBIHbXMZwbOPMAAAAASUVORK5CYII="]})}),(0,u.jsx)(m,{checked:Wt,onClick:()=>Qt(),src:["data:image/png;base64,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Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDpiMjNjMGU0Zi0yZWYwLTRhMzItOTI2OS1iZWQ5YWZjYjgzNGEiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MmYxMDljNjYtNDZmZC00M2UzLThlOGEtNjFmNmQxMWE2NWJlIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjdkNmE2ZDUtNzQwYS00YmVjLWEzOGYtNWIzZTFkNTI3NzFhIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MTY0MzExNjYyNjcxMzMiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQ6MDU6MjNUMTA6MjY6MDYrMDg6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDI0OjA1OjIzVDEwOjI2OjA2KzA4OjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NDZjOWMyZWItZTU3Ni00NDhiLWEyMzEtMTQwOWY0ZTU3ZDMyIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTA1LTIzVDEwOjI2OjA2Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PlpZofEAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfoBRcCGgZpJ1iZAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAANlJREFUWMPtV0EOwzAIi9H+/2V2aaUtg8S4kSJN4dgKcG3qkNZObA4Ez1zMlfJ+irhzdQB85qt5zXZL8KK1AkZUAoB3VK4D0NNGaQtQslASXIW8wCw9E8bSXgDx1TyQjgNw014EETXHCIRxI0CBCJsvmQEChNS86gOY6Vltnuo40zmTQMw7sVeC9DRMhil7r+aV/gLKXqu2bUrz4Csh2jYFgDUZCYTNqCw6XAhiJJ0RelYdLgLxbAYEe6Vsm96I3L31K9dsK166kkUFL0DlrfjJafifF5MT2+MNNvKYIe8m5MQAAAAASUVORK5CYII=","data:image/png;base64,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YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjFiNTc2MzQ4LWE5MzgtNGVjNS04ZWExLTBlZTM5MzJhNTIwMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkYzY2Yjg2YS01NTgzLTQxM2ItODM3Zi03ZjYxNTM2M2ZlNDMiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozMzM4NjZjMy1mZDg1LTQ1NGUtYjRiNy03MDk3NzFmZWFiYzkiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTcxNjQzMTE2NzYwODM5MSIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjMyIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowNToyM1QxMDoyNjowNyswODowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDU6MjNUMTA6MjY6MDcrMDg6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYWE4MWM4Yi1iMjk5LTQ2ODEtYTQ3ZC1lNzhhZmEzZWU2YmUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDUtMjNUMTA6MjY6MDciLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+jkmz/gAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+gFFwIaBx4gaA8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA0UlEQVRYw+2XwQ6EMAhEgfj/v8wedJOV0HagaE3WSTxZOk8QqkSvHig9ruj9VBzbRar7GmaO3M/GkTRx9wCtyOjX3JMF4IOwCuJk7mXHy0AVxNC8V4JZCMi8+w40IFB3yHwEkIKImBMRbY1+tRShDPyYe/txD0CjRkgmDJhCc+AuMVICMFYnPP9Yy0vA2S5onYbBuPVdsDmTTyN9DQwiigyiqbJYYGQUy3gfRZ7KXYOcolJpnoGQ2fN89ntCLjAPQchF5jCEoAOjCuJxPyavlusDXb2YIWqjpW4AAAAASUVORK5CYII="]}),(0,u.jsx)(m,{checked:ot,onClick:()=>{var t;return null===i||void 0===i||null===(t=i.sounds)||void 0===t?void 0:t.set_bgm_muted(!ot)},src:["data:image/png;base64,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Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDozOWE3NGZiNi1kZDE4LTQ0MzYtOWQxMS1kZmIxZWUwNzllNzciCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZGJmOThmYzAtYzE3YS00OTkxLWFiMDUtNzRmMzM4ZGEyNDRhIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZGMxZDZlNDUtZWI2Yi00N2M2LThmMzMtYjA2ODc3MDFhZWFmIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MTY0MzExNTk1NTkxNzIiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQ6MDU6MjNUMTA6MjU6NTkrMDg6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDI0OjA1OjIzVDEwOjI1OjU5KzA4OjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWMxYzJjMjYtZmM2Ni00YjUzLWJiZTEtZDA3ZDBkMWZmNzA0IgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTA1LTIzVDEwOjI1OjU5Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkOomqEAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfoBRcCGTsaYkdLAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAALFJREFUWMPtls0KgDAMg43s/V85HrbDmO4/pYgWhB2KX2xTu+P4SDA9t4AxNB4YjwBuzGAN7UXwgCoEDEFTyZs5wQqaeYy7FeACtOn8GQGsgXtQExPOQPNciQeKGe5Ci1zZFIxC9WOohO60QP4Ln22BfHec3mvyF/ALcBcQjN5LTwGcuRmdnvBaBejpAa5cLFVToICjWFq1+4SpCQGAo4vMagyxmvjYhlr5rJRy54teFxfKIFZIqA+NWQAAAABJRU5ErkJggg==","data:image/png;base64,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Y29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6ZWUyMzEyNDEtZmE2MC00ZDQxLTkyYTEtZjdiNWM2MzVlNWFiIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmZlNjc0NGFkLWM1OTAtNGM5Yy05NjM5LWNiZWYzODU4NzI1YiIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmUxNTA0ZDE0LTU3OWQtNDhiNC04Zjk4LWMzZmJkZDlmNWNkZSIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTY0OTI3NzQ5IgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI2OjA0KzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNjowNCswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyMjQ3MjA1LTY4NTctNGQ1Yi1iZjhjLTJhMGIwNmNiMzZlYSIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNjowNCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz7r8/VWAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhoEhyk5tQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAERSURBVFjD3ZfdDsMgCIU9xvd/5bOLtptTUBTaLCPxoqlyPsEfTOnHjGd7zC/qTuTRB0D7b1f0cqz6LeJIMgHgBkQnOjP02p+BxkiYRSV/kAMwhTCJnmOHKdBmJ0GkFdHKP3cARAhNWBA1L8JpfjUIq+jOGuhyraRjKFoDLm9DYUu+nVzfEzgRULJi2twKRAVjjWhn2XzCNGLVN6qWbgO4xIXcuu6OvNgfB0McRN4cFwaRHdELgfAAhEB4AdwQEQAuiCiAbYhIAA3iUQDxsGrriTsBSHJ0bJsAGFGeSxCW25DWatZxi35V2zlYHFL9ONodsAIsPlaoRaT1V9I9BmUS3SRhWQNBT7U2OqpTWmf0F/YCsR7XIj89ZasAAAAASUVORK5CYII="]}),(0,u.jsx)(m,{checked:lt,onClick:()=>{var t;return null===i||void 0===i||null===(t=i.sounds)||void 0===t?void 0:t.set_sound_muted(!lt)},src:["data:image/png;base64,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IiIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6YjkzYjBkYzEtNjZjNS00Mzg1LThiZDgtNGE3YzVjNWQwMWE1IgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmUzZDc5NWE3LTdjYmMtNGMwNS05OTUyLTc2MWRjYzAyYzJjYSIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhjYzNhNDc1LTI4YWEtNGU1NS1iMTBhLTI1NDkwNmVkNDUzOSIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTUyODQ3MjY3IgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI1OjUyKzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNTo1MiswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc0NWQ5Y2ExLTQ0NDQtNGY1Mi1iNDBmLWU5Y2UwZGRiZTBjZiIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNTo1MiIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4VJaQeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhk0it1a2gAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAEBSURBVFjD7VdBDsQgCCykz+7fZy9blzQDgtr0sDXppRFmBgFx2/59yYANJu2nCAD44YtIxgciLB0Fr9h87TBDoAIOBuaR0MGwZxWL3c9I6EJwT7FEdroo4dBR3P5fo6DECarg1bCzCDQnxlml1Epht6TCHEiCSzI36D5loOdXaFTsjN1zt2tf2KKHli70lVJ8J4HHI/ASWEoA2SRirbtSwrvTpU5HmChJRqh2HRfKKaMex3GEDQdBJOzeKxjbG/6z/vRCpn2VGy0DztSnBsqkEnQi5x6R9kUJPRYiRJybNJwnpZrRievajuHdwSbbiKQwDwoT5lXH3Q+T7ivq8afZuz4zuc4GDCAcFgAAAABJRU5ErkJggg==","data:image/png;base64,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eXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDplODQ2YzJkYS02MWUxLTQ1YjItYWMzOS1mNDViMGMyNDAxYWYiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjdjNjg2M2YtNDgxMS00Mzg3LTlmNTctMjRjOWYyNjQ4NWQ3IgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZTVkN2JlZjktNWYxNS00MmFmLWIzNzItMTQxZjExOGY2MmMwIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MTY0MzExNTQxODYxNjIiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQ6MDU6MjNUMTA6MjU6NTQrMDg6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDI0OjA1OjIzVDEwOjI1OjU0KzA4OjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NzY2ODMxZDYtOGNhMS00ZGE1LWE2MTctNjVhZGNmYTQyOTlmIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTA1LTIzVDEwOjI1OjU0Ii8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PhqqrsoAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfoBRcCGTZk0zv2AAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAPVJREFUWMPtl0sOwyAMRBkr97+yuylpmvgLOFm0SGwio3mC8UBa+/WBgTU8uX4KgJk/+gCmIWhUfNWgJ8WjANK23wZQKu4BZAzHp+7wumiv3ZT2ahnxXguAna641G6eyTKtxswWhKhheiAojqM33iIcPU6SRPtMhIwFYXqJjITMWl6E8LxEi7tKgjCPkwrCDee8sI6zAuDidsWYJQBqcmoQVCzutigtiFbP7SYESWnWZxAicmeoEORFa2YnnPCCdJti4DI6Xij9OyeeeF+1JKQfgvk+mpyIRHEbgCh5EanReuebsBSC4gZf/x7MJmEJxOO/Zv/xAndqoj6ANkAXAAAAAElFTkSuQmCC"]}),(0,u.jsx)(y.A,{show:nt!==X.T.VOID_BG.id&&"ctrl_settings"!==Pt,children:(0,u.jsx)(m,{checked:At,onClick:()=>null===i||void 0===i?void 0:i.world.set_paused(!At),src:["data:image/png;base64,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ICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6ZGJmZDNkMzItMDExZi00ZGNhLTg0YzgtZGJjOGZmYjVmN2JjIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmI0OThmODcxLWIzZjctNGM4My1hMWVlLWEwMWMzYmY1ZTQyMiIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjc0YzNmNWQxLWE3MzctNGViNi1iODE3LWZlNWY4ZGNmNjBlOSIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTYwODk4MDQyIgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI2OjAwKzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNjowMCswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdkOWQ2YzJmLTM1ZjgtNGMxNi05MmJkLWYxN2UxODRhMjE2ZSIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz5eEQ6GAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhoAgET9rAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABESURBVFjD7dYhEgAgDAPBhv//OWjABBVzp1vYGQwzROUUzjnc9e8dCcD2e66kez+dO1rtJwAAAAAAAAAAAKgD6n9CItq4tQwoeD6rVAAAAABJRU5ErkJggg==","data:image/png;base64,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Yz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjJmY2VhZjA1LWFmMWQtNDc3Zi04ZGY2LWViMDllYmUxZWUyZiIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpjYzFmZmQyZS04ZmRiLTQzMWYtOWIzNy01NDQyMTZkMTgyNDYiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjNDE1NzBhMi02NjQxLTQwNDktODEzYy0wNTk4YTE4MmMzNTMiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTcxNjQzMTE2MjI0ODI0NCIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjMyIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowNToyM1QxMDoyNjowMiswODowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDU6MjNUMTA6MjY6MDIrMDg6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NjE0MjJhOC05NTYwLTRkYjYtYjM3Yi01NGIyZjlhZTYyZDYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDUtMjNUMTA6MjY6MDIiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+a42kPwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+gFFwIaAm5KnIAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAe0lEQVRYw+3WOw7AIAwDUFLl/ldOh6KOKCEOYbAlRuSHEJ8xGIbxxeaARzzlZl+3iETm4QH/JCBkC4CEpAAICASQgUABO5ASQARSCvBAniO3mNmYi7AWwCp6omS1BdpVXAqIHEPtKoYCMlexdhWnAMjnWLuKr/mSMQzzAl0sK0KiyuhZAAAAAElFTkSuQmCC"]})}),(0,u.jsx)(y.A,{show:qt.length>1&&!$&&"launch"!==Pt&&"ctrl_settings"!==Pt,children:(0,u.jsx)(m,{onClick:()=>{null===i||void 0===i||i.world.set_paused(!0),null===i||void 0===i||i.push_ui("ctrl_settings")},src:[yA,yA]})}),(0,u.jsx)(y.A,{show:Pt&&Number(null===i||void 0===i?void 0:i.ui_stacks.length)>1,children:(0,u.jsx)(m,{onClick:()=>i&&i.ui_stacks.length>=2&&i.pop_ui(),src:["data:image/png;base64,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bG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6YWY5NDdjODYtZmUwMy00NTczLThmMzktMWJlNmI1MWNlNTQzIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMwNGQzMTVkLTdmZWEtNDBhNC05YmMyLWEwODczMTUwZWU3ZSIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjY0MTE2NDhlLWEzNDItNGY3Ni05ZjM5LTM2NTA4OGExMzQwYyIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNzE2NDMxMTYzNTg3MTYwIgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjIzVDEwOjI2OjAzKzA4OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToyM1QxMDoyNjowMyswODowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmNkZTYwMGQwLWE1YjEtNDI1YS05N2MxLTE0NTg3OTdhYWE3OSIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNC0wNS0yM1QxMDoyNjowMyIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6gB7T7AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AUXAhoDGU2sFgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAACPSURBVFjD7ZTBDsAgCEMt2f//MjtoPE2BCBoXXuJNbcFiKUlyEdyWK9CKM1dtAJZzImQRj4BOikutHIq3Z/B42uHGpcotOUFU27UmKGxmaxF8zIDWBH13D2UXLlMwy4yUBZrnCLML+1rpGMlhhjL0CDEQnolHP9Zg6y/nacBdeMs/kAauMOAdLN4V3iT5Dy+i4ys4klwBnQAAAABJRU5ErkJggg=="]})})]})]}),T,null):null,Ae=D?(0,n.createPortal)((0,u.jsxs)("div",{className:A()(a.debug_ui,a["debug_ui_"+St]),children:[(0,u.jsxs)("div",{className:a.settings_row,children:[(0,u.jsx)(o.$,{onClick:()=>{const t=t=>{const e=document.createElement("a");e.href=t,e.download=t,e.click()};t("data.zip.json"),t("data.zip"),t("prel.zip.json"),t("prel.zip")},children:"\u4e0b\u8f7d\u6570\u636e\u5305"}),(0,u.jsx)(o.$,{onClick:()=>{i&&(0,bA.iU)({accept:".zip"}).then(t=>Mt.X.Zip.read_file(t[0])).then(t=>i.load(t)).catch(t=>sA.tG.print("App -> on_click_load_local_zip",t))},disabled:$,children:"\u52a0\u8f7d\u6570\u636e\u5305"}),(0,u.jsx)(o.$,{onClick:async()=>{i&&i.load("prel.zip.json").then(()=>i.load("data.zip.json")).catch(t=>sA.tG.print("App -> on_click_load_builtin",t))},disabled:$,children:"\u52a0\u8f7d\u5185\u7f6e\u6570\u636e"}),(0,u.jsx)(o.$,{onClick:()=>M(!0),children:"\u67e5\u770bdat\u6587\u4ef6"}),(0,u.jsx)(o.$,{onClick:()=>B(!0),children:"\u67e5\u770b\u6570\u636e\u5305"}),(0,u.jsx)(b.A,{items:["top","bottom","left","right"],parse:t=>[t,"\u4f4d\u7f6e\uff1a"+t],value:St,onChange:t=>Zt(t)}),(0,u.jsx)(o.$,{style:{marginLeft:"auto"},onClick:()=>W(!1),children:"\u2715"})]}),(0,u.jsx)("div",{className:a.settings_row,children:(0,u.jsxs)(f.A,{children:[(0,u.jsxs)(l.f,{onChange:t=>null===i||void 0===i?void 0:i.sounds.set_muted(t),value:Ct,children:[(0,u.jsx)(u.Fragment,{children:"\u97f3\u91cf"}),(0,u.jsx)(u.Fragment,{children:"\u9759\u97f3"})]}),(0,u.jsx)(y.A,{show:!Ct,children:(0,u.jsx)(v.Y,{precision:0,min:0,max:100,step:1,value:Math.ceil(100*ht),onChange:t=>null===i||void 0===i?void 0:i.sounds.set_volume(t/100)})}),(0,u.jsxs)(l.f,{onChange:t=>null===i||void 0===i?void 0:i.sounds.set_bgm_muted(t),value:ot,children:[(0,u.jsx)(u.Fragment,{children:"\u97f3\u4e50"}),(0,u.jsx)(u.Fragment,{children:"\u97f3\u4e50(\u5df2\u7981\u7528)"})]}),(0,u.jsx)(y.A,{show:!ot,children:(0,u.jsx)(v.Y,{precision:0,min:0,max:100,step:1,value:Math.ceil(100*_t),onChange:t=>null===i||void 0===i?void 0:i.sounds.set_bgm_volume(t/100)})}),(0,u.jsxs)(l.f,{onChange:t=>null===i||void 0===i?void 0:i.sounds.set_sound_muted(t),value:lt,children:[(0,u.jsx)(u.Fragment,{children:"\u97f3\u6548"}),(0,u.jsx)(u.Fragment,{children:"\u97f3\u6548(\u5df2\u7981\u7528)"})]}),(0,u.jsx)(y.A,{show:!lt,children:(0,u.jsx)(v.Y,{precision:0,min:0,max:100,step:1,value:Math.ceil(100*mt),onChange:t=>null===i||void 0===i?void 0:i.sounds.set_sound_volume(t/100)})})]})}),(0,u.jsxs)("div",{className:a.settings_row,children:[(0,u.jsx)(b.A,{placeholder:"\u9875\u9762",value:Pt,onChange:t=>null===i||void 0===i?void 0:i.set_ui(t),items:qt,parse:t=>[t.id,t.name]}),(0,u.jsx)(w.A,{float_label:"\u663e\u793a\u6a21\u5f0f",children:(0,u.jsx)(b.A,{value:vt,onChange:t=>bt(t),placeholder:"\u663e\u793a\u6a21\u5f0f",parse:t=>[t,t],items:["fixed","fill","cover","contain"]})}),(0,u.jsx)(y.A,{show:"fixed"===vt,children:(0,u.jsx)(w.A,{float_label:"\u7f29\u653e",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(b.A,{value:yt,onChange:t=>wt(t),items:(0,iA.B)(0,4,.5),parse:t=>[t,"\u2715"+(t||"?")]}),(0,u.jsx)(y.A,{show:!yt,children:(0,u.jsx)(v.Y,{precision:2,min:0,step:kt<=.5?.1:.5,value:kt,onChange:t=>xt(t)})})]})})}),(0,u.jsx)(y.A,{show:"fill"!==vt,children:(0,u.jsx)(w.A,{float_label:"\u5bf9\u9f50",children:(0,u.jsxs)(f.A,{children:[(0,u.jsx)(b.A,{value:jt,onChange:t=>Gt(t),items:[-2,0,.5,1],parse:(t,e)=>[t,t<=-1?"?":["\u4e0a","\u4e2d","\u4e0b"][e-1]]}),(0,u.jsx)(y.A,{show:jt<0,children:(0,u.jsx)(v.Y,{precision:2,min:-1,max:2,step:.1,value:Nt,onChange:t=>Lt(t)})}),(0,u.jsx)(b.A,{value:Tt,onChange:t=>Dt(t),items:[-2,0,.5,1],parse:(t,e)=>[t,t<=-1?"?":["\u5de6","\u4e2d","\u53f3"][e-1]]}),(0,u.jsx)(y.A,{show:Tt<0,children:(0,u.jsx)(v.Y,{precision:2,min:-1,max:2,step:.1,value:Et,onChange:t=>Rt(t)})})]})})})]}),(0,u.jsxs)("div",{className:a.settings_row,children:[(0,u.jsxs)(f.A,{children:[(0,u.jsxs)(l.f,{value:At,onClick:()=>null===i||void 0===i?void 0:i.world.set_paused(!At),children:[(0,u.jsx)(u.Fragment,{children:"\u6e38\u620f\u6682\u505c"}),(0,u.jsx)(u.Fragment,{children:"\u6e38\u620f\u6682\u505c\u2713"})]}),(0,u.jsx)(o.$,{onClick:()=>{null===i||void 0===i||i.world.set_paused(!0),null===i||void 0===i||i.world.update_once()},children:"\u66f4\u65b0\u4e00\u5e27"}),(0,u.jsxs)(l.f,{value:Kt,onClick:()=>Xt(!Kt),children:[(0,u.jsx)(u.Fragment,{children:"\u4e0d\u9650\u901f\u5ea6"}),(0,u.jsx)(u.Fragment,{children:"\u4e0d\u9650\u901f\u5ea6\u2713"})]})]}),(0,u.jsx)(f.A,{children:Object.keys(H.uL).map(t=>{const e=t,i=H.uL[e];return(0,u.jsxs)(l.f,{value:!!(Vt&i),onClick:()=>Ht(t=>function(t,e){return t&e?t^e:t|e}(t,i)),children:[(0,u.jsx)(u.Fragment,{children:t}),(0,u.jsxs)(u.Fragment,{children:[t,"\u2713"]})]},e)})}),(0,u.jsxs)(f.A,{children:[(0,u.jsxs)(l.f,{title:"ctrl+F3",value:L,onChange:S,children:[(0,u.jsx)(u.Fragment,{children:"\u6e38\u620f\u8986\u76d6"}),(0,u.jsx)(u.Fragment,{children:"\u6e38\u620f\u8986\u76d6\u2713"})]}),(0,u.jsxs)(l.f,{onClick:Qt,value:t.is_fullscreen,children:[(0,u.jsx)(u.Fragment,{children:"\u5168\u5c4f"}),(0,u.jsx)(u.Fragment,{children:"\u5168\u5c4f\u2713"})]}),(0,u.jsx)(r.p,{items:[{value:0,label:"\u975e\u540c\u6b65\u6e32\u67d3\u2713"},{value:1,label:"\u540c\u6b65\u6e32\u67d3\u2713"},{value:2,label:"\u540c\u6b65\u6e32\u67d3(x0.5)\u2713"}],parse:t=>[t.value,t.label],value:Ut,onClick:()=>{i&&(i.world.sync_render=(i.world.sync_render+1)%3)}})]})]}),(0,u.jsxs)("div",{className:a.settings_row,children:[(0,u.jsxs)(f.A,{children:[(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"stage"===t?"":"stage"),value:"stage"===Z,children:[(0,u.jsx)(u.Fragment,{children:"\u5173\u5361\u9762\u677f"}),(0,u.jsx)(u.Fragment,{children:"\u5173\u5361\u9762\u677f\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"bg"===t?"":"bg"),value:"bg"===Z,children:[(0,u.jsx)(u.Fragment,{children:"\u80cc\u666f\u9762\u677f"}),(0,u.jsx)(u.Fragment,{children:"\u80cc\u666f\u9762\u677f\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"weapon"===t?"":"weapon"),value:"weapon"===Z,children:[(0,u.jsx)(u.Fragment,{children:"\u6b66\u5668\u9762\u677f"}),(0,u.jsx)(u.Fragment,{children:"\u6b66\u5668\u9762\u677f\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"bot"===t?"":"bot"),value:"bot"===Z,children:[(0,u.jsx)(u.Fragment,{children:"Bot\u9762\u677f"}),(0,u.jsx)(u.Fragment,{children:"Bot\u9762\u677f\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"player"===t?"":"player"),value:"player"===Z,children:[(0,u.jsx)(u.Fragment,{children:"\u73a9\u5bb6\u9762\u677f"}),(0,u.jsx)(u.Fragment,{children:"\u73a9\u5bb6\u9762\u677f\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>Y(t=>"world_tuning"===t?"":"world_tuning"),value:"world_tuning"===Z,children:[(0,u.jsx)(u.Fragment,{children:"\u4e16\u754c\u5fae\u8c03"}),(0,u.jsx)(u.Fragment,{children:"\u4e16\u754c\u5fae\u8c03\u2713"})]})]}),(0,u.jsxs)(f.A,{children:[(0,u.jsx)(r.p,{value:Yt,items:ie,parse:t=>[t.value,t.label],onChange:t=>Ft(t)}),(0,u.jsxs)(l.f,{onChange:()=>null===i||void 0===i?void 0:i.toggle_cheat_enabled(x.U1.LF2_NET),value:O,children:[(0,u.jsx)(u.Fragment,{children:"LF2_NET"}),(0,u.jsx)(u.Fragment,{children:"LF2_NET\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>null===i||void 0===i?void 0:i.toggle_cheat_enabled(x.U1.HERO_FT),value:Q,children:[(0,u.jsx)(u.Fragment,{children:"HERO_FT"}),(0,u.jsx)(u.Fragment,{children:"HERO_FT\u2713"})]}),(0,u.jsxs)(l.f,{onChange:()=>null===i||void 0===i?void 0:i.toggle_cheat_enabled(x.U1.GIM_INK),value:J,children:[(0,u.jsx)(u.Fragment,{children:"GIM_INK"}),(0,u.jsx)(u.Fragment,{children:"GIM_INK\u2713"})]})]})]}),(0,u.jsx)(y.A,{show:"player"===Z,children:ee.map((t,e)=>(0,u.jsx)(rA,{lf2:i,info:t,touch_pad_on:Yt===t.id,on_click_toggle_touch_pad:()=>Ft(Yt===t.id?"":t.id)},e))}),(0,u.jsx)(fA,{lf2:i,show_stage_settings:"stage"===Z,show_bg_settings:"bg"===Z,show_weapon_settings:"weapon"===Z,show_bot_settings:"bot"===Z,show_world_tuning:"world_tuning"===Z})]}),D,null):null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:a.app,ref:j}),ge,Ae,R?(0,u.jsx)(V.k,{open:R,onClose:()=>M(!1)}):void 0,(0,u.jsx)(K.A,{open:N,onClose:()=>B(!1),style:{background:"black",position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:1},lf2:i})]})}},2544:(t,e,i)=>{"use strict";i.d(e,{p:()=>I});var g=i(5043),A=i(1231),s=i(579);function n(t){return[t,""+t]}function I(t){const{value:e,onClick:i,onChange:I,parse:C=n,defaultValue:a,items:o,...r}=t,l=(0,g.useRef)(e),d=(0,g.useRef)(I),[h,c]=(0,g.useState)(a);l.current=null!==e&&void 0!==e?e:h,d.current=null!==I&&void 0!==I?I:c;const _=null!==e&&void 0!==e?e:h,u=(0,g.useCallback)(t=>{null===i||void 0===i||i(t);const e=l.current,g=d.current;if(!o)return void(null===g||void 0===g||g(e));const A=(o.findIndex(t=>C(t)[0]===e)+1)%o.length,s=o[A],[n]=C(s);null===g||void 0===g||g(n)},[i,o,C]),p=(0,g.useMemo)(()=>{if(!o)return""+_;for(const t of o){const[e,i]=C(t);if(e===_)return i}return""+_},[o,_,C]);return(0,s.jsx)(A.$,{...r,onClick:u,children:p})}}}]);
//# sourceMappingURL=829.578aa8ac.chunk.js.map